<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html class="client-nojs" dir="ltr" lang="en">
<head>
<meta charset="UTF-8" />
<title>Модули/Динамический конфигуратор на Web - OpenSCADAWiki</title>
<meta content="MediaWiki 1.26.4" name="generator" />
<link href="https://www.gnu.org/copyleft/fdl.html" rel="copyright" />
<link href="../../en/files/doc.css" rel="stylesheet" /></head>
<body><div class="floatright"><a href="http://oscada.org"><img alt="OpenSCADA" src="../../en/files/Logo-big.png" /></a></div><div id="mw_header">
			<div class="mw-indicators">
</div>
			<h1 id="firstHeading" lang="ru">Модули/Динамический конфигуратор на Web</h1>
		</div><div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="ru"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a class="external text" href="http://oscada.org/wiki/index.php?title=Special:Translate&amp;group=page-Modules%2FWebCfgD&amp;action=page&amp;filter=&amp;language=ru" rel="nofollow noreferrer noopener" target="_blank">translated version</a></span> of the page <a class="external" href="http://oscada.org/wiki/Modules/WebCfgD" title="Modules/WebCfgD">Modules/WebCfgD</a> and the translation is 100% complete.</div><hr /><div class="mw-pt-languages" dir="ltr" lang="en"><div class="mw-pt-languages-list autonym"><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" href="../../en/Modules/WebCfgD.html" title="Modules/WebCfgD (100% translated)">English</a>&nbsp;• ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">российский</span>&nbsp;• ‎<a class="mw-pt-progress mw-pt-progress--complete" href="../../uk/Modules/WebCfgD.html" title="Модулі/Динамічний конфігуратор на Web (100% translated)">українська</a></div></div>
<table class="wikitable">

<tr>
<th> Модуль </th>
<th> Имя </th>
<th> Версия </th>
<th> Лицензия </th>
<th> Источник </th>
<th> Языки </th>
<th> Платформы </th>
<th> Тип </th>
<th> Автор </th>
<th> Описание
</th></tr>

<tr>
<td> <a href="../Modules/WebCfgD.html" title="Special:MyLanguage/Modules/WebCfgD">WebCfgD</a> </td>
<td> Конфигуратор программы (Динамический WEB)
</td>
<td> 1.3 </td>
<td> GPL2 </td>
<td> ui_WebCfgD.so </td>
<td> en,uk,ru,de </td>
<td> x86,x86_64,ARM
</td>
<td> Пользовательские интерфейсы </td>
<td> Роман Савоченко </td>
<td> Предоставляет основанный на WEB динамический конфигуратор OpenSCADA. Использованы технологии: XHTML, CSS и JavaScript.
</td></tr></table>
<div class="toc" id="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.9A.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D1.8F"><span class="tocnumber">1</span> <span class="toctext">Конфигурация</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.D0.91.D0.B0.D0.B7.D0.BE.D0.B2.D1.8B.D0.B5_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D1.8B"><span class="tocnumber">2</span> <span class="toctext">Базовые элементы</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.D0.9A.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D1.8B"><span class="tocnumber">3</span> <span class="toctext">Команды</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#.D0.A1.D0.BF.D0.B8.D1.81.D0.BA.D0.B8"><span class="tocnumber">4</span> <span class="toctext">Списки</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#.D0.A2.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D1.8B"><span class="tocnumber">5</span> <span class="toctext">Таблицы</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#.D0.98.D0.B7.D0.BE.D0.B1.D1.80.D0.B0.D0.B6.D0.B5.D0.BD.D0.B8.D1.8F"><span class="tocnumber">6</span> <span class="toctext">Изображения</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#.D0.94.D0.B8.D0.B7.D0.B0.D0.B9.D0.BD"><span class="tocnumber">7</span> <span class="toctext">Дизайн</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#.D0.9E.D1.88.D0.B8.D0.B1.D0.BA.D0.B8"><span class="tocnumber">8</span> <span class="toctext">Ошибки</span></a></li>
</ul>
</div>

<p>Этот модуль предоставляет конфигуратор OpenSCADA. Конфигуратор реализован на основе таких Web-технологий:
</p>
<ul><li> <i>HTTP</i> — протокол передачи гипертекста;</li>
<li> <i>XHTML</i> — расширенный язык разметки гипертекстовых документов;</li>
<li> <i>CSS</i> — каскадные таблицы стилей гипертекстовых документов;</li>
<li> <i>JavaScript</i> — язык программирования браузера, встроенный в гипертекстовый документ;</li>
<li> <i>DOM</i> — объектная модель документа внутренней структуры браузера;</li>
<li> <i>AJAX</i> — механизм асинхронных и синхронных запросов из JavaScript к серверу;</li>
<li> <i>XML</i> — расширяемый язык разметки.</li></ul>
<p>Интерфейс конфигуратора формируется в WEB-браузере путём обращения к WEB-серверу и получения от него XHTML-документа по протоколу HTTP. В данном случае, в роли WEB-сервера выступает OpenSCADA, которая поддерживает стандартные коммуникационные механизмы TCP-сетей (модуль <a href="../Modules/Sockets.html" title="Special:MyLanguage/Modules/Sockets">Transport.Sockets</a>), протокол передачи гипертекста (модуль <a href="../Modules/HTTP.html" title="Special:MyLanguage/Modules/HTTP">Protocol.HTTP</a>), а также шифрование трафика между браузером и сервером (<a href="../Modules/SSL.html" title="Special:MyLanguage/Modules/SSL">Transport.SSL</a>). Исходя из этого, для получения доступа к интерфейсу пользователя, предоставляемого этим модулем, необходимо в OpenSCADA настроить транспорт (Transport.Sockets или Transport.SSL) в связке с протоколом HTTP (Protocol.HTTP). Вместе с OpenSCADA идут конфигурационные файлы, содержащие настройки Transport.Sockets для портов 10002 и 10004. Следовательно, интерфейс модуля, по умолчанию, будет доступен по URL: "http://localhost:10002" и "http://localhost:10004".
</p><p>После получения XHTML-документа браузером запускается программа на языке JavaScript, для формирования динамического интерфейса конфигуратора.
</p><p>В основе модуля лежит язык интерфейса управления OpenSCADA, а значит предоставляется единый интерфейс конфигурации. Обновление модуля может потребоваться только в случае обновления спецификации языка интерфейса управления. Для запроса контекста страницы используется групповой запрос интерфейса управления, что позволяет оптимизировать время удалённого доступа по высоколатентным и медленным каналам связи.
</p><p>Модуль реализовался и тестировался на четырёх WEB-браузерах — представителях трёх типов WEB-движков, а именно:
</p>
<ul><li> Chromium 55</li>
<li> Mozilla Firefox 3.0, 45.7</li>
<li> Opera 9.6</li>
<li> Konqueror 3.5, 4</li></ul>
<p>Использование модуля начинается с открытия сеанса пользователя (аутентификации) модулем протокола HTTP (<a href="../Modules/HTTP.html" title="Special:MyLanguage/Modules/HTTP">Protocol.HTTP</a>). Для функционирования аутентификации и механизма сохранения сеанса, браузер должен разрешать Cookies.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:624px;"><a class="image" href="http://oscada.org/wiki/File:HTTP_auth_ru.png"><img class="thumbimage" height="278" src="../files/HTTP_auth_ru.png" width="622" /></a>  <div class="thumbcaption">Рис.1. Аутентификация пользователя.</div></div></div></div>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:796px;"><a class="image" href="http://oscada.org/wiki/File:WebCfgD_workplacestruct_ru.png"><img class="thumbimage" height="522" src="../files/WebCfgD_workplacestruct_ru.png" width="794" /></a>  <div class="thumbcaption">Рис.2. Рабочее окно конфигуратора.</div></div></div></div>
<p>Рассмотрим рабочее окно конфигуратора на рисунке 2.
</p><p>Рабочее окно конфигуратора состоит из следующих частей:
</p>
<dl><dd>1 <i>Панель инструментов</i> — содержит кнопки управления.</dd>
<dd>2 <i>Адрес открытого узла</i> — отображает адрес выбранного узла.</dd>
<dd>3 <i>Навигатор</i> — предназначен для прямой навигации по дереву управления.</dd>
<dd>4 <i>Рабочее поле</i> — поделено на части:
<dl><dd>4.1 <i>Имя узла</i> — содержит имя текущего узла.</dd>
<dd>4.2 <i>Табулятор рабочих областей</i> — в табулятор помещаются корневые страницы (области управления) узла. Области управления следующих уровней помещаются в основном пространстве контроля.</dd></dl></dd>
<dd>5 <i>Строка статуса</i> — отображает состояний конфигуратора.</dd></dl>
<p>Панель инструментов содержит следующие кнопки управления (слева на право):
</p>
<ul><li> <i>Загрузить из БД</i> — загрузка выбранного объекта или ветви объектов из БД.</li>
<li> <i>Сохранить в БД</i> — сохранение выбранного объекта или ветви объектов в БД.</li>
<li> <i>Вверх</i> — поднятие вверх по дереву.</li>
<li> <i>Предыдущая</i> — открытие предыдущей открываемой страницы.</li>
<li> <i>Следующая</i> — открытие следующую открываемой страницы.</li>
<li> <i>Добавить</i> — добавление нового объекта в контейнер.</li>
<li> <i>Удалить</i> — удаление выбранного объекта.</li>
<li> <i>Копировать элемент</i> — копирование выбранного объекта.</li>
<li> <i>Вырезать элемент</i> — вырезание выбранного объекта. Исходный объект удаляется после вставки.</li>
<li> <i>Вставить элемент</i> — вставка скопированного или вырезанного элемента.</li>
<li> <i>Обновить</i> — обновление содержимого текущей страницы.</li>
<li> <i>Запустить</i> — запуск периодического обновления содержимого текущей страницы с интервалом одна секунда.</li>
<li> <i>Остановить</i> — останов периодического обновления содержимого текущей страницы с интервалом одна секунда.</li>
<li> <i>Руководство этой страницы</i> — вызов руководства выбранной страницы.</li>
<li> <i>Про...</i> — информация о данном модуле.</li></ul>
<p>Элементы управления делятся на: базовые, команды, списки, таблицы и изображения. Все элементы отображаются в последовательности, строго соответствующей их расположению в описании языка интерфейса управления.
</p>
<h2><span class="mw-headline" id=".D0.9A.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D1.8F"><span class="mw-headline-number">1</span> Конфигурация</span></h2>
<p>Для настройки собственного поведения в отдельных случаях, модулем предоставляется возможность настройки отдельных параметров посредством интерфейса управления OpenSCADA (рис.3). Таковыми параметрами являются:
</p>
<ul><li> Переход на страницу конфигурации перечня внешних OpenSCADA станций, что используется для предоставления возможности удалённой конфигурации.</li></ul>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:727px;"><a class="image" href="http://oscada.org/wiki/File:WebCfgD_webdcfg_ru.png"><img class="thumbimage" height="421" src="../files/WebCfgD_webdcfg_ru.png" width="725" /></a>  <div class="thumbcaption">Рис.3. Страница конфигурации самого конфигуратора.</div></div></div></div>
<h2><span class="mw-headline" id=".D0.91.D0.B0.D0.B7.D0.BE.D0.B2.D1.8B.D0.B5_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D1.8B"><span class="mw-headline-number">2</span> Базовые элементы</span></h2>
<p>В число базовых элементов входят: информационные элементы, поля ввода значений, элементы выбора из списка, флаги, текстовые поля. В случае отсутствия имени элемента, базовый элемент присоединяется к предыдущему базовому элементу. Пример группы базовых элементов с присоединением приведён на рисунке 4.
</p><p>Для элементов ввода, которые не подразумевают мгновенного изменения и могут продолжительное время редактироваться перед окончательным завершением, предусмотрен механизм подтверждения. Этот механизм позволяет исключить задержки при редактировании, особенно в случае конфигурации удалённых станций, и вносить изменения по подтверждению. К элементам ввода с подтверждением относятся: поля ввода строк текста или числовых значений и текстовые поля. Подтверждение осуществляется нажатием кнопки, которая появляется рядом с полем ввода после начала редактирования.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:959px;"><a class="image" href="http://oscada.org/wiki/File:WebCfgD_genelem_ru.png"><img class="thumbimage" height="587" src="../files/WebCfgD_genelem_ru.png" width="957" /></a>  <div class="thumbcaption">Рис.4. Присоединение базовых элементов.</div></div></div></div>
<h2><span class="mw-headline" id=".D0.9A.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D1.8B"><span class="mw-headline-number">3</span> Команды</span></h2>
<p>Команды — это элементы передачи определённых указаний действия узлу и организации ссылок-переходов на другие страницы. Команды могут содержать параметры. Параметры формируются из базовых элементов. Пример команды с параметрами приведен на рисунке 5.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:960px;"><a class="image" href="http://oscada.org/wiki/File:WebCfgD_commandelem_ru.png"><img class="thumbimage" height="545" src="../files/WebCfgD_commandelem_ru.png" width="958" /></a>  <div class="thumbcaption">Рис.5. Команда.</div></div></div></div>
<h2><span class="mw-headline" id=".D0.A1.D0.BF.D0.B8.D1.81.D0.BA.D0.B8"><span class="mw-headline-number">4</span> Списки</span></h2>
<p>Списки содержат группу базовых элементов одного типа. Операции над элементами доступны через контекстное меню списка, по клику мышью на списке. Через элементы списка могут выполняться операции перехода на другие страницы, обычно дочерние. Списки могут быть индексированными. Пример списка приведен на рисунке 6.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:695px;"><a class="image" href="http://oscada.org/wiki/File:WebCfgD_listelem_ru.png"><img class="thumbimage" height="411" src="../files/WebCfgD_listelem_ru.png" width="693" /></a>  <div class="thumbcaption">Рис.6. Список.</div></div></div></div>
<h2><span class="mw-headline" id=".D0.A2.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D1.8B"><span class="mw-headline-number">5</span> Таблицы</span></h2>
<p>Таблицы содержат значения базовых элементов. Тип базового элемента является индивидуальным для каждой колонки. Пример таблицы приведен на рисунке 7. Операции над структурой таблицы, для редактируемых таблиц, доступны посредством контекстного меню, по клику на служебной колонке с номерами строк. Редактирование элементов таблицы производится путём двойного клика по нужной ячейке.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:830px;"><a class="image" href="http://oscada.org/wiki/File:WebCfgD_tableelem_ru.png"><img class="thumbimage" height="555" src="../files/WebCfgD_tableelem_ru.png" width="828" /></a>  <div class="thumbcaption">Рис.7. Таблица.</div></div></div></div>
<h2><span class="mw-headline" id=".D0.98.D0.B7.D0.BE.D0.B1.D1.80.D0.B0.D0.B6.D0.B5.D0.BD.D0.B8.D1.8F"><span class="mw-headline-number">6</span> Изображения</span></h2>
<p>Изображения призваны передавать графическую информацию в конфигураторы. Пример изображения приведен на рисунке 8.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:973px;"><a class="image" href="http://oscada.org/wiki/File:WebCfgD_imgelem_ru.png"><img class="thumbimage" height="532" src="../files/WebCfgD_imgelem_ru.png" width="971" /></a>  <div class="thumbcaption">Рис.8. Изображение.</div></div></div></div>
<h2><span class="mw-headline" id=".D0.94.D0.B8.D0.B7.D0.B0.D0.B9.D0.BD"><span class="mw-headline-number">7</span> Дизайн</span></h2>
<p>Модуль поддерживает смену дизайна путём размещения в рабочей/текущей папке двух файлов WebCfgDVCA.html и WebCfgDVCA.js, где первый — это XHTML-шаблон страницы конфигуратора, а второй — это JavaScript программа XHTML-шаблону.
</p><p>На данное время доступны следующие дизайны:
</p>
<ul><li> Новый стандартный дизайн (по умолчанию): <a class="external" href="http://oscada.org/wiki/File:WebCfgDVCA_std.html.gz" title="File:WebCfgDVCA std.html.gz">WebCfgDVCA.html</a>, <a class="external" href="http://oscada.org/wiki/File:WebCfgDVCA_std.js.gz" title="File:WebCfgDVCA std.js.gz">WebCfgDVCA.js</a></li>
<li> Старый стандартный дизайн (по умолчанию): <a class="external" href="http://oscada.org/wiki/File:WebCfgDVCA_std201701.html.gz" title="File:WebCfgDVCA std201701.html.gz">WebCfgDVCA.html</a>, <a class="external" href="http://oscada.org/wiki/File:WebCfgDVCA_std201701.js.gz" title="File:WebCfgDVCA std201701.js.gz">WebCfgDVCA.js</a></li></ul>
<h2><span class="mw-headline" id=".D0.9E.D1.88.D0.B8.D0.B1.D0.BA.D0.B8"><span class="mw-headline-number">8</span> Ошибки</span></h2>
<p>Представление конфигуратора может несколько отличаться на разных типах браузеров. Это связано с тем, что в основе данного модуля лежит много достаточно сложных технологий, а также отличий их реализации на разных типах WEB-движков.
</p><p>Кроме того, каждый Web-браузер содержит собственные ошибки. Часть ошибок была обойдена в процессе реализации, однако часть осталась в виду значительных трудностей в их обходе или-же фактической невозможности это сделать.
</p><p>В данном разделе содержится таблица перечня обнаруженных ошибок WEB-браузеров, которые проявляются в конфигураторе.
</p>
<table class="wikitable">

<tr>
<th> Ошибка </th>
<th> Описание </th>
<th> Исправление
</th></tr>
<tr>
<td colspan="3"> <i>Mozilla FireFox 3.0.4</i> (stable, few errors)
</td></tr>
<tr>
<td> Offset of the popup window of the editable combobox at 5 pixels to the up and to the left. </td>
<td>
<p>The problem lies in the fact that the calculation of the absolute position of the element of the document doesn't grab exactly 5 pixels. Error of 5 pixels is visible in relation to the coordinates of the mouse pointer and the position of the newly-created entirely-positioned window. The algorithm for computing the position:<br />
<i>for(&nbsp;; obj&nbsp;!= null; obj = obj.offsetParent ) posX += obj.offsetLeft;</i>
</p>
</td>
<td> To correction of this error to the estimated value on this browser the 5 pixels are added.
</td></tr>
<tr>
<td> In the element of the list (&lt;select size="10"/&gt;) the vertical scroll is always shows and never turned on the horizontal one. </td>
<td> This element is actively used for building the context menu and drop-down list of the editable combo-box. </td>
<td> <span style="color: blue">For workaround the browser error I must include the list in the block with scroll of the block itself.</span>
</td></tr>
<tr>
<td> The image field is not updating. </td>
<td> In order to eliminate the need for restructuring of the configurable page while updating the values of fields in the tree of the structure objects of the pages which was get from the XMLHttpRequest, the properties are created with the links to the object of the tags of the fields (addr_lab, addr_val_w). In objects with the name of the tag "img", these properties are not created by the browser. </td>
<td> <span style="color: red">not solved</span>
</td></tr>
<tr>
<td colspan="3"> <i>Opera</i> (stable, few errors)
</td></tr>
<tr>
<td> Scroll of the unit of the page does not turn on. For example when displaying large images of the trend. </td>
<td> The block is fixed with the parameters{ overflow: auto; width: 600px; } however, in the case of the exceeding the size of the interior elements the scroll is not turned on. </td>
<td> <span style="color: red">not solved</span>
</td></tr>
<tr>
<td colspan="3"> <i>Konqueror</i> (very unstable on the dynamic resources and contains many errors)
</td></tr>
<tr>
<td> Stable browser crashing. </td>
<td> Browser repeatedly and consistently crashes while the computation of JavaScript and when dealing with the external windows. </td>
<td> <span style="color: red">not solved</span>
</td></tr>
<tr>
<td> The scroll of the navigation tree doesn't returned. </td>
<td> If you drag the navigation tree to the vertical scroll, then scroll it down, then roll the large branch, the vertical scroll disappears, and some of the tree remains invisible behind the top of the block. That. the contents of the block are not updated. </td>
<td> <span style="color: red">not solved</span>
</td></tr>
<tr>
<td> The images do not update. </td>
<td> In the fields of images, to update the image from the server, the property "src" is to be changed. The browser does not sense it, or even updates the size of the frame, and the image is not updated. Methods to prevent caching of the images are used, but do not help. </td>
<td> <span style="color: red">not solved</span>
</td></tr>
<tr>
<td> Capturing button images </td>
<td> JavaScript of the module uses non-asynchronous but synchronous requests to the server to save the sequence of actions. At moments of such a request, if it was triggered by an event from an image (the image is a button), the image is captured as if it were for transfer, even for short-term mouse clicks. </td>
<td> <span style="color: red">not solved</span>
</td></tr>
<tr>
<td> Impossible to insert a new element to the tree of objects obtained as a result of XMLHttpRequest </td>
<td> To control the modification of the configuration page structure, the current structure tree was mapped to the newly received XMLHttpRequest. When inserting a new element into the structure tree using insertBefore(), a "DOM error 4" error occurs. If the insertion takes place in a tree created from scratch (and not from XMLHttpRequest), this error does not occur. The problem seems to be the difference between the "document" object of the owner of these trees. In such a tree it is not possible to add a node created as document.createElement(). Only the ones created as mytree.ownerDocument.createElement() are inserted. </td>
<td> The procedure for verifying the structure has been simplified and reduced to the definition of the fact of the change.
</td></tr>
<tr>
<td> The mechanisms of the context menu formation in the Konqueror 4 doesn't work. </td>
<td> Typically, to create a context menu, the oncontextmenu handler, on Firefox and IE, or onmousedown with the right key processing, on the other browsers, are used. In Konqueror, oncontextmenu does not work at all, and onmousedown works only in Konqueror 3.5. </td>
<td> <span style="color: red">not solved</span>
</td></tr></table>






</div><table style="border-top: dotted 2px #999999; margin-top: 20pt; color: gray;" width="100%"><tr><td style="text-align: left;" width="40%"><a href="http://oscada.org/wiki/Modules/WebCfgD/ru">Modules/WebCfgD/ru</a> - <a href="http://oscada.org/en/main/about-the-project/licenses/">GFDL</a></td><td style="text-align: center;">March 2020</td><td style="text-align: right;" width="40%">OpenSCADA 1+r2669</td></tr></table></body>
</html>