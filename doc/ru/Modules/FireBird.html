<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html class="client-nojs" dir="ltr" lang="en">
<head>
<meta charset="UTF-8" />
<title>Модули/FireBird - OpenSCADAWiki</title>
<meta content="MediaWiki 1.26.4" name="generator" />
<link href="https://www.gnu.org/copyleft/fdl.html" rel="copyright" />
<link href="../../en/files/doc.css" rel="stylesheet" /></head>
<body><div id="mw_header">
			<div class="mw-indicators">
</div>
			<h1 id="firstHeading" lang="ru">Модули/FireBird</h1>
		</div><div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="ru"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a class="external text" href="http://oscada.org/wiki/index.php?title=Special:Translate&amp;group=page-Modules%2FFireBird&amp;action=page&amp;filter=&amp;language=ru" rel="nofollow noreferrer noopener" target="_blank">translated version</a></span> of the page <a class="external" href="http://oscada.org/wiki/Modules/FireBird" title="Modules/FireBird">Modules/FireBird</a> and the translation is 100% complete.</div><hr /><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" href="http://oscada.org/wiki/Modules/FireBird" title="Modules/FireBird (100% translated)">English</a>&nbsp;• ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">российский</span>&nbsp;• ‎<a class="mw-pt-progress mw-pt-progress--complete" href="http://oscada.org/wiki/Modules/FireBird/uk" title="Модулі/FireBird (100% translated)">українська</a></div></div>
<table class="wikitable">

<tr>
<th> Модуль </th>
<th> Имя </th>
<th> Версия </th>
<th> Лицензия </th>
<th> Источник </th>
<th> Языки </th>
<th> Платформы </th>
<th> Тип </th>
<th> Автор </th>
<th> Описание
</th></tr>

<tr>
<td> <a href="../Modules/FireBird.html" title="Special:MyLanguage/Modules/FireBird">FireBird</a> </td>
<td> БД FireBird
</td>
<td> 2.3 </td>
<td> GPL2 </td>
<td> bd_FireBird.so </td>
<td> en,uk,ru,de </td>
<td> x86,x86_64,ARM
</td>
<td> БД </td>
<td> Роман Савоченко </td>
<td> Модуль БД. Предоставляет поддержку СУБД FireBird.
</td></tr></table>
<div class="toc" id="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D0.B8.D0.B8_.D0.BD.D0.B0.D0.B4_.D0.91.D0.94"><span class="tocnumber">1</span> <span class="toctext">Операции над БД</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D0.B8.D0.B8_.D0.BD.D0.B0.D0.B4_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D0.B5.D0.B9"><span class="tocnumber">2</span> <span class="toctext">Операции над таблицей</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D0.B8.D0.B8_.D0.BD.D0.B0.D0.B4_.D1.81.D0.BE.D0.B4.D0.B5.D1.80.D0.B6.D0.B8.D0.BC.D1.8B.D0.BC_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D1.8B"><span class="tocnumber">3</span> <span class="toctext">Операции над содержимым таблицы</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#.D0.94.D0.BE.D1.81.D1.82.D1.83.D0.BF_.D0.BA_.D0.91.D0.94"><span class="tocnumber">4</span> <span class="toctext">Доступ к БД</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#.D0.9F.D1.80.D0.BE.D0.B8.D0.B7.D0.B2.D0.BE.D0.B4.D0.B8.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D0.BE.D1.81.D1.82.D1.8C_.D0.A1.D0.A3.D0.91.D0.94"><span class="tocnumber">5</span> <span class="toctext"><span>Производительность СУБД</span></span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#.D0.97.D0.B0.D0.BC.D0.B5.D1.87.D0.B0.D0.BD.D0.B8.D1.8F"><span class="tocnumber">6</span> <span class="toctext">Замечания</span></a></li>
</ul>
</div>

<p>Модуль предоставляет в OpenSCADA поддержку СУБД FireBird, и InterBase, которая является небольшой и встраиваемой СУБД с функциями сетевой и поддержкой SQL-запросов. FireBird построена на основе коммерческой СУБД Interbase и она распространяется по свободной лицензии. Ознакомиться с СУБД можно на сайте <a class="external free" href="http://www.firebirdsql.org" rel="nofollow noreferrer noopener" target="_blank">http://www.firebirdsql.org</a>. Модуль основан на библиотеке API производителя СУБД на языке "С" и он позволяет выполнять действия над базами данных, таблицами и содержимым таблиц.
</p>
<h2><span class="mw-headline" id=".D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D0.B8.D0.B8_.D0.BD.D0.B0.D0.B4_.D0.91.D0.94"><span class="mw-headline-number">1</span> Операции над БД</span></h2>
<p>Поддерживаются операции открытия и закрытия БД, с возможностью создания новой БД при открытии и удаления существующей при закрытии. В терминах подсистемы "БД" OpenSCADA, открытием БД является её регистрация для последующего использования программой. Также, поддерживается операция запроса перечня таблиц в БД.
</p><p>СУБД FireBird адресуется путём указания имени файла БД, пользователя и пароля. В общем адрес БД записывается таким образом: <b>{file};{user};{pass}[;{conTm}]</b>. Где:
</p>
<ul><li> <i>file</i> — полное имя файла БД;</li>
<li> <i>user</i> — пользователь БД, от имени которого производится доступ;</li>
<li> <i>pass</i> — пароль пользователя, от имени которого производится доступ;</li>
<li> <i>conTm</i> — таймаут подключения, секунд.</li></ul>
<h2><span class="mw-headline" id=".D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D0.B8.D0.B8_.D0.BD.D0.B0.D0.B4_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D0.B5.D0.B9"><span class="mw-headline-number">2</span> Операции над таблицей</span></h2>
<p>Поддерживаются операции открытия, закрытия таблицы, с возможностью создания новой таблицы при открытии и удаления существующей при закрытии, а также запрос структуры таблицы.
</p>
<h2><span class="mw-headline" id=".D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D0.B8.D0.B8_.D0.BD.D0.B0.D0.B4_.D1.81.D0.BE.D0.B4.D0.B5.D1.80.D0.B6.D0.B8.D0.BC.D1.8B.D0.BC_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D1.8B"><span class="mw-headline-number">3</span> Операции над содержимым таблицы</span></h2>
<ul><li> сканирование записей таблицы;</li>
<li> запрос значений указанных записей;</li>
<li> установка значений указанных записей;</li>
<li> удаление записей.</li></ul>
<p>API подсистемы "БД" предполагает доступ к содержимому таблицы по значению ключевого(ых) полей. Так, операция запроса записи подразумевает предварительную установку ключевых колонок объекта TConfig, по которым будет выполнен запрос. Создание новой записи(строки) производится операцией установки значений записи, которая отсутствует.
</p><p>Модуль позволяет динамически менять структуру таблиц БД FireBird. Так, в случае несоответствия структуры таблицы и структуры устанавливаемой записи, структура таблицы будет приведена к требуемой структуре записи. В случае запроса значений записи и несоответствия структур записи и таблицы, будут получены только значения общих элементов записи и таблицы. Модуль не отслеживает порядка расположения элементов записи и структуры таблицы, кроме этого операция изменения типа колонки не является безопасной и данные в изменяемых колонках будут утеряны!
</p><p>Модулем реализуется механизм поддержки многоязыковых текстовых переменных. Для полей с многоязыковой текстовой переменной создаются колонки отдельных языков в формате "<b>{lang}#{FldID}</b>" (en#NAME). При этом, базовая колонка содержит значение для базового языка. Колонки отдельных языков создаются по надобности, в момент сохранения в БД и при исполнении OpenSCADA в соответствующей локали. В случае отсутствия значения для конкретного языка будет использоваться значений для базового языка.
</p><p>Типы элементов СУБД FireBird следующим образом соответствуют типам элементов OpenSCADA:
</p>
<table class="wikitable">

<tr>
<th> Типы полей OpenSCADA </th>
<th> Типы полей FireBird
</th></tr>
<tr>
<td> TFld::String </td>
<td> VARCHAR, BLOB SUBTYPE TEXT
</td></tr>
<tr>
<td> TFld::Integer </td>
<td> INTEGER
</td></tr>
<tr>
<td> TFld::Real </td>
<td> DOUBLE
</td></tr>
<tr>
<td> TFld::Boolean </td>
<td> SMALLINT
</td></tr></table>
<h2><span class="mw-headline" id=".D0.94.D0.BE.D1.81.D1.82.D1.83.D0.BF_.D0.BA_.D0.91.D0.94"><span class="mw-headline-number">4</span> Доступ к БД</span></h2>
<p>Права доступа к БД определяются правами файла БД.
</p><p>Кратко рассмотрим процедуру первичной настройки сервера FireBird, с целью подключения к нему с помощью данного модуля:
</p>
<ul>
<li>Установка СУБД FireBird в виде пакета или сборкой.</li>
<li>Запуск СУБД:
<pre style="white-space: pre-wrap;">
# Запуск классического сервера
$ service firebird start
# Запуск в суперсервере
$ service xinetd restart</pre></li>
<li>Установка нужного пароля для системного пользователя "sysdba":
<pre style="white-space: pre-wrap;">
$ gsec -user sysdba -pass masterkey -mo sysdba -pw 123456</pre></li>
<li>Подключение к СУБД с помощью данного модуля, введя адрес БД: <b>"/var/tmp/test.fbd;sysdba;123456"</b></li>
</ul>
<h2><span class="mw-headline" id=".D0.9F.D1.80.D0.BE.D0.B8.D0.B7.D0.B2.D0.BE.D0.B4.D0.B8.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D0.BE.D1.81.D1.82.D1.8C_.D0.A1.D0.A3.D0.91.D0.94"><span class="mw-headline-number">5</span> <span id="Tests" title="#Tests">Производительность СУБД</span></span></h2>
<p>Замер производительности СУБД выполнялся тестом "БД" модуля тестов "SystemTests", путём выполнения операций над записями структурой: "<b>name char (20), descr char (50), val double (10.2), id int (7), stat bool, reqKey string, reqVal string</b>".
</p>
<table class="wikitable">

<tr>
<th> Operations for 1000 records, seconds
</th>
<th> FireBird 2.5<br />AMD Turion L625 1.6, 2G, FireBird [2.1.3 Local SuperServer; 100Base-TX; 2.5.2 100Base-TX SuperServer ForcedWrites=Off; ForcedWrites=On]<br /> Intel(R) Core(TM) i3 CPU 1.33GHz, 3G, HDD [2.5.2 100Base-TX SuperServer ForcedWrites=Off; ForcedWrites=On] </th>
<th> FireBird 3<br />Intel(R) Core(TM) i7 CPU 2.6GHz, 12G, FastSSD, Local network
</th></tr>
<tr>
<td> <i>Creating:</i> </td>
<td> [0.93; 1.15; 4.4; 5.2]; [3.68; 4.67] </td>
<td> 0.5
</td></tr>
<tr>
<td> <i>Updating:</i> </td>
<td> [2.74; 2.94; 5.1; 5.2]; [3.88; 4.54] </td>
<td> 0.47
</td></tr>
<tr>
<td> <i>Getting:</i> </td>
<td> [1.64; 2.22; 5.0; <span style="color: red">27.8</span>]; [3.69; <span style="color: red">28.8</span>] </td>
<td> 2.95
</td></tr>
<tr>
<td> <i>Seeking:</i> </td>
<td> -&nbsp;; [5.36; <span style="color: red">32</span>] </td>
<td> 3.3
</td></tr>
<tr>
<td> <i>Seeking in preload:</i> </td>
<td> -&nbsp;; [0.045; 0.065] </td>
<td> 0.047
</td></tr>
<tr>
<td> <i>Deleting:</i> </td>
<td> [0.65; 1.04; 2.0; 2.4]; [1.69; 1.66] </td>
<td> 0.17
</td></tr></table>
<h2><span class="mw-headline" id=".D0.97.D0.B0.D0.BC.D0.B5.D1.87.D0.B0.D0.BD.D0.B8.D1.8F"><span class="mw-headline-number">6</span> Замечания</span></h2>
<p>СУБД FireBird имеет много архитектурных ограничений и проблем в виду наследственности InterBase и родительской ОС MS Windows, которые препятствуют её широкому использованию для многих задач. Известные проблемы:
</p>
<ul><li> СУБД медленнее в сравнении с MySQL или PostgreSQL, см. предыдущий раздел. Особенно в режиме ForcedWrites On(sync).</li>
<li> СУБД имеет фиксированное ограничение на размер выражения SQL в 65536 КБ, которое препятствует размещению большого содержимого исключительно посредством SQL.</li>
<li> Классический сервер на Linux, в режиме выключения ForcedWrites, может намертво зависать.</li>
<li> Отсутствует контроль за лимитами времени подключения, что приводит к продолжительному и неконтролируемому ожиданию в клиентских приложениях.</li></ul>






</div></body>
</html>