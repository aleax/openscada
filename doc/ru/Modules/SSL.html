<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html class="client-nojs" dir="ltr" lang="en">
<head>
<meta charset="UTF-8" />
<title>Модули/SSL - OpenSCADAWiki</title>
<meta content="MediaWiki 1.26.4" name="generator" />
<link href="https://www.gnu.org/copyleft/fdl.html" rel="copyright" />
<link href="../../en/files/doc.css" rel="stylesheet" /></head>
<body><div id="mw_header">
			<div class="mw-indicators">
</div>
			<h1 id="firstHeading" lang="ru">Модули/SSL</h1>
		</div><div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="ru"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a class="external text" href="http://oscada.org/wiki/index.php?title=Special:Translate&amp;group=page-Modules%2FSSL&amp;action=page&amp;filter=&amp;language=ru" rel="nofollow noreferrer noopener" target="_blank">translated version</a></span> of the page <a class="external" href="http://oscada.org/wiki/Modules/SSL" title="Modules/SSL">Modules/SSL</a> and the translation is 100% complete.</div><hr /><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" href="http://oscada.org/wiki/Modules/SSL" title="Modules/SSL (100% translated)">English</a>&nbsp;• ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">российский</span>&nbsp;• ‎<a class="mw-pt-progress mw-pt-progress--complete" href="http://oscada.org/wiki/Modules/SSL/uk" title="Модулі/SSL (100% translated)">українська</a></div></div>
<table class="wikitable">

<tr>
<th> Модуль </th>
<th> Имя </th>
<th> Версия </th>
<th> Лицензия </th>
<th> Источник </th>
<th> Языки </th>
<th> Платформы </th>
<th> Тип </th>
<th> Автор </th>
<th> Описание
</th></tr>

<tr>
<td> <a href="../Modules/SSL.html" title="Special:MyLanguage/Modules/SSL">SSL</a> </td>
<td> SSL
</td>
<td> 2.4 </td>
<td> GPL2 </td>
<td> tr_SSL.so </td>
<td> en,uk,ru,de </td>
<td> x86,x86_64,ARM
</td>
<td> Транспорт </td>
<td> Роман Савоченко </td>
<td> Предоставляет транспорт основанный на слое безопасных сокетов. Используется OpenSSL и поддерживаются: SSLv3, TLSv1, TLSv1.1, TLSv1.2, DTLSv1, DTLSv1_2.
</td></tr></table>
<div class="toc" id="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.92.D1.85.D0.BE.D0.B4.D0.BD.D1.8B.D0.B5_.D1.82.D1.80.D0.B0.D0.BD.D1.81.D0.BF.D0.BE.D1.80.D1.82.D1.8B"><span class="tocnumber">1</span> <span class="toctext">Входные транспорты</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.D0.92.D1.8B.D1.85.D0.BE.D0.B4.D0.BD.D1.8B.D0.B5_.D1.82.D1.80.D0.B0.D0.BD.D1.81.D0.BF.D0.BE.D1.80.D1.82.D1.8B"><span class="tocnumber">2</span> <span class="toctext">Выходные транспорты</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.D0.A1.D0.B5.D1.80.D1.82.D0.B8.D1.84.D0.B8.D0.BA.D0.B0.D1.82.D1.8B_.D0.B8_.D0.BA.D0.BB.D1.8E.D1.87.D0.B8"><span class="tocnumber">3</span> <span class="toctext">Сертификаты и ключи</span></a></li>
</ul>
</div>

<p>Модуль предоставляет в программу поддержку транспортов, основанных на слое безопасных сокетов (SSL). В основе модуля лежит библиотека <a class="external text" href="http://www.openssl.org" rel="nofollow noreferrer noopener" target="_blank">OpenSSL</a>. Поддерживаются входные и выходные транспорты протоколов SSLv3, TLSv1, TLSv1.1, TLSv1.2, DTLSv1, DTLSv1_2; общий перечень которых зависит от их доступности в библиотеке OpenSSL и при отсутствии прямого указания выбирается наиболее актуальный и безопасный.
</p><p>Добавить новые входные и выходные безопасные сокеты можно посредством конфигурации <a href="../Program_manual.html#Transports" title="Special:MyLanguage/Documents/Program manual">транспортной подсистемы</a> в любом конфигураторе OpenSCADA.
</p>
<h2><span class="mw-headline" id=".D0.92.D1.85.D0.BE.D0.B4.D0.BD.D1.8B.D0.B5_.D1.82.D1.80.D0.B0.D0.BD.D1.81.D0.BF.D0.BE.D1.80.D1.82.D1.8B"><span class="mw-headline-number">1</span> Входные транспорты</span></h2>
<p>Сконфигурированный и запущенный входной транспорт открывает серверный SSL-сокет для ожидания подключения клиентов. SSL-сокет являются много-поточными, т.е. при подключении клиента создаётся клиентское SSL-соединение и новый поток в котором производиться обслуживание клиента. Серверный SSL-сокет в этот момент переходит к ожиданию запросов от нового клиента. Таким образом достигается параллельное обслуживание клиентов.
</p><p>Каждый входной транспорт обязательно связывается с одним из доступных транспортных протоколов, которому передаются входные сообщения. В связке с транспортным протоколом поддерживается механизм объединения кусков разрозненных при передаче запросов.
</p><p>Диалог конфигурации входного SSL-транспорта изображён на рисунке 1.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:821px;"><a class="image" href="http://oscada.org/wiki/File:SSL_in_ru.png"><img class="thumbimage" height="718" src="../files/SSL_in_ru.png" width="819" /></a>  <div class="thumbcaption">Рис.1. Диалог конфигурации входного SSL-транспорта.</div></div></div></div>
<p>С помощью этого диалога можно установить:
</p>
<ul><li> Состояние транспорта, а именно: "Статус", "Исполняется", имя БД (содержащей конфигурацию) и список с информацией о текущих подключениях.</li>
<li> Идентификатор, имя и описание транспорта.</li>
<li> Адрес транспорта в формате "<b>{addr}:{port}[:{mode}]</b>" где:
<ul><li> <i>addr</i> — адрес открытия SSL, должен быть одним из адресов хоста. Пустой адрес или "*" открывает SSL на всех интерфейсах. Допускаются как символьное, так и IPv4 "<b>127.0.0.1</b>" или IPv6 "<b>[::1]</b>" представление адреса.</li>
<li> <i>port</i> — сетевой порт на котором открывается SSL, возможно указание символьного имени порта согласно <i>/etc/services</i>.</li>
<li> <i>mode</i> — SSL-режим и версия (SSLv3, TLSv1, TLSv1_1, TLSv1_2, DTLSv1, DTLSv1_2), по умолчанию и при ошибке используется наиболее безопасный и соответствующий.</li></ul></li>
<li> Выбор транспортных протоколов.</li>
<li> Состояние "Исполняется", в которое переводить транспорт при загрузке.</li>
<li> Сертификаты, приватный ключ SSL и пароль приватного ключа SSL.</li>
<li> Максимальное число клиентов, Максимальное число клиентов по хостам и Размер входного буфера.</li>
<li> Keep alive запросов. Закрытие подключения после указанного количества запросов. Нулевое значение для отключения — не закрывается никогда.</li>
<li> Keep alive время ожидания, секунд. Закрытие подключения после отсутствия запросов в течении указанного времени. Нулевое значение для отключения — не закрывается никогда.</li></ul>
<dl><dd><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../../en/files/At.png" width="22" /></a> Отключать данную функцию не рекомендуется поскольку свойство сетей TCP/IP не гарантирует уведомления сервера об отключении соединения, скажем в случае пропадания питания на клиенте. В результате чего могут <span style="color: red">навсегда</span> оставаться открытые клиентские подключения, а при достижении лимита сервер перестанет принимать новые!</dd></dl>
<ul><li> Приоритет задач транспорта.</li></ul>
<h2><span class="mw-headline" id=".D0.92.D1.8B.D1.85.D0.BE.D0.B4.D0.BD.D1.8B.D0.B5_.D1.82.D1.80.D0.B0.D0.BD.D1.81.D0.BF.D0.BE.D1.80.D1.82.D1.8B"><span class="mw-headline-number">2</span> Выходные транспорты</span></h2>
<p>Сконфигурированный и запущенный выходной транспорт открывает соединение с указанным сервером. При разрыве соединения выходной транспорт останавливается. Для возобновления соединения транспорт нужно снова запустить, что все протоколы делают автоматически.
</p><p>Транспорт поддерживает прямое определение нескольких адресов сервера и обработку всех IP-адресов в которые резолвится символьный адрес, что позволяет строить <a href="../DAQ.html#Redundancy" title="Special:MyLanguage/Documents/DAQ">вертикальное резервирование</a> непосредственно транспортом, который будет автоматически подключаться к первому доступному серверу.
</p><p>Главная вкладка страницы конфигурации выходного SSL-транспорта изображёна на рисунке 2.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:718px;"><a class="image" href="http://oscada.org/wiki/File:SSL_out_ru.png"><img class="thumbimage" height="756" src="../files/SSL_out_ru.png" width="716" /></a>  <div class="thumbcaption">Рис.2. Главная вкладка страницы конфигурации выходного SSL-транспорта.</div></div></div></div>
<p>С помощью этого диалога можно установить:
</p>
<ul><li> Состояние транспорта, а именно: "Статус", "Исполняется" и имя БД, содержащей конфигурацию.</li>
<li> Идентификатор, имя и описание транспорта.</li>
<li> Адрес транспорта в формате "<b>{addr}[,{addrN}]:{port}[:{mode}]</b>", где:
<ul><li> <i>addr</i> — адрес к которому осуществляется подключение. Допускаются как символьное, так и IPv4 "<b>127.0.0.1</b>" или IPv6 "<b>[::1]</b>" представление адреса.</li>
<li> <i>port</i> — сетевой порт к которому осуществляется подключение. Возможно указание символьного имени порта согласно <i>/etc/services</i>.</li>
<li> <i>mode</i> — SSL-режим и версия (SSLv3, TLSv1, TLSv1_1, TLSv1_2, DTLSv1, DTLSv1_2), по умолчанию и при ошибке используется наиболее безопасный и соответствующий.</li></ul></li>
<li> Состояние "Исполняется", в которое переводить транспорт при загрузке.</li>
<li> Сертификаты, приватный ключ SSL и пароль приватного ключа SSL.</li>
<li> Временные интервалы соединения в формате "<b>{conn}:{next}</b>", где:\n"
<ul><li> <i>conn</i> — максимальное время ожидания ответа соединения, в секундах;</li>
<li> <i>next</i> — максимальное время ожидания продолжения ответа, в секундах.</li></ul></li></ul>
<dl><dd> Может быть приоритетно определён вторым глобальным аргументом поля адреса, вроде "<b>localhost:123||5:1</b>".</dd></dl>
<ul><li> Попыток запроса транспортом и протоколом, для полных запросов.</li></ul>
<dl><dd> Может быть приоритетно определён третьим глобальным аргументом поля адреса, вроде "<b>localhost:123||5:1||3</b>".</dd></dl>
<h2><span class="mw-headline" id=".D0.A1.D0.B5.D1.80.D1.82.D0.B8.D1.84.D0.B8.D0.BA.D0.B0.D1.82.D1.8B_.D0.B8_.D0.BA.D0.BB.D1.8E.D1.87.D0.B8"><span class="mw-headline-number">3</span> Сертификаты и ключи</span></h2>
<p>Для полноценной работы модуля необходимы сертификаты и приватные ключи. В случае с входным SSL-транспортом (сервером) они обязательны. В случае с выходным SSL-транспортом они могут и не устанавливаться хотя их использование желательно.
</p><p>Простейшей конфигурацией сертификата является самоподписной сертификат и приватный ключ. Ниже описана процедура их создания с помощью утилиты <b>openssl</b>:
</p>
<pre style="white-space: pre-wrap;">
# Генерация секретного ключа
$ openssl genrsa -out ./key.pem -des3 -rand /var/log/messages 2048
# Генерация самоподписанного сертификата
$ openssl req -x509 -new -key ./key.pem -out ./selfcert.pem -days 365
</pre>
<p>Далее содержимое файлов "selfcert.pem" и "key.pem" копируется в текстовое поле сертификата и ключа. Пароль приватного ключа устанавливается в соответствующем поле.
</p>





</div></body>
</html>