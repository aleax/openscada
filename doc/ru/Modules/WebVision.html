<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html class="client-nojs" dir="ltr" lang="en">
<head>
<meta charset="UTF-8" />
<title>Модули/WebVision - OpenSCADAWiki</title>
<meta content="MediaWiki 1.26.4" name="generator" />
<link href="https://www.gnu.org/copyleft/fdl.html" rel="copyright" />
<link href="../../en/files/doc.css" rel="stylesheet" /></head>
<body><div class="floatright"><a href="http://oscada.org"><img alt="OpenSCADA" src="../../en/files/Logo-big.png" /></a></div><div id="mw_header">
			<div class="mw-indicators">
</div>
			<h1 id="firstHeading" lang="ru">Модули/WebVision</h1>
		</div><div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="ru"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a class="external text" href="http://oscada.org/wiki/index.php?title=Special:Translate&amp;group=page-Modules%2FWebVision&amp;action=page&amp;filter=&amp;language=ru" rel="nofollow noreferrer noopener" target="_blank">translated version</a></span> of the page <a class="external" href="http://oscada.org/wiki/Modules/WebVision" title="Modules/WebVision">Modules/WebVision</a> and the translation is 100% complete.</div><hr /><div class="mw-pt-languages" dir="ltr" lang="en"><div class="mw-pt-languages-list autonym"><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" href="../../en/Modules/WebVision.html" title="Modules/WebVision (100% translated)">English</a>&nbsp;• ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">российский</span>&nbsp;• ‎<a class="mw-pt-progress mw-pt-progress--complete" href="../../uk/Modules/WebVision.html" title="Модулі/WebVision (100% translated)">українська</a></div></div>
<table class="wikitable">

<tr>
<th> Модуль </th>
<th> Имя </th>
<th> Версия </th>
<th> Лицензия </th>
<th> Источник </th>
<th> Языки </th>
<th> Платформы </th>
<th> Тип </th>
<th> Автор </th>
<th> Описание
</th></tr>

<tr>
<td> <a href="../Modules/WebVision.html" title="Special:MyLanguage/Modules/WebVision">WebVision</a> </td>
<td> Рабочий пользовательский интерфейс (WEB)
</td>
<td> 4.2 </td>
<td> GPL2 </td>
<td> ui_WebVision.so </td>
<td> en,uk,ru,de </td>
<td> x86,x86_64,ARM
</td>
<td> Пользовательские интерфейсы </td>
<td> Роман Савоченко<br />&nbsp;&nbsp;<font size="-2"><i>Максим Лысенко (2007-2012), Ксения Яшина (2007-2008)</i></font> </td>
<td> Рабочий пользовательский интерфейс, основанный на WEB - внешний интерфейс к движку СВУ.
</td></tr></table>
<div class="toc" id="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.9D.D0.B0.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D0.B5"><span class="tocnumber">1</span> <span class="toctext">Назначение</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.D0.98.D1.81.D0.BF.D0.BE.D0.BB.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B8.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D0.BE.D0.B2_.D0.A1.D0.92.D0.A3"><span class="tocnumber">2</span> <span class="toctext">Исполнение интерфейсов СВУ</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.D0.9F.D1.80.D0.B5.D0.B4.D1.81.D1.82.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B1.D0.B0.D0.B7.D0.BE.D0.B2.D1.8B.D1.85_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.BE.D0.B2_.28.D0.BF.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2.D0.BE.D0.B2.29"><span class="tocnumber">3</span> <span class="toctext"><span>Представление базовых элементов (примитивов)</span></span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D1.80.D0.BD.D0.BE.D0.B9_.D1.84.D0.B8.D0.B3.D1.83.D1.80.D1.8B_.28ElFigure.29"><span class="tocnumber">3.1</span> <span class="toctext">Примитив элементарной фигуры (ElFigure)</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.82.D0.B5.D0.BA.D1.81.D1.82.D0.B0_.28Text.29"><span class="tocnumber">3.2</span> <span class="toctext">Примитив текста (Text)</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.B0_.D1.84.D0.BE.D1.80.D0.BC.D1.8B_.28FormEl.29"><span class="tocnumber">3.3</span> <span class="toctext">Примитив элемента формы (FormEl)</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D0.BE.D1.82.D0.BE.D0.B1.D1.80.D0.B0.D0.B6.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BC.D0.B5.D0.B4.D0.B8.D0.B0-.D0.BC.D0.B0.D1.82.D0.B5.D1.80.D0.B8.D0.B0.D0.BB.D0.BE.D0.B2_.28Media.29"><span class="tocnumber">3.4</span> <span class="toctext">Примитив отображения медиа-материалов (Media)</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D0.BF.D0.BE.D1.81.D1.82.D1.80.D0.BE.D0.B5.D0.BD.D0.B8.D1.8F_.D0.B4.D0.B8.D0.B0.D0.B3.D1.80.D0.B0.D0.BC.D0.BC_.28Diagram.29"><span class="tocnumber">3.5</span> <span class="toctext">Примитив построения диаграмм (Diagram)</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.84.D0.BE.D1.80.D0.BC.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_.D0.BF.D1.80.D0.BE.D1.82.D0.BE.D0.BA.D0.BE.D0.BB.D0.B0_.28Protocol.29"><span class="tocnumber">3.6</span> <span class="toctext">Примитив формирования протокола (Protocol)</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.84.D0.BE.D1.80.D0.BC.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_.D0.BE.D1.82.D1.87.D1.91.D1.82.D0.BD.D0.BE.D0.B9_.D0.B4.D0.BE.D0.BA.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D1.86.D0.B8.D0.B8_.28Document.29"><span class="tocnumber">3.7</span> <span class="toctext">Примитив формирования отчётной документации (Document)</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D0.BA.D0.BE.D0.BD.D1.82.D0.B5.D0.B9.D0.BD.D0.B5.D1.80.D0.B0_.28Box.29"><span class="tocnumber">3.8</span> <span class="toctext">Примитив контейнера (Box)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#.D0.9E.D0.B1.D1.89.D0.B0.D1.8F_.D0.BA.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D1.8F_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D1.8F"><span class="tocnumber">4</span> <span class="toctext">Общая конфигурация модуля</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#.D0.AD.D1.84.D1.84.D0.B5.D0.BA.D1.82.D0.B8.D0.B2.D0.BD.D0.BE.D1.81.D1.82.D1.8C_.D0.B8_.D0.BC.D0.B0.D1.81.D1.88.D1.82.D0.B0.D0.B1.D0.B8.D1.80.D1.83.D0.B5.D0.BC.D0.BE.D1.81.D1.82.D1.8C"><span class="tocnumber">5</span> <span class="toctext"><span>Эффективность и масштабируемость</span></span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#.D0.97.D0.B0.D0.BC.D0.B5.D1.87.D0.B0.D0.BD.D0.B8.D1.8F"><span class="tocnumber">6</span> <span class="toctext">Замечания</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="#.D0.A1.D1.81.D1.8B.D0.BB.D0.BA.D0.B8"><span class="tocnumber">7</span> <span class="toctext">Ссылки</span></a></li>
</ul>
</div>

<p>Модуль предоставляет в OpenSCADA механизм конечной визуализации среды визуализации и управления (СВУ). Модуль основан на WEB технологиях (XHTML, JavaScript, CSS, AJAX). В своей работе модуль использует данные движка СВУ — модуль <a href="../Modules/VCAEngine.html" title="Special:MyLanguage/Modules/VCAEngine">VCAEngine</a>.
</p><p>Середовище візуалізації та управління (СВУ) є невід'ємною складовою SCADA системи. Воно застосовується на клієнтських станціях з метою доступного представлення інформації про об'єкт управління та видачі керуючого впливу на об'єкт. У різних практичних ситуаціях та умовах можуть застосовуватися СВУ, побудовані на різних принципах візуалізації. Наприклад, це можуть бути бібліотеки віджетів Qt, GTK+, wxWidgets або гіпертекстові механізми на основі технологій HTML, XHTML, XML, CSS та JavaScript або сторонні додатки візуалізації, реалізовані на різних мовах програмування Java, Python та інше. Будь-який з цих принципів має свої переваги та недоліки, комбінація яких може стати непереборною перепоною у можливості використання СВУ у тому або іншому практичному випадку. Наприклад, технології на кшталт бібліотеки Qt дозволяють створювати високопродуктивні СВУ, що безсумнівно важливо для станцій оператору управління технологічним процесом (ТП). Однак, необхідність інсталяції даного клієнтського ПЗ може зробити його використання неможливим у окремих випадках. З іншого боку, Web-технології не потребують інсталяції на клієнтські системи та є гранично багатоплатформними (достатньо вказати посилання на Web-сервер у будь-якому Web-браузері), що найбільш важливо для різних інженерних та адміністративних станцій. З іншого боку, продуктивність та надійність таких інтерфейсів нижче, що практично виключає їх використання на станціях оператору ТП.
</p><p>OpenSCADA має гранично гнучку архітектуру, яка дозволяє створювати зовнішні інтерфейси, у тому числі й користувацькі, на будь-якій основі та смак. Наприклад, середовище конфігурації OpenSCADA доступне як на Qt-бібліотеці, так і на Web-основі.
</p><p>У той-же час, незалежне створення реалізацій СВУ на різній основі може потягти за собою неможливість використання даних конфігурації однієї СВУ на іншій. Що незручно та обмежено з користувацького боку, а також витратно у плані реалізації та подальшої підтримки.
</p><p>С целью избежания этих проблем, а также создания в кратчайшие сроки полного спектра различных типов СВУ, основан <a class="external" href="http://oscada.org/wiki/Special:MyLanguage/Sub-projects/VCA" title="Special:MyLanguage/Sub-projects/VCA">проект создания концепции СВУ</a>. Результатом этого проекта и стал данный модуль непосредственной визуализации (на основе Web-технологий), модуль непосредственной визуализации <a href="../Modules/Vision.html" title="Special:MyLanguage/Modules/Vision">Vision</a> и движок СВУ <a href="../Modules/VCAEngine.html" title="Special:MyLanguage/Modules/VCAEngine">VCAEngine</a>.
</p>
<h2><span class="mw-headline" id=".D0.9D.D0.B0.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D0.B5"><span class="mw-headline-number">1</span> Назначение</span></h2>
<p>Данный модуль непосредственной визуализации СВУ предназначен только для исполнения интерфейсов СВУ в среде WEB-технологий!
</p><p>Интерфейс пользователя формируется в WEB-браузере путём обращения к WEB-серверу и получения от него XHTML-документа по протоколу HTTP. В данном случае, в роли WEB-сервера выступает OpenSCADA, которая поддерживает стандартные коммуникационные механизмы TCP-сетей (модуль <a href="../Modules/Sockets.html" title="Special:MyLanguage/Modules/Sockets">Transport.Sockets</a>), протокол передачи гипертекста (модуль <a href="../Modules/HTTP.html" title="Special:MyLanguage/Modules/HTTP">Protocol.HTTP</a>), а также шифрование трафика между браузером и сервером (<a href="../Modules/SSL.html" title="Special:MyLanguage/Modules/SSL">Transport.SSL</a>). Исходя из этого, для получения доступа к интерфейсу пользователя, предоставляемого этим модулем, необходимо в OpenSCADA настроить транспорт (Transport.Sockets или Transport.SSL) в связке с протоколом HTTP (Protocol.HTTP). Вместе с OpenSCADA идут конфигурационные файлы, содержащие настройки Transport.Sockets для портов 10002 и 10004. Следовательно, интерфейс модуля, по умолчанию, будет доступен по URL: "http://localhost:10002" и "http://localhost:10004".
</p><p>Финальная версия этого модуля СВУ, построенная на основе данного модуля, обеспечит:
</p><p>Перечислим возможности, которые сможет и обеспечивает СВУ, построенная на основе данного проекта:
</p>
<ul><li> три уровня сложности в формировании интерфейса визуализации, позволяющие органично осваивать и применять инструментарий по принципу — от простого к сложному:</li></ul>
<dl><dd><ol><li> формирование из шаблонных кадров, путём назначения динамики и без графической конфигурации;</li>
<li> графическое формирование новых кадров, путём использования готовых элементов визуализации из библиотеки — мнемосхемы;</li>
<li> формирование, в библиотеке, новых: кадров, шаблонных кадров и элементов отображения.</li></ol></dd></dl>
<ul><li> построение интерфейсов визуализации практически любой сложности (ограниченную "дискретностью" функций примитивов), начиная от простых интерфейсов мониторинга и, заканчивая полноценными иерархическими интерфейсами, используемыми в SCADA системах;</li>
<li> предоставление различных способов формирования и конфигурации пользовательского интерфейса, основанных на различных интерфейсах графического представления (Qt, Web, ...), или-же посредством стандартного интерфейса управления OpenSCADA;</li>
<li> построение и коррекция интерфейса, установка и смена динамики в процессе исполнения;</li>
<li> построение, на уровне пользователя, новых шаблонных кадров и формирование специализированных, под область применения, библиотек кадров (например, включение кадров параметров, графиков и других элементов с увязкой их друг с другом), согласно идее вторичного использования, накопления и совершенствования;</li>
<li> построение новых пользовательских элементов визуализации и формирование специализированных, под область применения, библиотек кадров, согласно идее вторичного использования, накопления и совершенствования;</li>
<li> описание логики новых шаблонных кадров и пользовательских элементов визуализации как простыми связями, так и лаконичным, полноценным языком пользовательского программирования;</li>
<li> возможность включение, в пользовательские элементы визуализации, функций (или кадров вычисления функций) объектной модели OpenSCADA, практически связывая представление с алгоритмом вычисления; например, визуализируя библиотеку моделей аппаратов ТП, для последующего визуального построения моделей ТП;</li>
<li> разделение данных пользовательских интерфейсов и интерфейсов представления этих данных, позволяющее строить интерфейс пользователя в одной среде, а исполнять во многих других (Qt, Web, ...);</li>
<li> возможность подключения к исполняющемуся интерфейсу для наблюдения и коррекции действий; например, при обучении операторов и контроля за его действиями в реальном времени;</li>
<li> визуальное построение различных схем с наложением логических связей и последующим централизованным исполнением в фоне — визуальное построение и исполнение математических моделей, логических схем, релейных схем и иного;</li>
<li> предоставление, в OpenSCADA, функций объектного API; может использоваться для управления свойствами интерфейса визуализации из пользовательских процедур;</li>
<li> построение серверов для: кадров, элементов визуализации и проектов интерфейсов визуализации; с возможностью обслуживания множественных клиентских соединений;</li>
<li> простая организация клиентских станций на различной основе (Qt, Web, ...), с подключением к центральному серверу;</li>
<li> полноценный механизм разделения полномочий между пользователями, позволяющий создавать и исполнять проекты с различными правами доступа к его компонентам;</li>
<li> гибкое формирование правил сигнализаций и уведомления, с учётом и поддержкой различных способов уведомления;</li>
<li> поддержка пользовательского формирования палитры и шрифтовых предпочтений интерфейса визуализации, в стилях;</li>
<li> поддержка пользовательского формирования карт событий под различное оборудование управления и пользовательские предпочтения;</li>
<li> поддержка профилей пользователей, позволяющая определять различные свойства интерфейса визуализации (цветовая гамма, шрифтовые особенности, предпочтительные карты событий);</li>
<li> гибкое хранение и распространение библиотек виджетов, кадров и проектов интерфейсов визуализации в БД, поддерживаемых OpenSCADA; практически, пользователю нужно только зарегистрировать полученную БД с данными.</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B8.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D0.BE.D0.B2_.D0.A1.D0.92.D0.A3"><span class="mw-headline-number">2</span> Исполнение интерфейсов СВУ</span></h2>
<p>Исполнение интерфейса СВУ заключается в запуске нового сеанса проекта, или подключения к существующему, на уровне движка СВУ (рис.2). Перед запросом, на подключение к сеансу, выполняется запрос на аутентификацию пользователя (рис.1). Далее, модуль непосредственной визуализации отображает и управляет данными сеанса. Главное окно режима исполнения данного модуля имеет вид, представленный на рисунке 3. Административные пользователи ("root" или в группе "root") могут закрывать открытые сеансы.
</p><p>Интерфейс окна исполнения полностью строится динамически, скриптом JavaScript и исходя из содержимого сеанса проекта, путём прямых XML запросов к серверу.
</p><p>Реализовано обновление содержимого открытых страниц интерфейса визуализации с периодичностью исполнения визуализируемого сеанса проекта визуализации. В процессе обновления выполняется:
</p>
<ul><li> запрос у модели списка открытых страниц, с признаком модификации страницы, и проверка соответствия реально открытых страниц этому списку;</li>
<li> запрос ветви данных модифицированных страниц;</li>
<li> обновление содержимого модифицированных страниц и их виджетов в соответствии с полученными измененными данными.</li></ul>
<p>Механизм запроса только изменённых данных основан на абсолютном счётчике исполнения сессии. При внесении реальных изменений в атрибуты виджетов выполняется запоминание значения этого счётчика, что и позволяет идентифицировать изменённые атрибуты. Такой подход позволяет повысить производительность и уменьшить трафик, в случае доступа к движку СВУ через сеть.
</p><p>Иерархически, модулем предусматривается возможность размещения страниц проекта как на главном окне исполнения (рис.3), так и вкладывая внутрь виджетов контейнеров, а также путем открытия дополнительных окон поверх основного.
</p><p>На строке статуса размещаются:
</p>
<ul><li> С правой стороны:
<ul><li> текущий пользователь, от имени которого исполняется интерфейс СВУ — кликом можно сменить этого пользователя, введя новое имя и пароль;</li>
<li> текущий стиль интерфейса, который можно сменить выбрав из комбобокса нужный;</li>
<li> текущий статус нарушения в лампе цветом, который отвечает уровню нарушения; мигает при появлении и смене нарушения; нажав на лампу Вы можете сквитировать это нарушение.</li></ul></li>
<li> В главном поле строки статуса выводятся различные информационные сообщения и сообщения помощи.</li></ul>
<p>Модулем поддерживается многоязычность, которая включается <a href="../Program_manual.html#ConfigTr" title="Special:MyLanguage/Documents/Program manual">динамическим переводом сообщений OpenSCADA</a>. Полученный язык передаётся модулем <a href="../Modules/HTTP.html" title="Special:MyLanguage/Modules/HTTP">Protocol.HTTP</a> и определяется путём и в последовательности:
</p>
<ul><li> URL параметр "lang".</li>
<li> Язык пользователя, который вошёл.</li>
<li> Язык Web-браузера из HTTP свойства "Accept-Language".</li>
<li> Общий язык процесса OpenSCADA.</li></ul>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:624px;"><a class="image" href="http://oscada.org/wiki/File:HTTP_auth_ru.png"><img class="thumbimage" height="278" src="../files/HTTP_auth_ru.png" width="622" /></a>  <div class="thumbcaption">Рис.1. Страница аутентификации.</div></div></div></div>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:622px;"><a class="image" href="http://oscada.org/wiki/File:WebVision_wvis_connect_ru.png"><img class="thumbimage" height="414" src="../files/WebVision_wvis_connect_ru.png" width="620" /></a>  <div class="thumbcaption">Рис.2. Подключение или создание нового сеанса исполнения проекта СВУ.</div></div></div></div>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:1041px;"><a class="image" href="http://oscada.org/wiki/File:WebVision_wvis_run_ru.png"><img class="thumbimage" height="782" src="../files/WebVision_wvis_run_ru.png" width="1039" /></a>  <div class="thumbcaption">Рис.3. Главное окно режима исполнения.</div></div></div></div>
<h2><span class="mw-headline" id=".D0.9F.D1.80.D0.B5.D0.B4.D1.81.D1.82.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B1.D0.B0.D0.B7.D0.BE.D0.B2.D1.8B.D1.85_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.BE.D0.B2_.28.D0.BF.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2.D0.BE.D0.B2.29"><span class="mw-headline-number">3</span> <span id="Primitives" title="#Primitives">Представление базовых элементов (примитивов)</span></span></h2>
<p>Данной версией модуля реализованы не все образы примитивов, заложенные проектом. В целом, проектом заложены примитивы:
</p>
<table class="wikitable">

<tr>
<th> Идентификатор </th>
<th> Наименование </th>
<th> Функция
</th></tr>
<tr>
<td> ElFigure </td>
<td> Элементарная графическая фигура </td>
<td>
<p>Примитив является основой отрисовки элементарных графических фигур со всевозможной комбинацией их в одном объекте. Предусматривается поддержка следующих элементарных фигур:
</p>
<ul><li> Линия.</li>
<li> Дуга.</li>
<li> Кривая Безье.</li>
<li> Заливка замкнутого пространства.<br /></li></ul>
<p>Для всех фигур, содержащихся в виджете, устанавливаются единые свойства толщины, цвета и т.д., также, предусматривается возможность указания вышеперечисленных атрибутов для каждой фигуры отдельно и их динамизация.
</p>
</td></tr>
<tr>
<td> FormEl </td>
<td> Элемент формы </td>
<td>
<p>Включает поддержку стандартных компонентов формы:
</p>
<ul><li> Редактирование строки.</li>
<li> Редактирование текста.</li>
<li> Флажок.</li>
<li> Кнопка.</li>
<li> Выбор из списка.</li>
<li> Список.</li>
<li> Дерево.</li>
<li> Таблица.</li>
<li> Слайдер.</li>
<li> Строка прокрутки. </li></ul>
</td></tr>
<tr>
<td> Text </td>
<td> Текст </td>
<td> Элемент текста-метка. Характеризуется типом шрифта, цветом, ориентацией и выравниванием. Предусматривается поддержка аргументов.
</td></tr>
<tr>
<td> Media </td>
<td> Медиа </td>
<td> Элемент отображения растровых и векторных изображений различных форматов, проигрывания анимированных изображений, проигрывание аудио-фрагментов и просмотр видео-фрагментов.
</td></tr>
<tr>
<td> Diagram </td>
<td> Диаграмма </td>
<td> Элемент диаграммы с поддержкой возможности отображения нескольких потоков в реальном времени для: трендов (временных графиков), частотного спектра, XY диаграмм.
</td></tr>
<tr>
<td> Protocol </td>
<td> Протокол </td>
<td> Элемент протокола — визуализатор сообщений программы, с поддержкой нескольких режимов работы.
</td></tr>
<tr>
<td> Document </td>
<td> Документ </td>
<td> Элемент формирования отчётов, журналов и другой документации на основе доступных данных.
</td></tr>
<tr>
<td> Box </td>
<td> Контейнер </td>
<td> Содержит механизм размещения-включения других виджетов для формирования новых, более сложных, виджетов и страниц конечной визуализации.
</td></tr>
<tr>
<td> Function, <span style="color: red">в планах</span> </td>
<td> Функция API объектной модели OpenSCADA </td>
<td> Невизуальный виджет, на стороне исполнения, позволяющий включать вычислительные функции объектной модели OpenSCADA в СВУ.
</td></tr></table>
<p><span id="SpecAttrs" title="#SpecAttrs">Модулем визуализатора предоставляется и используется ряд специфических атрибутов</span> общего характера, информация о которых приведена в таблице. Эти атрибуты автоматически создаются визуализатором при их отсутствии и в момент первого запуска, или создаются пользователем в кадре указанной области, по необходимости.
</p>
<table class="wikitable">

<tr>
<th> Идентификатор (область) </th>
<th> Имя </th>
<th> Назначение
</th></tr>
<tr>
<td> keepAspectRatio (главная страница) </td>
<td> Сохранять пропорцию при масштабировании </td>
<td> Сохранять пропорцию страниц при масштабировании.
</td></tr>
<tr>
<td> stBarNoShow (главная страница) </td>
<td> Не показывать строку статуса </td>
<td> Скрыть строку статуса главного окна.
</td></tr>
<tr>
<td> vs_goHttpUrl (вид "Кнопка" примитива "FormEl") </td>
<td> Переход по HTTP URL </td>
<td> Переход на указанный URL по нажатию кнопки
</td></tr>
<tr>
<td> vs_background (виды "Line edit", "Text edit", "Combo box", "List", "Tree", "Table" примитива "FormEl") </td>
<td> Пользовательский фон </td>
<td> Определяет пользовательский фон в форме <b>{color}-{transp} {image}</b>
</td></tr>
<tr>
<td> vs_border (виды "Line edit", "Text edit", "Combo box", "List", "Tree", "Table" примитива "FormEl") </td>
<td> Пользовательская граница </td>
<td> Определяет пользовательскую границу в стандартной форме CSS <b>{wdth}px {style} {color}</b>
</td></tr>
<tr>
<td> vs_winTitle (вид "Box") </td>
<td> Заголовок окна </td>
<td> Значение динамического заголовка окна
</td></tr></table>
<p>Рассмотрим реализацию каждого примитива более детально.
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D1.80.D0.BD.D0.BE.D0.B9_.D1.84.D0.B8.D0.B3.D1.83.D1.80.D1.8B_.28ElFigure.29"><span class="mw-headline-number">3.1</span> Примитив элементарной фигуры (ElFigure)</span></h3>
<p>Реализована поддержка элементарных фигур: линии, эллиптической дуги, кривой Безье и заливка замкнутых контуров цветом и изображением; со свойствами:
</p>
<ul><li> Формирование произвольных изображений из трёх элементарных фигур и заполнений замкнутых пространств цветом или изображением.</li>
<li> Возможность определения свойств фигур как в целом, так и отдельно для каждой: ширина, цвет и стиль линии, ширина и цвет бордюра линии, цвет и изображение заполнения.</li>
<li> Произвольный поворот общей фигуры около её центра.</li>
<li> Поддержка пользовательских атрибутов динамических: точек, ширин, цветов, стилей и изображений.</li>
<li> Формирование событий по действиям манипулятором мыши в замкнутом пространстве и в целом.</li></ul>
<p>На рисунке представлена часть экрана с кадром, содержащим вышеперечисленные элементарные фигуры.
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:WebVision_wvis_run_elfig.png"><img alt="WebVision wvis run elfig.png" height="311" src="../../en/files/WebVision_wvis_run_elfig.png" width="222" /></a></div></div>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.82.D0.B5.D0.BA.D1.81.D1.82.D0.B0_.28Text.29"><span class="mw-headline-number">3.2</span> Примитив текста (Text)</span></h3>
<p>Реализована поддержка элемента текста со свойствами:
</p>
<ul><li> Шрифт со свойствами: типа-класса, размера, усиления, наклонности, подчёркивания и перечёркивания. </li>
<li> Цвет текста.</li>
<li> Ориентация текста. </li>
<li> Автоматический перенос по словам. </li>
<li> Выравнивание текста по горизонтали и вертикали, со всеми вариантами.</li>
<li> Отображение фона в виде цвета и изображения.</li>
<li> Отображение бордюра вокруг текста с указанным цветом, шириной и стилем.</li>
<li> Отображение HTML.</li>
<li> Дополнение текста аргументами различного типа и свойств.</li></ul>
<p>На рисунке представлена часть экрана с кадром, содержащим примеры текста с использованием различных параметров.
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:WebVision_wvis_run_txt_ru.png"><img alt="WebVision wvis run txt ru.png" height="154" src="../files/WebVision_wvis_run_txt_ru.png" width="225" /></a></div></div>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.B0_.D1.84.D0.BE.D1.80.D0.BC.D1.8B_.28FormEl.29"><span class="mw-headline-number">3.3</span> Примитив элемента формы (FormEl)</span></h3>
<p>Реализована поддержка элементов формы на кадрах СВУ с заложенными свойства, включая следующие типы:
</p>
<ul><li> <i>Редактор строки</i> — Представлено следующими видами: "Текст", "Combo", "Целое", "Вещественное", "Время", "Дата", "Время и Дата". Все виды редактора строки поддерживают подтверждение ввода.</li>
<li> <i>Редактор текста</i> — Представляет редактор плоского текста с подтверждением или отказом от ввода.</li>
<li> <i>Поле флажка</i> — Предоставляет поле бинарного флажка.</li>
<li> <i>Кнопка</i> — Предоставляет кнопку с поддержкой цвета кнопки, изображения в кнопке и режимов:
<ul><li> стандартный;</li>
<li> переключаемый;</li>
<li> вызов меню;</li>
<li> вызов загрузки файла;</li>
<li> вызов сохранения файла.</li></ul></li>
<li> <i>Выбор из списка</i> — Предоставляет поле выбора элемента со списка указанных элементов.</li>
<li> <i>Список</i> — Предоставляет поле списка с контролем за текущим элементом.</li>
<li> <i>Дерево</i> — Предоставляет элемент дерева с возможностью выбора элементов.</li>
<li> <i>Таблица</i> — Предоставляет элемент таблицы с возможностью выбора ячеек, строк или колонок, а также редактирования содержимого ячейки.</li>
<li> <i>Слайдер</i> — Элемент слайдера.</li>
<li> <i>Прогрес-бар</i> — Полоска прогресс-бара (идентично Слайдер).</li>
<li> <i>Пароль</i> — Скрытый ввод пароля.</li></ul>
<p>Реализованы режимы "Включен" и "Активен", а также передача изменений и событий в модель данных СВУ — движок. Режим "Активный" приводит к установке курсора активности для непустого фона и дополнительных условий различных видов "Text", "Media" и "Box":
</p>
<ul><li> <i>Text</i> — не пустой текст;</li>
<li> <i>Media</i> — не пустой источник изображения.</li></ul>
<p>На рисунке представлена часть экрана с кадром, содержащим вышеперечисленные элементы формы.
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:WebVision_wvis_run_formel_ru.png"><img alt="WebVision wvis run formel ru.png" height="256" src="../files/WebVision_wvis_run_formel_ru.png" width="595" /></a></div></div>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D0.BE.D1.82.D0.BE.D0.B1.D1.80.D0.B0.D0.B6.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BC.D0.B5.D0.B4.D0.B8.D0.B0-.D0.BC.D0.B0.D1.82.D0.B5.D1.80.D0.B8.D0.B0.D0.BB.D0.BE.D0.B2_.28Media.29"><span class="mw-headline-number">3.4</span> Примитив отображения медиа-материалов (Media)</span></h3>
<p>Реализована поддержка элемента отображения медиа-материалов со свойствами:
</p>
<ul><li> Указание источника медиа данных: изображения или видео-материала.</li>
<li> Просмотр изображений большинства известных форматов с возможностью их вписывания в размер виджета.</li>
<li> Проигрывание простых анимированных форматов изображений и видео с возможностью управления скоростью проигрывания (<font color="red">недоступно</font>).</li>
<li> Проигрывание полноформатного видео и аудио (<font color="red">недоступно</font>).</li>
<li> Отображение фона в виде цвета и изображения.</li>
<li> Отображение бордюра по периметру виджета, с указанным цветом, шириной и стилем.</li>
<li> Формирования активных областей и генерация событий при их активации.</li></ul>
<p>На рисунке представлена часть экрана с кадром, содержащим примеры просмотра/проигрывания медиа-данных.
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:WebVision_wvis_run_media.png"><img alt="WebVision wvis run media.png" height="216" src="../../en/files/WebVision_wvis_run_media.png" width="245" /></a></div></div>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D0.BF.D0.BE.D1.81.D1.82.D1.80.D0.BE.D0.B5.D0.BD.D0.B8.D1.8F_.D0.B4.D0.B8.D0.B0.D0.B3.D1.80.D0.B0.D0.BC.D0.BC_.28Diagram.29"><span class="mw-headline-number">3.5</span> Примитив построения диаграмм (Diagram)</span></h3>
<p>Реализована поддержка элемента построения диаграмм для типов "График", "Спектр" и "XY", со свойствами:
</p>
<ul><li> Общие свойства типов диаграммы "График", "Спектр" и "XY":
<ul><li> возможность выбора архиватора, буфера архива или всех данных, при работе с архивными данными;</li>
<li> адаптация графика параметра к реальным значениям данных путём подстройки шкалы, в случае отсутствия прямо указанного диапазона значений;</li>
<li> управление масштабом шкалы значений путём увеличения, уменьшения и смещения;</li>
<li> широкий диапазон масштабирования и адаптации шкалы времени с автоматическим приведением запрашиваемых данных к качеству достаточному для отображения, или нужному для экспорта — указанием предельного количества измерений в пикселе;</li>
<li> отображение размерной сетки и маркеров по горизонтали и вертикали с адаптацией к диапазону отображения;</li>
<li> следящий режим за текущим временем путём периодического обновления и смещения времени диаграммы к текущему времени —  времени последних данных в буфере архива.</li></ul></li>
<li> Свойства типа диаграммы "График":
<ul><li> построение графиков до 100 параметров на одной диаграмме в процентной шкале и возможностью отображения выбранных параметров в собственной шкале;</li>
<li> построение графика для: текущих, архивных и пользовательских данных;</li>
<li> формирования промежуточного буфера отображения для текущих значений;</li>
<li> поддержка активного режима с курсором и получением значений под курсором;</li>
<li> возможность построения графиков как в линейной, так и логарифмической шкале значений.</li></ul></li>
<li> Свойства типа диаграммы "Спектр":
<ul><li> построение графиков частотного спектра параметров до 100 на одной диаграмме в процентной шкале и возможностью отображения выбранных параметров в собственной шкале;</li>
<li> построение графика для: архивных и пользовательских данных;</li>
<li> поддержка активного режима с курсором и получением значений под курсором.</li></ul></li>
<li> Свойства типа диаграммы "XY":
<ul><li> построение XY графиков параметров до 50 на одной диаграмме в процентной шкале и возможностью отображения выбранных параметров в собственной шкале;</li>
<li> построение графика для: текущих, архивных и пользовательских данных;</li>
<li> формирования промежуточного буфера отображения для текущих значений;</li>
<li> параметры распределяются парами на график, где чётные по оси Y (0,2,4...) и нечётные по оси X (1,3,5...);</li>
<li> возможность построения графиков как в линейной, так и логарифмической шкале значений.</li></ul></li></ul>
<p>На рисунке представлена часть экрана с кадром, содержащим примеры диаграмм: "График", "Спектр" и "XY".
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:WebVision_wvis_run_diag.png"><img alt="WebVision wvis run diag.png" height="448" src="../../en/files/WebVision_wvis_run_diag.png" width="348" /></a></div></div>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.84.D0.BE.D1.80.D0.BC.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_.D0.BF.D1.80.D0.BE.D1.82.D0.BE.D0.BA.D0.BE.D0.BB.D0.B0_.28Protocol.29"><span class="mw-headline-number">3.6</span> Примитив формирования протокола (Protocol)</span></h3>
<p>Реализована поддержка элемента формирования протокола со свойствами:
</p>
<ul><li> Формирование протокола из архива сообщений за указанное время и глубину.</li>
<li> Запрос данных из указанных архиваторов сообщений.</li>
<li> Выборка данных из архивов по уровню важности и шаблону категории сообщений.</li>
<li> Поддержка режима слежения за появлением сообщений в архиве сообщений.</li></ul>
<p>На рисунке представлена часть экрана с кадром, содержащим пример протокола.
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:WebVision_wvis_run_prot_ru.png"><img alt="WebVision wvis run prot ru.png" height="239" src="../files/WebVision_wvis_run_prot_ru.png" width="457" /></a></div></div>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.84.D0.BE.D1.80.D0.BC.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_.D0.BE.D1.82.D1.87.D1.91.D1.82.D0.BD.D0.BE.D0.B9_.D0.B4.D0.BE.D0.BA.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D1.86.D0.B8.D0.B8_.28Document.29"><span class="mw-headline-number">3.7</span> Примитив формирования отчётной документации (Document)</span></h3>
<p>Реализована поддержка элемента формирования отчётной документации со свойствами:
</p>
<ul><li> Гибкое формирование структуры документа на основе языка гипертекстовой разметки, что предоставляет поддержку широких возможностей форматирования документов.</li>
<li> Формирование документов по команде или расписанию, что необходимо для формирования отчётной документации в архив, с последующим просмотром архива.</li>
<li> Формирование документов в режиме реального времени, для предоставления их полностью динамически и на основе архивов за указанное время.</li>
<li> Использование атрибутов виджета для передачи в документ значений и адресов на архивы, что позволяет использовать виджет документа как шаблон, при формировании отчётов с другими входными данными.</li></ul>
<p>В основе любого документа лежит XHTML-шаблон. XHTML-шаблон это тег "body" WEB-страницы, содержащий статику документа в стандарте XHTML 1.0, и элементы исполняемых инструкций на одном из языков пользовательского программирования OpenSCADA в виде <b>&lt;?dp {procedure}&nbsp;?&gt;</b>. Результирующий документ формируется путём исполнения процедур и вставки их результата в документ.
</p><p>Источником значений исполняемых инструкций являются атрибуты виджета этого примитива, а также все механизмы языка пользовательского программирования. Атрибуты могут добавляться пользователем и линковаться на реальные атрибуты параметров или-же являться автономными, значения которых будут формироваться в скрипте виджета. В случае со слинкованными атрибутами могут извлекаться значения из истории, архива.
</p><p>На рисунке представлен кадр, содержащий пример документа.
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:WebVision_wvis_run_doc_ru.png"><img alt="WebVision wvis run doc ru.png" height="581" src="../files/WebVision_wvis_run_doc_ru.png" width="904" /></a></div></div>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D0.BA.D0.BE.D0.BD.D1.82.D0.B5.D0.B9.D0.BD.D0.B5.D1.80.D0.B0_.28Box.29"><span class="mw-headline-number">3.8</span> Примитив контейнера (Box)</span></h3>
<p>Реализована поддержка примитива контейнера, по совместительству выполняющего роль страниц проектов. Данный примитив является единственным элементом-контейнером, который может включать в себя ссылки на кадры из библиотеки, формируя тем самым пользовательские элементы нужной конфигурации. Примитив реализует предусмотренные проектом свойства. Перечислим, по пунктам, свойства данного примитива:
</p>
<ul><li> <i>Контейнер</i> — Позволяет формировать нужные объекты путём группировки базовых в рамках данного примитива.</li>
<li> <i>Страница</i> — Элементы, построенные на данном примитиве, могут выполнять роль страницы пользовательского интерфейса.</li>
<li> <i>Контейнер страниц</i> — Свойство замещения, в процессе исполнения, собственного содержимого другой страницей. Используется для формирования фреймов на страницах пользовательского интерфейса. Например, главная страница типовой SCADA-системы с объектами сигнализации строится именно таким образом.</li>
<li> <i>Фон</i> — Поддерживает возможность указания фона в виде цвета и изображения.</li>
<li> <i>Бордюр</i> — Поддерживает возможность изображения бордюра с указанным цветом, толщиной и стилем.</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id=".D0.9E.D0.B1.D1.89.D0.B0.D1.8F_.D0.BA.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D1.8F_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D1.8F"><span class="mw-headline-number">4</span> Общая конфигурация модуля</span></h2>
<p>Для конфигурации и управления этим модулем, предоставляется конфигурационная страница интерфейса управления OpenSCADA (Рис.4) где Вы можете осуществлять:
</p>
<ul><li> Контроль за активными WEB-сеансами.</li>
<li> Конфигурацию:
<ul><li> Время жизни, в минутах, и максимальное количество сеансов.</li>
<li> Время жизни, в часах, и максимальное количество страниц в кеше.</li>
<li> Уровень сжатия PNG-изображений. Наиболее оптимальным является минимальный уровень 1, поскольку без сжатия получаются большие файлы, а большие уровни сжатия создают более высокую нагрузку на процессор.</li></ul></li></ul>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:1266px;"><a class="image" href="http://oscada.org/wiki/File:WebVision_wvis_cfg_ru.png"><img class="thumbimage" height="481" src="../files/WebVision_wvis_cfg_ru.png" width="1264" /></a>  <div class="thumbcaption">Рис.4. Страница конфигурации модуля.</div></div></div></div>
<h2><span class="mw-headline" id=".D0.AD.D1.84.D1.84.D0.B5.D0.BA.D1.82.D0.B8.D0.B2.D0.BD.D0.BE.D1.81.D1.82.D1.8C_.D0.B8_.D0.BC.D0.B0.D1.81.D1.88.D1.82.D0.B0.D0.B1.D0.B8.D1.80.D1.83.D0.B5.D0.BC.D0.BE.D1.81.D1.82.D1.8C"><span class="mw-headline-number">5</span> <span id="Efficiency" title="#Efficiency">Эффективность и масштабируемость</span></span></h2>
<p><b><u>31.07.2019</u></b><br />
GROUNDS: The Web-sessions may create many objects servicing the VCA-session for generating images, processing documents and performing other background functions of the end user Web-interface. Moreover, in difference to <a href="../Modules/Vision.html" title="Special:MyLanguage/Modules/Vision">Vision</a>, the VCA-sessions may be created, closed and recreated again multiple times for different users and remote hosts. In the time the memory heap is affected by the memory fragmentation, so the program consumes more memory than at the start. The table below represents the phenomenon for different environments and the first page of <a class="external" href="http://oscada.org/wiki/Special:MyLanguage/Using/Model_AGLKS" title="Special:MyLanguage/Using/Model AGLKS">the DemoDB (AGLKS) project</a> reopening:
</p>
<table class="wikitable">

<tr>
<th> Environment </th>
<th> Initially, MB </th>
<th> Iter. 1, MB </th>
<th> Iter. 2, MB </th>
<th> Iter. 3, MB </th>
<th> Iter. 4, MB </th>
<th> Iter. 5, MB </th>
<th> Resume
</th></tr>
<tr>
<td colspan="9"> <i>Complete creation the Web- and VCA-sessions</i>
</td></tr>
<tr>
<td> Debian 10 amd64, GLibC 2.28, GCC 8.3.0 + MALLOC_ARENA_MAX=2 </td>
<td> 181 </td>
<td> 189 </td>
<td> 190 </td>
<td> 195 </td>
<td> 195 </td>
<td> 194 </td>
<td> Satiated on the iteration <b>3</b>, base consumption 8 MB, extra consumption 5 MB (<b>62.5</b>&nbsp;%), liboscada.so 3.5 MB, ui_WebVision.so 0.75 MB
</td></tr>
<tr>
<td> Debian 10 amd64, GLibC 2.28, GCC 8.3.0 + MALLOC_ARENA_MAX=1 </td>
<td> 177 </td>
<td> 185 </td>
<td> 186 </td>
<td> 186 </td>
<td> 185 </td>
<td> 186 </td>
<td> Satiated on the iteration <b>2</b>, base consumption 8 MB, extra consumption 1 MB (<b>13</b>&nbsp;%), liboscada.so 3.5 MB, ui_WebVision.so 0.75 MB
</td></tr>
<tr>
<td> Debian 9 amd64, GLibC 2.28, GCC 8.3.0 + MALLOC_ARENA_MAX=1 </td>
<td> 160 </td>
<td> 168 </td>
<td> 168 </td>
<td> 168.5 </td>
<td> 168.5 </td>
<td> 168.5 </td>
<td> Satiated on the iteration <b>1</b>, base consumption 8 MB, extra consumption 0.5 MB (<b>6</b>&nbsp;%), liboscada.so 3.5 MB, ui_WebVision.so 0.75 MB
</td></tr>
<tr>
<td> Debian 10 amd64, GLibC 2.28, GCC 8.3.0 + optional background objects in WebVision </td>
<td> 184 </td>
<td> 194.5 </td>
<td> 200 </td>
<td> 207 </td>
<td> 207 </td>
<td> 212.5 </td>
<td> Satiated on the iteration <b>5</b>, base consumption 10.5 MB, extra consumption 18 MB (<b>171</b>&nbsp;%), liboscada.so 3.5 MB, ui_WebVision.so 0.75 MB
</td></tr>
<tr>
<td> Debian 10 amd64, GLibC 2.28, GCC 8.3.0 </td>
<td> 182 </td>
<td> 191.5 </td>
<td> 199 </td>
<td> 206 </td>
<td> 212 </td>
<td> 212 </td>
<td> Satiated on the iteration <b>4</b>, base consumption 9.5 MB, extra consumption 20 MB (<b>200</b>&nbsp;%), liboscada.so 3.5 MB, ui_WebVision.so 0.74 MB
</td></tr>
<tr>
<td> Debian 9 amd64, GLibC 2.24, GCC 6.3.0 </td>
<td> 160 </td>
<td> 170 </td>
<td> 178 </td>
<td> 179 </td>
<td> 183 </td>
<td> 185 </td>
<td> Satiated on the iteration <b>5</b>, base consumption 10 MB, extra consumption 15 MB (<b>150</b>&nbsp;%), liboscada.so 3.5 MB, ui_WebVision.so 0.72 MB
</td></tr>
<tr>
<td> Debian 8 amd64, GLibC 2.19, GCC 4.9.2 </td>
<td> 125.5 </td>
<td> 133 </td>
<td> 139 </td>
<td> 139 </td>
<td> 139 </td>
<td> 139 </td>
<td> Satiated on the iteration <b>2</b>, base consumption 7.5 MB, extra consumption 6 MB (<b>80</b>&nbsp;%), liboscada.so 3.8 MB, ui_WebVision.so 0.79 MB
</td></tr>
<tr>
<td> Debian 7 amd64, GLibC 2.13, GCC 4.7.2 </td>
<td> 101 </td>
<td> 108 </td>
<td> 111 </td>
<td> 112 </td>
<td> 112 </td>
<td> 112 </td>
<td> Satiated on the iteration <b>2</b>, base consumption 7 MB, extra consumption 4 MB (<b>57</b>&nbsp;%), liboscada.so 3.4 MB, ui_WebVision.so 0.85 MB
</td></tr>
<tr>
<td> Debian 10 i386, GLibC 2.28, GCC 8.3.0 + MALLOC_ARENA_MAX=1 </td>
<td> 144 </td>
<td> 152 </td>
<td> 152 </td>
<td> 152 </td>
<td> 152 </td>
<td> 152 </td>
<td> Satiated on the iteration <b>1</b>, base consumption 8 MB, extra consumption 0 MB (<b>0</b>&nbsp;%), liboscada.so 3.7 MB, ui_WebVision.so 0.9 MB
</td></tr>
<tr>
<td> Debian 9 i386, GLibC 2.24, GCC 6.3.0 + MALLOC_ARENA_MAX=1 </td>
<td> 126.5 </td>
<td> 132.5 </td>
<td> 133 </td>
<td> 133 </td>
<td> 133 </td>
<td> 133 </td>
<td> Satiated on the iteration <b>1</b>, base consumption 6 MB, extra consumption 0.5 MB (<b>8</b>&nbsp;%), liboscada.so 3.7 MB, ui_WebVision.so 0.9 MB
</td></tr>
<tr>
<td> Debian 10 i386, GLibC 2.28, GCC 8.3.0 </td>
<td> 151 </td>
<td> 158 </td>
<td> 162.5 </td>
<td> 166 </td>
<td> 166 </td>
<td> 166 </td>
<td> Satiated on the iteration <b>3</b>, base consumption 7 MB, extra consumption 8 MB (<b>114</b>&nbsp;%), liboscada.so 3.7 MB, ui_WebVision.so 0.9 MB
</td></tr>
<tr>
<td> Debian 9 i386, GLibC 2.24, GCC 6.3.0 </td>
<td> 125 </td>
<td> 131 </td>
<td> 132 </td>
<td> 136 </td>
<td> 136 </td>
<td> 139 </td>
<td> Satiated on the iteration <b>5</b>, base consumption 6 MB, extra consumption 8 MB (<b>133</b>&nbsp;%), liboscada.so 3.7 MB, ui_WebVision.so 0.9 MB
</td></tr>
<tr>
<td> Debian 8 i386, GLibC 2.19, GCC 4.9.2 </td>
<td> 92.5 </td>
<td> 99 </td>
<td> 101.5 </td>
<td> 103 </td>
<td> 103.5 </td>
<td> 103.5 </td>
<td> Satiated on the iteration <b>2</b>, base consumption 6.5 MB, extra consumption 4.5 (<b>69</b>&nbsp;%), liboscada.so 3.6 MB, ui_WebVision.so 0.94 MB
</td></tr>
<tr>
<td> Debian 7 i386, GLibC 2.13, GCC 4.7.2 </td>
<td> 70 </td>
<td> 76 </td>
<td> 76 </td>
<td> 76 </td>
<td> 77 </td>
<td> 77 </td>
<td> Satiated on the iteration <b>2</b>, base consumption 6 MB, extra consumption 1 MB (<b>16</b>&nbsp;%), liboscada.so 3.6 MB, ui_WebVision.so 0.9 MB
</td></tr>
<tr>
<td> ALTLinux 6 i386, GLibC 2.11.3, GCC 4.5.4 </td>
<td> 69 </td>
<td> 74 </td>
<td> 75 </td>
<td> 75 </td>
<td> 75 </td>
<td> 75 </td>
<td> Satiated on the iteration <b>2</b>, base consumption 5 MB, extra consumption 1 MB (<b>20</b>&nbsp;%), liboscada.so 2.3 MB, ui_WebVision.so 0.9 MB
</td></tr>
<tr>
<td colspan="9"> <i>Creation only VCA-session, from remote connection to the visualizer server</i>
</td></tr>
<tr>
<td> Debian 10 amd64, GLibC 2.28, GCC 8.3.0 </td>
<td> 180 </td>
<td> 186 </td>
<td> 186 </td>
<td> 186 </td>
<td> 186 </td>
<td> 186 </td>
<td> Satiated on the iteration <b>1</b>, extra consumption 0.2 MB (3&nbsp;%)
</td></tr>
<tr>
<td> Debian 7 amd64, GLibC 2.13, GCC 4.7.2 </td>
<td> 100 </td>
<td> 104 </td>
<td> 105 </td>
<td> 105 </td>
<td> 105 </td>
<td> 105 </td>
<td> Satiated on the iteration <b>1</b>, extra consumption 1 MB (25&nbsp;%)
</td></tr>
<tr>
<td> Debian 10 i386, GLibC 2.28, GCC 8.3.0 </td>
<td> 148 </td>
<td> 154 </td>
<td> 155 </td>
<td> 155 </td>
<td> 155 </td>
<td> 155 </td>
<td> Satiated on the iteration <b>1</b>, extra consumption 1 MB (16&nbsp;%)
</td></tr>
<tr>
<td> Debian 7 i386, GLibC 2.13, GCC 4.7.2 </td>
<td> 69 </td>
<td> 72 </td>
<td> 72 </td>
<td> 72 </td>
<td> 72 </td>
<td> 72 </td>
<td> Satiated on the iteration <b>1</b>, extra consumption 0 MB (0&nbsp;%)
</td></tr></table>
<p>CONCLUSION: We see obvious degradation in the memory effectivity on the last Debian releases starting at Debian 8 (GLibC 2.19) on I386 and Debian 9 (GLibC 2.24) on AMD64, when the memory consumption increased up to 200% after 3,4 free-allocate iterations of the same data. To more presenting of the problem there have built follow images on the data basis:
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:667px;"><a class="image" href="http://oscada.org/wiki/File:WebVision_MemEffectAMD64.png"><img class="thumbimage" height="405" src="../../en/files/WebVision_MemEffectAMD64.png" width="665" /></a>  <div class="thumbcaption">Fig.5. Memory effectivity on AMD64 platform.</div></div></div></div>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:643px;"><a class="image" href="http://oscada.org/wiki/File:WebVision_MemEffectI386.png"><img class="thumbimage" height="401" src="../../en/files/WebVision_MemEffectI386.png" width="641" /></a>  <div class="thumbcaption">Fig.6. Memory effectivity on I386 platform.</div></div></div></div>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:607px;"><a class="image" href="http://oscada.org/wiki/File:WebVision_AbsInitSizeAMD64.png"><img class="thumbimage" height="427" src="../../en/files/WebVision_AbsInitSizeAMD64.png" width="605" /></a>  <div class="thumbcaption">Fig.7. Absolute initial size of OpenSCADA "AGLKS" on the platform AMD64.</div></div></div></div>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:606px;"><a class="image" href="http://oscada.org/wiki/File:WebVision_AbsInitSizeAI386.png"><img class="thumbimage" height="428" src="../../en/files/WebVision_AbsInitSizeAI386.png" width="604" /></a>  <div class="thumbcaption">Fig.8. Absolute initial size of OpenSCADA "AGLKS" on the platform I386.</div></div></div></div>
<p>MEASURES:
</p>
<ol><li> The optional background objects were implemented for the primitives "FormEl" and "Text", what will have most effect on mnemonic-schemes with these elements and wont have many effect for other, see the measuring data above.</li>
<li> There were some tries to tune the memory allocator of GLibC using "<a class="external text" href="https://www.gnu.org/software/libc/manual/html_node/Memory-Allocation-Tunables.html" rel="nofollow noreferrer noopener" target="_blank">Memory Allocation Tunables</a>" without any significant effect, so we will <a class="external text" href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=934080" rel="nofollow noreferrer noopener" target="_blank">notify the Debian community</a>, firstly.</li>
<li> The problem was detected in arenas of the memory allocator, setting whose number to 1 (MALLOC_ARENA_MAX=1) completely resolves the problem and the effect you may see on Figures 9, 10, for a real big application.</li></ol>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:1038px;"><a class="image" href="http://oscada.org/wiki/File:WebVision_MemoryDef.png"><img class="thumbimage" height="544" src="../../en/files/WebVision_MemoryDef.png" width="1036" /></a>  <div class="thumbcaption">Fig.9. Tendency of the memory consumption on a real big application at the default conditions.</div></div></div></div>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:1058px;"><a class="image" href="http://oscada.org/wiki/File:WebVision_MemoryArenas1.png"><img class="thumbimage" height="552" src="../../en/files/WebVision_MemoryArenas1.png" width="1056" /></a>  <div class="thumbcaption">Fig.10. Tendency of the memory consumption on a real big application at the environment variable MALLOC_ARENA_MAX=1.</div></div></div></div>
<p><b><u>20.06.2013</u></b><br />
GROUNDS: At working with the board <a class="external" href="http://oscada.org/wiki/Special:MyLanguage/Using/Kontron_MOPSlcdLX" title="Special:MyLanguage/Using/Kontron MOPSlcdLX">MOPSlcdLX</a>, attention was drawn to the heavy load of the task of forming full-size trends. As it turned out later, a large load is created by the formation of a PNG image in the GD2 library, or rather, the packing procedure of ZLib. The subject analysis of the performance of the formation of images of various formats on this board is summarized in the table below:
</p>
<table class="wikitable">

<tr>
<th> Format </th>
<th> Trend building, milliseconds </th>
<th> Converting to the image format, milliseconds </th>
<th> Size of the image, bytes
</th></tr>
<tr>
<td> PNG (0) </td>
<td> 200 </td>
<td> 800 </td>
<td> 1700365
</td></tr>
<tr>
<td> PNG (1) </td>
<td> 200 </td>
<td> 690 </td>
<td> 24000
</td></tr>
<tr>
<td> PNG (-1) </td>
<td> 200 </td>
<td> 1000 </td>
<td> 14800
</td></tr>
<tr>
<td> PNG (9) </td>
<td> 200 </td>
<td> 1900 </td>
<td> 13354
</td></tr>
<tr>
<td> JPEG (-1) </td>
<td> 200 </td>
<td> 180 </td>
<td> 53157
</td></tr>
<tr>
<td> GIF </td>
<td> 200 </td>
<td> 380 </td>
<td> 14300
</td></tr></table>
<p>CONCLUSION: As can be seen from the table above, the operation of forming PNG as a whole is resource-intensive and the most optimal level of compression is "1". At the same time, the formation of JPEG and GIF is much faster, but these image formats have a number of critical flaws, namely: JPEG does not have an alpha channel (transparency), and GIF is limited by the number of colors, which in both cases leads to loss of transparency and distortion of text smoothing and images in general.
</p><p>MEASURES: The ability to select the compression level for the generated PNG images is added, and the default value is set to the optimal level "1". The implementation of the formation of the "Diagram" primitive on the browser side in the "svg" or "canvas" tags is planned.
</p><p><br />
</p>
<h2><span class="mw-headline" id=".D0.97.D0.B0.D0.BC.D0.B5.D1.87.D0.B0.D0.BD.D0.B8.D1.8F"><span class="mw-headline-number">6</span> Замечания</span></h2>
<p>На данном этапе модуль может быть использован для построения реальных интерфейсов пользователя с поддержкой основных функций. Однако, отдельные проблемы могут возникать как по причине недоработанности, так и различия браузеров. Сейчас достаточно качественно обеспечена работоспособность на браузерах: Chromium (Google Chrome), FireFox, Opera, Konqueror.
</p>
<h2><span class="mw-headline" id=".D0.A1.D1.81.D1.8B.D0.BB.D0.BA.D0.B8"><span class="mw-headline-number">7</span> Ссылки</span></h2>
<ul><li> <a class="external" href="http://oscada.org/wiki/File:WebVision_MemAllocFree.ods" title="File:WebVision MemAllocFree.ods">Электронная таблица: Анализ эффективности распределения памяти.</a></li></ul>






</div><table style="border-top: dotted 2px #999999; margin-top: 20pt; color: gray;" width="100%"><tr><td style="text-align: left;" width="40%"><a href="http://oscada.org/wiki/Modules/WebVision/ru">Modules/WebVision/ru</a> - <a href="http://oscada.org/en/main/about-the-project/licenses/">GFDL</a></td><td style="text-align: center;">February 2020</td><td style="text-align: right;" width="40%">OpenSCADA 1+r2661</td></tr></table></body>
</html>