<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html class="client-nojs" dir="ltr" lang="en">
<head>
<meta charset="UTF-8" />
<title>Модули/Vision - OpenSCADAWiki</title>
<meta content="MediaWiki 1.26.4" name="generator" />
<link href="https://www.gnu.org/copyleft/fdl.html" rel="copyright" />
<link href="../../en/files/doc.css" rel="stylesheet" /></head>
<body><div class="floatright"><a href="http://oscada.org"><img alt="OpenSCADA" src="../../en/files/Logo-big.png" /></a></div><div id="mw_header">
			<div class="mw-indicators">
</div>
			<h1 id="firstHeading" lang="ru">Модули/Vision</h1>
		</div><div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="ru"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a class="external text" href="http://oscada.org/wiki/index.php?title=Special:Translate&amp;group=page-Modules%2FVision&amp;action=page&amp;filter=&amp;language=ru" rel="nofollow noreferrer noopener" target="_blank">translated version</a></span> of the page <a class="external" href="http://oscada.org/wiki/Modules/Vision" title="Modules/Vision">Modules/Vision</a> and the translation is 100% complete.</div><hr /><div class="mw-pt-languages" dir="ltr" lang="en"><div class="mw-pt-languages-list autonym"><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" href="../../en/Modules/Vision.html" title="Modules/Vision (100% translated)">English</a>&nbsp;• ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">российский</span>&nbsp;• ‎<a class="mw-pt-progress mw-pt-progress--complete" href="../../uk/Modules/Vision.html" title="Модулі/Vision (100% translated)">українська</a></div></div>
<table class="wikitable">

<tr>
<th> Модуль </th>
<th> Имя </th>
<th> Версия </th>
<th> Лицензия </th>
<th> Источник </th>
<th> Языки </th>
<th> Платформы </th>
<th> Тип </th>
<th> Автор </th>
<th> Описание
</th></tr>

<tr>
<td> <a href="../Modules/Vision.html" title="Special:MyLanguage/Modules/Vision">Vision</a> </td>
<td> Рабочий пользовательский интерфейс (Qt)
</td>
<td> 7.17 </td>
<td> GPL2 </td>
<td> ui_Vision.so </td>
<td> en,uk,ru,de </td>
<td> x86,x86_64,ARM
</td>
<td> Пользовательские интерфейсы </td>
<td> Роман Савоченко<br />&nbsp;&nbsp;<font size="-2"><i>Максим Лысенко (2007-2012), Ксения Яшина (2007-2008)</i></font> </td>
<td> Рабочий пользовательский интерфейс, основанный на библиотеке Qt — внешний интерфейс к движку СВУ.
<ul><li> <b>Общая трудоёмкость:</b> &gt; 50 <span title="человеко-дней, 1ЧД — 10 часов">ЧД<sup style="color: blue">[!]</sup></span></li>
<li> <b>Спонсировано, завершение отражения примитива ElFigure на 0.3 <span title="человеко-дней, 1ЧД — 10 часов">ЧД<sup style="color: blue">[!]</sup></span>:</b> ООО "СВІТоВИР"</li></ul>
</td></tr></table>
<p>Модуль предоставляет в OpenSCADA механизм конечной визуализации среды визуализации и управления (СВУ). Модуль основан на многоплатформенной библиотеке <a class="external text" href="http://qt.io" rel="nofollow noreferrer noopener" target="_blank">Qt</a> графического пользовательского интерфейса (GUI), изначально созданного фирмой <a class="external text" href="http://www.trolltech.com" rel="nofollow noreferrer noopener" target="_blank">TrollTech</a>. В своей работе модуль использует данные движка СВУ — модуль <a href="../Modules/VCAEngine.html" title="Special:MyLanguage/Modules/VCAEngine">VCAEngine</a>.
</p><p>Среда визуализации и управления (СВУ) является неотъемлемой составляющей SCADA системы. Она применяется на клиентских станциях с целью доступного предоставления информации об объекте управления и выдачи управляющих воздействий на объект. В различных практических ситуациях и условиях могут применяться СВУ, построенные на различных принципах визуализации. Например, это могут быть библиотеки виджетов Qt, GTK+, wxWidgets или гипертекстовые механизмы на основе технологий HTML, XHTML, XML, CSS и JavaScript или сторонние приложения визуализации, реализованные на различных языках программирования Java, Python и т.д. Любой из этих принципов имеет свои преимущества и недостатки, комбинация которых может стать непреодолимым препятствием в возможности использования СВУ в том или ином практическом случае. Например, технологии вроде библиотеки Qt позволяют создавать высокопроизводительные СВУ, что несомненно важно для станций оператора управления технологическим процессом (ТП). Однако, необходимость инсталляции данного клиентского ПО может сделать его использование невозможным в отдельных ситуациях. С другой стороны, Web-технологии не требуют инсталляции на клиентские системы и являются предельно многоплатформенными (достаточно указать ссылку на Web-сервер в любом Web-браузере), что наиболее важно для различных инженерных и административных станций. С другой стороны, производительность и надёжность таких интерфейсов ниже, что практически исключает их использование на станциях оператора ТП.
</p><p>OpenSCADA имеет предельно гибкую архитектуру, которая позволяет создавать внешние интерфейсы, в том числе и пользовательские, на любой основе и вкус. Например, среда конфигурации OpenSCADA доступна как на Qt-библиотеке, так и на Web-основе.
</p><p>В тоже время, независимое создание реализаций СВУ на различной основе может повлечь за собой невозможность использования данных конфигурации одной СВУ в другой. Что неудобно и ограничено с пользовательской стороны, а также накладно в плане реализации и последующей поддержки.
</p><p>С целью избежания этих проблем, а также создания в кратчайшие сроки полного спектра различных типов СВУ, основан <a class="external" href="http://oscada.org/wiki/Special:MyLanguage/Sub-projects/VCA" title="Special:MyLanguage/Sub-projects/VCA">проект создания концепции СВУ</a>. Результатом этого проекта и стал данный модуль непосредственной визуализации (на основе библиотеки Qt), модуль непосредственной визуализации <a href="../Modules/WebVision.html" title="Special:MyLanguage/Modules/WebVision">WebVision</a> и движок СВУ <a href="../Modules/VCAEngine.html" title="Special:MyLanguage/Modules/VCAEngine">VCAEngine</a>.
</p>
<div class="toc" id="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.9D.D0.B0.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D0.B5"><span class="tocnumber">1</span> <span class="toctext">Назначение</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.D0.98.D0.BD.D1.81.D1.82.D1.80.D1.83.D0.BC.D0.B5.D0.BD.D1.82_.D0.B3.D1.80.D0.B0.D1.84.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.B3.D0.BE_.D1.84.D0.BE.D1.80.D0.BC.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_.D0.B8.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D0.B0_.D0.A1.D0.92.D0.A3"><span class="tocnumber">2</span> <span class="toctext">Инструмент графического формирования интерфейса СВУ</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#.D0.A1.D1.82.D0.B8.D0.BB.D0.B8"><span class="tocnumber">2.1</span> <span class="toctext">Стили</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#.D0.A1.D0.B2.D1.8F.D0.B7.D1.8B.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D1.81_.D0.B4.D0.B8.D0.BD.D0.B0.D0.BC.D0.B8.D0.BA.D0.BE.D0.B9"><span class="tocnumber">2.2</span> <span class="toctext">Связывание с динамикой</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#.D0.98.D1.81.D0.BF.D0.BE.D0.BB.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B8.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D0.BE.D0.B2_.D0.A1.D0.92.D0.A3"><span class="tocnumber">3</span> <span class="toctext"><span>Исполнение интерфейсов СВУ</span></span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#.D0.9F.D1.80.D0.B5.D0.B4.D1.81.D1.82.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B1.D0.B0.D0.B7.D0.BE.D0.B2.D1.8B.D1.85_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.BE.D0.B2_.28.D0.BF.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2.D0.BE.D0.B2.29"><span class="tocnumber">4</span> <span class="toctext"><span>Представление базовых элементов (примитивов)</span></span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D1.80.D0.BD.D0.BE.D0.B9_.D1.84.D0.B8.D0.B3.D1.83.D1.80.D1.8B_.28ElFigure.29"><span class="tocnumber">4.1</span> <span class="toctext">Примитив элементарной фигуры (ElFigure)</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.82.D0.B5.D0.BA.D1.81.D1.82.D0.B0_.28Text.29"><span class="tocnumber">4.2</span> <span class="toctext">Примитив текста (Text)</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.B0_.D1.84.D0.BE.D1.80.D0.BC.D1.8B_.28FormEl.29"><span class="tocnumber">4.3</span> <span class="toctext">Примитив элемента формы (FormEl)</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D0.BE.D1.82.D0.BE.D0.B1.D1.80.D0.B0.D0.B6.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BC.D0.B5.D0.B4.D0.B8.D0.B0-.D0.BC.D0.B0.D1.82.D0.B5.D1.80.D0.B8.D0.B0.D0.BB.D0.BE.D0.B2_.28Media.29"><span class="tocnumber">4.4</span> <span class="toctext">Примитив отображения медиа-материалов (Media)</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D0.BF.D0.BE.D1.81.D1.82.D1.80.D0.BE.D0.B5.D0.BD.D0.B8.D1.8F_.D0.B4.D0.B8.D0.B0.D0.B3.D1.80.D0.B0.D0.BC.D0.BC_.28Diagram.29"><span class="tocnumber">4.5</span> <span class="toctext">Примитив построения диаграмм (Diagram)</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.84.D0.BE.D1.80.D0.BC.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_.D0.BF.D1.80.D0.BE.D1.82.D0.BE.D0.BA.D0.BE.D0.BB.D0.B0_.28Protocol.29"><span class="tocnumber">4.6</span> <span class="toctext">Примитив формирования протокола (Protocol)</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.84.D0.BE.D1.80.D0.BC.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_.D0.BE.D1.82.D1.87.D1.91.D1.82.D0.BD.D0.BE.D0.B9_.D0.B4.D0.BE.D0.BA.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D1.86.D0.B8.D0.B8_.28Document.29"><span class="tocnumber">4.7</span> <span class="toctext">Примитив формирования отчётной документации (Document)</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D0.BA.D0.BE.D0.BD.D1.82.D0.B5.D0.B9.D0.BD.D0.B5.D1.80.D0.B0_.28Box.29"><span class="tocnumber">4.8</span> <span class="toctext">Примитив контейнера (Box)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#.D0.92.D0.B5.D0.BA.D1.82.D0.BE.D1.80.D0.BD.D1.8B.D0.B9_.D0.B3.D1.80.D0.B0.D1.84.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B9_.D1.80.D0.B5.D0.B4.D0.B0.D0.BA.D1.82.D0.BE.D1.80"><span class="tocnumber">5</span> <span class="toctext"><span>Векторный графический редактор</span></span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#.D0.9D.D0.B0.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_2"><span class="tocnumber">5.1</span> <span class="toctext">Назначение</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#.D0.9F.D1.80.D0.B8.D0.BD.D1.86.D0.B8.D0.BF.D1.8B_.D0.B8_.D1.84.D1.83.D0.BD.D0.BA.D1.86.D0.B8.D0.B8_.D1.80.D0.B0.D0.B7.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.BD.D0.BD.D0.BE.D0.B3.D0.BE_.D0.B3.D1.80.D0.B0.D1.84.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.B3.D0.BE_.D1.80.D0.B5.D0.B4.D0.B0.D0.BA.D1.82.D0.BE.D1.80.D0.B0"><span class="tocnumber">5.2</span> <span class="toctext">Принципы и функции разработанного графического редактора</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#.D0.9E.D1.81.D0.BD.D0.BE.D0.B2.D0.BD.D1.8B.D0.B5_.D0.BF.D1.80.D0.B8.D0.BD.D1.86.D0.B8.D0.BF.D1.8B_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D1.8B_.D0.B2_.D0.B3.D1.80.D0.B0.D1.84.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.BC_.D1.80.D0.B5.D0.B4.D0.B0.D0.BA.D1.82.D0.BE.D1.80.D0.B5"><span class="tocnumber">5.3</span> <span class="toctext">Основные принципы работы в графическом редакторе</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#.D0.9A.D0.BE.D0.BD.D1.82.D0.B5.D0.BA.D1.81.D1.82.D0.BD.D0.BE.D0.B5_.D0.BC.D0.B5.D0.BD.D1.8E_.D0.B3.D1.80.D0.B0.D1.84.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.B3.D0.BE_.D1.80.D0.B5.D0.B4.D0.B0.D0.BA.D1.82.D0.BE.D1.80.D0.B0"><span class="tocnumber">5.4</span> <span class="toctext">Контекстное меню графического редактора</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#.D0.94.D0.B8.D0.B0.D0.BB.D0.BE.D0.B3_.D1.81.D0.B2.D0.BE.D0.B9.D1.81.D1.82.D0.B2_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D1.80.D0.BD.D0.BE.D0.B9_.D1.84.D0.B8.D0.B3.D1.83.D1.80.D1.8B"><span class="tocnumber">5.5</span> <span class="toctext">Диалог свойств элементарной фигуры</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-21"><a href="#.D0.9E.D0.B1.D1.89.D0.B0.D1.8F_.D0.BA.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D1.8F_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D1.8F"><span class="tocnumber">6</span> <span class="toctext"><span>Общая конфигурация модуля</span></span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id=".D0.9D.D0.B0.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D0.B5"><span class="mw-headline-number">1</span> Назначение</span></h2>
<p>Данный модуль непосредственной визуализации СВУ предназначен для формирования и исполнения интерфейсов СВУ в среде графической библиотеки Qt. Модуль СВУ, в основном, обеспечивает:
</p><p>Перечислим возможности, которые сможет и обеспечивает СВУ, построенная на основе данного проекта:
</p>
<ul><li> три уровня сложности в формировании интерфейса визуализации, позволяющие органично осваивать и применять инструментарий по принципу — от простого к сложному:</li></ul>
<dl><dd><ol><li> формирование из шаблонных кадров, путём назначения динамики и без графической конфигурации;</li>
<li> графическое формирование новых кадров, путём использования готовых элементов визуализации из библиотеки — мнемосхемы;</li>
<li> формирование, в библиотеке, новых: кадров, шаблонных кадров и элементов отображения.</li></ol></dd></dl>
<ul><li> построение интерфейсов визуализации практически любой сложности (ограниченную "дискретностью" функций примитивов), начиная от простых интерфейсов мониторинга и, заканчивая полноценными иерархическими интерфейсами, используемыми в SCADA системах;</li>
<li> предоставление различных способов формирования и конфигурации пользовательского интерфейса, основанных на различных интерфейсах графического представления (Qt, Web, ...), или-же посредством стандартного интерфейса управления OpenSCADA;</li>
<li> построение и коррекция интерфейса, установка и смена динамики в процессе исполнения;</li>
<li> построение, на уровне пользователя, новых шаблонных кадров и формирование специализированных, под область применения, библиотек кадров (например, включение кадров параметров, графиков и других элементов с увязкой их друг с другом), согласно идее вторичного использования, накопления и совершенствования;</li>
<li> построение новых пользовательских элементов визуализации и формирование специализированных, под область применения, библиотек кадров, согласно идее вторичного использования, накопления и совершенствования;</li>
<li> описание логики новых шаблонных кадров и пользовательских элементов визуализации как простыми связями, так и лаконичным, полноценным языком пользовательского программирования;</li>
<li> возможность включение, в пользовательские элементы визуализации, функций (или кадров вычисления функций) объектной модели OpenSCADA, практически связывая представление с алгоритмом вычисления; например, визуализируя библиотеку моделей аппаратов ТП, для последующего визуального построения моделей ТП;</li>
<li> разделение данных пользовательских интерфейсов и интерфейсов представления этих данных, позволяющее строить интерфейс пользователя в одной среде, а исполнять во многих других (Qt, Web, ...);</li>
<li> возможность подключения к исполняющемуся интерфейсу для наблюдения и коррекции действий; например, при обучении операторов и контроля за его действиями в реальном времени;</li>
<li> визуальное построение различных схем с наложением логических связей и последующим централизованным исполнением в фоне — визуальное построение и исполнение математических моделей, логических схем, релейных схем и иного;</li>
<li> предоставление, в OpenSCADA, функций объектного API; может использоваться для управления свойствами интерфейса визуализации из пользовательских процедур;</li>
<li> построение серверов для: кадров, элементов визуализации и проектов интерфейсов визуализации; с возможностью обслуживания множественных клиентских соединений;</li>
<li> простая организация клиентских станций на различной основе (Qt, Web, ...), с подключением к центральному серверу;</li>
<li> полноценный механизм разделения полномочий между пользователями, позволяющий создавать и исполнять проекты с различными правами доступа к его компонентам;</li>
<li> гибкое формирование правил сигнализаций и уведомления, с учётом и поддержкой различных способов уведомления;</li>
<li> поддержка пользовательского формирования палитры и шрифтовых предпочтений интерфейса визуализации, в стилях;</li>
<li> поддержка пользовательского формирования карт событий под различное оборудование управления и пользовательские предпочтения;</li>
<li> поддержка профилей пользователей, позволяющая определять различные свойства интерфейса визуализации (цветовая гамма, шрифтовые особенности, предпочтительные карты событий);</li>
<li> гибкое хранение и распространение библиотек виджетов, кадров и проектов интерфейсов визуализации в БД, поддерживаемых OpenSCADA; практически, пользователю нужно только зарегистрировать полученную БД с данными.</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id=".D0.98.D0.BD.D1.81.D1.82.D1.80.D1.83.D0.BC.D0.B5.D0.BD.D1.82_.D0.B3.D1.80.D0.B0.D1.84.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.B3.D0.BE_.D1.84.D0.BE.D1.80.D0.BC.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_.D0.B8.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D0.B0_.D0.A1.D0.92.D0.A3"><span class="mw-headline-number">2</span> Инструмент графического формирования интерфейса СВУ</span></h2>
<p>Разработка интерфейса СВУ выполняется в одном окне, реализующем многодокументный интерфейс (MDI) (рис.2.a). Данный подход позволяет одновременно открывать несколько кадров различных размеров. Использованы следующие механизмы управления разработкой: панели инструментов, пункты меню и контекстное меню. Большинство действий дублируются разными механизмами, что позволяет быстро найти инструмент удобным способом. Навигационные интерфейсы реализованы присоединяемыми окнами. Конфигурация панелей инструментов и присоединяемых окон сохраняется при выходе и восстанавливается при старте, что позволяет настраивать интерфейс под себя.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:1007px;"><a class="image" href="http://oscada.org/wiki/File:Vision_win_ru.png"><img class="thumbimage" height="582" src="../files/Vision_win_ru.png" width="1005" /></a>  <div class="thumbcaption">Рис.2.a. Окно разработки интерфейсов СВУ.</div></div></div></div>
<p>Доступ к основным компонентам СВУ производится посредством пришвартованных окон, на рисунке 2.a эти окна изображены слева. В этих окнах содержится:
</p>
<ul><li> Дерево библиотек виджетов. С помощью навигатора можно быстро найти нужный виджет или библиотеку и проделать над ними необходимые операции. Реализованы операции: добавления, удаления, копирования, вызова настройки виджетов и библиотек, и вызова визуального редактирования виджетов. Для гибкого управления поддерживается контекстное меню в составе пунктов:
<ul><li> "Новая библиотека" — создание новой библиотеки.</li>
<li> "Добавить визуальный элемент" — добавление визуального элемента в библиотеку.</li>
<li> "Удалить визуальный элемент" — удаление визуального элемента из библиотеки.</li>
<li> "Очистить визуальный элемент" — очистка визуального элемента с наследованием изменённых свойств или установкой их по умолчанию.</li>
<li> "Опустить изменения визуального элемента" — опускание изменений визуального элемента к его родителю, которые будут использованы другими наследующими.</li>
<li> "Свойства визуального элемента" — вызов конфигурации визуального элемента.</li>
<li> "Редактировать визуальный элемент" — вызов визуального редактирование элемента.</li>
<li> "Копировать визуальный элемент" — копирование визуального элемента, в момент вставки.</li>
<li> "Вырезать визуальный элемент" — вырезание-перемещение визуального элемента, в момент вставки.</li>
<li> "Вставить визуальный элемент" — вставка визуального элемента.</li>
<li> "Загрузить из БД" — загрузка данных визуального элемента из БД.</li>
<li> "Сохранить в БД" — сохранение данных визуального элемента в БД.</li>
<li> "Руководство на ..." — вызов руководства на выбранную библиотеку.</li>
<li> "Обновить библиотеки" — перечитывание конфигурации и состава библиотек из модели данных.</li></ul></li>
<li> Дерево страниц проектов. Предусматривает механизм "Перетащи и брось" для формирования пользовательских кадров на основе элементов библиотек. Для гибкого управления поддерживает контекстное меню в составе пунктов:
<ul><li> "Запустить исполнение проекта" — запуск исполнения выбранного проекта.</li>
<li> "Новый проект" — создание нового проекта.</li>
<li> "Добавить визуальный элемент" — добавление визуального элемента в проект-страницу.</li>
<li> "Удалить визуальный элемент" — удаление визуального элемента из проекта-страницы.</li>
<li> "Очистить визуальный элемент" — очистка визуального элемента с наследованием изменённых свойств или установкой их по умолчанию.</li>
<li> "Опустить изменения визуального элемента" — опускание изменений визуального элемента к его родителю, которые будут использованы другими наследующими.</li>
<li> "Свойства визуального элемента" — конфигурация визуального элемента.</li>
<li> "Редактировать визуальный элемент" — визуальное редактирование элемента.</li>
<li> "Копировать визуальный элемент" — копирование визуального элемента, в момент вставки.</li>
<li> "Вырезать визуальный элемент" — вырезание-перемещение визуального элемента, в момент вставки.</li>
<li> "Вставить визуальный элемент" — вставка визуального элемента.</li>
<li> "Загрузить из БД" — загрузка данных визуального элемента из БД.</li>
<li> "Сохранить в БД" — сохранение данных визуального элемента в БД.</li>
<li> "Обновить проекты" — перечитывание конфигурации и состава проектов из модели данных.</li></ul></li>
<li> Панель управления атрибутами виджетов;</li>
<li> Панель управления внешними связи виджетов.</li></ul>
<p>В основном пространстве рабочего окна размещаются окна страниц проектов, кадров библиотек виджетов, пользовательских элементов и элементов примитивов на момент их визуального редактирования.
</p><p>Наверху рабочего окна содержится меню. В меню размещены все инструменты, необходимые для разработки интерфейсов СВУ. Меню имеет следующую структуру:
</p>
<ul><li> "Файл" — Общие операции.
<ul><li> "Загрузить из БД" — загрузка данных визуального элемента из БД.</li>
<li> "Принудительно загрузить из БД" — принудительная загрузка данных визуального элемента из БД, не только когда изменено.</li>
<li> "Сохранить в БД" — сохранение данных визуального элемента в БД.</li>
<li> "Принудительно сохранить в БД" — принудительное сохранение данных визуального элемента в БД, не только когда изменено.</li>
<li> "Закрыть" — закрытие окна редактора.</li>
<li> "Выход" — выход из программы.</li></ul></li>
<li> "Редактирование" — Операции редактирования визуальных элементов.    
<ul><li> "Отменить изменения визуального элемента" — осуществление отмены(отката) последних изменений визуального элемента.</li>
<li> "Повторить изменения визуального элемента" — осуществление повтора изменений визуального элемента.</li>
<li> "Копировать визуальный элемент" — копирование визуального элемента, в момент вставки.</li>
<li> "Вырезать визуальный элемент" — вырезание-перемещение визуального элемента, в момент вставки.</li>
<li> "Вставить визуальный элемент" — вставка визуального элемента.</li></ul></li>
<li> "Проект" — Операции над проектами.
<ul><li> "Запустить проект" — запуск исполнения выбранного проекта.</li>
<li> "Новый проект" — создание нового проекта.</li>
<li> "Добавить визуальный элемент" — добавление визуального элемента в проект.</li>
<li> "Удалить визуальный элемент" — удаление визуального элемента из проекта.</li>
<li> "Очистить визуальный элемент" — очистка визуального элемента с наследованием изменённых свойств или установкой их по умолчанию.</li>
<li> "Опустить изменения визуального элемента" — опускание изменений визуального элемента к его родителю, которые будут использованы другими наследующими.</li>
<li> "Свойства визуального элемента" — вызов конфигурации визуального элемента.</li>
<li> "Редактировать визуальный элемент" — вызов визуального редактирования элемента.</li></ul></li>
<li> "Виджет" — Операции над виджетами и библиотеками виджетов.
<ul><li> "Новая библиотека" — создание новой библиотеки.</li>
<li> "Добавить визуальный элемент" — добавление визуального элемента в библиотеку.</li>
<li> "Удалить визуальный элемент" — удаление визуального элемента из библиотеки.</li>
<li> "Очистить визуальный элемент" — очистка визуального элемента с наследованием изменённых свойств или установкой их по умолчанию.</li>
<li> "Опустить изменения визуального элемента" — опускание изменений визуального элемента к его родителю, которые будут использованы другими наследующими.</li>
<li> "Свойства визуального элемента" — вызов конфигурации визуального элемента.</li>
<li> "Редактировать визуальный элемент" — вызов визуального редактирования элемента.</li>
<li> "Вид" — управление расположением визуальных элементов на кадрах.
<ul><li> "Поднять" — поднятие виджета выше.</li>
<li> "Опустить" — опускание виджета ниже.</li>
<li> "Поднять наверх" — поднятие виджета на самый верх.</li>
<li> "Опустить вниз" — опускание виджета на самый низ.</li>
<li> "Выравнять слева" — выравнивание виджета слева.</li>
<li> "Выровнять в центре вертикально" — выравнивание виджета вертикально в центре.</li>
<li> "Выровнять справа" — выравнивание виджета справа.</li>
<li> "Выровнять сверху" — выравнивание виджета сверху.</li>
<li> "Выровнять в центре горизонтально" — выравнивание виджета горизонтально в центре.</li>
<li> "Выровнять снизу" — выравнивание виджета снизу.</li></ul></li>
<li> "Библиотека: {Имя библиотеки}" — пункты меню доступа к кадрам-виджетам, содержащимся в библиотеке.</li></ul></li>
<li> "Окно" — Управление MDI окнами.
<ul><li> "Закрыть" — закрытие активное окно.</li>
<li> "Закрыть все" — закрытие всех окон.</li>
<li> "Уложить" — укладка всех окон для одновременной видимости.</li>
<li> "Каскадировать" — расположение всех окон каскадом.</li>
<li> "Следующее" — активация следующего окна.</li>
<li> "Предыдущее" — активация предыдущего окна.</li>
<li> "Виджет: {Имя виджета}" — пункты активации конкретного окна.</li></ul></li>
<li> "Вид" — Управление видимостью рабочего окна и панелей на нём.
<ul><li> "Весь экран" — развертывание рабочего окна на весь экран.</li>
<li> "Панель визуальных элементов" — панель управления визуальными элементами.</li>
<li> "Функции размещения виджетов" — панель управления расположением виджетов на кадре.</li>
<li> "Инструменты элементарных фигуры" — дополнительная панель инструментов редактирования примитива элементарной фигуры ("ElFigure").</li>
<li> "Проекты" — пришвартованное окно управления деревом проектов.</li>
<li> "Виджеты" — пришвартованное окно управления деревом библиотек виджетов.</li>
<li> "Атрибуты" — пришвартованное окно диспетчера атрибутов.</li>
<li> "Связи" — пришвартованное окно диспетчера связей.</li>
<li> "Библиотека: {Имя библиотеки}" — управление видимостью панелей библиотек виджетов.</li></ul></li>
<li> "Помощь" — Помощь по OpenSCADA и этому модулю.
<ul><li> "Про" — информация про данный модуль.</li>
<li> "Про Qt" — информация о библиотеке Qt, используемой модулем.</li>
<li> "Руководство на 'Vision'" — вызов руководства на этот модуль.</li>
<li> "Руководство на 'VCAEngine'" — вызов руководства на движок среды визуализации и управления.</li>
<li> "Руководство на 'OpenSCADA 0.9.0'" — вызов руководства на OpenSCADA в целом.</li>
<li> "Руководство на ..." — вызов руководства на выбранную библиотеку.</li>
<li> "Что это" — запрос описания элементов интерфейса окна.</li></ul></li>
<li> "QTStarter" — Пункт меню, созданный модулем запуска модулей библиотеки Qt. Содержит кнопки запуска UI модулей OpenSCADA, основанных на библиотеке Qt. С помощью этого пункта можно открыть несколько экземпляров окон данного модуля или других модулей.</li></ul>
<p>Сверху, под меню, или по сторонам располагаются панели инструментов. Панели могут быть скрыты или расположены, что управляется в пункте меню "Вид". Предусмотрены следующие панели инструментов:
</p>
<ul><li> "Панель визуальных элементов" — Панель управления визуальными элементами:
<ul><li> "Запуск исполнения проекта для выбранного элемента" — производит запуск проекта на исполнение и активацию выбранной страницы проекта.</li>
<li> "Загрузить данные элемента из БД" — выполняет загрузку данных выбранного(ых) элемента из БД.</li>
<li> "Сохранить данные элемента в БД" — выполняет сохранение данных выбранного(ых) элемента в БД.</li>
<li> "Новый проект" — создание нового проекта.</li>
<li> "Новая библиотека виджетов" — создание новой библиотеки виджетов.</li>
<li> "Добавить визуальный элемент" — добавление визуального элемента.</li>
<li> "Удалить визуальный элемент" — удаление визуального элемента.</li>
<li> "Свойства визуального элемента" — вызов конфигурации визуального элемента.</li>
<li> "Редактировать визуальный элемент" — вызов визуального редактирования элемента.</li>
<li> "Отменить изменения визуального элемента" — осуществление отмены(отката) последних изменений визуального элемента.</li>
<li> "Повторить изменения визуального элемента" — осуществление повтора изменений визуального элемента.</li>
<li> "Копировать визуальный элемент" — копирование визуального элемента, в момент вставки.</li>
<li> "Вырезать визуальный элемент" — вырезание-перемещение визуального элемента, в момент вставки.</li>
<li> "Вставить визуальный элемент" — вставка визуального элемента.</li></ul></li>
<li> "Функции размещения виджетов" — Панель управления расположением виджетов на кадре:
<ul><li> "Поднять" — поднятие виджета выше.</li>
<li> "Опустить" — опускание виджета ниже.</li>
<li> "Поднять наверх" — поднятие виджета на самый верх.</li>
<li> "Опустить вниз" — опускание виджета на самый низ.</li>
<li> "Выравнять слева" — выравнивание виджета слева.</li>
<li> "Выровнять в центре вертикально" — выравнивание виджета вертикально в центре.</li>
<li> "Выровнять справа" — выравнивание виджета справа.</li>
<li> "Выровнять сверху" — выравнивание виджета сверху.</li>
<li> "Выровнять в центре горизонтально" — выравнивание виджета горизонтально в центре.</li>
<li> "Выровнять снизу" — выравнивание виджета снизу.</li></ul></li>
<li> "Инструменты элементарных фигуры" — Дополнительная панель инструментов редактирования примитива элементарной фигуры ("ElFigure"):
<ul><li> "Возврат курсора" — возврат к курсору для действий над фигурами на виджете.</li>
<li> "Добавить линию" — добавление линии к элементарной фигуре.</li>
<li> "Добавить дугу" — добавление дуги к элементарной фигуре.</li>
<li> "Добавить кривую Безье" — добавление кривой Безье к элементарной фигуре.</li>
<li> "Привязки" — включение привязок у элементарной фигуры.</li></ul></li>
<li> "Библиотека: {Имя библиотеки}" — Содержимое панели зависит от содержимого библиотеки и включает кнопки вызова элементов библиотеки.</li></ul>
<p>Внизу окна разработки СВУ располагается строка статуса. С правой стороны строки статуса размещаются индикаторы визуального масштаба редактируемого кадра, режима изменения размера элементов, режима текущей станции движка СВУ и пользователя, от имени которого ведётся разработка интерфейса СВУ. По двойному клику на индикаторе пользователя можно пользователя сменить, введя новое имя и пароль пользователя. В главное поле строки статуса выводятся различные информационные сообщения и сообщения помощи.
</p><p>Для редактирования свойств визуальных элементов предусмотрено два диалога. Первый диалог позволяет редактировать свойства контейнеров визуальных элементов (рис.2.b) — библиотек виджетов и проектов. Второй диалог для редактирования свойств самих визуальных элементов (рис.2.d). Изменения, внесённые в диалогах, сразу-же попадают в движок СВУ. Для сохранения этих изменения в БД, или восстановления из БД, необходимо воспользоваться соответствующими инструментами главного окна разработки.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:708px;"><a class="image" href="http://oscada.org/wiki/File:Vision_wlbpg_ru.png"><img class="thumbimage" height="632" src="../files/Vision_wlbpg_ru.png" width="706" /></a>  <div class="thumbcaption">Рис.2.b. Диалог редактирования свойств контейнеров визуальных элементов.</div></div></div></div>
<p>С помощью главной вкладки этого диалога можно установить:
</p>
<ul><li> Состояние контейнера элементов, а именно: "Включен", БД контейнера (с отслеживанием наличия данных в различных хранилищах и предоставлением последовательного удаления дубликатов), счётчик использования, дата и время последней модификации.</li></ul>
<dl><dd> <a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../../en/files/At.png" width="22" /></a> Объекты всё ещё поддерживают определение избыточного адреса хранилища с таблицей, до того момента как вы переименуете её в стандартную форму "<b>wlb_{ObjID}</b>" для библиотек виджетов и "<b>prj_{ObjID}</b>" для проектов.</dd></dl>
<ul><li> Идентификатор, имя и описание контейнера.</li>
<li> Для проекта:</li></ul>
<dl><dd><ul><li> пользователь, группа пользователей и доступ для: пользователя, группы пользователей и всех остальных;</li>
<li> период вычисления проекта при исполнении.</li></ul></dd></dl>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:883px;"><a class="image" href="http://oscada.org/wiki/File:Vision_wlbpg_diag_ru.png"><img class="thumbimage" height="394" src="../files/Vision_wlbpg_diag_ru.png" width="881" /></a>  <div class="thumbcaption">Рис.2.с. Вкладка "Диагностика" проекта.</div></div></div></div>
<p>В этой вкладке Вы можете, для получения диагностических сообщений: выбрать время, освежить к текущему времени и выбрать размер-глубину.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:713px;"><a class="image" href="http://oscada.org/wiki/File:Vision_wdg_ru.png"><img class="thumbimage" height="770" src="../files/Vision_wdg_ru.png" width="711" /></a>  <div class="thumbcaption">Рис.2.d. Диалог редактирования свойств визуальных элементов.</div></div></div></div>
<p>С помощью главной вкладки этого диалога можно установить:
</p>
<ul><li> Состояние элемента, а именно: "Включен", родительский виджет, тип страницы (для страниц проекта), счётчик использования, дата и время последней модификации.</li>
<li> Идентификатор, корень, путь, имя и описание элемента.</li></ul>
<p>Диалог редактирования свойств контейнеров визуальных элементов содержит две вкладки: вкладку конфигурации основных параметров (рис.2.b) и вкладку конфигурации ресурсов контейнеров (рис.2.e).
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:544px;"><a class="image" href="http://oscada.org/wiki/File:Vision_wlbpg_mime_ru.png"><img class="thumbimage" height="632" src="../files/Vision_wlbpg_mime_ru.png" width="542" /></a>  <div class="thumbcaption">Рис.2.e. Вкладка редактирования ресурсов контейнера визуальных элементов.</div></div></div></div>
<p>Диалог редактирования свойств визуальных элементов содержит четыре вкладки: вкладку конфигурации основных параметров (рис.2.b), вкладку атрибутов элемента (рис.2.f), вкладку обработки элемента (рис.2.g) и вкладку связей элемента (рис.2.h). На разных уровнях иерархии визуальных элементов какие-то вкладки могут быть доступны, а какие-то нет.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:658px;"><a class="image" href="http://oscada.org/wiki/File:Vision_wdg_attr_ru.png"><img class="thumbimage" height="553" src="../files/Vision_wdg_attr_ru.png" width="656" /></a>  <div class="thumbcaption">Рис.2.f. Вкладка атрибутов диалога редактирования свойств визуального элемента.</div></div></div></div>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:879px;"><a class="image" href="http://oscada.org/wiki/File:Vision_wdg_prc_ru.png"><img class="thumbimage" height="660" src="../files/Vision_wdg_prc_ru.png" width="877" /></a>  <div class="thumbcaption">Рис.2.g. Вкладка обработки диалога редактирования свойств визуального элемента.</div></div></div></div>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:683px;"><a class="image" href="http://oscada.org/wiki/File:Vision_wdg_lnk_ru.png"><img class="thumbimage" height="578" src="../files/Vision_wdg_lnk_ru.png" width="681" /></a>  <div class="thumbcaption">Рис.2.h. Вкладка связей диалога редактирования свойств визуального элемента.</div></div></div></div>
<h3><span class="mw-headline" id=".D0.A1.D1.82.D0.B8.D0.BB.D0.B8"><span class="mw-headline-number">2.1</span> Стили</span></h3>
<p>Известно, что человек может иметь индивидуальные особенности восприятия графической информации. Если эти особенности не учитывать то можно получить неприятие и отторжение пользователя к интерфейсу ВУ. Такое неприятие и отторжение может привести к фатальным ошибкам при управлении ТП, а также травмировать человека постоянной работой с интерфейсом. В SCADA системах приняты соглашения, которые регламентируют требования по созданию унифицированного интерфейса ВУ, нормально воспринимаемого большинством людей. При этом, практически отсутствует учёт особенностей людей с некоторыми отклонениями.
</p><p>С целью учесть это обстоятельство, и предоставить возможность централизованно и просто изменять визуальные свойства интерфейса, проектом реализуется менеджер стилей интерфейса визуализации.
</p><p>Пользователем может быть создано множество стилей, каждый из которых будет хранить цветовые, шрифтовые и другие свойства элементов кадра. Простая смена стиля позволит быстро преобразить интерфейс ВУ, а возможность назначения индивидуального стиля для пользователя позволит учесть его особенности.
</p><p>Для реализации этой возможности, при создании кадров, необходимо для свойств цвета, шрифта и других установить параметр "Конфигурация" (таблицы во вкладке "Обработка") в значение "Из стиля". А в параметре "Конфигурационный шаблон" указать идентификатор поля стиля. Далее, это поле автоматически появится в менеджере стилей и его можно будет там менять. Менеджер стилей доступен на странице конфигурации проекта во вкладке "Стили". На этой вкладке можно стили создавать, удалять и изменять, удалять их поля.
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:Vision_prj_stl_ru.png"><img alt="Vision prj stl ru.png" height="601" src="../files/Vision_prj_stl_ru.png" width="542" /></a></div></div>
<p>В целом, стили доступны начиная с уровня проектов. На уровне библиотек виджетов можно только определять поля стилей у виджетов. На уровне проекта, при выборе стиля, включается работа со стилями, что предполагает доступ к полям стилей вместо непосредственных значений атрибутов. Фактически, это означает, что при чтении или записи атрибута виджета, указанные операции будут осуществляться над соответствующим полем выбранного стиля.
</p><p>При запуске проекта на исполнения будет использован установленный в проекте стиль. В последствии, пользователь может выбрать стиль из перечня доступных. Выбранный пользователем стиль будет сохранён и использован при следующем запуске проекта.
</p><p><br />
</p>
<h3><span class="mw-headline" id=".D0.A1.D0.B2.D1.8F.D0.B7.D1.8B.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D1.81_.D0.B4.D0.B8.D0.BD.D0.B0.D0.BC.D0.B8.D0.BA.D0.BE.D0.B9"><span class="mw-headline-number">2.2</span> Связывание с динамикой</span></h3>
<p>Для предоставления в интерфейс визуализации актуальных данных, должны использоваться данные подсистемы "Сбор данных (DAQ)". Природа этих данных следующая:
</p>
<ol><li> параметры, содержащие некоторое количество атрибутов;</li>
<li> атрибуты параметра могут предоставлять данные пяти типов: Логический, Целый, Вещественный, Строковый и Объект;</li>
<li> атрибуты параметра могут иметь архив (историю);</li>
<li> атрибуты параметра могут быть на чтение, запись и с полным доступом.</li></ol>
<p>Учитывая первый пункт, нужно обеспечить возможность группового назначения ссылки. Для этого используем <a href="../DAQ.html#LogicLev" title="Special:MyLanguage/Documents/DAQ">концепцию логического уровня</a>.
</p><p>Связи обеспечивают прозрачное преобразование типов и не требуют специальной конфигурации.
</p><p>Для удовлетворения возможности доступа к архивам связи выполняют проверку типа атрибута и, в случае подключения к "Адресу", в значение помещается адрес связи.
</p><p>В терминах СВУ, динамические связи и конфигурация динамики являются одним процессом, для описания конфигурации которого предусматривается вкладка "Обработка" виджетов (рис.2.f). Вкладка содержит таблицу конфигурации свойств атрибутов и текст процедуры вычисления виджета.
</p><p>Кроме полей конфигурации атрибутов, в таблице предусматривается колонка "Обработка", для избирательного использования атрибутов в вычислительной процедуре виджета, и колонки "Конфигурация", "Конфигурационный шаблон" для описания конфигурации связей.
</p><p>Колонка "Конфигурация" позволяет указать тип связи атрибута виджета:
</p>
<ul><li> <i>Постоянная</i> — во вкладке связей виджета появляется поле указания постоянной, например, особого цвета или заголовка шаблонных кадров.</li>
<li> <i>Входная связь</i> — связь с динамикой только для чтения.</li>
<li> <i>Выходная связь</i> — связь с динамикой только для записи.</li>
<li> <i>Полная связь</i> — полная связь с динамикой, чтение и запись.</li>
<li> <i>Из стиля</i> — брать значение из стиля проекта.</li></ul>
<p>Колонка "Конфигурационный шаблон" позволяет связать группы динамических атрибутов. Например, это могут быть разные типы параметров подсистемы "DAQ" и другие виджеты интерфейса. При корректном формировании этого поля работает механизм автоматического назначения атрибутов, при указании только параметра подсистемы "DAQ" или виджета интерфейса, что упрощает и ускоряет процесс конфигурации. Значение этой колонки имеет следующий формат:
</p>
<ul><li> <i>Для постоянной:</i> прямое значение атрибута.</li>
<li> <i>Для связи:</i> "<b>{параметр}|{идентификатор}</b>", где:
<ul><li> <i>параметр</i> — группа атрибутов;</li>
<li> <i>идентификатор</i> — идентификатор атрибута; именно значение в этом поле сопоставляется с атрибутами параметров DAQ после указания групповой связи, при автоматическом связывании;</li></ul></li>
<li> <i>Для стиля:</i> идентификатор-имя поля стиля.</li></ul>
<p>Установка связей может быть нескольких типов, который определяется префиксом:
</p>
<ul><li> <i>val:</i> — Прямая загрузка значения через механизм связей. Например, связь "val:100" загружает значение 100 в атрибут виджета. Часто используется в случае отсутствия конечной точки связи, с целью прямой установки значения.</li>
<li> <i>prm:</i> — Связь на атрибут параметра или параметр, в целом, для группы атрибутов подсистемы "Сбор данных". Например, связь "prm:/LogicLev/experiment/Pi/var" осуществляет доступ атрибута виджета к атрибуту параметра подсистемы "Сбор данных". Знак "(+)", в конце адреса, указывает на успешную линковку и присутствие целевого объекта. Для атрибутов объектного типа допустим иерархический доступ к конкретному свойству объекта, путём указания его пути через символ '#', например: "prm:/LogicLev/experiment/Pi/var#pr1/pr2".</li>
<li> <i>wdg:</i> — Связь на атрибут другого виджета или виджет, в целом, для группы атрибутов. Например, связь "wdg:/ses_AGLKS/pg_so/pg_1/pg_ggraph/pg_1/a_bordColor" осуществляет доступ атрибута одного виджета к атрибуту другого. Поддерживаются как абсолютные, так и относительные пути связей. Точкой отсчёта адреса абсолютной связи выступает объект корня модуля "VCAEngine", а значит — первым элементом абсолютного адреса является идентификатор сеанса или проекта. Первый элемент, на стороне сеанса, опускается, поэтому связи, установленные в проекте, там работают. Относительные связи берут отсчёт от виджета, где связь указана. Специальным элементом относительной связи является элемент вышестоящего узла "..".</li>
<li> <i>arh:</i> — Особый тип связи, доступный только для отдельного атрибута типа "Адрес", который позволяет подключиться прямо к архиву значений ("arh:CPU_load"). Может быть полезен для указания архива в качестве источника данных примитива "Диаграмма".</li></ul>
<p>Обработка связей происходит с периодичностью вычисления виджета, в порядке:
</p>
<ul><li> получение данных входных связей;</li>
<li> выполнение вычисления процедуры виджета;</li>
<li> передача значений по выходным связям.</li></ul>
<p>На рисунке 2.g представлена вкладка связей с возможностью группового и индивидуального назначением атрибутов.
</p><p>При размещении виджета в контейнер виджетов все связи исходного виджета добавляются в список результирующих связей контейнера виджетов, однако, только на глубину в один уровень вложения.
</p><p>Из вышесказанного видно, что связи устанавливаются пользователем в процессе конфигурации интерфейса. Однако, для предоставления возможности создания кадров общего назначения с функцией предоставления детализированных данных разных источников одного типа, необходим механизм <span id="DynLink" title="#DynLink">динамической установки связей</span>. Такой механизм предусматривается:
</p>
<ul><li> резервированием ключевого идентификатора "<b>&lt;page&gt;</b>" для группы атрибутов связей у кадров общего назначения;</li>
<li> динамическим назначением связей с идентификатором "<b>&lt;page&gt;</b>", в процессе открытия кадра общего назначения сигналом от другого виджета.</li></ul>
<p>Рассмотрим пример, когда имеется кадр общего назначения "Панель контроля графиком" и множество "Графиков" на разных кадрах. "Панель контроля графиком" имеет связи с шаблонами:
</p>
<ul><li> tSek -&gt; "&lt;page&gt;|tSek"</li>
<li> tSize -&gt; "&lt;page&gt;|tSize"</li>
<li> trcPer -&gt; "&lt;page&gt;|trcPer"</li>
<li> valArch -&gt; "&lt;page&gt;|valArch"</li></ul>
<p>При этом, каждый виджет "График" имеет атрибуты "tSek", "tSize", "trcPer" и "valArch". При вызове сигнала открытия "Панели контроля графиком" из любого виджета "График", происходит связывания атрибутов "Панели контроля графиком" с атрибутами виджета "График", согласно шаблону. Как результат, все изменения на "Панели контроля графиком" будут отражаться на графике, посредством этих связей.
</p><p>Если у виджета "График" присутствуют внешние связи на параметры подсистемы "Сбор данных", связи "Панели контроля графиком" будут устанавливаться на внешний источник. Кроме того, если у "Панели контроля графиком" будут заявлены связи на атрибуты, отсутствующие непосредственно у виджета "График", то будет производится поиск наличия таких атрибутов у внешнего источника — первого на который установлена прямая связь, выполняя, тем самым, дополнение недостающих связей.
</p><p>Для наглядного изображения этого механизма приведена таблица.
</p><p><b>Таблица.</b> Механизм динамической линковки.
</p>
<table class="wikitable">

<tr>
<th> Атрибуты "Панели контроля графиком" (шаблон динамической связи) </th>
<th> Атрибуты "Графика" </th>
<th> Атрибуты внешнего "Параметра" </th>
<th> Результирующая связь или значение связующегося атрибута
</th></tr>
<tr>
<td> tSek (&lt;page&gt;|tSek) </td>
<td> tSek </td>
<td> - </td>
<td> "График".tSek
</td></tr>
<tr>
<td> tSize (&lt;page&gt;|tSize) </td>
<td> tSize </td>
<td> - </td>
<td> "График".tSize
</td></tr>
<tr>
<td> trcPer (&lt;page&gt;|trcPer) </td>
<td> trcPer </td>
<td> - </td>
<td> "График".trcPer
</td></tr>
<tr>
<td> valArch (&lt;page&gt;|valArch) </td>
<td> valArch </td>
<td> - </td>
<td> "График".valArch
</td></tr>
<tr>
<td> var (&lt;page&gt;|var) </td>
<td> var </td>
<td> var </td>
<td> "Параметр".var
</td></tr>
<tr>
<td> ed (&lt;page&gt;|ed) </td>
<td> - </td>
<td> ed </td>
<td> "Параметр".ed
</td></tr>
<tr>
<td> max (&lt;page&gt;|max) </td>
<td> - </td>
<td> - </td>
<td> EVAL
</td></tr>
<tr>
<td> min (&lt;page&gt;|min) </td>
<td> - </td>
<td> - </td>
<td> EVAL
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B8.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D0.BE.D0.B2_.D0.A1.D0.92.D0.A3"><span class="mw-headline-number">3</span> <span id="RunTime" title="#RunTime">Исполнение интерфейсов СВУ</span></span></h2>
<p>Исполнение интерфейса СВУ заключается в запуске нового сеанса проекта или подключении к существующему, на уровне движка СВУ. Далее, модуль непосредственной визуализации отражает и управляет данными сеанса. Главное окно режима исполнения данного модуля имеет вид, представленный на рисунке 3.
</p><p>Реализовано обновление содержимого открытых страниц интерфейса визуализации с периодичностью исполнения визуализируемого сеанса проекта визуализации. В процессе обновления выполняется:
</p>
<ul><li> запрос у модели списка открытых страниц, с признаком модификации страницы, и проверка соответствия реально открытых страниц этому списку;</li>
<li> запрос ветви данных модифицированных страниц;</li>
<li> обновление содержимого модифицированных страниц и их виджетов в соответствии с полученными измененными данными.</li></ul>
<p>По закрытию окна "Исполнения" производится закрытие сеанса проекта в модели данных, если сеанс не фоновый и это было последнее подключение.
</p><p>Механизм запроса только изменённых данных основан на абсолютном счётчике исполнения сессии. При внесении реальных изменений в атрибуты виджетов выполняется запоминание значения этого счётчика, что и позволяет идентифицировать изменённые атрибуты. Такой подход позволяет повысить производительность и уменьшить трафик, в случае доступа к движку СВУ через сеть.
</p><p>Иерархически, модулем предусматривается возможность размещения страниц проекта как на главном окне исполнения (рис.3), так и вкладывая внутрь виджетов контейнеров, а также путем открытия дополнительных окон поверх основного.
</p><p>При разворачивании главного окна исполнения, или переходе в полноэкранный режим, выполняется масштабирование содержимого страницы интерфейса СВУ, заполняя всё пространство окна и, позволяя, тем самым, исполнять проекты, разработанные на одном разрешении экрана, на разных разрешениях.
</p><p>Главное окно состоит из меню (сверху) строки статуса (снизу) и исполняемого содержимого сеанса между ними. Меню, в режиме исполнения, позиционируется как инструмент администратора OpenSCADA, содержащий общесистемные функции, и доступно только привилегированным пользователям, состоящим в группе "root". Меню имеет следующую структуру:
</p>
<ul><li> "Файл" — Общие операции.
<ul><li> "Печать" — печать:
<ul><li> "Страница" — страницу пользовательского интерфейса;</li>
<li> "Диаграмма" — диаграмму на пользовательском интерфейсе;</li>
<li> "Документ" — документ на пользовательском интерфейсе.</li></ul></li>
<li> "Экспорт" — экспорт:
<ul><li> "Страница" — страницу пользовательского интерфейса, в изображение;</li>
<li> "Диаграмма" — диаграмму на пользовательском интерфейсе, в изображение и CSV;</li>
<li> "Документ" — документ на пользовательском интерфейсе, в HTML и CSV для экспортных таблиц;</li>
<li> "Таблица" — таблица вида "Таблица" примитива "FormEl" на пользовательском интерфейсе, в CSV.</li></ul></li>
<li> "Закрыть" — закрыть окно редактора.</li>
<li> "Выход" — выход из программы.</li></ul></li>
<li> "Нарушение" — Квитация нарушений:
<ul><li> "Уровень нарушения" — все нарушения;</li>
<li> "Свет" — уведомление светом;</li>
<li> "Гудок" — уведомление гудком;</li>
<li> "Звук/речь" — уведомление звуком/речью.</li></ul></li>
<li> "Вид" — Параметры отображения сеанса проекта.
<ul><li> "Весь экран" — переключатель полноэкранного режима исполнения.</li></ul></li>
<li> "Помощь" — Помощь по проекту СВУ, этому модулю и OpenSCADA.
<ul><li> "Про" — информация про данный модуль.</li>
<li> "Про Qt" — информация о библиотеке Qt, используемой модулем.</li>
<li> "Руководство проекта '{Имя}'" — вызов руководства на проект визуализации — файл с именем идентификатора проекта СВУ.</li>
<li> "Руководство на 'Vision'" — вызов руководства на этот модуль.</li>
<li> "Руководство на 'OpenSCADA 0.9.0'" — вызов руководства на OpenSCADA в целом.</li></ul></li>
<li> "QTStarter" — Пункт меню, созданный модулем запуска модулей библиотеки Qt. Содержит кнопки запуска UI модулей OpenSCADA, основанных на библиотеке Qt. С помощью этого пункта можно открыть несколько экземпляров окон данного модуля или других модулей. В случае с режимом исполнения, это меню позволяет открыть окно разработки из исполнения, повторным вызовом данного модуля.</li></ul>
<p>На строке статуса размещаются:
</p>
<ul><li> С правой стороны:
<ul><li> часы, в полноэкранном режиме;</li>
<li> текущая станция движка СВУ;</li>
<li> текущий пользователь, от имени которого исполняется интерфейс СВУ — двойным кликом можно сменить этого пользователя, введя новое имя и пароль;</li>
<li> текущий стиль интерфейса, который можно сменить двойным кликом;</li>
<li> панель с кнопками:
<ul><li> квитации нарушений — кликом можно сквитировать нарушения полностью или только нужный тип уведомления;</li>
<li> экспорта и печати — кликом вызывает диалог экспорта и печати типового елемента или выбранного из меню, где экспорт для:
<ul><li> "Страница" — страницу пользовательского интерфейса, в изображение;</li>
<li> "Диаграмма" — диаграмму на пользовательском интерфейсе, в изображение и CSV;</li>
<li> "Документ" — документ на пользовательском интерфейсе, в HTML и CSV для экспортных таблиц;</li>
<li> "Таблица" — таблица вида "Таблица" примитива "FormEl" на пользовательском интерфейсе, в CSV и только для экспорта.</li></ul></li>
<li> руководства на проект СВУ — кликом вызывает руководство на проект визуализации для файла "<b>{ProjVCA_ID}.[pdf|html|odt]</b>" в <a href="../Program_manual.html#Config" title="Special:MyLanguage/Documents/Program manual">каталоге документов</a>.</li></ul></li>
<li> панель пользовательский действий, если определены <a href="#SpecAttrs">атрибутом "statLine"</a> — кликом левой, правой и двойным кликом формирует событие к главной странице интерфейса.</li></ul></li>
<li> В главном поле строки статуса выводятся различные информационные сообщения и сообщения помощи.</li></ul>
<p>Режим исполнения (Runtime) в значительной степени поддерживает многоязычность, которая зависит от языка выбранного пользователя или окна исполнения, т.е. если Вы измените пользователя то получите интерфейс исполнения на другом языке этого пользователя. Эта функция включается <a href="../Program_manual.html#ConfigTr" title="Special:MyLanguage/Documents/Program manual">динамическим переводом сообщений OpenSCADA</a>.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:1039px;"><a class="image" href="http://oscada.org/wiki/File:Vision_run_ru.png"><img class="thumbimage" height="768" src="../files/Vision_run_ru.png" width="1037" /></a>  <div class="thumbcaption">Рис.3. Главное окно режима исполнения.</div></div></div></div>
<h2><span class="mw-headline" id=".D0.9F.D1.80.D0.B5.D0.B4.D1.81.D1.82.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B1.D0.B0.D0.B7.D0.BE.D0.B2.D1.8B.D1.85_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.BE.D0.B2_.28.D0.BF.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2.D0.BE.D0.B2.29"><span class="mw-headline-number">4</span> <span id="Primitives" title="#Primitives">Представление базовых элементов (примитивов)</span></span></h2>
<p>Данной версией модуля реализованы не все образы примитивов, заложенные проектом. В целом, проектом заложены примитивы:
</p>
<table class="wikitable">

<tr>
<th> Идентификатор </th>
<th> Наименование </th>
<th> Функция
</th></tr>
<tr>
<td> ElFigure </td>
<td> Элементарная графическая фигура </td>
<td>
<p>Примитив является основой отрисовки элементарных графических фигур со всевозможной комбинацией их в одном объекте. Предусматривается поддержка следующих элементарных фигур:
</p>
<ul><li> Линия.</li>
<li> Дуга.</li>
<li> Кривая Безье.</li>
<li> Заливка замкнутого пространства.<br /></li></ul>
<p>Для всех фигур, содержащихся в виджете, устанавливаются единые свойства толщины, цвета и т.д., также, предусматривается возможность указания вышеперечисленных атрибутов для каждой фигуры отдельно и их динамизация.
</p>
</td></tr>
<tr>
<td> FormEl </td>
<td> Элемент формы </td>
<td>
<p>Включает поддержку стандартных компонентов формы:
</p>
<ul><li> Редактирование строки.</li>
<li> Редактирование текста.</li>
<li> Флажок.</li>
<li> Кнопка.</li>
<li> Выбор из списка.</li>
<li> Список.</li>
<li> Дерево.</li>
<li> Таблица.</li>
<li> Слайдер.</li>
<li> Строка прокрутки. </li></ul>
</td></tr>
<tr>
<td> Text </td>
<td> Текст </td>
<td> Элемент текста-метка. Характеризуется типом шрифта, цветом, ориентацией и выравниванием. Предусматривается поддержка аргументов.
</td></tr>
<tr>
<td> Media </td>
<td> Медиа </td>
<td> Элемент отображения растровых и векторных изображений различных форматов, проигрывания анимированных изображений, проигрывание аудио-фрагментов и просмотр видео-фрагментов.
</td></tr>
<tr>
<td> Diagram </td>
<td> Диаграмма </td>
<td> Элемент диаграммы с поддержкой возможности отображения нескольких потоков в реальном времени для: трендов (временных графиков), частотного спектра, XY диаграмм.
</td></tr>
<tr>
<td> Protocol </td>
<td> Протокол </td>
<td> Элемент протокола — визуализатор сообщений программы, с поддержкой нескольких режимов работы.
</td></tr>
<tr>
<td> Document </td>
<td> Документ </td>
<td> Элемент формирования отчётов, журналов и другой документации на основе доступных данных.
</td></tr>
<tr>
<td> Box </td>
<td> Контейнер </td>
<td> Содержит механизм размещения-включения других виджетов для формирования новых, более сложных, виджетов и страниц конечной визуализации.
</td></tr>
<tr>
<td> Function, <span style="color: red">в планах</span> </td>
<td> Функция API объектной модели OpenSCADA </td>
<td> Невизуальный виджет, на стороне исполнения, позволяющий включать вычислительные функции объектной модели OpenSCADA в СВУ.
</td></tr></table>
<p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../../en/files/At.png" width="22" /></a> Для всех реализованных примитивов, кроме "FormEl", этот модуль поддерживает условную генерацию событий от манипулятора мыши по прозрачности указанного пикселя, боле нуля — не полная прозрачность.
</p><p><span id="SpecAttrs" title="#SpecAttrs">Модулем визуализатора предоставляется и используется ряд специфических атрибутов</span> общего характера, информация о которых приведена в таблице. Эти атрибуты автоматически создаются визуализатором при их отсутствии и в момент первого запуска, или создаются пользователем в кадре указанной области, по необходимости.
</p>
<table class="wikitable">

<tr>
<th> Идентификатор (область) </th>
<th> Имя </th>
<th> Назначение
</th></tr>
<tr>
<td> notify{N}, notifyVisWebVision{N} (страница) </td>
<td> Уведомитель: тип {N} </td>
<td> Определяет уведомитель и процедуру получения ресурса уведомления и самого уведомления, используемое при отсутствии Phonon, согласно <a href="../Modules/VCAEngine.html#Alarms" title="Special:MyLanguage/Modules/VCAEngine">концепции "Сигнализации (Алармы)"</a>.
</td></tr>
<tr>
<td> statLine (главная страница) </td>
<td> Элементы строки статуса </td>
<td>
<p>Текстовое поле с описанием элементов строки статуса пользователя, в формате строки "<b>{Id}:{Label}:{ToolTip}:{Color}:{Img}</b>", где:
</p>
<ul><li> "Id" — идентификатор, используется также для формирования событий от виджета "stIt_{Id}".</li>
<li> "Label" — визуальная метка элемента статуса.</li>
<li> "ToolTip" — всплывающая подсказка про элемент.</li>
<li> "Color" — цвет метки.</li>
<li> "Img" — изображение элемента статуса, вместо метки. </li></ul>
</td></tr>
<tr>
<td> runWin (главная страница) </td>
<td> Окно исполнения </td>
<td>
<p>Установка режима исполнения главного окна:
</p>
<ul><li> "Оригинальный размер (0)".</li>
<li> "Максимизировать (1)".</li>
<li> "На весь экран (2)". </li></ul>
</td></tr>
<tr>
<td> keepAspectRatio (главная страница) </td>
<td> Сохранять пропорцию при масштабировании </td>
<td> Сохранять пропорцию страниц при масштабировании.
</td></tr>
<tr>
<td> stBarNoShow (главная страница) </td>
<td> Не показывать строку статуса </td>
<td> Скрыть строку статуса главного окна.
</td></tr>
<tr>
<td> winPosCntrSave (главная страница) </td>
<td> Управление и сохранение положений окон </td>
<td> Включение управления и сохранения положения окон исполнения.
</td></tr>
<tr>
<td> userSetVis (главная страница, создаётся вручную, строковый тип) </td>
<td> Установка пользователя </td>
<td>
<p>Изменение пользователя или вызов диалога для его выбора. Варианты значения:
</p>
<ul><li> "*" — вызов диалога выбора пользователя; </li>
<li> "$" — изменение пользователя на типового;</li>
<li> "{пользователь}[:{пароль}]" — прямая смена на <i>пользователь</i> с <i>паролем</i>; для пустого пароля пользователь меняется только если его права меньше или равны и это локальная визуализация; полезный пример смены на пользователя "user" после минуты неактивности:</li></ul>
<pre style="white-space: pre-wrap;&nbsp;; margin-left: 20pt">
if((SYS.time()-this.ownerSess().userActTm()) &lt; 60)userSetVis = "";
else if(this.ownerSess().reqUser()&nbsp;!= "user") userSetVis = "user:user";
</pre>
</td></tr>
<tr>
<td> vs_background (виды "Line edit", "Text edit", "Combo box", "List", "Tree", "Table" примитива "FormEl") </td>
<td> Пользовательский фон </td>
<td> Определяет пользовательский фон в форме <b>{color}-{transp} {image}</b>
</td></tr>
<tr>
<td> vs_border (виды "Line edit", "Text edit", "Combo box", "List", "Tree", "Table" примитива "FormEl") </td>
<td> Пользовательская граница </td>
<td> Определяет пользовательскую границу в стандартной форме CSS <b>{wdth}px {style} {color}</b>
</td></tr>
<tr>
<td> vs_winTitle (вид "Box") </td>
<td> Заголовок окна </td>
<td> Значение динамического заголовка окна
</td></tr></table>
<p>Рассмотрим реализацию каждого примитива более детально.
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D1.80.D0.BD.D0.BE.D0.B9_.D1.84.D0.B8.D0.B3.D1.83.D1.80.D1.8B_.28ElFigure.29"><span class="mw-headline-number">4.1</span> Примитив элементарной фигуры (ElFigure)</span></h3>
<p>Реализована поддержка элементарных фигур: линия, эллиптическая дуга, кривая Безье и заливка замкнутых контуров цветом и изображением. Для элементарных фигур реализованы следующие операции:
</p>
<ul><li> создание/удаление фигур;</li>
<li> копирование фигур;</li>
<li> перемещение и изменение размеров фигур с помощью манипулятора мыши и клавиатуры;</li>
<li> возможность связывания элементарных фигур друг с другом, получая более сложные, для которых доступны все свойства исходных элементарных фигур;</li>
<li> возможность одновременного перемещения нескольких фигур;</li>
<li> заливка замкнутого контура цветом и изображением;</li>
<li> генерация событий клавиш мыши в момент клика на залитые контура;</li>
<li> масштабирование;</li>
<li> трансформация: поворот и отражение.</li></ul>
<p>На рисунке представлена часть экрана с кадром, содержащим элементарные фигуры.
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:Vision_elfig_new.png"><img alt="Vision elfig new.png" height="298" src="../../en/files/Vision_elfig_new.png" width="299" /></a></div></div>
<p>Фигуры, лежащие в основе данного виджета, содержат точки(начальная и конечная), которые могут стыковаться с соответствующими точками других фигур, и точки, с помощью которых изменяется геометрия фигуры.
</p><p>Добавить фигуру можно с помощью манипулятора мыши:
</p>
<ol><li> Выбрать желаемую фигуру из контекстного меню. </li>
<li> Задать, с помощью левой кнопки мыши, начальную и конечную точки (для линии, при удерживании клавиши SHIFT происходит ортогональная её отрисовка).</li></ol>
<p>Удалить фигуру(ы) можно путём нажатия кнопки "Del", имея выделенную(ые) фигуру(ы).
</p><p>Скопировать фигуру(ы) можно путём нажатия комбинации клавиш "Ctrl"+"C", имея выделенную(ые) фигуру(ы).
</p><p>Передвинуть/изменить габариты фигуры можно с помощью манипулятора мыши или клавиатуры:
</p>
<ol><li> Выделить фигуру, клацнув по ней левой кнопкой мыши.</li>
<li> Перетащить (с помощью мыши или управляющих клавиш) фигуру или одну из её контрольных точек в желаемое место и отпустить кнопку мыши(клавишу).</li></ol>
<p>Предусмотрена возможность перемещений нескольких выделенных фигур, выбранных при помощи удержания "Ctrl" (работает при отключенной кнопке "Привязки") либо мышью.
</p><p>Связать фигуры друг с другом можно следующим образом:
</p>
<ol><li> Нажать кнопку "Привязки".</li>
<li> Выделить одну из фигур и переместить её начальную или конечную точку к желаемой начальной или конечной точке другой фигуры так, чтобы она попадала в появившуюся окружность. Связанные фигуры перемещаются также как и отдельные — общая точка перемещается для всех фигур, к которым она относится, где приоритет отдается дуге и две дуги не могут быть соединены непосредственно друг с другом.</li></ol>
<p>Залить замкнутый контур из фигур можно следующим образом:
</p>
<ol><li> Нажать кнопку "Привязки".</li>
<li> Создать замкнутый контур.</li>
<li> Два раза клацнуть мышкой внутри его.</li></ol>
<p>Удалить заливку замкнутого контура можно:
</p>
<ul><li> из контекстного меню, клацнув правой кнопкой манипулятора мыши по заливке;</li>
<li> разорвав контур заливки;</li>
<li> двойным кликом манипулятора мыши по уже залитому контуру.</li></ul>
<p>Поворот фигуры осуществляется вокруг центра виджета.
</p><p><br />
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.82.D0.B5.D0.BA.D1.81.D1.82.D0.B0_.28Text.29"><span class="mw-headline-number">4.2</span> Примитив текста (Text)</span></h3>
<p>Реализована поддержка элемента текста со свойствами:
</p>
<ul><li> Шрифт со свойствами: типа-класса, размера, усиления, наклонности, подчёркивания и перечёркивания. </li>
<li> Цвет текста.</li>
<li> Ориентация текста. </li>
<li> Автоматический перенос по словам. </li>
<li> Выравнивание текста по горизонтали и вертикали, со всеми вариантами.</li>
<li> Отображение фона в виде цвета и изображения.</li>
<li> Отображение бордюра вокруг текста с указанным цветом, шириной и стилем.</li>
<li> Отображение HTML.</li>
<li> Дополнение текста аргументами различного типа и свойств.</li></ul>
<p>На рисунке представлена часть экрана с кадром, содержащим примеры текста с использованием различных параметров.
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:Vision_run_txt_ru.png"><img alt="Vision run txt ru.png" height="111" src="../files/Vision_run_txt_ru.png" width="160" /></a></div></div>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.B0_.D1.84.D0.BE.D1.80.D0.BC.D1.8B_.28FormEl.29"><span class="mw-headline-number">4.3</span> Примитив элемента формы (FormEl)</span></h3>
<p>Реализована поддержка элементов формы на кадрах СВУ с заложенными свойства, включая следующие типы:
</p>
<ul><li> <i>Редактор строки</i> — Представлено следующими видами: "Текст", "Combo", "Целое", "Вещественное", "Время", "Дата", "Время и Дата". Все виды редактора строки поддерживают подтверждение ввода.</li>
<li> <i>Редактор текста</i> — Представляет редактор плоского текста с подтверждением или отказом от ввода.</li>
<li> <i>Поле флажка</i> — Предоставляет поле бинарного флажка.</li>
<li> <i>Кнопка</i> — Предоставляет кнопку с поддержкой цвета кнопки, изображения в кнопке и режимов:
<ul><li> стандартный;</li>
<li> переключаемый;</li>
<li> вызов меню;</li>
<li> вызов загрузки файла;</li>
<li> вызов сохранения файла.</li></ul></li>
<li> <i>Выбор из списка</i> — Предоставляет поле выбора элемента со списка указанных элементов.</li>
<li> <i>Список</i> — Предоставляет поле списка с контролем за текущим элементом.</li>
<li> <i>Дерево</i> — Предоставляет элемент дерева с возможностью выбора элементов.</li>
<li> <i>Таблица</i> — Предоставляет элемент таблицы с возможностью выбора ячеек, строк или колонок, а также редактирования содержимого ячейки.</li>
<li> <i>Слайдер</i> — Элемент слайдера.</li>
<li> <i>Прогрес-бар</i> — Полоска прогресс-бара.</li>
<li> <i>Пароль</i> — Скрытый ввод пароля.</li></ul>
<p>Реализованы режимы "Включен" и "Активен", а также передача изменений и событий в модель данных СВУ — движок. Режим "Активный" приводит к установке курсора активности для непустого фона и дополнительных условий различных видов "Text", "Media" и "Box":
</p>
<ul><li> <i>Text</i> — не пустой текст;</li>
<li> <i>Media</i> — не пустой источник изображения.</li></ul>
<p>На рисунке представлена часть экрана с кадром, содержащим вышеперечисленные элементы формы.
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:Vision_run_formel_ru.png"><img alt="Vision run formel ru.png" height="254" src="../files/Vision_run_formel_ru.png" width="447" /></a></div></div>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D0.BE.D1.82.D0.BE.D0.B1.D1.80.D0.B0.D0.B6.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BC.D0.B5.D0.B4.D0.B8.D0.B0-.D0.BC.D0.B0.D1.82.D0.B5.D1.80.D0.B8.D0.B0.D0.BB.D0.BE.D0.B2_.28Media.29"><span class="mw-headline-number">4.4</span> Примитив отображения медиа-материалов (Media)</span></h3>
<p>Реализована поддержка элемента отображения медиа-материалов со свойствами:
</p>
<ul><li> Указание источника медиа данных: изображения или видео-материала.</li>
<li> Просмотр изображений большинства известных форматов с возможностью их вписывания в размер виджета.</li>
<li> Проигрывание простых анимированных форматов изображений и видео с возможностью управления скоростью проигрывания.</li>
<li> Проигрывание полноформатного видео и аудио, посредством <a class="extiw" href="https://en.wikipedia.org/wiki/Phonon" title="wikipedia:Phonon">Phonon</a>.</li>
<li> Отображение фона в виде цвета и изображения.</li>
<li> Отображение бордюра по периметру виджета, с указанным цветом, шириной и стилем.</li>
<li> Формирования активных областей и генерация событий при их активации.</li></ul>
<p>На рисунке представлена часть экрана с кадром, содержащим примеры просмотра/проигрывания медиа-данных.
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:Vision_run_media.png"><img alt="Vision run media.png" height="205" src="../../en/files/Vision_run_media.png" width="232" /></a></div></div>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D0.BF.D0.BE.D1.81.D1.82.D1.80.D0.BE.D0.B5.D0.BD.D0.B8.D1.8F_.D0.B4.D0.B8.D0.B0.D0.B3.D1.80.D0.B0.D0.BC.D0.BC_.28Diagram.29"><span class="mw-headline-number">4.5</span> Примитив построения диаграмм (Diagram)</span></h3>
<p>Реализована поддержка элемента построения диаграмм для типов "График", "Спектр" и "XY", со свойствами:
</p>
<ul><li> Общие свойства типов диаграммы "График", "Спектр" и "XY":
<ul><li> возможность выбора архиватора, буфера архива или всех данных, при работе с архивными данными;</li>
<li> адаптация графика параметра к реальным значениям данных путём подстройки шкалы, в случае отсутствия прямо указанного диапазона значений;</li>
<li> управление масштабом шкалы значений путём увеличения, уменьшения и смещения;</li>
<li> широкий диапазон масштабирования и адаптации шкалы времени с автоматическим приведением запрашиваемых данных к качеству достаточному для отображения, или нужному для экспорта — указанием предельного количества измерений в пикселе;</li>
<li> отображение размерной сетки и маркеров по горизонтали и вертикали с адаптацией к диапазону отображения;</li>
<li> следящий режим за текущим временем путём периодического обновления и смещения времени диаграммы к текущему времени —  времени последних данных в буфере архива;</li>
<li> горизонтальный слайдинг/скольжение с помощью мышь;</li>
<li> масштабирование участка обрамлённого окном, мышью.</li></ul></li>
<li> Свойства типа диаграммы "График":
<ul><li> построение графиков до 100 параметров на одной диаграмме в процентной шкале и возможностью отображения выбранных параметров в собственной шкале;</li>
<li> построение графика для: текущих, архивных и пользовательских данных;</li>
<li> формирования промежуточного буфера отображения для текущих значений;</li>
<li> поддержка активного режима с курсором и получением значений под курсором;</li>
<li> возможность построения графиков как в линейной, так и логарифмической шкале значений.</li></ul></li>
<li> Свойства типа диаграммы "Спектр":
<ul><li> построение графиков частотного спектра параметров до 100 на одной диаграмме в процентной шкале и возможностью отображения выбранных параметров в собственной шкале;</li>
<li> построение графика для: архивных и пользовательских данных;</li>
<li> поддержка активного режима с курсором и получением значений под курсором.</li></ul></li>
<li> Свойства типа диаграммы "XY":
<ul><li> построение XY графиков параметров до 50 на одной диаграмме в процентной шкале и возможностью отображения выбранных параметров в собственной шкале;</li>
<li> построение графика для: текущих, архивных и пользовательских данных;</li>
<li> формирования промежуточного буфера отображения для текущих значений;</li>
<li> параметры распределяются парами на график, где чётные по оси Y (0,2,4...) и нечётные по оси X (1,3,5...);</li>
<li> возможность построения графиков как в линейной, так и логарифмической шкале значений.</li></ul></li></ul>
<p>Модулем визуализатора предоставляется и используется ряд специфических атрибутов данного примитива, информация о которых приведена в таблице.
</p>
<table class="wikitable">

<tr>
<th> Идентификатор </th>
<th> Имя </th>
<th> Назначение
</th></tr>
<tr>
<td> sclWin </td>
<td> Масштабирование участка обрамлённого окном, мышью </td>
<td> Логический тип атрибута, создаваемый пользователем вручную, в случае надобности. Для значения "истина" включается режим масштабирования участка тренда обрамлённого окном с помощью мыши.
</td></tr></table>
<p>На рисунке представлена часть экрана с кадром, содержащим примеры диаграмм: "График", "Спектр" и "XY".
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:Vision_run_diag.png"><img alt="Vision run diag.png" height="447" src="../../en/files/Vision_run_diag.png" width="347" /></a></div></div>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.84.D0.BE.D1.80.D0.BC.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_.D0.BF.D1.80.D0.BE.D1.82.D0.BE.D0.BA.D0.BE.D0.BB.D0.B0_.28Protocol.29"><span class="mw-headline-number">4.6</span> Примитив формирования протокола (Protocol)</span></h3>
<p>Реализована поддержка элемента формирования протокола со свойствами:
</p>
<ul><li> Формирование протокола из архива сообщений за указанное время и глубину.</li>
<li> Запрос данных из указанных архиваторов сообщений.</li>
<li> Выборка данных из архивов по уровню важности и шаблону категории сообщений.</li>
<li> Поддержка режима слежения за появлением сообщений в архиве сообщений.</li></ul>
<p>На рисунке представлена часть экрана с кадром, содержащим пример протокола.
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:Vision_prot_ru.png"><img alt="Vision prot ru.png" height="241" src="../files/Vision_prot_ru.png" width="741" /></a></div></div>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D1.84.D0.BE.D1.80.D0.BC.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_.D0.BE.D1.82.D1.87.D1.91.D1.82.D0.BD.D0.BE.D0.B9_.D0.B4.D0.BE.D0.BA.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D1.86.D0.B8.D0.B8_.28Document.29"><span class="mw-headline-number">4.7</span> Примитив формирования отчётной документации (Document)</span></h3>
<p>Реализована поддержка элемента формирования отчётной документации со свойствами:
</p>
<ul><li> Гибкое формирование структуры документа на основе языка гипертекстовой разметки, что предоставляет поддержку широких возможностей форматирования документов.</li>
<li> Формирование документов по команде или расписанию, что необходимо для формирования отчётной документации в архив, с последующим просмотром архива.</li>
<li> Формирование документов в режиме реального времени, для предоставления их полностью динамически и на основе архивов за указанное время.</li>
<li> Использование атрибутов виджета для передачи в документ значений и адресов на архивы, что позволяет использовать виджет документа как шаблон, при формировании отчётов с другими входными данными.</li></ul>
<p>В основе любого документа лежит XHTML-шаблон. XHTML-шаблон это тег "body" WEB-страницы, содержащий статику документа в стандарте XHTML 1.0, и элементы исполняемых инструкций на одном из языков пользовательского программирования OpenSCADA в виде <b>&lt;?dp {procedure}&nbsp;?&gt;</b>. Результирующий документ формируется путём исполнения процедур и вставки их результата в документ.
</p><p>Источником значений исполняемых инструкций являются атрибуты виджета этого примитива, а также все механизмы языка пользовательского программирования. Атрибуты могут добавляться пользователем и линковаться на реальные атрибуты параметров или-же являться автономными, значения которых будут формироваться в скрипте виджета. В случае со слинкованными атрибутами могут извлекаться значения из истории, архива.
</p><p>На рисунке представлен кадр, содержащий пример документа.
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:Vision_doc_ru.png"><img alt="Vision doc ru.png" height="580" src="../files/Vision_doc_ru.png" width="900" /></a></div></div>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B8.D1.82.D0.B8.D0.B2_.D0.BA.D0.BE.D0.BD.D1.82.D0.B5.D0.B9.D0.BD.D0.B5.D1.80.D0.B0_.28Box.29"><span class="mw-headline-number">4.8</span> Примитив контейнера (Box)</span></h3>
<p>Реализована поддержка примитива контейнера, по совместительству выполняющего роль страниц проектов. Данный примитив является единственным элементом-контейнером, который может включать в себя ссылки на кадры из библиотеки, формируя тем самым пользовательские элементы нужной конфигурации. Примитив реализует предусмотренные проектом свойства. Перечислим, по пунктам, свойства данного примитива:
</p>
<ul><li> <i>Контейнер</i> — Позволяет формировать нужные объекты путём группировки базовых в рамках данного примитива.</li>
<li> <i>Страница</i> — Элементы, построенные на данном примитиве, могут выполнять роль страницы пользовательского интерфейса.</li>
<li> <i>Контейнер страниц</i> — Свойство замещения, в процессе исполнения, собственного содержимого другой страницей. Используется для формирования фреймов на страницах пользовательского интерфейса. Например, главная страница типовой SCADA-системы с объектами сигнализации строится именно таким образом.</li>
<li> <i>Фон</i> — Поддерживает возможность указания фона в виде цвета и изображения.</li>
<li> <i>Бордюр</i> — Поддерживает возможность изображения бордюра с указанным цветом, толщиной и стилем.</li></ul>
<p><br />
Пример редактирования кадра, основанного на данном примитиве, приведен на рисунке 2.a, а на рисунке 3 изображена страница, содержащая контейнер страниц, построенный на основе данного примитива.
</p>
<h2><span class="mw-headline" id=".D0.92.D0.B5.D0.BA.D1.82.D0.BE.D1.80.D0.BD.D1.8B.D0.B9_.D0.B3.D1.80.D0.B0.D1.84.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B9_.D1.80.D0.B5.D0.B4.D0.B0.D0.BA.D1.82.D0.BE.D1.80"><span class="mw-headline-number">5</span> <span id="ElFigure" title="#ElFigure">Векторный графический редактор</span></span></h2>
<h3><span class="mw-headline" id=".D0.9D.D0.B0.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_2"><span class="mw-headline-number">5.1</span> Назначение</span></h3>
<p>Наличие собственного векторного графического редактора является неотъемлемой частью уважающей себя SCADA системы. Опыт показывает, что наиболее информативной формой представления технологических процессов являются мнемосхемы — совокупность сигнальных устройств, изображений оборудования и внутренних связей контролируемого объекта, выполняемые на персональном компьютере. Для их создания можно использовать любой из существующих графических редакторов. Однако, полученные таким образом мнемосхемы являются статическими и не отражают динамику изменения характеристик процесса, а следовательно, они неадекватны и неудобны для восприятия. Таким образом, одной из задач, стоящих перед разработчиками SCADA систем, является создание графического редактора для изображения объектов, характеристики которых могут быть динамически изменены.
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BD.D1.86.D0.B8.D0.BF.D1.8B_.D0.B8_.D1.84.D1.83.D0.BD.D0.BA.D1.86.D0.B8.D0.B8_.D1.80.D0.B0.D0.B7.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.BD.D0.BD.D0.BE.D0.B3.D0.BE_.D0.B3.D1.80.D0.B0.D1.84.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.B3.D0.BE_.D1.80.D0.B5.D0.B4.D0.B0.D0.BA.D1.82.D0.BE.D1.80.D0.B0"><span class="mw-headline-number">5.2</span> Принципы и функции разработанного графического редактора</span></h3>
<p>Основой описываемого редактора являются три графических примитива: линия, дуга и кривая Безье. К динамически изменяющимся характеристикам этих примитивов относятся:
</p>
<ul><li> Координаты контрольных точек, которые используются для задания формы линии, дуги или кривой Безье. При этом, линия имеет — 2 контрольные точки, дуга — 5 контрольных точек, кривая Безье — 4 (рис.5.2.a).</li>
<li> Ширина линии.</li>
<li> Ширина бордюра (границы).</li>
<li> Цвет бордюра (границы).</li>
<li> Стиль линии (сплошная, пунктирная, точечная).</li></ul>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:402px;"><a class="image" href="http://oscada.org/wiki/File:Vision_ElFigCntrPoints.png"><img class="thumbimage" height="150" src="../../en/files/Vision_ElFigCntrPoints.png" width="400" /></a>  <div class="thumbcaption">Рис.5.2.a. Контрольные точки линии, дуги и кривой Безье.</div></div></div></div>
<p>Примеры примитивов, различного цвета, толщины, стилей, с бордюрами и без них, приведены на рисунке 5.2.b.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:402px;"><a class="image" href="http://oscada.org/wiki/File:Vision_ElFigExamples.png"><img class="thumbimage" height="150" src="../../en/files/Vision_ElFigExamples.png" width="400" /></a>  <div class="thumbcaption">Рис.5.2.b. Примеры примитивов, слева направо: линия, дуга и кривая Безье.</div></div></div></div>
<p>Предусмотрена возможность связи различных графических примитивов, для создания сложных графических объектов. Если связанные примитивы образуют замкнутый контур, то он может быть залит цветом и изображением (рис.5.2.c).
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:252px;"><a class="image" href="http://oscada.org/wiki/File:Vision_ElFigFills.png"><img class="thumbimage" height="150" src="../../en/files/Vision_ElFigFills.png" width="250" /></a>  <div class="thumbcaption">Рис.5.2.c. Заливки замкнутого контура цветом и изображением.</div></div></div></div>
<p>Графический редактор позволяет масштабировать и поворачивать фигуры (рис.5.2.d) — примитивы и сложные графические объекты.
</p><p>К возможностям редактора также относятся: выделение, перемещение, копирование и удаление фигур.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:302px;"><a class="image" href="http://oscada.org/wiki/File:Vision_ElFigScaleRotate.png"><img class="thumbimage" height="150" src="../../en/files/Vision_ElFigScaleRotate.png" width="300" /></a>  <div class="thumbcaption">Рис.5.2.d. Масштабирование и поворот фигур.</div></div></div></div>
<h3><span class="mw-headline" id=".D0.9E.D1.81.D0.BD.D0.BE.D0.B2.D0.BD.D1.8B.D0.B5_.D0.BF.D1.80.D0.B8.D0.BD.D1.86.D0.B8.D0.BF.D1.8B_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D1.8B_.D0.B2_.D0.B3.D1.80.D0.B0.D1.84.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.BC_.D1.80.D0.B5.D0.B4.D0.B0.D0.BA.D1.82.D0.BE.D1.80.D0.B5"><span class="mw-headline-number">5.3</span> Основные принципы работы в графическом редакторе</span></h3>
<p>Для того чтобы приступить к работе с графическим редактором, после запуска проекта OpenSCADA, необходимо вызвать "Рабочий пользовательский интерфейс (Qt)". Во вкладке "Виджеты" содержится перечень существующих графических библиотек и принадлежащих им элементов.
</p><p>Предположим, что нам необходимо добавить графический элемент в одну из существующих библиотек. Для этого выделим имя библиотеки и нажмем кнопку (<a class="image" href="http://oscada.org/wiki/File:Vision_ElFigCreate.png"><img alt="Vision ElFigCreate.png" height="36" src="../../en/files/Vision_ElFigCreate.png" width="32" /></a>) на панели инструментов. В появившееся окно введем идентификатор и имя нового графического элемента. После чего перейдем к этому элементу и нажмем кнопку (<a class="image" href="http://oscada.org/wiki/File:Vision_ElFigEdit.png"><img alt="Vision ElFigEdit.png" height="23" src="../../en/files/Vision_ElFigEdit.png" width="25" /></a>). Справа появится поле для рисования. С помощью двойного щелчка мышью по этому полю, либо при помощи контекстного меню, войдем в режим редактирования — режим графического редактора, позволяющий осуществлять все предусмотренные манипуляции с фигурами. В тот момент, когда созданный нами графический элемент находится в фокусе, вкладка "Атрибуты" приобретет вид, представленный на рисунке 5.3.a.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:366px;"><a class="image" href="http://oscada.org/wiki/File:Vision_ElFigAttrs_ru.png"><img class="thumbimage" height="493" src="../files/Vision_ElFigAttrs_ru.png" width="364" /></a>  <div class="thumbcaption">Рис.5.3.a. Атрибуты элементарной фигуры.</div></div></div></div>
<p>С помощью мыши, или поля "Геометрия" вкладки "Атрибуты", зададим размеры поля для рисования и масштабные коэффициенты.
</p><p>Воспользовавшись полем "Линия" вкладки "Атрибуты", зададим ширину, цвет, стиль линий, которыми будем рисовать. С помощью поля "Граница", зададим ширину и цвет бордюра. Поле "Заполнение" позволяет задать цвет и изображение заливки. "Список элементов" содержит перечень примитивов, используемых при создании графического объекта. Элементы всех полей вкладки "Атрибуты" могут динамически изменяться в процедурах пользователя.
</p><p>Графические примитивы могут быть изображены с помощью мышки или заданы с помощью списка графических примитивов ("Список элементов"). В первом случае, координаты контрольных точек создаваемого примитива вычисляются автоматически, а ширина, цвет, стиль линии, ширина и цвет бордюра устанавливаются по умолчанию, из вкладки "Атрибуты". Во втором случае, примитив необходимо описать в "Списке элементов" следующим образом:
</p>
<dl><dd><i>line:(x1|y1):(x2|y2):width:color:border_width:border_color:style</i> <b>(1)</b></dd>
<dd><i>arc:(x1|y1):(x2|y2):(x3|y3):(x4|y4):(x5|y5):width:color:border_width:border_color:style</i> <b>(2)</b> </dd>
<dd><i>bezier:(x1|y1):(x2|y2):(x3|y3):(x4|y4):width:color:border_width:border_color:style,</i> <b>(3)</b></dd></dl>
<p>Где:
</p>
<dl><dd><i>(x1|y1)</i> — координаты первой контрольной точки примитива;</dd>
<dd><i>(x2|y2)</i> — координаты второй контрольной точки примитива;</dd>
<dd><i>(x3|y3)</i> — координаты третьей контрольной точки примитива;</dd>
<dd><i>(x4|y4)</i> — координаты четвертой контрольной точки примитива;</dd>
<dd><i>(x5|y5)</i> — координаты пятой контрольной точки примитива;</dd>
<dd><i>width</i> — ширина линии, которой будет нарисован примитив;</dd>
<dd><i>color</i> — цвет линии, которой будет нарисован примитив;</dd>
<dd><i>border_width</i> — ширина бордюра;</dd>
<dd><i>border_color</i> — цвет бордюра;</dd>
<dd><i>style</i> — стиль линии ("0" — сплошная, "1" — пунктир, "2" — точечная).</dd></dl>
<p>При этом, приоритетными являются значения ширины, цвета, стиля линии, ширины и цвета бордюра, заданные в списке элементов. Если необходимо использовать какие-либо характеристики, устанавливаемые полями "Линия" или "Граница" вкладки "Атрибуты", то, при описании примитива, их следует пропустить. Например, мы хотим создать линию с: шириной 3, красного цвета, сплошную и без бордюра. При этом, в поле "Линия" заданы: ширина линии 3, черный цвет и сплошной стиль; в поле "Граница" заданы: ширина бордюра 5, зеленый цвет. Тогда описание примитива в списке элементов должно выглядеть следующим образом:
</p>
<dl><dd><i>line:(x1|y1):(x2|y2)::red:0::</i> <b>(4)</b></dd></dl>
<p>Формы записи (1) - (4) задают статические характеристики примитивов, которые не могут быть изменены программно. Для задания динамических характеристик необходимо использовать форму записи:
</p>
<dl><dd><i>line:1:2:w1:c1:w2:c2:s1</i> <b>(5)</b></dd></dl>
<p>Тогда, в окно "Атрибуты", добавятся поля: Точка 1 (<i>1</i>), Точка 2 (<i>2</i>), Ширина 1 (<i>w1</i>), Ширина 2 (<i>w2</i>), Цвет 1 (<i>c1</i>), Цвет 2 (<i>c2</i>), Стиль 1 (<i>s1</i>) (рис.5.3.b). Значения этих полей можно изменять программно, с помощью языка пользовательского программирования OpenSCADA. Очевидно, что при желании, динамическими могут быть объявлены не все свойства примитива, а одно или несколько, кроме того, одно динамическое свойство может быть использовано многократно.
</p><p>Редактирование координат контрольных точек осуществляется с помощью мыши либо путем их изменения в cписке элементов, для статических точек; или прямо во вкладке "Атрибуты", имея в наличии динамические точки ("Точка 1", ...). Редактирование других характеристик осуществляется с помощью изменения содержимого полей "Линия", "Граница", "Заполнение" на вкладке "Атрибуты" или в списке элементов.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:368px;"><a class="image" href="http://oscada.org/wiki/File:Vision_ElFigDynAttrs_ru.png"><img class="thumbimage" height="482" src="../files/Vision_ElFigDynAttrs_ru.png" width="366" /></a>  <div class="thumbcaption">Рис.5.3.b. Динамические атрибуты элементарной фигуры.</div></div></div></div>
<p>Предусмотрены возможности:
</p>
<ul><li> выделения:
<ul><li> щелчком левой кнопки мыши по фигуре;</li>
<li> совместного выделения примитивов — левой кнопкой мыши + нажатая клавиша "Ctrl", при выключенной кнопке "Привязки";</li>
<li> совместного выделения рамкой, рисуемой с помощью нажатой левой кнопки мыши.</li></ul></li>
<li> перемещение, клавиатурой/мышью,</li>
<li> копирование и вставка — "Ctrl"+"C", "Ctrl"+"V" или из контекстного меню;</li>
<li> удаление — "Del".</li></ul>
<p>Для связи примитивов друг с другом необходимо:
</p>
<ol><li> Нажать кнопку "Привязки".</li>
<li> Выделить одну из фигур и переместить её начальную или конечную точку к желаемой начальной или конечной точке другой фигуры так, чтобы она попадала в появившуюся окружность.</li></ol>
<p>Для заливки замкнутого контура необходимо два раза кликнуть мышей внутри него либо следующим образом задать заливку в списке элементов:
</p>
<dl><dd><i>fill:(x1:y1):(x2:y2):...:(xn:yn):color:image</i> — статика;</dd>
<dd><i>fill:1:2:3:...:c1:i1</i> — динамика.</dd></dl>
<p>Где:
</p>
<dl><dd><i>(x1:y1):(x2:y2):...:(xn:yn)</i> — координаты начальных и конечных точек примитивов, образующих замкнутый контур;</dd>
<dd><i>color</i> — цвет заливки;</dd>
<dd><i>image</i> — изображение заливки.</dd></dl>
<p>При этом, приоритетными являются значения цвета и изображения заливки, заданные в списке элементов. Если необходимо использовать характеристики, устанавливаемые полем "Заполнение" вкладки "Атрибуты", то, при описании примитива, их следует опустить.
</p><p>Для масштабирования фигур необходимо, в поле "Геометрия", задать значения масштаба по осям "X" и "Y". Кроме того, существует возможность визуально увеличить/уменьшить изображение не меняя масштаб. Для этого, необходимо выйти из режима редактирования, щелкнуть правой кнопкой мыши по полю виджета, в появившемся контекстном меню выбрать пункт "Увеличить (+10%)"/"Уменьшить (-10%)" либо покрутить колесико мышки, удерживая при этом нажатой клавишу "Ctrl". Выход из режима редактирования осуществляется с помощью нажатия клавиши "Esc" либо с помощью контекстного меню виджета.
</p><p>Существует возможность поворачивать содержимое виджета, для чего следует, в окне "Атрибуты", задать "Угол поворота" от -360 до 360.
</p><p>Графический редактор поддерживает прозрачность цвета, задаваемую следующим образом: <b>{color}-{t}</b>, где <i>color</i> — цвет, а <i>t</i> — прозрачность от 0 (полностью прозрачный) до 255 (непрозрачный).
</p>
<h3><span class="mw-headline" id=".D0.9A.D0.BE.D0.BD.D1.82.D0.B5.D0.BA.D1.81.D1.82.D0.BD.D0.BE.D0.B5_.D0.BC.D0.B5.D0.BD.D1.8E_.D0.B3.D1.80.D0.B0.D1.84.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.B3.D0.BE_.D1.80.D0.B5.D0.B4.D0.B0.D0.BA.D1.82.D0.BE.D1.80.D0.B0"><span class="mw-headline-number">5.4</span> Контекстное меню графического редактора</span></h3>
<p>Предусмотрено контекстное меню, вызываемое щелчком правой кнопки мыши в области редактируемого виджета. В зависимости от того, какой объект находится под указателем мыши, контекстное меню может принимать несколько различный вид. Ниже, на рисунке 5.4, приведены примеры контекстного меню.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:842px;"><a class="image" href="http://oscada.org/wiki/File:Vision_ElFigPopup_ru.png"><img class="thumbimage" height="393" src="../files/Vision_ElFigPopup_ru.png" width="840" /></a>  <div class="thumbcaption">Рис.5.4. Контекстное меню для линий (линия, дуга, кривая Безье) и для заливки, слева направо.</div></div></div></div>
<p>Контекстное меню включает следующие секции (сверху вниз):
</p>
<ul><li> рисование:
<ul><li> выбор фигуры для рисования;</li>
<li> выбор режима "Привязки";</li>
<li> возврат в режим выбора — "Курсор".</li></ul></li>
<li> отмена/повтор изменений;</li>
<li> копирование и вставка выбранных фигур, в рамках одного виджета;</li>
<li> поднятие и опускание выбранных фигур по оси "Z";</li>
<li> управление атрибутами примитивов: сделать статическими или динамическими;</li>
<li> вызов диалога свойств элементарной фигуры;</li>
<li> выход из режима редактирования.</li></ul>
<h3><span class="mw-headline" id=".D0.94.D0.B8.D0.B0.D0.BB.D0.BE.D0.B3_.D1.81.D0.B2.D0.BE.D0.B9.D1.81.D1.82.D0.B2_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D1.80.D0.BD.D0.BE.D0.B9_.D1.84.D0.B8.D0.B3.D1.83.D1.80.D1.8B"><span class="mw-headline-number">5.5</span> Диалог свойств элементарной фигуры</span></h3>
<p>Диалог, варианты которого представлены на рисунках 5.5.a, 5.5.b, 5.5.c, реализован для интерактивного и удобного управления свойствами фигур(ы).
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:834px;"><a class="image" href="http://oscada.org/wiki/File:Vision_ElFigDlgLine_ru.png"><img class="thumbimage" height="338" src="../files/Vision_ElFigDlgLine_ru.png" width="832" /></a>  <div class="thumbcaption">Рис.5.5.a. Диалог свойств элементарной фигуры для одной линии (линия, дуга или кривая Безье).</div></div></div></div>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:967px;"><a class="image" href="http://oscada.org/wiki/File:Vision_ElFigDlgLines_ru.png"><img class="thumbimage" height="328" src="../files/Vision_ElFigDlgLines_ru.png" width="965" /></a>  <div class="thumbcaption">Рис.5.5.b. Диалог свойств элементарной фигуры для группы выбранных линий.</div></div></div></div>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:481px;"><a class="image" href="http://oscada.org/wiki/File:Vision_ElFigDlgFill_ru.png"><img class="thumbimage" height="190" src="../files/Vision_ElFigDlgFill_ru.png" width="479" /></a>  <div class="thumbcaption">Рис.5.5.c. Диалог свойств элементарной фигуры для заливки.</div></div></div></div>
<p>Как видно из рисунков выше, диалог может иметь три различных формы, зависимо от объекта для которого вызывается. В заголовке диалога перечислены номера фигур, для которых он вызван. Эти номера соответствуют позиции фигуры в списке элементов, начиная сверху.
</p><p>Если диалог вызван для одиночной фигуры (линия, дуга или кривая Безье), то в нем существует возможность редактировать координаты точек фигуры (рис.5.5.a). Если точка соединена с точкой другой фигуры или фигур, и включен режим "Привязки", то введенные координаты будут применены ко всем фигурам, для которых эта точка общая, а заливки, в которых участвует фигура, будут соответственно перерисованы.
</p><p>Если-же диалог вызван для группы выбранных фигур (рис.5.5.b), то свойства (атрибуты), указанные в диалоге, будут применены ко всем фигурам, перечисленным в заголовке диалога. При вызове диалога, в полях свойств будут отображаться данные той фигуры из группы выбранных, относительно которой было вызвано контекстное меню. Существует возможность включать/исключать отдельные свойства диалога. Для этого предусмотрена кнопка (<a class="image" href="http://oscada.org/wiki/File:Vision_disableButton.png"><img alt="Vision disableButton.png" height="28" src="../../en/files/Vision_disableButton.png" width="32" /></a>). В случае исключения отдельных свойств они не будут обрабатываться при подтверждении диалога (кнопка "Принять"). При подтверждении диалога, все указанные данные для включенных свойств будут применены для всей группы фигур.
</p><p>Диалог свойств заливки (рис.5.5.c) позволяет управлять свойствами отдельной заливки.
</p><p>При выборе флажка справа от свойства оно (свойство), после подтверждения диалога, устанавливается в значение по умолчанию, которое указано во вкладке "Атрибуты". Кнопки "Дин/Стат" делают соответствующие свойства динамическими либо статическими.
</p>
<h2><span class="mw-headline" id=".D0.9E.D0.B1.D1.89.D0.B0.D1.8F_.D0.BA.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D1.8F_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D1.8F"><span class="mw-headline-number">6</span> <span id="Cfg" title="#Cfg">Общая конфигурация модуля</span></span></h2>
<p>Для настройки собственного поведения в неочевидных ситуациях, модулем предоставляется возможность настройки отдельных параметров посредством интерфейса управления OpenSCADA (рис.6). Таковыми параметрами являются:
</p>
<ul><li> Состояние модуля: "Исполняется", доступное количество экранов в библиотеке Qt и перечень открытых основных окон.</li>
<li> Имя удалённой OpenSCADA станции с движком визуализации СВУ и ссылка на страницу конфигурации перечня внешних OpenSCADA станций.</li>
<li> Начальный пользователь — указывает, от имени какого пользователя открывать окно модуля без запроса пароля, для локальной станции. Для удалённой станции указывает на пользователя, отличного от типового, указанного в конфигурации хоста.</li>
<li> Пароль пользователя (удалённая станция) — пароль пользователя, отличного от типового, указанного в конфигурации хоста.</li>
<li> Время восстановления подключения, в секундах — указывает на время повтора восстановления потерянного удалённого подключения.</li>
<li> Время жизни и максимальное количество страниц в кеше. Визуализатор осуществляет ускорение работы пользовательского интерфейса путём помещения ранее открытых страниц в кеш, для контроля времени хранения и максимального количества страниц в котором данные свойства и предназначены. Указание нулевого значение вообще исключит очистку кеша.</li>
<li> Проекты, через символ разделителя ';', для запуска их автоматического исполнения с запуском модуля. Для предоставления возможности указания открытия окна исполнения проекта на нужном дисплее, много дисплейных систем, предусмотрен формат записи имени проекта "PrjName-1", где 1 — номер целевого дисплея. Для подключения к фоновому или другому открытому сеансу использовать "<b>ses_{SesID}</b>".</li></ul>
<dl><dd><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../../en/files/At.png" width="22" /></a> Функция выбора дисплея возможна для невиртуального и не повторения рабочего стола, т.е. при использовании xinerma или NVidia в соответствующем режиме. Технически, функция Qt screen() должна возвращать разные виджеты дисплея для их номеров.</dd></dl>
<ul><li> Выход при закрытии последнего исполняющегося проекта — полезно для решений, сразу запускающихся на интерфейсе исполнения проекта.</li>
<li> Сбрасывать стили виджетов к общему — необходимо для некоторых стилей виджетов вроде "gtk" в работе некоторых специфических виджетов в режиме исполнения, вроде кнопок для цвета фона и изображений.</li></ul>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:1057px;"><a class="image" href="http://oscada.org/wiki/File:Vision_cfg_ru.png"><img class="thumbimage" height="567" src="../files/Vision_cfg_ru.png" width="1055" /></a>  <div class="thumbcaption">Рис.6. Страница конфигурации модуля.</div></div></div></div>






</div><table style="border-top: dotted 2px #999999; margin-top: 20pt; color: gray;" width="100%"><tr><td style="text-align: left;" width="40%"><a href="http://oscada.org/wiki/Modules/Vision/ru">Modules/Vision/ru</a> - <a href="http://oscada.org/en/main/about-the-project/licenses/">GFDL</a></td><td style="text-align: center;">October 2021</td><td style="text-align: right;" width="40%">OpenSCADA 1+r2777</td></tr></table></body>
</html>