<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html class="client-nojs" dir="ltr" lang="en">
<head>
<title>Модулі/SQLite - OpenSCADAWiki</title>
<meta content="MediaWiki 1.26.4" name="generator" />
<link href="https://www.gnu.org/copyleft/fdl.html" rel="copyright" />
<link href="../files/doc.css" rel="stylesheet" /></head>
<body><div id="mw_header">
			<div class="mw-indicators">
</div>
			<h1 id="firstHeading" lang="uk">Модулі/SQLite</h1>
		</div><div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="uk"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a class="external text" href="http://oscada.org/wiki/index.php?title=Special:Translate&amp;group=page-Modules%2FSQLite&amp;action=page&amp;filter=&amp;language=uk" rel="nofollow noreferrer noopener" target="_blank">translated version</a></span> of the page <a class="external" href="http://oscada.org/wiki/Modules/SQLite" title="Modules/SQLite">Modules/SQLite</a> and the translation is 100% complete.</div><hr /><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" href="http://oscada.org/wiki/Modules/SQLite" title="Modules/SQLite (100% translated)">English</a>&nbsp;• ‎<a class="mw-pt-progress mw-pt-progress--complete" href="http://oscada.org/wiki/Modules/SQLite/ru" title="Модули/SQLite (100% translated)">российский</a>&nbsp;• ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">українська</span></div></div>
<div class="noprint" style="float:right; border:1px solid gray; width:300px; background-color:ivory; padding:2px;">
<table cellspacing="0">
<tr>
<td> <a class="image" href="http://oscada.org/wiki/File:Constr.png"><img alt="Constr.png" height="32" src="../files/Constr.png" width="32" /></a>
</td>
<td style="padding-left:5px;"> The translation checking and actualizing
</td></tr></table>
</div>
<table class="wikitable">

<tr>
<th> Модуль </th>
<th> Ім'я </th>
<th> Версія </th>
<th> Ліцензія </th>
<th> Джерело </th>
<th> Мови </th>
<th> Платформи </th>
<th> Тип </th>
<th> Автор </th>
<th> Опис
</th></tr>

<tr>
<td> <a href="../Modules/SQLite.html" title="Special:MyLanguage/Modules/SQLite">SQLite</a> </td>
<td> БД SQLite </td>
<td> 2.3 </td>
<td> GPL2 </td>
<td> bd_SQLite.so </td>
<td> en,uk,ru,de </td>
<td> x86,x86_64,ARM
</td>
<td> БД </td>
<td> Роман Савоченко </td>
<td> Модуль БД. Надає підтримку БД SQLite.
</td></tr></table>
<div class="toc" id="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D1.96.D1.97_.D0.BD.D0.B0.D0.B4_.D0.91.D0.94"><span class="tocnumber">1</span> <span class="toctext">Операції над БД</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D1.96.D1.97_.D0.BD.D0.B0.D0.B4_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D0.B5.D1.8E"><span class="tocnumber">2</span> <span class="toctext">Операції над таблицею</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D1.96.D1.97_.D0.BD.D0.B0.D0.B4_.D0.B2.D0.BC.D1.96.D1.81.D1.82.D0.BE.D0.BC_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D1.96"><span class="tocnumber">3</span> <span class="toctext">Операції над вмістом таблиці</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#.D0.9F.D1.80.D0.B0.D0.B2.D0.B0_.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF.D1.83"><span class="tocnumber">4</span> <span class="toctext">Права доступу</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#.D0.9F.D1.80.D0.BE.D0.B4.D1.83.D0.BA.D1.82.D0.B8.D0.B2.D0.BD.D1.96.D1.81.D1.82.D1.8C_.D0.91.D0.94"><span class="tocnumber">5</span> <span class="toctext">Продуктивність БД</span></a></li>
</ul>
</div>

<p>Модуль "SQLite" надає до OpenSCADA підтримку БД SQLite. БД SQLite є невеличкою та вбудованою БД яка підтримує SQL-запити. БД SQLite розповсюджується за вільною ліцензією. Ознайомитися з БД можна на сайті БД — <a class="external free" href="http://sqlite.org" rel="nofollow noreferrer noopener" target="_blank">http://sqlite.org</a>. Модуль оснований на бібліотеці API виробника БД мови "C". Модуль дозволяє виконувати дії над базами даних, таблицями та вмістом таблиць.
</p>
<h2><span class="mw-headline" id=".D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D1.96.D1.97_.D0.BD.D0.B0.D0.B4_.D0.91.D0.94"><span class="mw-headline-number">1</span> Операції над БД</span></h2>
<p>Підтримуються операції відкриття та закриття БД, з можливістю створення нової БД при відкритті та видалення існуючої при закритті. У термінах підсистеми "БД" OpenSCADA, відкриттям БД є її реєстрація для наступного використання у системі. Також, підтримується операція запиту переліку таблиць у БД.
</p><p>БД SQLite адресується шляхом визначення ім'я файлу БД у форматі "<b>{FileDBPath}</b>". Де:
</p>
<ul><li> <i>FileDBPath</i> — повний шлях до файлу БД (./oscada/Main.db).</li></ul>
<dl><dd>Використовуйте порожній шлях для створення тимчасової бази даних на диску.</dd>
<dd>Використовуйте ":memory:" для створення тимчасової бази даних у пам'яті.</dd></dl>
<h2><span class="mw-headline" id=".D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D1.96.D1.97_.D0.BD.D0.B0.D0.B4_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D0.B5.D1.8E"><span class="mw-headline-number">2</span> Операції над таблицею</span></h2>
<p>Підтримуються операції відкриття, закриття таблиці, з можливістю створення нової таблиці при відкритті та видалення існуючої при закриті, а також запит структури таблиці.
</p>
<h2><span class="mw-headline" id=".D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D1.96.D1.97_.D0.BD.D0.B0.D0.B4_.D0.B2.D0.BC.D1.96.D1.81.D1.82.D0.BE.D0.BC_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D1.96"><span class="mw-headline-number">3</span> Операції над вмістом таблиці</span></h2>
<ul><li> сканування записів таблиці;</li>
<li> запит значень визначених записів;</li>
<li> встановлення значень визначених записів;</li>
<li> видалення записів.</li></ul>
<p>API підсистеми "БД" передбачає доступ до вмісту таблиці за значенням ключового(их) полів. Так, операція запиту запису передбачає попереднє встановлення ключових стовпчиків об'єкту TConfig, за яким буде здійснено запит. Створення нового запису(рядка) здійснюється операцією встановлення значень запису, який відсутній.
</p><p>Модуль дозволяє динамічно міняти структуру таблиць БД SQLite шляхом створення нової БД з потрібною структурою та копіювання до неї даних зі старої. Так, у випадку невідповідності структури таблиці та структури запису що встановлюється, структуру таблиці буде приведено до потрібної структури запису. У випадку запиту значень запису та невідповідності структур запису і таблиці, буде отримано тільки значення загальних елементів запису та таблиці. Модуль не відстежує послідовності розташування елементів запису та структури таблиці!
</p><p>Модулем реалізується механізм підтримки багатомовних текстових змінних. Для полів із багатомовною текстовою змінною створюються стовпчики окремих мов у форматі "<b>{lang}#{FldID}</b>" (en#NAME). При цьому базовий стовпчик містить значення для базової мови. Стовпчики окремих мов створюються за потреби, у момент збереження до БД та при виконанні OpenSCADA у відповідній локалі. У випадку відсутності значень для конкретної мови буде використано значення для базової мови.
</p><p>Типи елементів БД SQLite наступним чином відповідають типам елементів системи OpenSCADA:
</p>
<table class="wikitable">

<tr>
<th> Типи полів системи OpenSCADA </th>
<th> Типи полів БД SQLite
</th></tr>
<tr>
<td> TFld::String </td>
<td> TEXT
</td></tr>
<tr>
<td> TFld::Integer, TFld::Boolean </td>
<td> INTEGER
</td></tr>
<tr>
<td> TFld::Real </td>
<td> DOUBLE
</td></tr></table>
<h2><span class="mw-headline" id=".D0.9F.D1.80.D0.B0.D0.B2.D0.B0_.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF.D1.83"><span class="mw-headline-number">4</span> Права доступу</span></h2>
<p>Права доступу до БД визначаються правами доступу до окремо взятого файлу БД. Модулем підтримується робота з файлами БД SQLite у режимі тільки для читання, наприклад, у демонстраціях.
</p>
<h2><span class="mw-headline" id=".D0.9F.D1.80.D0.BE.D0.B4.D1.83.D0.BA.D1.82.D0.B8.D0.B2.D0.BD.D1.96.D1.81.D1.82.D1.8C_.D0.91.D0.94"><span class="mw-headline-number">5</span> Продуктивність БД</span></h2>
<p>Вимірювання продуктивності БД здійснюється тестом "БД", модуля системних тестів "SystemTests", шляхом виконання операцій над записами структурою: "<b>name char (20), descr char (50), val double (10.2), id int (7), stat bool, reqKey string, reqVal string</b>".
</p>
<table class="wikitable">

<tr>
<th> Operation </th>
<th> Nokia N800, SD 4GClass6<br />Nokia N900 </th>
<th> RPi2 Debian8 Class10 UHS1;<br />RPi3 Debian8 Class10 UHS1;<br />OrangePiZero Debian8 Class2 </th>
<th> AMD Turion L625 1.6, 2G [HDD; SSD]<br />Intel(R) Core(TM) i3 CPU 1.33GHz, 3G [HDD; SSD];<br />Intel(R) Core(TM) i7 CPU 2.6GHz, 12G FastSSD
</th></tr>
<tr>
<td> <i>Creation of the 1000 records, seconds:</i> </td>
<td> 3.3; 1.96 </td>
<td> 0.78; 0.43; 0.48 </td>
<td> [0.49; 0.2]; [0.39; 0.22]; 0.056
</td></tr>
<tr>
<td> <i>Updating of the 1000 records, seconds:</i> </td>
<td> 3.2; 2.47 </td>
<td> 0.7; 0.41; 0.45 </td>
<td> [0.48; 0.19]; [0.40; 0.21]; 0.053
</td></tr>
<tr>
<td> <i>Getting of the 1000 records, seconds:</i> </td>
<td> 2.6; 1.81 </td>
<td> 0.69; 0.38; 0.45 </td>
<td> [0.36; 0.19]; [0.31; 0.21]; 0.051
</td></tr>
<tr>
<td> <i>Seeking of the 1000 records, seconds:</i> </td>
<td> 3.1; 1.48 </td>
<td> 0.76; 0.42; 0.51 </td>
<td> [-; 0.22]; [0.21; 0.22]; 0.052
</td></tr>
<tr>
<td> <i>Seeking in preload of the 1000 records, seconds:</i> </td>
<td> 0.53; 0.29 </td>
<td> 0.13; 0.071; 0.088 </td>
<td> [-; 0.028]; [0.027; 0.028]; 0.0073
</td></tr>
<tr>
<td> <i>Deleting of the 1000 record, seconds:</i> </td>
<td> 1.18; 0.43 </td>
<td> 0.20; 0.10; 0.13 </td>
<td> [0.08; 0.058]; [0.067; 0.069]; 0.012
</td></tr></table>






</div></body>
</html>