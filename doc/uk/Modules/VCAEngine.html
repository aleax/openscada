<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html class="client-nojs" dir="ltr" lang="en">
<head>
<meta charset="UTF-8" />
<title>Модулі/Рушій Середовища Візуалізації та Управління (СВУ) - OpenSCADAWiki</title>
<meta content="MediaWiki 1.26.4" name="generator" />
<link href="https://www.gnu.org/copyleft/fdl.html" rel="copyright" />
<link href="../../en/files/doc.css" rel="stylesheet" /></head>
<body><div class="floatright"><a href="http://oscada.org"><img alt="OpenSCADA" src="../../en/files/Logo-big.png" /></a></div><div id="mw_header">
			<div class="mw-indicators">
</div>
			<h1 id="firstHeading" lang="uk">Модулі/Рушій Середовища Візуалізації та Управління (СВУ)</h1>
		</div><div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="uk"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a class="external text" href="http://oscada.org/wiki/index.php?title=Special:Translate&amp;group=page-Modules%2FVCAEngine&amp;action=page&amp;filter=&amp;language=uk" rel="nofollow noreferrer noopener" target="_blank">translated version</a></span> of the page <a class="external" href="http://oscada.org/wiki/Modules/VCAEngine" title="Modules/VCAEngine">Modules/VCAEngine</a> and the translation is 100% complete.</div><hr /><div class="mw-pt-languages" dir="ltr" lang="en"><div class="mw-pt-languages-list autonym"><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" href="../../en/Modules/VCAEngine.html" title="Modules/VCAEngine (100% translated)">English</a>&nbsp;• ‎<a class="mw-pt-progress mw-pt-progress--complete" href="../../ru/Modules/VCAEngine.html" title="Модули/Движок Среды Визуализации и Управлений (СВУ) (100% translated)">российский</a>&nbsp;• ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">українська</span></div></div>
<table class="wikitable">

<tr>
<th> Модуль </th>
<th> Ім'я </th>
<th> Версія </th>
<th> Ліцензія </th>
<th> Джерело </th>
<th> Мови </th>
<th> Платформи </th>
<th> Тип </th>
<th> Автор
</th></tr>

<tr>
<td> <a href="../Modules/VCAEngine.html" title="Special:MyLanguage/Modules/VCAEngine">VCAEngine</a> </td>
<td> Рушій Середовища Візуалізації та Управління
</td>
<td> 7.4 </td>
<td> GPL2 </td>
<td> ui_VCAEngine.so </td>
<td> en,uk,ru,de </td>
<td> x86,x86_64,ARM
</td>
<td> UI </td>
<td> Роман Савоченко
</td></tr>
<tr>
<th colspan="9"> Опис
</th></tr>
<tr>
<td colspan="9"> Загальний рушій середовища візуалізації та керування.
<ul><li> <b>Зробити (To Do):</b></li></ul>
<dl><dd> - доповнити користувацьке API редагування файлів растром (PNG, JPEG, GIF), посередництвом LibGD2, та векторно (SVG):
<dl><dd>+ доповнити завантаженням та збереженням змін зображень до таблиці сеансу та із процедур користувача, дозволяє редагувати SVG (XML);</dd>
<dd>- реалізувати основні функції об'єкту GD (у <a href="../Modules/FLibSYS.html" title="Special:MyLanguage/Modules/FLibSYS">Special.FLibSYS</a>).</dd></dl></dd>
<dd> ... <i>також для <a href="../Modules/Vision.html" title="Special:MyLanguage/Modules/Vision">Vision</a></i> ...</dd>
<dd> - перенести запити часу виконання до VCAEngine у асинхронний режим;
<dl><dd>&nbsp;!&gt; має проблему із опрацюванням рекурсивних подій у event(), для випадку втрати подій відпускання миші при опрацюванні подій натискання миші.</dd></dl></dd>
<dd> - реалізувати фонове виконання редагованих сторінок у режимі розробки, для візуального формування діаграм спільно із <a href="../Modules/BlockCalc.html" title="Special:MyLanguage/Modules/BlockCalc">BlockCalc</a> та DAQ-джерелами загалом.</dd>
<dd> ... <i>також для <a href="../Modules/Vision.html" title="Special:MyLanguage/Modules/Vision">Vision</a> та <a href="../Modules/WebVision.html" title="Special:MyLanguage/Modules/WebVision">WebVision</a></i> ...</dd>
<dd> - додати глобальне меню простору користувача за допомогою специфічних до проекту властивостей;</dd>
<dd> - розробити формування блокових діаграм (динамічними кадрами) із графічного інтерфейсу.</dd></dl>
</td></tr></table>
<p>Модуль надає до OpenSCADA рушій середовища візуалізації та управління (СВУ). Сам модуль не реалізує візуалізації СВУ, а містить дані відповідно до концепції "Модель/дані – Інтерфейс". Візуалізація даних цього модуля виконується модулями візуалізації СВУ, наприклад, модулем <a href="../Modules/Vision.html" title="Special:MyLanguage/Modules/Vision">Vision</a> та <a href="../Modules/WebVision.html" title="Special:MyLanguage/Modules/WebVision">WebVision</a>.
</p><p>Середовище візуалізації та управління (СВУ) є невід'ємною складовою SCADA системи. Воно застосовується на клієнтських станціях з метою доступного представлення інформації про об'єкт управління та видачі керуючого впливу на об'єкт. У різних практичних ситуаціях та умовах можуть застосовуватися СВУ, побудовані на різних принципах візуалізації. Наприклад, це можуть бути бібліотеки віджетів Qt, GTK+, wxWidgets або гіпертекстові механізми на основі технологій HTML, XHTML, XML, CSS та JavaScript або сторонні додатки візуалізації, реалізовані на різних мовах програмування Java, Python та інше. Будь-який з цих принципів має свої переваги та недоліки, комбінація яких може стати непереборною перепоною у можливості використання СВУ у тому або іншому практичному випадку. Наприклад, технології на кшталт бібліотеки Qt дозволяють створювати високопродуктивні СВУ, що безсумнівно важливо для станцій оператору управління технологічним процесом (ТП). Однак, необхідність інсталяції даного клієнтського ПЗ може зробити його використання неможливим у окремих випадках. З іншого боку, Web-технології не потребують інсталяції на клієнтські системи та є гранично багатоплатформними (достатньо вказати посилання на Web-сервер у будь-якому Web-браузері), що найбільш важливо для різних інженерних та адміністративних станцій. З іншого боку, продуктивність та надійність таких інтерфейсів нижче, що практично виключає їх використання на станціях оператору ТП.
</p><p>OpenSCADA має гранично гнучку архітектуру, яка дозволяє створювати зовнішні інтерфейси, у тому числі й користувацькі, на будь-якій основі та смак. Наприклад, середовище конфігурації OpenSCADA доступне як на Qt-бібліотеці, так і на Web-основі.
</p><p>У той-же час, незалежне створення реалізацій СВУ на різній основі може потягти за собою неможливість використання даних конфігурації однієї СВУ на іншій. Що незручно та обмежено з користувацького боку, а також витратно у плані реалізації та подальшої підтримки.
</p><p>З метою запобігання цих проблем, а також створення у найкоротший термін повного спектру різних типів СВУ, засновано <a class="external" href="http://oscada.org/wiki/Special:MyLanguage/Sub-projects/VCA" title="Special:MyLanguage/Sub-projects/VCA">проект створення концепції СВУ</a>. Результатом цього проекту став даний модуль рушія(моделі даних) СВУ, а також модулі безпосередньої візуалізації <a href="../Modules/Vision.html" title="Special:MyLanguage/Modules/Vision">Vision</a> та <a href="../Modules/WebVision.html" title="Special:MyLanguage/Modules/WebVision">WebVision</a>.
</p>
<div class="toc" id="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.9F.D1.80.D0.B8.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.BD.D1.8F"><span class="tocnumber">1</span> <span class="toctext">Призначення</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.D0.9A.D0.BE.D0.BD.D1.84.D1.96.D0.B3.D1.83.D1.80.D0.B0.D1.86.D1.96.D1.8F_.D1.82.D0.B0_.D1.84.D0.BE.D1.80.D0.BC.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F_.D1.96.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D1.96.D0.B2_.D0.A1.D0.92.D0.A3"><span class="tocnumber">2</span> <span class="toctext">Конфігурація та формування інтерфейсів СВУ</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.D0.90.D1.80.D1.85.D1.96.D1.82.D0.B5.D0.BA.D1.82.D1.83.D1.80.D0.B0"><span class="tocnumber">3</span> <span class="toctext">Архітектура</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#.D0.9A.D0.B0.D0.B4.D1.80.D0.B8_.D1.82.D0.B0_.D0.B5.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.B8_.D0.B2.D1.96.D0.B4.D0.BE.D0.B1.D1.80.D0.B0.D0.B6.D0.B5.D0.BD.D0.BD.D1.8F_.28.D0.B2.D1.96.D0.B4.D0.B6.D0.B5.D1.82.D0.B8.29"><span class="tocnumber">3.1</span> <span class="toctext">Кадри та елементи відображення (віджети)</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#.D0.9F.D1.80.D0.BE.D0.B5.D0.BA.D1.82"><span class="tocnumber">3.2</span> <span class="toctext"><span>Проект</span></span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#.D0.A1.D0.B5.D0.B0.D0.BD.D1.81_.D0.B2.D0.B8.D0.BA.D0.BE.D0.BD.D0.B0.D0.BD.D0.BD.D1.8F_.D0.BF.D1.80.D0.BE.D0.B5.D0.BA.D1.82.D1.83"><span class="tocnumber">3.3</span> <span class="toctext">Сеанс виконання проекту</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#.D0.A1.D1.82.D0.B8.D0.BB.D1.96"><span class="tocnumber">3.4</span> <span class="toctext">Стилі</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#.D0.9F.D0.BE.D0.B4.D1.96.D1.97.2C_.D1.97.D1.85_.D0.BE.D0.B1.D1.80.D0.BE.D0.B1.D0.BA.D0.B0_.D1.82.D0.B0_.D0.BA.D0.B0.D1.80.D1.82.D0.B8_.D0.BF.D0.BE.D0.B4.D1.96.D0.B9"><span class="tocnumber">3.5</span> <span class="toctext">Події, їх обробка та карти подій</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#.D0.A1.D0.B8.D0.B3.D0.BD.D0.B0.D0.BB.D1.96.D0.B7.D0.B0.D1.86.D1.96.D1.8F"><span class="tocnumber">3.6</span> <span class="toctext"><span>Сигналізація</span></span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#.D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D1.96.D0.BD.D0.BD.D1.8F_.D0.BF.D1.80.D0.B0.D0.B2.D0.B0.D0.BC.D0.B8"><span class="tocnumber">3.7</span> <span class="toctext">Управління правами</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#.D0.97.D0.B2.27.D1.8F.D0.B7.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F_.D0.B7_.D0.B4.D0.B8.D0.BD.D0.B0.D0.BC.D1.96.D0.BA.D0.BE.D1.8E"><span class="tocnumber">3.8</span> <span class="toctext">Зв'язування з динамікою</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D1.96.D1.82.D0.B8.D0.B2.D0.B8_.D0.B2.D1.96.D0.B4.D0.B6.D0.B5.D1.82.D1.96.D0.B2"><span class="tocnumber">3.9</span> <span class="toctext"><span>Примітиви віджетів</span></span></a>
<ul>
<li class="toclevel-3"><a href="#.D0.95.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D1.80.D0.BD.D0.B0_.D0.B3.D1.80.D0.B0.D1.84.D1.96.D1.87.D0.BD.D0.B0_.D1.84.D1.96.D0.B3.D1.83.D1.80.D0.B0_.28ElFigure.29"><span class="tocnumber">3.9.1</span> <span class="toctext"><span>Елементарна графічна фігура (ElFigure)</span></span></a></li>
<li class="toclevel-3"><a href="#.D0.95.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82_.D1.84.D0.BE.D1.80.D0.BC.D0.B8_.28FormEl.29"><span class="tocnumber">3.9.2</span> <span class="toctext"><span>Елемент форми (FormEl)</span></span></a></li>
<li class="toclevel-3"><a href="#.D0.95.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82_.D1.82.D0.B5.D0.BA.D1.81.D1.82.D1.83_.28Text.29"><span class="tocnumber">3.9.3</span> <span class="toctext"><span>Елемент тексту (Text)</span></span></a></li>
<li class="toclevel-3"><a href="#.D0.95.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82_.D0.B2.D1.96.D0.B4.D0.BE.D0.B1.D1.80.D0.B0.D0.B6.D0.B5.D0.BD.D0.BD.D1.8F_.D0.BC.D0.B5.D0.B4.D1.96.D0.B0-.D0.BC.D0.B0.D1.82.D0.B5.D1.80.D1.96.D0.B0.D0.BB.D1.96.D0.B2_.28Media.29"><span class="tocnumber">3.9.4</span> <span class="toctext"><span>Елемент відображення медіа-матеріалів (Media)</span></span></a></li>
<li class="toclevel-3"><a href="#.D0.95.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82_.D0.BF.D0.BE.D0.B1.D1.83.D0.B4.D0.BE.D0.B2.D0.B8_.D0.B4.D1.96.D0.B0.D0.B3.D1.80.D0.B0.D0.BC_.28Diagram.29"><span class="tocnumber">3.9.5</span> <span class="toctext"><span>Елемент побудови діаграм (Diagram)</span></span></a></li>
<li class="toclevel-3"><a href="#.D0.95.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82_.D0.BF.D0.BE.D0.B1.D1.83.D0.B4.D0.BE.D0.B2.D0.B8_.D0.BF.D1.80.D0.BE.D1.82.D0.BE.D0.BA.D0.BE.D0.BB.D1.96.D0.B2_.D0.BD.D0.B0_.D0.BE.D1.81.D0.BD.D0.BE.D0.B2.D1.96_.D0.B0.D1.80.D1.85.D1.96.D0.B2.D1.96.D0.B2_.D0.BF.D0.BE.D0.B2.D1.96.D0.B4.D0.BE.D0.BC.D0.BB.D0.B5.D0.BD.D1.8C_.28Protocol.29"><span class="tocnumber">3.9.6</span> <span class="toctext"><span>Елемент побудови протоколів на основі архівів повідомлень (Protocol)</span></span></a></li>
<li class="toclevel-3"><a href="#.D0.95.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82_.D1.84.D0.BE.D1.80.D0.BC.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F_.D0.B7.D0.B2.D1.96.D1.82.D0.BD.D0.BE.D1.97_.D0.B4.D0.BE.D0.BA.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D1.86.D1.96.D1.97_.28Document.29"><span class="tocnumber">3.9.7</span> <span class="toctext"><span>Елемент формування звітної документації (Document)</span></span></a></li>
<li class="toclevel-3"><a href="#.D0.9A.D0.BE.D0.BD.D1.82.D0.B5.D0.B9.D0.BD.D0.B5.D1.80_.28Box.29"><span class="tocnumber">3.9.8</span> <span class="toctext"><span>Контейнер (Box)</span></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-13"><a href="#.D0.92.D0.B8.D0.BA.D0.BE.D1.80.D0.B8.D1.81.D1.82.D0.B0.D0.BD.D0.BD.D1.8F_.D0.91.D0.94_.D0.B4.D0.BB.D1.8F_.D0.B7.D0.B1.D0.B5.D1.80.D1.96.D0.B3.D0.B0.D0.BD.D0.BD.D1.8F_.D0.B1.D1.96.D0.B1.D0.BB.D1.96.D0.BE.D1.82.D0.B5.D0.BA_.D0.B2.D1.96.D0.B4.D0.B6.D0.B5.D1.82.D1.96.D0.B2_.D1.82.D0.B0_.D0.BF.D1.80.D0.BE.D0.B5.D0.BA.D1.82.D1.96.D0.B2"><span class="tocnumber">3.10</span> <span class="toctext">Використання БД для зберігання бібліотек віджетів та проектів</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#API_.D0.BA.D0.BE.D1.80.D0.B8.D1.81.D1.82.D1.83.D0.B2.D0.B0.D1.86.D1.8C.D0.BA.D0.BE.D0.B3.D0.BE_.D0.BF.D1.80.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F_.D1.82.D0.B0_.D1.81.D0.B5.D1.80.D0.B2.D1.96.D1.81.D0.BD.D1.96_.D1.96.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D0.B8_OpenSCADA"><span class="tocnumber">3.11</span> <span class="toctext"><span>API користувацького програмування та сервісні інтерфейси OpenSCADA</span></span></a>
<ul>
<li class="toclevel-3"><a href="#API_.D0.BA.D0.BE.D1.80.D0.B8.D1.81.D1.82.D1.83.D0.B2.D0.B0.D1.86.D1.8C.D0.BA.D0.BE.D0.B3.D0.BE_.D0.BF.D1.80.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F"><span class="tocnumber">3.11.1</span> <span class="toctext"><span>API користувацького програмування</span></span></a></li>
<li class="toclevel-3"><a href="#.D0.A1.D0.B5.D1.80.D0.B2.D1.96.D1.81.D0.BD.D1.96_.D1.96.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D0.B8_OpenSCADA"><span class="tocnumber">3.11.2</span> <span class="toctext">Сервісні інтерфейси OpenSCADA</span></a>
<ul>
<li class="toclevel-4"><a href="#.D0.94.D0.BE.D1.81.D1.82.D1.83.D0.BF_.D0.B4.D0.BE_.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D1.8C_.D0.B0.D1.82.D1.80.D0.B8.D0.B1.D1.83.D1.82.D1.96.D0.B2_.D0.B5.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D1.96.D0.B2_.D0.B2.D1.96.D0.B7.D1.83.D0.B0.D0.BB.D1.96.D0.B7.D0.B0.D1.86.D1.96.D1.97_.28.D0.B2.D1.96.D0.B4.D0.B6.D0.B5.D1.82.D0.B8.29"><span class="tocnumber">3.11.2.1</span> <span class="toctext">Доступ до значень атрибутів елементів візуалізації (віджети)</span></a></li>
<li class="toclevel-4"><a href="#.D0.93.D1.80.D1.83.D0.BF.D0.BE.D0.B2.D0.B8.D0.B9_.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF_.D0.B4.D0.BE_.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D1.8C_.D0.B0.D1.82.D1.80.D0.B8.D0.B1.D1.83.D1.82.D1.96.D0.B2_.D0.B5.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D1.96.D0.B2_.D0.B2.D1.96.D0.B7.D1.83.D0.B0.D0.BB.D1.96.D0.B7.D0.B0.D1.86.D1.96.D1.97_.28.D0.B2.D1.96.D0.B4.D0.B6.D0.B5.D1.82.D0.B0.D0.BC.29"><span class="tocnumber">3.11.2.2</span> <span class="toctext">Груповий доступ до значень атрибутів елементів візуалізації (віджетам)</span></a></li>
<li class="toclevel-4"><a href="#.D0.94.D0.BE.D1.81.D1.82.D1.83.D0.BF_.D0.B4.D0.BE_.D1.81.D1.82.D0.BE.D1.80.D1.96.D0.BD.D0.BE.D0.BA_.D1.81.D0.B5.D0.B0.D0.BD.D1.81.D1.83"><span class="tocnumber">3.11.2.3</span> <span class="toctext">Доступ до сторінок сеансу</span></a></li>
<li class="toclevel-4"><a href="#.D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D1.96.D0.BD.D0.BD.D1.8F_.D1.81.D0.B8.D0.B3.D0.BD.D0.B0.D0.BB.D1.96.D0.B7.D0.B0.D1.86.D1.96.D1.94.D1.8E"><span class="tocnumber">3.11.2.4</span> <span class="toctext">Управління сигналізацією</span></a></li>
<li class="toclevel-4"><a href="#.D0.9C.D0.B0.D0.BD.D1.96.D0.BF.D1.83.D0.BB.D1.8F.D1.86.D1.96.D1.8F_.D1.81.D0.B5.D0.B0.D0.BD.D1.81.D0.B0.D0.BC.D0.B8_.D0.BF.D1.80.D0.BE.D0.B5.D0.BA.D1.82.D1.96.D0.B2"><span class="tocnumber">3.11.2.5</span> <span class="toctext">Маніпуляція сеансами проектів</span></a></li>
<li class="toclevel-4"><a href="#.D0.93.D1.80.D1.83.D0.BF.D0.BE.D0.B2.D0.B8.D0.B9_.D0.B7.D0.B0.D0.BF.D0.B8.D1.82_.D0.B4.D0.B5.D1.80.D0.B5.D0.B2.D0.B0_.D0.B1.D1.96.D0.B1.D0.BB.D1.96.D0.BE.D1.82.D0.B5.D0.BA_.D0.B2.D1.96.D0.B4.D0.B6.D0.B5.D1.82.D1.96.D0.B2"><span class="tocnumber">3.11.2.6</span> <span class="toctext">Груповий запит дерева бібліотек віджетів</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#.D0.9A.D0.BE.D0.BD.D1.84.D1.96.D0.B3.D1.83.D1.80.D0.B0.D1.86.D1.96.D1.8F_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D1.8F_.D0.B7.D0.B0_.D0.BF.D0.BE.D1.81.D0.B5.D1.80.D0.B5.D0.B4.D0.BD.D0.B8.D1.86.D1.82.D0.B2.D0.BE.D0.BC_.D1.96.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D1.83_.D1.83.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D1.96.D0.BD.D0.BD.D1.8F_OpenSCADA"><span class="tocnumber">4</span> <span class="toctext">Конфігурація модуля за посередництвом інтерфейсу управління OpenSCADA</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.BD.D1.8F"><span class="mw-headline-number">1</span> Призначення</span></h2>
<p>Даний модуль рушія(моделі даних) СВУ призначено для формування логічної структури СВУ та виконання сеансів окремих екземплярів проектів СВУ. Також, модуль надає кінцевим візуалізаторам СВУ всі необхідні дані, як за посередництвом локальних механізмів взаємодії OpenSCADA, так і інтерфейсу управління OpenSCADA, для віддаленого доступу.
</p><p>Фінальна версія цього модуля СВУ забезпечить:
</p><p>Перелічимо можливості, які зможе та забезпечує СВУ, побудована на основі даного проекту:
</p>
<ul><li> три рівні складності у формуванні інтерфейсу візуалізації, які дозволяють органічно освоювати та застосовувати інструментарій за принципом — від простого до складного:</li></ul>
<dl><dd><ol><li> формування з шаблонних кадрів, шляхом призначення динаміки та без графічної конфігурації;</li>
<li> графічне формування нових кадрів, шляхом використання готових елементів візуалізації з бібліотеки — мнемосхеми;</li>
<li> формування, у бібліотеці, нових: кадрів, шаблонних кадрів та елементів відображення.</li></ol></dd></dl>
<ul><li> побудова інтерфейсів візуалізації практично будь-якої складності (обмежену "дискретністю" функцій примітивів), починаючи від простих інтерфейсів моніторингу та, закінчуючи повноцінними ієрархічними інтерфейсами, що використовуються у SCADA системах;</li>
<li> надання різних способів формування та конфігурації користувацького інтерфейсу, заснованих на різних інтерфейсах графічного представлення (Qt, Web, ...), або-ж за посередництвом стандартного інтерфейсу управління OpenSCADA;</li>
<li> побудова та корекція інтерфейсу, призначення та зміна динаміки у процесі виконання;</li>
<li> побудова, на рівні користувача, нових шаблонних кадрів та формування спеціалізованих, під область застосування, бібліотек кадрів (наприклад, включення кадрів параметрів, графіків та інших елементів з ув'язкою їх один з другим), згідно до ідеї вторинного використання, накопичення та вдосконалення;</li>
<li> побудова нових користувацьких елементів візуалізації та формування спеціалізованих, під область застосування, бібліотек кадрів, згідно до ідеї вторинного використання, накопичення та вдосконалення;</li>
<li> опис логіки нових шаблонних кадрів та користувацьких елементів візуалізації як простими зв'язками, так і лаконічною, повноцінною мовою користувацького програмування;</li>
<li> можливість включення, до користувацьких елементів візуалізації, функцій (або кадрів обчислення функцій) об'єктної моделі OpenSCADA, практично зв'язуючи представлення з алгоритмом обчислення; наприклад, візуалізуючи бібліотеку моделей апаратів ТП, для подальшої візуальної побудови моделей ТП;</li>
<li> розподіл даних користувацьких інтерфейсів та інтерфейсів представлення цих даних, що дозволяє будувати інтерфейс користувача у одному середовищі, а виконувати у багатьох інших (Qt, Web, ...);</li>
<li> можливість підключення до виконуваного інтерфейсу для спостереження та корекції дій; наприклад, при навчанні операторів та контролю за його діями у реальному часі;</li>
<li> візуальна побудова різних схем з накладанням логічних зв'язків та подальшим централізованим виконанням у фоні — візуальна побудова та виконання математичних моделей, логічних схем, релейних схем та іншого;</li>
<li> надання, до OpenSCADA, функцій об'єктного API; може використовуватися для управління властивостями інтерфейсу візуалізації із користувацьких процедур;</li>
<li> побудова серверів для: кадрів, елементів візуалізації та проектів інтерфейсів візуалізації; з можливістю обслуговування множинних клієнтських підключень;</li>
<li> проста організація клієнтських станцій на різній основі (Qt, Web, ...), з підключенням до центрального серверу;</li>
<li> повноцінний механізм розподілу повноважень між користувачами, що дозволяє створювати та виконувати проекти з різними правами доступу до його компонентів;</li>
<li> гнучке формування правил сигналізацій та повідомлень, з урахуванням та підтримкою різних способів повідомлення;</li>
<li> підтримка користувацького формування палітри та шрифтових переваг інтерфейсу візуалізації, в стилях;</li>
<li> підтримка користувацького формування карт повідомлень під різне обладнання управління та переваги користувача;</li>
<li> підтримка профілів користувача, що дозволяють визначати різні властивості інтерфейсу візуалізації (гама кольорів, шрифтові особливості, переважні карти повідомлень);</li>
<li> гнучке зберігання та розповсюдження бібліотек віджетів, кадрів та проектів інтерфейсів візуалізації у БД, підтримуваних OpenSCADA; практично, користувачу треба тільки зареєструвати отриману БД з даними.</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id=".D0.9A.D0.BE.D0.BD.D1.84.D1.96.D0.B3.D1.83.D1.80.D0.B0.D1.86.D1.96.D1.8F_.D1.82.D0.B0_.D1.84.D0.BE.D1.80.D0.BC.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F_.D1.96.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D1.96.D0.B2_.D0.A1.D0.92.D0.A3"><span class="mw-headline-number">2</span> Конфігурація та формування інтерфейсів СВУ</span></h2>
<p>Сам модуль не містить механізмів візуального формування інтерфейсів СВУ, такі інструменти можуть надаватися модулями кінцевої візуалізації СВУ, наприклад, він надається модулем <a href="../Modules/Vision.html" title="Special:MyLanguage/Modules/Vision">Vision</a>.
</p><p>Хоча візуальних механізмів формування СВУ модулем не надається, для управління логічної структури надається механізм, реалізований на основі інтерфейсу управління OpenSCADA, а значить, доступний для використання у будь-якому конфігураторі OpenSCADA. Діалоги цього інтерфейсу розглянуто далі, у контексті розгляду архітектури модуля та його даних.
</p>
<h2><span class="mw-headline" id=".D0.90.D1.80.D1.85.D1.96.D1.82.D0.B5.D0.BA.D1.82.D1.83.D1.80.D0.B0"><span class="mw-headline-number">3</span> Архітектура</span></h2>
<p>СВУ, загалом, може працювати у двох режимах — розробки та виконання. У режимі розробки формується інтерфейс СВУ та його компоненти, визначаються механізми взаємодії. У режимі виконання здійснюється формування інтерфейсу СВУ та відбувається взаємодія з кінцевим користувачем, на основі розроблених СВУ.
</p><p>Інтерфейс СВУ формується з кадрів, кожний з яких, своєю чергою, формується з елементів примітивів або користувацьких елементів інтерфейсу. При цьому, користувацькі елементи інтерфейсу також формуються з примітивів або інших користувацьких елементів. Таким чином забезпечується ієрархічність та повторне використання вже розроблених компонентів.
</p><p>Кадри та користувацькі елементи розташовуються у бібліотеках віджетів. З елементів цих бібліотек формуються проекти інтерфейсів кінцевої візуалізації СВУ. На основі-ж цих проектів формуються сеанси візуалізації.
</p><p>Описану структуру СВУ приведено на рисунку.
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:VCA_struct_uk.png"><img alt="VCA struct uk.png" height="976" src="../files/VCA_struct_uk.png" width="855" /></a></div></div>
<p>Дана архітектура СВУ дозволяє реалізовувати підтримку трьох рівнів складності у процесі розробки інтерфейсів управління:
</p>
<ul><li> Формування інтерфейсу візуалізації та управління (ВУ) за допомогою бібліотеки шаблонних кадрів, шляхом розташування шаблонів кадрів до проекту та призначення динаміки.</li>
<li> Додатково до першого рівня здійснюється формування власних кадрів на основі бібліотеки похідних та базових віджетів. Можливе як пряме призначення динаміки у віджеті, так і подальше її призначення у проекті.</li>
<li> Додатково до другого рівня здійснюється самостійне формування довільних віджетів, нових шаблонних кадрів, та кадрів з використанням механізму опису логіки взаємодії та обробки подій на мові користувацького програмування OpenSCADA.</li></ul>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.9A.D0.B0.D0.B4.D1.80.D0.B8_.D1.82.D0.B0_.D0.B5.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.B8_.D0.B2.D1.96.D0.B4.D0.BE.D0.B1.D1.80.D0.B0.D0.B6.D0.B5.D0.BD.D0.BD.D1.8F_.28.D0.B2.D1.96.D0.B4.D0.B6.D0.B5.D1.82.D0.B8.29"><span class="mw-headline-number">3.1</span> Кадри та елементи відображення (віджети)</span></h3>
<p>Кадр це вікно, яке безпосередньо надає інформацію користувачу у графічній та/або текстовій формі. Група взаємопов'язаних кадрів формує цілісний користувацький інтерфейс ВУ.
</p><p>Вміст кадру формується з елементів відображення (віджетів). Віджети можуть бути базовими примітивами (різні елементарні фігури, текст, тренд та інше) та похідні, сформовані з базових або інших похідних віджетів. Всі віджети групуються за бібліотеками. У процесі роботи, користувач може формувати власні бібліотеки похідних віджетів.
</p><p>Власне сам кадр також є віджетом, який використовується у ролі кінцевого елементу візуалізації. А це означає, що бібліотеки віджетів можуть зберігати і заготовки кадрів, та шаблони результуючих сторінок користувацького інтерфейсу.
</p><p>Кадри та віджети є пасивними елементами, які зазвичай не містять зв'язків з динамікою та іншими кадрами, а тільки надають інформацію про властивості та характер динаміки(конфігурації), що підключається до властивостей. Активовані кадри, ті що містять посилання на динаміку та активні зв'язки, формують користувацький інтерфейс та зберігаються у проектах. У деяких випадках можливе пряме призначення динаміки у заготовках кадрів.
</p><p>Похідні кадри/віджети можуть містити вкладені віджети, які можуть бути склеєні-зв'язані один з одним логікою, за допомогою мови користувацького програмування OpenSCADA.
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:VCA_widget_uk.png"><img alt="VCA widget uk.png" height="585" src="../files/VCA_widget_uk.png" width="800" /></a></div></div>
<p>Віджет є елементом, за посередництвом якого забезпечується:
</p>
<ul><li> візуалізація оперативної та архівної інформації ведення ТП;</li>
<li> сигналізація про порушення ведення ТП;</li>
<li> перемикання між кадрами ТП;</li>
<li> управління технологічним обладнанням та параметрами ведення ТП.</li></ul>
<p>Налаштування та зв'язування віджетів здійснюється за посередництвом їх властивостей. Батьківський віджет, та віджети що містяться у ньому, можуть доповнюватися користувацькими властивостями. Надалі, користувацькі та статичні атрибути пов'язуються з властивостями вкладених віджетів, за посередництвом внутрішньої логіки. Для відображення динаміки (поточних та архівних даних) властивості віджетів динамізуються, тобто пов'язуються з атрибутами параметрів OpenSCADA або властивостями інших віджетів. Використання, для зв'язування вкладених віджетів внутрішньою логікою, мови користувацького програмування OpenSCADA знімає питання реалізації складної логіки візуалізації, забезпечуючи тим самим високу гнучкість. Практично, можна створювати повністю динамізовані кадри зі складними взаємозв'язками на рівні користувача.
</p><p><br />
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.BE.D0.B5.D0.BA.D1.82"><span class="mw-headline-number">3.2</span> <span id="Project" title="#Project">Проект</span></span></h3>
<p>Безпосередня конфігурація, та властивості кінцевого інтерфейсу візуалізації, містяться у проекті інтерфейсу візуалізації СВУ, яких може бути створено багато.
</p><p>Кожний проект включає сторінки з бібліотек кадрів-віджетів. Для низки режимів, сама сторінка може включати у себе вкладені сторінки як незалежні від батьківської, так і з використанням батьківського у ролі шаблону. Шаблонні сторінки-віджети дозволяють гранично спростити процес створення однотипних кадрів простого моніторингу, інженером АСУ ТП або користувачем OpenSCADA. Прикладом таких однотипних кадрів можуть бути: групи контурів, групи графіків, протоколи та різні зведені таблиці. Мнемосхеми технологічних процесів рідко підпадають під таку схему та формуються у окремій сторінці-віджеті.
</p><p>Сторінка, як і віджет на якому вона заснована, надає можливість прив'язки динаміки до описаних у ній властивостей — зв'язки, які можуть бути встановлені динамікою або константами. Крім того, зв'язування безпосередньо на рівні сторінки проекту є переважним, ніж здійснення цього на рівні віджетів бібліотек.
</p><p>Приклад ієрархічного представлення компонентів проекту класичного інтерфейсу ВУ технологічного процесу, з описом виразів стандартних викликів, приведено на рисунку.
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:VCA_prog_tree_uk.png"><img alt="VCA prog tree uk.png" height="681" src="../files/VCA_prog_tree_uk.png" width="437" /></a></div></div>
<p>Передбачено наступні спеціальні властивості сторінок:
</p>
<ul><li> <i>Контейнер</i> — сторінка є контейнером вкладених сторінок.</li>
<li> <i>Шаблон</i> — сторінка є шаблоном вкладених сторінок.</li>
<li> <i>Порожньо</i> — порожня та неактивна сторінка. Ця властивість використовується спільно зі властивістю <i>Контейнер</i>, для організації логічних контейнерів сторінок.</li>
<li> <i>Зв'язок</i> — зв'язок на іншу сторінку як контейнер під-сторінок, які будуть використовуватися на боці виконання проектів (сеансів) без їх окремого створення. </li></ul>
<p>На комбінаціях вищевказаних спеціальних властивостей сторінок реалізовано наступні їх типи:
</p>
<ul><li> <i>Стандарт</i> — стандартна сторінка (не встановлено жодної з властивостей), є повноцінною кінцевою сторінкою.</li>
<li> <i>Контейнер</i> — повноцінна сторінка з властивістю контейнера (<i>Контейнер</i>).</li>
<li> <i>Логічний контейнер</i> — логічний контейнер, фактично сам не є сторінкою (<i>Контейнер</i>|<i>Порожньо</i>), виконує роль проміжного та групуючого елементу у дереві сторінок.</li>
<li> <i>Шаблон</i> — сторінка-шаблон (<i>Шаблон</i>). Чиста шаблонна сторінка, використовується для опису загальних властивостей та довизначення їх у вкладених сторінках, у приватному порядку.</li>
<li> <i>Контейнер та шаблон</i> — сторінка шаблону та контейнер (<i>Шаблон</i>|<i>Контейнер</i>), поєднує функції шаблону та контейнеру.</li>
<li> <i>Зв'язок</i> — зв'язок на іншу сторінку. Зв'язки можуть бути використані на повністю динамічних та високо тиражованих сторінках, для оптимізації використання пам'яті. Для розрізнення відкриття зв'язуваних сторінок Ви маєте використовувати атрибут "path". Функція uiCmd() <a href="#UserAPI">користувацького API</a> має використовуватися для керування сторінками цього типу замість прямого запису до атрибутів сторінок "pgOpen" та "pgOpenSrc".</li></ul>
<p>На боці візуалізації (RunTime) побудовано логіку, що регулює яким чином відкривати сторінки, на основі наступних атрибутів базового елементу "Box":
</p>
<ul><li> <i>pgOpen</i> — ознака "Сторінка відкрита";</li>
<li> <i>pgNoOpenProc</i> — ознака "Виконувати сторінку навіть якщо вона не відкрита";</li>
<li> <i>pgOpenSrc</i> — містить адресу виджета, або сторінки, що відкрила поточну сторінку; у випадку вкладеного контейнерного віджета тут міститься адреса включеної сторінки; для відкриття сторінки із скрипта достатньо тут вказати адресу віджета-джерела відкриття, але для сторінок типу "Зв'язок" Ви маєте віддавати перевагу використанню функції uiCmd() <a href="#UserAPI">користувацького API</a>, для керування сторінкам;</li>
<li> <i>pgGrp</i> — група сторінок, використовується для зв'язки контейнерів сторінок зі сторінками, згідно загальної групи.</li></ul>
<p>Логіка визначення способу відкриття сторінок працює наступним чином:
</p>
<ul><li> якщо сторінка має групу "main" або збігається з групою сторінки у головному вікні або немає сторінки на головному вікні, то відкривати сторінку у головному вікні;</li>
<li> якщо сторінка має групу, яка збігається з групою одного з контейнерів поточної сторінки, то відкрити у цьому контейнері;</li>
<li> якщо джерело відкриття сторінки збігається з потоковою сторінкою, то відкрити у вигляді додаткового вікна над потоковою сторінкою;</li>
<li> передати виклик на запит відкриття додатковим вікнам, з обробкою у кожного по першим трьом пунктам;</li>
<li> якщо ніхто з родинних вікон не відкрив нову сторінку то відкрити її як родинне вікно головного вікна.</li></ul>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.A1.D0.B5.D0.B0.D0.BD.D1.81_.D0.B2.D0.B8.D0.BA.D0.BE.D0.BD.D0.B0.D0.BD.D0.BD.D1.8F_.D0.BF.D1.80.D0.BE.D0.B5.D0.BA.D1.82.D1.83"><span class="mw-headline-number">3.3</span> Сеанс виконання проекту</span></h3>
<p>Сеанс проекту це розгорнуте дерево проекту безпосереднього його виконання, що включає окреме завдання ієрархічного виконання процедур віджетів. Для кожного проекту може бути відкрито багато сеансів. Формування кінцевого інтерфейсу візуалізації здійснюється візуалізаторами, виходячи з даних сеансу проекту, після створення сеансу за запитом.
</p><p>Між віджетами, на різних рівнях ієрархії, у кінцевому рахунку вибудовуються достатньо складні спадкові зв'язки, які визначаються можливістю використання одних віджетів іншими, починаючи з бібліотечного віджета та закінчуючи віджетом сеансу. Для роз'яснення цих особливостей взаємодії, на рисунку зображено вичерпну карту "використального" наслідування.
</p>
<div class="center"><div class="floatnone"><a class="image" href="http://oscada.org/wiki/File:VCA_map_inher_uk.png"><img alt="VCA map inher uk.png" height="1022" src="../files/VCA_map_inher_uk.png" width="794" /></a></div></div>
<p>На рівні сеансів, віджет містить об'єкт значень процедури обрахунку. Цей об'єкт ініціюється та використовується у випадку наявності самої процедури обчислення. У момент ініціалізації створюється перелік параметрів процедури та виконується її компіляція з цими параметрами, у модулі, що реалізує обрану мову програмування та з назвою результуючої процедури у вигляді закодованого повного ім'я виджета. Скомпільована функція підключається до об'єкту значень процедури обрахунку, а далі виконується її обчислення з періодом сеансу.
</p><p>Обчислення та обробка віджету виконується у наступній послідовності:
</p>
<ul><li> обираються події, доступні на момент обчислення, з атрибуту "event" віджету;</li>
<li> події завантажуються до параметру "event" об'єкта обчислення;</li>
<li> до об'єкту обчислення завантажуються значення за вхідними зв'язками; </li>
<li> до об'єкту обчислення завантажуються значення спеціальних змінних (f_frq, f_start та f_stop); </li>
<li> до об'єкту обчислення завантажуються значення обраних параметрів віджету; </li>
<li> обчислення; </li>
<li> вивантаження значень об'єкту обчислення у обрані параметри віджету; </li>
<li> вивантаження подій з параметру "event" об'єкта обчислення;</li>
<li> обробка подій та передача необроблених на рівень вище.</li></ul>
<p>Об'єкти сеансу успадковуються від абстрактного об'єкту "Widget" та використовують відповідні об'єкти проекту. Так, сеанс "Session" використовує проект "Project" та формує на його основі розгорнуте дерево. Сторінка проекту "Page" прямо використовується сторінкою сеансу "SessPage". Решта об'єктів "SessWdg" розгортаються відповідно до ієрархії елементів сторінки.
</p><p>Додатково до стандартних властивостей абстрактного віджета "Widget", елементи сторінки та самі сторінки сеансу отримують властивості: зберігання об'єкту значень обчислювальної процедури, обрахунку процедур та механізм обробки подій. Сторінки сеансу, додатково до всього, містять контейнер наступних за ієрархією сторінок. Сеанс, загалом, обчислюється з вказаною періодичністю та у послідовності: 
</p>
<ul><li> "Сторінка верхнього рівня" -&gt; "Сторінка нижнього рівня"</li>
<li> "Віджет нижнього рівня" -&gt; "Віджет верхнього рівня"</li></ul>
<p>Така політика дозволяє обходити сторінки відповідно до їх ієрархії, а повідомленням у віджетах "спливати" нагору за одну ітерацію.
</p><p>Сеанси підтримують багатомовність на рівні <a href="../../en/API.html#CntrNode" title="Special:MyLanguage/Documents/API">інтерфейсу управління OpenSCADA</a>, яка залежить від значень загальних атрибутів "lang" та "user", та які візуалізатор може встановлювати згідно до своєї мови. Ця функція вмикається <a href="../Program_manual.html#Config" title="Special:MyLanguage/Documents/Program manual">динамічним перекладом повідомлень OpenSCADA</a>.
</p><p><br />
</p>
<h3><span class="mw-headline" id=".D0.A1.D1.82.D0.B8.D0.BB.D1.96"><span class="mw-headline-number">3.4</span> Стилі</span></h3>
<p>Відомо, що людина може мати індивідуальні особливості сприйняття графічної інформації. Якщо ці особливості не враховувати то можна отримати несприйняття та відторгнення користувача до інтерфейсу ВУ. Таке несприйняття та відторгнення може призвести до фатальних помилок при управлінні ТП, а також травмувати людину постійною роботою з інтерфейсом. У SCADA системах прийнято домовленості, які регламентують вимоги по створенню уніфікованого інтерфейсу ВУ, що нормально сприймається більшістю людей. При цьому, практично відсутнє врахування особливостей людей з деякими відхиленнями.
</p><p>З метою врахувати цю обставину, та надати можливість централізовано та просто змінювати візуальні властивості інтерфейсу, проектом реалізується менеджер стилів інтерфейсу візуалізації.
</p><p>Користувачем може бути створено багато стилів, кожний з яких буде зберігати кольорові, шрифтові та інші властивості елементів кадру. Проста зміна стилю дозволить швидко видозмінити інтерфейс ВУ, та можливість призначення індивідуального стилю до користувача дозволить врахувати його особливості.
</p><p>Для реалізації цієї можливості, при створені кадрів, необхідно для властивостей кольору, шрифту та інших встановити параметр "Конфігурація" (таблиці у вкладці "Обробка") у значення "З стилю". А у параметрі "Конфігураційний шаблон" вказати ідентифікатор поля стиля. Далі, це поле автоматично з'явиться у менеджері стилів та його можна буде там змінювати. Менеджер стилів доступний на сторінці конфігурації проекту у вкладці "Стилі". На цій вкладці можна стилі створювати, видаляти та змінювати, видаляти їх поля.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:684px;"><a class="image" href="http://oscada.org/wiki/File:VCA_prj_stl_uk.png"><img class="thumbimage" height="649" src="../files/VCA_prj_stl_uk.png" width="682" /></a>  <div class="thumbcaption">Рисунок. Вкладка "Стилі" сторінки конфігурації проекту.</div></div></div></div>
<p>Загалом, стилі доступні починаючи з рівня проектів. На рівні бібліотек віджетів можна тільки визначати поля стилів у віджетів. На рівні проекту, при виборі стиля, включається робота зі стилями, що передбачає доступ до полів стилів замість безпосередніх значень атрибутів. Фактично, це означає, що при читанні або записі атрибуту віджету, вказані операції будуть здійснюватися над відповідним полем обраного стилю.
</p><p>При запуску проекту на виконання буде використано встановлений у проекті стиль. Надалі, користувач може обрати стиль з переліку доступних. Обраний користувачем стиль буде збережено та використано при наступному запуску проекту.
</p><p><br />
</p>
<h3><span class="mw-headline" id=".D0.9F.D0.BE.D0.B4.D1.96.D1.97.2C_.D1.97.D1.85_.D0.BE.D0.B1.D1.80.D0.BE.D0.B1.D0.BA.D0.B0_.D1.82.D0.B0_.D0.BA.D0.B0.D1.80.D1.82.D0.B8_.D0.BF.D0.BE.D0.B4.D1.96.D0.B9"><span class="mw-headline-number">3.5</span> Події, їх обробка та карти подій</span></h3>
<p>Враховуючи спектр задач, для яких може використовуватися OpenSCADA, треба передбачити механізм управління інтерактивними користувацькими подіями. Це пов'язано з тим, що при вирішені окремих задач вбудованих систем, пристрої вводу та управління можуть значно відрізнятися. Власне, достатньо поглянути на звичайну офісну клавіатуру та клавіатуру ноутбука, щоб зняти будь-які сумніви у необхідності менеджеру подій.
</p><p>Менеджер подій має працювати використовуючи карти подій. Карта подій — це перелік іменованих подій з указанням його походження. Походженням події може бути клавіатура, маніпулятор миші, джойстик та інше. При виникненні події, менеджер подій шукає його у активній карті та співставляє з ім'ям події. Співставлене ім'я події поміщається у чергу на обробку. Віджети, у цьому випадку, повинні обробляти отриману чергу подій.
</p><p>Активна карта повідомлень вказується у профілі кожного користувача або встановлюється по замовченню, <span style="color: red">у планах</span>.
</p><p>Загалом, передбачено чотири типи подій:
</p>
<ul><li> події образів-примітивів СВУ (префікс: <b>ws_</b>), наприклад, подія натискання екранної кнопки — "ws_BtPress";</li>
<li> клавішні події (префікс: <b>key_</b>) — всі події від клавіатури та миші у вигляді "key_presAlt1";</li>
<li> користувацькі події (префікс: <b>usr_</b>), генеруються користувачем у процедурах обрахунку віджетів;</li>
<li> маповані події (префікс: <b>map_</b>) — події, отримані з карти події, <span style="color: red">у планах</span>.</li></ul>
<p>Сама подія надає недостатньо інформації, особливо якщо її обробка відбувається на рівнях вище. Для однозначної ідентифікації події та її джерела, події, загалом, записуються наступним чином: "ws_BtPress:/curtime". Де:
</p>
<dl><dd><i>ws_BtPress</i> — подія;</dd>
<dd><i>/curtime</i> — шлях до дочірнього елементу, який згенерував подію.</dd></dl>
<p>У таблиці 3.5 наведено перелік стандартних подій, підтримку яких має бути забезпечено у візуалізаторах СВУ.
</p><p><b>Таблиця 3.5.</b> Стандартні події
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Опис
</th></tr>
<tr>
<td colspan="2"> <i>Клавіатурні події:</i> <b>key_[pres|rels][Ctrl|Alt|Shift]{Key}</b>
</td></tr>
<tr>
<td> *SC#3b </td>
<td> Скан-код клавіші.
</td></tr>
<tr>
<td> *#2cd5 </td>
<td> Код неіменованої клавіші.
</td></tr>
<tr>
<td> *Esc </td>
<td> "Esc".
</td></tr>
<tr>
<td> *BackSpace </td>
<td> Видалення попереднього символу — "&lt;-".
</td></tr>
<tr>
<td> *Return, *Enter </td>
<td> Ввід — "Enter".
</td></tr>
<tr>
<td> *Insert </td>
<td> Вставка — "Insert".
</td></tr>
<tr>
<td> *Delete </td>
<td> Видалення — "Delete".
</td></tr>
<tr>
<td> *Pause </td>
<td> Пауза — "Pause".
</td></tr>
<tr>
<td> *Print </td>
<td> Друк екрану — "Print Screen".
</td></tr>
<tr>
<td> *Home </td>
<td> Дім — "Home".
</td></tr>
<tr>
<td> *End </td>
<td> Кінець — "End".
</td></tr>
<tr>
<td> *Left </td>
<td> Ліворуч — "&lt;-".
</td></tr>
<tr>
<td> *Up </td>
<td> Вверх — '^'.
</td></tr>
<tr>
<td> *Right </td>
<td> Праворуч — "-&gt;".
</td></tr>
<tr>
<td> *Down </td>
<td> Додолу — '\/'.
</td></tr>
<tr>
<td> *PageUp </td>
<td> Сторінки нагору — "PageUp".
</td></tr>
<tr>
<td> *PageDown </td>
<td> Сторінки додолу — "PageDown".
</td></tr>
<tr>
<td> *F1 ... *F35 </td>
<td> Функціональна клавіша від "F1" до "F35".
</td></tr>
<tr>
<td> *Space </td>
<td> Пробіл — ' '.
</td></tr>
<tr>
<td> *Apostrophe </td>
<td> Апостроф — '`'.
</td></tr>
<tr>
<td> *Asterisk </td>
<td> Зірочка на додатковому полі клавіатури — '*'.
</td></tr>
<tr>
<td> *Plus </td>
<td> Плюс на додатковому полі клавіатури — '+'.
</td></tr>
<tr>
<td> *Comma </td>
<td> Кома — ','.
</td></tr>
<tr>
<td> *Minus </td>
<td> Мінус — '-'.
</td></tr>
<tr>
<td> *Period </td>
<td> Крапка — '.'.
</td></tr>
<tr>
<td> *Slash </td>
<td> Похила риска — '\'.
</td></tr>
<tr>
<td> *0 ... *9 </td>
<td> Цифра від '0' до '9'.
</td></tr>
<tr>
<td> *Semicolon </td>
<td> Крапка з комою — ';'.
</td></tr>
<tr>
<td> *Equal </td>
<td> Дорівнює — '='.
</td></tr>
<tr>
<td> *A ... *Z </td>
<td> Клавіші літер латинського алфавіту від 'A' до 'Z'.
</td></tr>
<tr>
<td> *BracketLeft </td>
<td> Ліва квадратна дужка — '['.
</td></tr>
<tr>
<td> *BackSlash </td>
<td> Зворотня похила риска — '/'.
</td></tr>
<tr>
<td> *BracketRight </td>
<td> Права квадратна дужка — ']'.
</td></tr>
<tr>
<td> *QuoteLeft </td>
<td> Ліва лапка — <b>.</b>
</td></tr>
<tr>
<td colspan="2"> <i>Події клавіатурного фокусу.</i>
</td></tr>
<tr>
<td> ws_FocusIn </td>
<td> Фокус отримано віджетом.
</td></tr>
<tr>
<td> ws_FocusOut </td>
<td> Фокус втрачено віджетом.
</td></tr>
<tr>
<td colspan="2"> <i>Події маніпулятору миші:</i>
</td></tr>
<tr>
<td> key_mouse[Pres|Rels][Left|Right|Midle] </td>
<td> Натиснута/відпущена кнопка миші.
</td></tr>
<tr>
<td> key_mouseDblClick </td>
<td> Подвійний натиск лівої кнопки миші.
</td></tr>
<tr>
<td colspan="2"> <i>Події квітація на боці візуалізатору.</i>
</td></tr>
<tr>
<td> ws_alarmLev </td>
<td> Квітація всіх порушень всіма способами та типами сповіщення.
</td></tr>
<tr>
<td> ws_alarmNtf{N} </td>
<td> Квітація всіх порушень сповіщення типу {N} (0...7).
</td></tr>
<tr>
<td colspan="2"> <i>Події примітиву елементарної фігури <b>ElFigure</b>:</i>
</td></tr>
<tr>
<td> ws_Fig[Left|Right|Midle|DblClick] </td>
<td> Активація фігур (заливок) клавішею миші.
</td></tr>
<tr>
<td> ws_Fig{N}[Left|Right|Midle|DblClick] </td>
<td> Активація фігури (заливки) <i>N</i> клавішею миші.
</td></tr>
<tr>
<td colspan="2"> <i>Події примітиву елементу форми <b>FormEl</b>:</i>
</td></tr>
<tr>
<td> ws_LnAccept </td>
<td> Встановлено нове значення у рядку вводу.
</td></tr>
<tr>
<td> ws_TxtAccept </td>
<td> Змінено значення редактору тексту.
</td></tr>
<tr>
<td> ws_ChkChange </td>
<td> Стан ознаки змінено.
</td></tr>
<tr>
<td> ws_BtPress </td>
<td> Кнопку натиснуто.
</td></tr>
<tr>
<td> ws_BtRelease </td>
<td> Кнопку відпущено.
</td></tr>
<tr>
<td> ws_BtToggleChange </td>
<td> Змінено втисненість кнопки.
</td></tr>
<tr>
<td> ws_BtMenu={Item} </td>
<td> Вибір елементу меню <i>Item</i> за кнопкою.
</td></tr>
<tr>
<td> ws_BtLoad </td>
<td> Обраний файл завантажено.
</td></tr>
<tr>
<td> ws_CombChange </td>
<td> Змінено значення поля обрання.
</td></tr>
<tr>
<td> ws_ListChange </td>
<td> Змінено поточний елемент переліку.
</td></tr>
<tr>
<td> ws_TreeChange </td>
<td> Змінено поточний елемент дерева.
</td></tr>
<tr>
<td> ws_TableChangeSel </td>
<td> Змінено вибір елементу таблиці.
</td></tr>
<tr>
<td> ws_TableEdit_{colN}_{rowN} </td>
<td> Відредаговано клітинку таблиці ({colN}:{rowN}).
</td></tr>
<tr>
<td> ws_SliderChange </td>
<td> Зміна положення слайдеру.
</td></tr>
<tr>
<td colspan="2"> <i>Події примітиву медіа-контенту <b>Media</b>:</i>
</td></tr>
<tr>
<td> ws_MapAct{N}[Left|Right|Midle] </td>
<td> Активовано медіа-область з номером <i>N</i>, клавішею миші.
</td></tr>
<tr>
<td> ws_MediaFinished </td>
<td> Закінчено програвання Медіа-потоку.
</td></tr></table>
<p>Події є основним механізмом сповіщення та активно використовуються для здійснення взаємодії з користувачем. Для обробки події передбачено два механізми:
</p>
<ul><li> Первинний — сценарій управління відкриттям сторінок.</li>
<li> Вторинний — обчислювальна процедура віджета.</li></ul>
<p>Механізм "Сценарій управління відкриттям сторінок" засновано на базовому атрибуті віджету "evProc", у якому може описуватися відкриття сторінок. Сценарій цього атрибуту записується у вигляді переліку команд з синтаксисом: "<b>{event}:{evSrc}:{com}:{prm}</b>". Де:
</p>
<ul><li> <i>event</i> — очікувана подія;</li>
<li> <i>evSrc</i> — шлях вкладеного віджета-джерела події;</li>
<li> <i>com</i> — команда сеансу;</li>
<li> <i>prm</i> — параметр команди.</li></ul>
<p>Реалізовано наступні команди:
</p>
<ul><li> <i>open</i> — відкриття сторінки; сторінка, що відкривається, вказується у параметрі <i>prm</i> як прямо, так і у вигляді шаблону, наприклад — <b>/pg_so/1/*/*</b>;</li>
<li> <i>next</i> — відкриття наступної сторінки; сторінка, що відкривається, вказується у параметрі <i>prm</i>, у вигляді шаблону, наприклад: <b>/pg_so/*/*/$</b>;</li>
<li> <i>prev</i> — відкриття попередньої сторінки; сторінка, що відкривається, вказується у параметрі <i>prm</i>, у вигляді шаблону, наприклад: <b>/pg_so/*/*/$</b>.</li></ul>
<p>Спеціальні символи шаблону розшифровуються наступним чином:
</p>
<ul><li> <i>pg_so</i> — пряме ім'я потрібної-статичної сторінки (з префіксом), потребує обов'язкової відповідності та використовується для ідентифікації попередньої відкритої сторінки;</li>
<li> <i>1</i> — ім'я та місце нової сторінки у загальному шляху (без префіксу);</li>
<li> <i>*</i> — сторінка береться з ім'я попередньої відкритої сторінки або підставляється перша доступна сторінка, якщо попередня відкрита відсутня;</li>
<li> <i>$</i> — вказує на місце відкритої сторінки, відносно якої треба шукати наступну або попередню.</li></ul>
<p>Для правильного розуміння роботи механізму шаблонів, при виборі сторінки, приведемо декілька реальних прикладів:
</p>
<ul><li> <i>Перемикання об'єкту сигналізації:</i></li></ul>
<dl><dd><dl><dd>Початково: <b>/pg_so/pg_1/pg_mn/pg_1</b></dd>
<dd>Команда: <b>open:/pg_so/2/*/*</b></dd>
<dd>Результат: <b>/pg_so/pg_2/pg_mn/pg_1</b></dd></dl></dd></dl>
<ul><li> <i>Перемикання виду відображення:</i></li></ul>
<dl><dd><dl><dd>Початково: <b>/pg_so/pg_1/pg_mn/pg_1</b></dd>
<dd>Команда: <b>open:/pg_so/*/gkadr/*</b></dd>
<dd>Результат: <b>/pg_so/pg_1/pg_gkadr/pg_1</b></dd></dl></dd></dl>
<ul><li> <i>Наступна/попередня сторінка виду відображення:</i></li></ul>
<dl><dd><dl><dd>Початково: <b>/pg_so/pg_1/pg_mn/pg_1</b></dd>
<dd>Команда: <b>next:/pg_so/*/*/$</b></dd>
<dd>Результат: <b>/pg_so/pg_1/pg_mn/pg_2</b></dd></dl></dd></dl>
<p>У якості прикладу, наведемо сценарій забезпечення роботи головної сторінки інтерфейсу користувача:
</p>
<pre style="white-space: pre-wrap;">
ws_BtPress:/prev:prev:/pg_so/*/*/$
ws_BtPress:/next:next:/pg_so/*/*/$
ws_BtPress:/go_mn:open:/pg_so/*/mn/*
ws_BtPress:/go_graph:open:/pg_so/*/ggraph/*
ws_BtPress:/go_cadr:open:/pg_so/*/gcadr/*
ws_BtPress:/go_view:open:/pg_so/*/gview/*
ws_BtPress:/go_doc:open:/pg_so/*/doc/*
ws_BtPress:/go_resg:open:/pg_so/rg/rg/*
ws_BtPress:/so1:open:/pg_so/1/*/*
ws_BtPress:/so2:open:/pg_so/2/*/*
ws_BtPress:/so3:open:/pg_so/3/*/*
ws_BtPress:/so4:open:/pg_so/4/*/*
ws_BtPress:/so5:open:/pg_so/5/*/*
ws_BtPress:/so6:open:/pg_so/6/*/*
ws_BtPress:/so7:open:/pg_so/7/*/*
ws_BtPress:/so8:open:/pg_so/8/*/*
ws_BtPress:/so9:open:/pg_so/9/*/*
ws_BtPress:*:open:/pg_control/pg_terminator
</pre>
<p>Механізм "Обробка подій за допомогою обчислювальної процедури віджета" заснований на атрибуті "event" та користувацькій процедурі обчислення, на мові програмування OpenSCADA. Події, по мірі надходження, акумулюються у атрибуті "event" до моменту виклику обчислювальної процедури. Обчислювальна процедура викликається з вказаним періодом обчислення віджета та отримує значення атрибуту "event" у вигляді переліку подій. У процедурі обчислення, користувач може: проаналізувати, обробити та виключити оброблені події з переліку, а також додати до переліку нові події. Решта подій, після виконання процедури, та нові аналізуються на предмет відповідності умовам виклику сценарієм первинного механізму, після чого, події, що залишилися, передаються на верхній за ієрархією віджет, для обробки ним, при цьому здійснюється доповнення шляху події згідно до ієрархії проникнення.
</p><p>Вмістом атрибуту "event" є перелік подій формату "<b>{event}:{evSrc}</b>", з подією у окремому рядку. Наведемо приклад процедури обробки події на Java-подібній мові користувацького програмування OpenSCADA:
</p>
<pre style="white-space: pre-wrap;">
for(ev_rez = "", off = 0; (sval=event.parse(0,"\n",off)).length; ) {
  if(sval == "ws_BtPress:/cvt_light") alarmSt = 0x1000001;
  else if(sval == "ws_BtPress:/cvt_alarm") alarmSt = 0x1000002;
  else if(sval == "ws_BtPress:/cvt_sound") alarmSt = 0x1000004;
  else ev_rez += sval+"\n";
}
event = ev_rez;
</pre>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.A1.D0.B8.D0.B3.D0.BD.D0.B0.D0.BB.D1.96.D0.B7.D0.B0.D1.86.D1.96.D1.8F"><span class="mw-headline-number">3.6</span> <span id="Alarms" title="#Alarms">Сигналізація</span></span></h3>
<p>Важливим елементом будь-якого інтерфейсу візуалізації є сповіщення користувача про порушення — сигналізація. Для спрощення сприйняття, а також через тісний зв'язок візуалізації та сповіщення (як правило, сповіщення доповнюють візуалізацію) вирішено інтегрувати інтерфейс сповіщень у інтерфейс візуалізації. Для цього, у всіх віджетах, передбачається два додаткових атрибути рівня сеансу: "alarm" та "alarmSt". Атрибут "alarm" використовується для формування сигналу віджетом згідно до його логіки, а атрибут "alarmSt" використовується для контролю за фактом сигналізації гілки дерева сеансу.
</p><p>Атрибут "alarm" є рядком, який має наступний формат: "<b>{lev}|{categ}|{message}|{type}|{tp_arg}</b>"<br />
Де:
</p>
<ul><li> <i>lev</i> — рівень сигналізації: число від 0 до 255;</li>
<li> <i>categ</i> — категорія сигналу: параметр підсистеми збору, об'єкт, шлях або комбінація;</li>
<li> <i>message</i> — повідомлення сигналізації;</li>
<li> <i>type</i> — типи сповіщень, вказуються у вигляді цілого числа (0...7), що містять ознаки способів сповіщень; типові способи сповіщень:
<ul><li> <i>1</i> — візуальне;</li>
<li> <i>2</i> — гудок, часто відбувається через PC-speaker;</li>
<li> <i>4</i> — звуковий сигнал з файлу звуку або синтез мови; якщо у <i>tp_arg</i> вказано ім'я ресурсу звукового файлу, то відтворюється саме він, інакше виконується синтез мови з тексту, вказаного у <i>message</i>.</li></ul></li>
<li> <i>tp_arg</i> — аргумент типу; часто використовується для прямого вказання ресурсу звукового сигналу — файл звукового формату, при здійснені звукової сигналізації.</li></ul>
<p>Атрибут "alarmSt" є цілим числом, яке відображає максимальний рівень сигналу та факт квітування гілки дерева сеансу. Формат числа має наступний вигляд:
</p>
<ul><li> перший байт (0...255) характеризує рівень сигналу гілки;</li>
<li> другий байт вказує тип сповіщення, так як і у атрибуті "alarm";</li>
<li> третій байт вказує тип несквітованого сповіщення, так як і у атрибуті "alarm";</li>
<li> четвертий байт має спеціальне значення, яке визначається окремими бітами:
<ul><li> біт 0 — вказує, встановленням, на факт квітування сповіщень у першому байті;</li>
<li> біт 1 — вказує, при встановленні його та бита 0, на повернення квітування — включення сповіщення.</li></ul></li></ul>
<p><b>Формування сигналу та отримання його візуалізатором.</b><br />
Формування сигналу здійснюється самим віджетом, шляхом встановлення власного атрибуту "alarm" потрібним чином та, згідно до нього, автоматично встановлюється атрибут "alarmSt" поточного та вищестоящих віджетів. Візуалізатори отримують сповіщення про сигнал за допомогою стандартного механізму сповіщення про зміну атрибутів віджетів.
</p><p>Враховуючи те, що обробка умов сигналізації здійснюється у віджетах, сторінки, що містять об'єкти сигналізації, повинні виконуватися у фоні, незалежно від відкритості їх на цей момент. Це здійснюється шляхом встановлення ознаки виконання сторінки у фоні.
</p><p>Хоча механізм сигналізації й побудовано у середовищі візуалізації, можливість формування невізуальних елементів сигналізації залишається, наприклад, шляхом створення сторінки, яка ніколи не буде відкриватися.
</p><p><b>Квітація</b><br />
Квітація (від quietance) — процес підтвердження факту того, що оперативний персонал звернув увагу на порушення у роботі ТП. Зазвичай цей процес передбачає вживання заходів оператором для усунення порушення та натискання відповідної кнопки припинення сигналізації.
</p><p>Квітація здійснюється шляхом вказання кореня гілки віджетів та типів сповіщення, що дозволяє реалізувати квітацію на боці візуалізатору як за групами, наприклад, за об'єктом сигналізації, так і індивідуально за об'єктом джерела. При цьому можна незалежно квитувати різні типи сигналізацій. Встановлення квітації здійснюється простою модифікацією атрибуту "alarmSt".
</p><p>Приклад скрипту, для роботи з сигналами, приведено нижче:
</p>
<pre style="white-space: pre-wrap;">
//Виокремлення факту наявності сигналізацій різних способів-типів сповіщення
cvt_light_en = alarmSt&amp;0x100; cvt_alarm_en = alarmSt&amp;0x200; cvt_sound_en = alarmSt&amp;0x400;
//Виокремлення факту наявності несквітованих сигналізацій різних способів сповіщення
cvt_light_active = alarmSt&amp;0x10000; cvt_alarm_active = alarmSt&amp;0x20000; cvt_sound_active = alarmSt&amp;0x40000;
//Обробка подій кнопок квітації та квітація різних способів сповіщення
for(ev_rez = "", off = 0; (sval=event.parse(0,"\n",off)).length; ) {
  if(sval == "ws_BtPress:/cvt_light") alarmSt = 0x1000001;
  else if(sval == "ws_BtPress:/cvt_alarm") alarmSt = 0x1000002;
  else if(sval == "ws_BtPress:/cvt_sound") alarmSt = 0x1000004;
  else ev_rez += sval + "\n";
}
event = ev_rez;
</pre>
<p><b>Зовнішні методи сповіщення</b><br />
Основним та типовим способом сповіщення є дисплейна світлова сигналізація аварійними кольорами та їх динамікою у елементів візуалізації, яка присутня завжди та не потребує специфічної конфігурації. Однак, часто потрібні сповіщення зовнішнього типу, наприклад: зовнішньою лампою, бузером PC або "ревуном", довільним звуком, синтезованою мовою та інше.
</p><p>Для здійснення такої можливості, зовнішні способи сповіщення, та відповідні до них типи сповіщення, вільно описуються для серверу візуалізації та самого візуалізатору. На боці серверу візуалізації описується формування/отримання ресурсу сповіщення та саме сповіщення. На боці візуалізатору описується сповіщення згідно ресурсам серверу візуалізації.
</p><p>Опис правил та сценаріїв зовнішнього сповіщення здійснюється за допомогою користувацьких атрибутів текстового типу для сторінок проекту візуалізації, які застосовуються при відкритті цих сторінок. Тобто, потенційно, для кожної відкриваної сторінки можна описати власні правила сповіщення, хоча, зазвичай достатньо та описуються загальні правила сповіщення на головній сторінці проекту — сторінці, яка відкривається одноразово та не закривається при роботі:
</p>
<ul><li> Для серверу/рушія візуалізації, атрибутом "notify{N}" у форматі:</li></ul>
<pre style="white-space: pre-wrap; margin-left: 15px">
//flags=notifyServ[{DL}][|resource[|queue[|qMergeMess]]];
//resStatic={ResourceFile}
if(doRes) { Текст команди формування ресурсу. }
if(doNtf) { Текст команди сповіщення. }
</pre>
<ul><li> Для візуалізатору, атрибутом "notifyVis[Vision|WebVision]{N}" у форматі:</li></ul>
<pre style="white-space: pre-wrap; margin-left: 15px">
//flags=notify[{DL}][|resource[|queue[|quietanceRet]]];
//name={Ім'я сповіщувача}
//ico={Ім'я іконки}
{ Текст команди сповіщення для будь-якого або конкретного візуалізатору. }
</pre>
<p>Прапорці:
</p>
<ul><li> <i>notify[{DL}]</i>, <i>notifyServ[{DL}]</i> — включає сповіщення з повтором через час <i>DL</i>, якщо вказано; для <i>DL</i> = 0 повтор здійснюється одразу.</li>
<li> <i>resource</i> — запитувати-формувати (примусово) ресурс сповіщення у сервера візуалізації, може бути звуковим файлом, текстом або іншими даними формування сповіщення; але наразі сповіщувачі переважно очікують аудіо.</li>
<li> <i>queue</i> — ресурси сповіщення визначаються не лише за глобальною ознакою порушення та квітації, а й згідно до пріоритетної черги джерел сповіщення-ресурсів. Черга формується на боці серверу візуалізації, а для візуалізаторів вказується необхідність роботи з нею при запиті ресурсів.</li>
<li> <i>qMergeMess</i> — поєднувати сповіщення у черзі за рівністю сповіщення.</li>
<li> <i>quietanceRet</i> — можливість відкликання-повернення квітації візуалізатору, тобто, по факту — зворотнього включення сповіщення.</li></ul>
<p>Наявність поля "resStatic" вмикає отримання ресурсу безпосередньо із таблиці ресурсів або файлу, вказується у спосіб подібний до <a href="#Media">примітиву "Медіа"</a>.
</p><p>Змінні обміну:
</p>
<ul><li> <i>en</i>[0,1] — сповіщення ввімкнути (1) або вимкнути (0);</li>
<li> <i>doNtf</i>[0,1] — виклик сценарію сповіщення;</li>
<li> <i>doRes</i>[0,1] — виклик сценарію формування ресурсу;</li>
<li> <i>res</i> — вміст або ім'я файлу з вмістом ресурсу, для зовнішніх сценаріїв;</li>
<li> <i>resTp</i> — тип ресурсу, на кшталт "audio/ogg"; є поверненням та поміщається до стандартного виходу (для Shell) для <i>doRes</i>;</li>
<li> <i>mess</i> — повідомлення-параметри формування ресурсу або сповіщення;</li>
<li> <i>lang</i> — мова поточного користувача або системи;</li>
<li> <i>prcID</i> — унікальний ідентифікатор процедури (на кшталт "ses_AGLKS_ntf2"), переважно для безпечного створення тимчасових файлів.</li></ul>
<p>Приклади та коментарі до роботи типових способів сповіщення:
</p>
<ul><li> Бузер на боці візуалізатору або серверу візуалізації:</li></ul>
<dl><dd><ul><li> alarm = "10|Prm||0x02"</li>
<li> notifyVisVision1 | notify1 = </li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
//flags=notify|notifyServ
if(en) SYS.system("beep -f 1000 -l 1000000 &amp;", true);
else if((beepPID=SYS.system("pidof beep")).toInt()) SYS.system("kill "+beepPID); </pre>
<dl><dd><ul><li> notifyVisVision1 | notify1 = </li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
#!/bin/sh
#flags=notify|notifyServ
if test $en = 1; then
	beep -f 1000 -l 1000000 &amp;
else
	beepPID=$(pidof beep)
	if test "x$beepPID"&nbsp;!= "x"; then kill $beepPID; fi
fi </pre>
<ul><li> Повторюване програвання готового звукового файлу, одного загального, на боці візуалізатору або серверу візуалізації:</li></ul>
<dl><dd><ul><li> alarm = "10|Prm||0x04"</li>
<li> notify2 | notifyVisVision2 =</li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
//flags=notify2|notifyServ2
if(en) SYS.system("play -q alarm.ogg");</pre>
<dl><dd><ul><li> notify2 | notifyVisVision2 =</li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
#!/bin/sh
#flags=notify2|notifyServ2
if test $en = 1; then play -q alarm.ogg; fi</pre>
<ul><li> Програвання індивідуального, для джерела, звукового файлу, на боці візуалізатору:</li></ul>
<dl><dd><ul><li> alarm = "10|Prm||0x04|res:al_prm1"</li>
<li> notify2 =</li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
//flags=queue</pre>
<dl><dd><ul><li> notifyVisVision2 =</li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
//flags=notify2|queue
if(doNtf &amp;&amp; en &amp;&amp; res.length) {
  SYS.fileWrite("tmpPlay", res);
  SYS.system("play -q tmpPlay");
  SYS.fileRemove("tmpPlay");
}</pre>
<dl><dd><ul><li> notifyVisVision2 =</li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
#!/bin/sh
#flags=notify2|queue
if test $doNtf = 1 -a $en = 1 -a -s $res; then play -q $res; fi
</pre>
<ul><li> Синтез мови індивідуального сповіщення, для джерела, на боці візуалізатору:</li></ul>
<dl><dd><ul><li> alarm = "10|Prm|Текстове повідомлення синтезу мови|0x04"</li>
<li> notify2 =</li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
//flags=queue</pre>
<dl><dd><ul><li> notifyVisVision2 = </li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
//flags=notify2|queue
if(doNtf &amp;&amp; en &amp;&amp; mess.length) {
  SYS.fileWrite("tmpForSpeech", mess);
  SYS.system("festival --tts tmpForSpeech");
  SYS.fileRemove("tmpForSpeech");
}
</pre>
<dl><dd><ul><li> notifyVisVision2 = </li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
#!/bin/sh
#flags=notify2|queue
if test $doNtf = 1 -a $en = 1 -a "x"&nbsp;!= "x$mess"; then
  echo $mess &gt; tmpForSpeech
  festival --tts tmpForSpeech
  rm tmpForSpeech
fi
</pre>
<ul><li> Приготування звукового файлу, одного загального, та його програвання на боці візуалізатору або серверу візуалізації:</li></ul>
<dl><dd><ul><li> alarm = "10|Prm||0x04"</li>
<li> notify2 = </li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
//flags=notify2|notifyServ2|resource
if(doRes) res = SYS.fileRead("alarm.ogg");  //Вставити сюди інший метод генерації
if(doNtf &amp;&amp; en &amp;&amp; res.length) {
  SYS.fileWrite("tmpPlay", res);
  SYS.system("play -q tmpPlay");
  SYS.fileRemove("tmpPlay");
}</pre>
<dl><dd><ul><li> notify2 = </li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
#!/bin/sh
#flags=notify2|notifyServ2|resource
if test $doRes = 1; then cp -f alarm.ogg $res; fi  #Вставити сюди інший метод генерації
if test $doNtf = 1 -a $en = 1 -a -s $res; then play -q $res; fi
</pre>
<dl><dd><ul><li> notifyVisVision2 =</li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
//flags=notify2|resource
if(en &amp;&amp; res.length) {
  SYS.fileWrite("tmpPlay", res);
  SYS.system("play -q tmpPlay");
  SYS.fileRemove("tmpPlay");
}</pre>
<dl><dd><ul><li> notifyVisVision2 =</li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
#!/bin/sh
#flags=notify2|resource
if test $en = 1 -a -s $res; then play -q $res; fi
</pre>
<ul><li> Приготування індивідуального, для джерела сповіщення, звукового файлу через синтез мови, на боці візуалізатору або серверу візуалізації:</li></ul>
<dl><dd><ul><li> alarm = "10|Prm|Текстове повідомлення синтезу мови|0x04"</li>
<li> notify2 =</li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
//flags=notify2|notifyServ2|queue
if(doRes &amp;&amp; mess.length) {
 SYS.fileWrite("tmpText", mess);
 SYS.system("text2wave tmpText -o tmpWAV");
 res = SYS.fileRead("tmpWAV");
 SYS.fileRemove("tmpText"); SYS.fileRemove("tmpWAV");
}
if(doNtf &amp;&amp; en &amp;&amp; res.length) {
 SYS.fileWrite("tmpPlay", res);
 SYS.system("play -q tmpPlay");
 SYS.fileRemove("tmpPlay");
}</pre>
<dl><dd><ul><li> notify2 =</li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
#!/bin/sh
#flags=notify2|notifyServ2|queue
if test $doRes = 1 -a "x"&nbsp;!= "x$mess"; then
 echo $mess &gt; tmpText
 text2wave tmpText -o $res
 rm tmpText
fi
if test $doNtf = 1 -a $en = 1 -a -s $res; then play -q $res; fi
</pre>
<dl><dd><ul><li> notifyVisVision2 =</li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
//flags=notify2|queue
if(en &amp;&amp; res.length) {
 SYS.fileWrite("tmpPlay", res);
 SYS.system("play -q tmpPlay");
 SYS.fileRemove("tmpPlay");
}</pre>
<dl><dd><ul><li> notifyVisVision2 =</li></ul></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
#!/bin/sh
#flags=notify2|queue
if test $en = 1 -a -s $res; then play -q $res; fi
</pre>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D1.96.D0.BD.D0.BD.D1.8F_.D0.BF.D1.80.D0.B0.D0.B2.D0.B0.D0.BC.D0.B8"><span class="mw-headline-number">3.7</span> Управління правами</span></h3>
<p>Для поділу доступу до інтерфейсу ВУ та його складовим, кожний віджет містить інформацію про власника, його групи та права доступу. Права доступу записуються у вигляді тріади: "<b>{користувач}{група[,група1,групаN]}{інші}</b>", де кожний елемент складається з двох ознак доступу, для який прийнята наступна інтерпретація:
</p>
<ul><li> <b>r</b> — право на перегляд віджету;</li>
<li> <b>w</b> — право на контроль над віджетом.</li></ul>
<p>У режимі розробки використовується проста схема доступу "root.UI:RWRWR_", що означає — всі користувачі можуть відкривати та переглядати бібліотеки, їх компоненти та проекти; а редагувати можуть всі користувачі групи "UI" (користувацькі інтерфейси).
</p><p>У режимі виконання працюють права, описані у компонентах інтерфейсу, які передбачають можливість наслідування власника та прав, зверху додолу. Причому, по замовченню, наслідування включено у кожному віджеті, що означає — вони отримають власника та права проекту. У той-же час, пряме встановлення прав складеного віджету розповсюдить їх на всі компоненти цього віджета.
</p><p><br />
</p>
<h3><span class="mw-headline" id=".D0.97.D0.B2.27.D1.8F.D0.B7.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F_.D0.B7_.D0.B4.D0.B8.D0.BD.D0.B0.D0.BC.D1.96.D0.BA.D0.BE.D1.8E"><span class="mw-headline-number">3.8</span> Зв'язування з динамікою</span></h3>
<p>Для надання до інтерфейсу візуалізації актуальних даних, повинні використовуватися дані підсистеми "Збір даних (DAQ)". Природа цих даних наступна:
</p>
<ol><li> параметри, що містять деяку кількість атрибутів;</li>
<li> атрибути параметру можуть надавати дані п'яти базових типів: Логічний, Цілий, Реальний, Рядок та Об'єкт;<br />&nbsp;які доповнено СВУ модифікаторами: "Обирається"; варіантами Рядка: "Текст", "Переклад", "Колір", "Зображення", "Шрифт", "Адреса"; варіантами Цілого: "ДатаЧас".</li>
<li> атрибути параметру можуть мати архів (історію);</li>
<li> атрибути параметру можуть бути на читання, запис та з повним доступом.</li></ol>
<p>Враховуючи перший пункт, треба забезпечити можливість групового призначення посилання. Для цього використовуємо <a href="../DAQ.html#LogicLev" title="Special:MyLanguage/Documents/DAQ">концепцію логічного рівня</a>.
</p><p>Згідно до пункту 2, зв'язки забезпечують прозоре перетворення типів та не потребують спеціальної конфігурації.
</p><p>Для задоволення можливості доступу до архівам, згідно до пункту 3, зв'язки виконують перевірку типу атрибуту та, у випадку підключення до "Адреси", до значення поміщається адреса зв'язку.
</p><p>У термінах СВУ, динамічні зв'язки та конфігурація динаміки є одним процесом, для опису конфігурації якого передбачено вкладку "Обробка" віджетів. Вкладка містить таблицю конфігурації властивостей атрибутів та текст процедури обчислення віджету.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:1108px;"><a class="image" href="http://oscada.org/wiki/File:VCA_wdg_proc_uk.png"><img class="thumbimage" height="816" src="../files/VCA_wdg_proc_uk.png" width="1106" /></a>  <div class="thumbcaption">Рисунок. Вкладка "Обробка" сторінки конфігурації віджета.</div></div></div></div>
<p>Крім полів конфігурації атрибутів, у таблиці передбачається стовпчик "Обробка", для вибіркового використання атрибутів у обчислювальній процедурі віджета, та стовпчика "Конфігурація", "Конфігураційний шаблон" для опису конфігурації зв'язків.
</p><p>Якщо у стовпчику "Обробка" стоїть true, то у обчислювальній процедурі стає доступною змінна <i>{ідентифікатор віджета}_{ідентифікатор атрибуту}</i>, наприклад <i>cw_value</i>.
</p><p>Стовпчик "Конфігурація" дозволяє вказати тип зв'язку атрибуту віджета:
</p>
<ul><li> <i>Постійна</i> — у вкладці зв'язків віджету з'являється поле визначення постійної, наприклад, особливого кольору або заголовку шаблонних кадрів.</li>
<li> <i>Вхідний зв'язок</i> — зв'язок з динамікою тільки для читання.</li>
<li> <i>Вихідний зв'язок</i> — зв'язок з динамікою тільки для запису.</li>
<li> <i>Повний зв'язок</i> — повний зв'язок з динамікою, читання та запис.</li>
<li> <i>Зі стиля</i> — брати значення зі стиля проекту.</li></ul>
<p>Стовпчик "Конфігураційний шаблон" дозволяє зв'язати групи динамічних атрибутів. Наприклад, це можуть бути різні типи параметрів підсистеми "DAQ" та інші віджети інтерфейсу. При коректному формуванні цього поля працює механізм автоматичного призначення атрибутів, при визначені тільки параметру підсистеми "DAQ" або віджету інтерфейсу, що спрощує та прискорює процес конфігурації. Значення цього стовпчика має наступний формат:
</p>
<ul><li> <i>Для постійної:</i> пряме значення атрибуту.</li>
<li> <i>Для зв'язку:</i> "<b>{параметр}|{ідентифікатор}</b>", де:
<ul><li> <i>параметр</i> — група атрибутів;</li>
<li> <i>ідентифікатор</i> — ідентифікатор атрибуту; саме значення у цьому полі співставляється з атрибутами параметрів DAQ після указання групового зв'язку, при автоматичному зв'язувані;</li></ul></li>
<li> <i>Для стиля:</i> ідентифікатор-ім'я поля стиля.</li></ul>
<p>Встановлення зв'язків може бути декількох типів, який визначається префіксом:
</p>
<ul><li> <i>val:</i> — Пряме завантаження значення через механізм зв'язків. Наприклад, зв'язок "val:100" завантажує значення 100 до атрибуту віджета. Часто використовується у випадку відсутності кінцевої точки зв'язку, з метою прямого встановлення значення.</li>
<li> <i>prm:</i> — Зв'язок на атрибут параметру або параметр, загалом, для групи атрибутів підсистеми "Збір даних". Наприклад, зв'язок "prm:/LogicLev/experiment/Pi/var" здійснює доступ атрибуту віджета до атрибуту параметра підсистеми "Збір даних". Знак "(+)", у кінці адреси, вказує на вдалу лінковку та присутність цільового об'єкту. Для атрибутів об'єктного типу допустимий ієрархічний доступ до конкретної властивості об'єкту, шляхом вказання її шляху через символ '#', наприклад: "prm:/LogicLev/experiment/Pi/var#pr1/pr2".</li>
<li> <i>wdg:</i> — Зв'язок на атрибут іншого віджета або віджет, загалом, для групи атрибутів. Наприклад, зв'язок "wdg:/ses_AGLKS/pg_so/pg_1/pg_ggraph/pg_1/a_bordColor" здійснює доступ атрибуту одного віджету до атрибуту іншого. Підтримуються як абсолютні, так і відносні шляхи зв'язків. Точкою відліку адреси абсолютного зв'язку виступає об'єкт кореня модуля "VCAEngine", що означає — першим елементом абсолютної адреси є ідентифікатор сеансу або проекту. Перший елемент, на боці сеансу, опускається, тому зв'язки, встановлені у проекті, там працюють. Відносні зв'язки беруть відлік від віджету, де зв'язок вказано. Спеціальним елементом відносного зв'язку є елемент вищестоящого вузла "..".</li>
<li> <i>arh:</i> — Особливий тип зв'язку, доступний тільки для окремого атрибуту типу "Адреса", який дозволяє підключитися прямо до архіву значень ("arh:CPU_load"). Може бути корисний для вказання архіву у якості джерела даних примітиву "Діаграма".</li></ul>
<p>Обробка зв'язків відбувається з періодичністю обчислення віджету, у порядку:
</p>
<ul><li> отримання даних вхідних зв'язків;</li>
<li> виконання обчислення процедури віджету;</li>
<li> передача значень за вихідними зв'язками.</li></ul>
<p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../../en/files/At.png" width="22" /></a> Період обчислення віджету у значені по замовченню "-1" означає ланцюгове використання значення періоду власника віджету до першого позитивного значення, або періоду обчислення проекту.
</p><p>На рисунку представлено вкладку зв'язків з груповим призначенням атрибутів, шляхом указання тільки параметру. На наступному рисунку представлено індивідуальне призначення атрибутів.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:767px;"><a class="image" href="http://oscada.org/wiki/File:VCA_wdg_lnk_grp_uk.png"><img class="thumbimage" height="477" src="../files/VCA_wdg_lnk_grp_uk.png" width="765" /></a>  <div class="thumbcaption">Рисунок. Вкладка "Зв'язки" сторінки конфігурації віджету з груповим призначенням атрибутів шляхом вказання тільки параметру.</div></div></div></div>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:767px;"><a class="image" href="http://oscada.org/wiki/File:VCA_wdg_lnk_attr_uk.png"><img class="thumbimage" height="508" src="../files/VCA_wdg_lnk_attr_uk.png" width="765" /></a>  <div class="thumbcaption">Рисунок. Вкладка "Зв'язки" сторінки конфігурації віджету з індивідуальним призначенням атрибутів.</div></div></div></div>
<p>При розташуванні віджета до контейнеру віджетів всі зв'язки початкового віджета додаються до переліку результуючих зв'язків контейнеру віджетів, однак, тільки на глибину у один рівень вкладення.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:890px;"><a class="image" href="http://oscada.org/wiki/File:VCA_cntwdg_lnk_uk.png"><img class="thumbimage" height="675" src="../files/VCA_cntwdg_lnk_uk.png" width="888" /></a>  <div class="thumbcaption">Рисунок. Вкладка "Зв'язки" сторінки конфігурації контейнеру віджетів, що включає віджети зі зв'язками.</div></div></div></div>
<p>З вищесказаного видно, що зв'язки встановлюються користувачем у процесі конфігурації інтерфейсу. Однак, для надання можливості створення кадрів загального призначення з функцією надання деталізованих даних різних джерел одного типу, потрібен механізм <span id="DynLink" title="#DynLink">динамічного встановлення зв'язків</span>. Такий механізм передбачається:
</p>
<ul><li> резервуванням ключового ідентифікатору "<b>&lt;page&gt;</b>" для групи атрибутів зв'язків у кадрів загального призначення;</li>
<li> динамічним призначенням зв'язків з ідентифікатором "<b>&lt;page&gt;</b>", у процесі відкриття кадру загального призначення за сигналом від іншого віджета.</li></ul>
<p>Розглянемо приклад, коли є кадр загального призначення "Панель контролю графіком" та багато "Графіків" на різних кадрах. "Панель контролю графіком" має зв'язки з шаблонами:
</p>
<ul><li> tSek -&gt; "&lt;page&gt;|tSek"</li>
<li> tSize -&gt; "&lt;page&gt;|tSize"</li>
<li> trcPer -&gt; "&lt;page&gt;|trcPer"</li>
<li> valArch -&gt; "&lt;page&gt;|valArch"</li></ul>
<p>При цьому, кожний віджет "Графік" має атрибути "tSek", "tSize", "trcPer" та "valArch". За викликом сигналу відкриття "Панелі контролю графіком" з будь-якого віджету "Графік", відбувається зв'язування атрибутів "Панелі контролю графіком" з атрибутами віджету "Графік", згідно шаблону. як результат, всі зміни на "Панелі контролю графіком" будуть відображатися на графіку, за посередництвом цих зв'язків.
</p><p>Якщо у віджета "Графік" наявні зовнішні зв'язки на параметри підсистеми "Збір даних", зв'язки "Панелі контролю графіком" будуть встановлюватися на зовнішнє джерело. Крім того, якщо у "Панелі контролю графіком" будуть заявлені зв'язки на атрибути, відсутні безпосередньо у віджета "Графік", то буде здійснюватися пошук наявності таких атрибутів у зовнішнього джерела — першого на який встановлено прямий зв'язок, виконуючи, тим самим, доповнення відсутніх зв'язків.
</p><p>Для наочного зображення цього механізмі наведено таблицю.
</p><p><b>Таблиця.</b> Механізм динамічної лінковки.
</p>
<table class="wikitable">

<tr>
<th> Атрибути "Панелі контролю графіком" (шаблон динамичного зв'язку) </th>
<th> Атрибути "Графіка" </th>
<th> Атрибути зовнішнього "Параметру" </th>
<th> Результуючий зв'язок або значення атрибута, що зв'язується
</th></tr>
<tr>
<td> tSek (&lt;page&gt;|tSek) </td>
<td> tSek </td>
<td> - </td>
<td> "Графік".tSek
</td></tr>
<tr>
<td> tSize (&lt;page&gt;|tSize) </td>
<td> tSize </td>
<td> - </td>
<td> "Графік".tSize
</td></tr>
<tr>
<td> trcPer (&lt;page&gt;|trcPer) </td>
<td> trcPer </td>
<td> - </td>
<td> "Графік".trcPer
</td></tr>
<tr>
<td> valArch (&lt;page&gt;|valArch) </td>
<td> valArch </td>
<td> - </td>
<td> "Графік".valArch
</td></tr>
<tr>
<td> var (&lt;page&gt;|var) </td>
<td> var </td>
<td> var </td>
<td> "Параметр".var
</td></tr>
<tr>
<td> ed (&lt;page&gt;|ed) </td>
<td> - </td>
<td> ed </td>
<td> "Параметр".ed
</td></tr>
<tr>
<td> max (&lt;page&gt;|max) </td>
<td> - </td>
<td> - </td>
<td> EVAL
</td></tr>
<tr>
<td> min (&lt;page&gt;|min) </td>
<td> - </td>
<td> - </td>
<td> EVAL
</td></tr></table>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.9F.D1.80.D0.B8.D0.BC.D1.96.D1.82.D0.B8.D0.B2.D0.B8_.D0.B2.D1.96.D0.B4.D0.B6.D0.B5.D1.82.D1.96.D0.B2"><span class="mw-headline-number">3.9</span> <span id="WidgetPrimitives" title="#WidgetPrimitives">Примітиви віджетів</span></span></h3>
<p>Будь-який наново створюваний віджет засновується на одному з декількох примітивів — кінцевому елементі візуалізації, шляхом встановлення родинних зв'язків як прямо на примітив, так і посередництвом декільком проміжних користувацьких віджетів. Кожний з примітивів містить механізм моделі даних. Екземпляр віджету зберігає значення властивостей власної конфігурації примітиву.
</p><p>До завдань інтерфейсу візуалізації входить підтримка та робота з моделлю даних примітивів віджетів. Примітиви віджетів повинні бути ретельно опрацьовані та уніфіковані, з метою охопити як можна більше можливостей у як можна меншій кількості слабко пов'язаних один з одним, по призначенню, примітивів.
</p><p><b>Таблиця.</b> Бібліотека примітивів віджетів — базові елементи відображення
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Найменування </th>
<th> Функція
</th></tr>
<tr>
<td> ElFigure </td>
<td> Елементарна графічна фігура </td>
<td>
<p>Примітив є основою відмальовки елементарних графічних фігур зі всілякими комбінаціями їх у одному об'єкті. Передбачається підтримка наступних елементарних фігур:
</p>
<ul><li> Лінія.</li>
<li> Дуга.</li>
<li> Крива Без'є.</li>
<li> Заливка замкненого простору.<br /></li></ul>
<p>Для всіх фігур, що містяться у віджеті, встановлюються єдині властивості товщини, кольору та інше, також, передбачається можливість указання вищеперелічених атрибутів для кожної фігури окремо та їх динамізація.
</p>
</td></tr>
<tr>
<td> FormEl </td>
<td> Елемент форми </td>
<td>
<p>Включає підтримку стандартних компонентів форми:
</p>
<ul><li> Редагування рядку.</li>
<li> Редагування тексту.</li>
<li> Прапорець.</li>
<li> Кнопка.</li>
<li> Вибір з переліку.</li>
<li> Перелік.</li>
<li> Дерево.</li>
<li> Таблиця.</li>
<li> Слайдер.</li>
<li> Стрічка прокрутки. </li></ul>
</td></tr>
<tr>
<td> Text </td>
<td> Текст </td>
<td> Елемент тексту-мітка. Характеризується типом шрифту, кольором, орієнтацією та вирівнюванням. Передбачається підтримка аргументів.
</td></tr>
<tr>
<td> Media </td>
<td> Медіа </td>
<td> Елемент відображення растрових та векторних зображень різних форматів, програвання анімованих зображень, програвання аудіо-фрагментів та перегляд відео-фрагментів.
</td></tr>
<tr>
<td> Diagram </td>
<td> Діаграма </td>
<td> Елемент діаграми з підтримкою можливості відображення декількох потоків у реальному часі для: трендів (часових графіків), частотного спектру, XY діаграм.
</td></tr>
<tr>
<td> Protocol </td>
<td> Протокол </td>
<td> Елемент протоколу — візуалізатор повідомлень програми, з підтримкою декількох режимів роботи.
</td></tr>
<tr>
<td> Document </td>
<td> Документ </td>
<td> Елемент формування звітів, журналів та іншої документації на основі доступних даних.
</td></tr>
<tr>
<td> Box </td>
<td> Контейнер </td>
<td> Містить механізм розташування-включення інших віджетів для формування нових, більш складних, віджетів та сторінок кінцевої візуалізації.
</td></tr>
<tr>
<td> Function, <span style="color: red">у планах</span> </td>
<td> Функція API об'єктної моделі OpenSCADA </td>
<td> Невізуальний віджет, на боці виконання, що дозволяє включати обчислювальні функції об'єктної моделі OpenSCADA до СВУ.
</td></tr></table>
<p><b>Таблиця.</b> Загальний набір властивостей/атрибутів віджету
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Ім'я </th>
<th> Номер </th>
<th> Значення
</th></tr>
<tr>
<td> id </td>
<td> Ідентифікатор </td>
<td> - </td>
<td> Ідентифікатор елементу. Атрибут тільки для читання, прикликаний надати інформацію про ідентифікатор елементу.
</td></tr>
<tr>
<td> path </td>
<td> Путь </td>
<td> - </td>
<td> Шлях до цього віджету. Атрибут тільки для читання та надання вичерпної інформації про розташування елементу.
</td></tr>
<tr>
<td> parent </td>
<td> Батько </td>
<td> - </td>
<td> Шлях до батьківського віджету. Атрибут тільки для читання та надання інформації про розташування предку від якого успадковано віджет.
</td></tr>
<tr>
<td> owner </td>
<td> Власник </td>
<td> - </td>
<td> Власник та групи віджету, у вигляді "<b>{власник}:{группа[,группа2,группаN]}</b>", по замовченню "root:UI".
</td></tr>
<tr>
<td> perm </td>
<td> Доступ </td>
<td> - </td>
<td>
<p>Права доступу до віджету, у вигляді "<b>{користувач}{групи}{інші}</b>" плюс ознака наслідування, що вмикає наслідування власника та його прав від вищестоящого віджету.<br />
Де "<b>користувач</b>", "<b>групи</b>" та "<b>інші</b>" це:
</p>
<ul><li> "__" — немає доступу;</li>
<li> "R_" — тільки читання;</li>
<li> "RW" — читання та запис.<br /></li></ul>
<p>По замовченню 01000 — наслідування.
</p>
</td></tr>
<tr>
<td> root </td>
<td> Корінь </td>
<td> 1 </td>
<td> Ідентифікатор віджету-примітиву (базового елементу), який лежить у основі образу візуалізації віджету.
</td></tr>
<tr>
<td> name </td>
<td> Ім'я </td>
<td> - </td>
<td> Ім'я елементу. Доступне до модифікації ім'я елементу.
</td></tr>
<tr>
<td> dscr </td>
<td> Опис </td>
<td> - </td>
<td> Опис елементу. Текстове поле короткого опису.
</td></tr>
<tr>
<td> en </td>
<td> Ввімкнено </td>
<td> 5 </td>
<td> Стан "Ввімкнено" елементу. Вимкнений елемент не відображається при виконані.
</td></tr>
<tr>
<td> active </td>
<td> Активний </td>
<td> 6 </td>
<td> Стан "Активний" елементу. Активний елемент може отримувати фокус при виконанні, тобто — отримувати клавіатурні та інші події з подальшою їх обробкою.
</td></tr>
<tr>
<td> geomX </td>
<td> Геометрія: x </td>
<td> 7 </td>
<td> Геометрія, координата 'x' положення елементу.
</td></tr>
<tr>
<td> geomY </td>
<td> Геометрія: y </td>
<td> 8 </td>
<td> Геометрія, координата 'y' положення елементу.
</td></tr>
<tr>
<td> geomW </td>
<td> Геометрія: ширина </td>
<td> 9 </td>
<td> Геометрія, ширина елементу.
</td></tr>
<tr>
<td> geomH </td>
<td> Геометрія: висота </td>
<td> 10 </td>
<td> Геометрія, висота елементу.
</td></tr>
<tr>
<td> geomXsc </td>
<td> Геометрія: x масштаб </td>
<td> 13 </td>
<td> Масштаб елемента по горизонталі.
</td></tr>
<tr>
<td> geomYsc </td>
<td> Геометрія: y масштаб </td>
<td> 14 </td>
<td> Масштаб елемента по вертикалі.
</td></tr>
<tr>
<td> geomZ </td>
<td> Геометрія: z </td>
<td> 11 </td>
<td> Геометрія, координата 'z' (рівень) елемента на кадрі. Також визначає порядок передачі фокусу між активними елементами.
</td></tr>
<tr>
<td> geomMargin </td>
<td> Геометрія: відступ </td>
<td> 12 </td>
<td> Геометрія, поля-відступи елементу.
</td></tr>
<tr>
<td> tipTool </td>
<td> Допомога: підказка </td>
<td> 15 </td>
<td> Текст короткої допомоги або підказки по даному елементу. Типово реалізується як спливаюча підказка, при утримані курсору миші над елементом.
</td></tr>
<tr>
<td> tipStatus </td>
<td> Допомога: стан </td>
<td> 16 </td>
<td>
<p>Текст інформації про стан елементу або рекомендації до дії над елементом. Типово реалізується у вигляді повідомлення у рядку статусу, при утримувані курсору миші над елементом.
</p>
<dl><dd> * Модифікація даного атрибуту з сеансу кореневої сторінки здійснює запис повідомлення до рядку статусу вікна візуалізації сеансу.</dd></dl>
</td></tr>
<tr>
<td> contextMenu </td>
<td> Контекстне меню </td>
<td> 17 </td>
<td>
<p>Контекстне меню у вигляді переліку рядків: "<b>{ItName}:{Signal}</b>".<br />
Де:
</p>
<ul><li> "ItName" — ім'я елементу;</li>
<li> "Signal" — ім'я сигналу, що формується при обрані: "<b>usr_{Signal}</b>". </li></ul>
</td></tr>
<tr>
<td> evProc </td>
<td> Обробка подій </td>
<td> - </td>
<td>
<p>Атрибут зберігання сценарію обробки подій безпосереднього управління користувацьким інтерфейсом. Сценарій представляє собою перелік команд інтерфейсу візуалізації, що генеруються при надходженні події (атрибут <b>event</b>). Пряма обробка подій для управління сторінками у вигляді: "<b>{event}:{evSrc}:{com}:{prm}</b>". Де:
</p>
<ul><li> "event" — очікувана подія;</li>
<li> "evSrc" — джерело події;</li>
<li> "com" — команда сеансу: open, next, prev;</li>
<li> "prm" — параметр команди, де використовується:
<ul><li> pg_so — пряме ім'я бажаної сторінки, з префіксом;</li>
<li> 1 — ім'я нової сторінки у загальному шляху, без префіксу;</li>
<li> * — ім'я сторінки береться з ім'я попередньої сторінки;</li>
<li> $ — вказує на місце, відносно якого відкривається сторінка.<br /></li></ul></li></ul>
<p>Приклади:
</p>
<ul><li> ws_BtPress:/prev:prev:/pg_so/*/*/$</li>
<li> ws_BtPress:/next:next:/pg_so/*/*/$</li>
<li> ws_BtPress:/go_mn:open:/pg_so/*/mn/*</li>
<li> ws_BtPress:/go_graph:open:/pg_so/*/ggraph </li></ul>
</td></tr>
<tr>
<td> <i>Додаткові атрибути елементів, поміщених до проекту у ролі сторінки.</i>
</td></tr>
<tr>
<td> pgOpen </td>
<td> Сторінка: відкрита </td>
<td> - </td>
<td>
<p>Ознака "Сторінка відкрита". 
</p>
<dl><dd> * Модифікація з сеансу здійснює негайне відкриття/закриття даної сторінки, та для сторінок типу "Зв'язок" Ви маєте віддавати перевагу використанню функції uiCmd() <a href="#UserAPI">користувацького API</a>, для керування сторінками.</dd></dl>
</td></tr>
<tr>
<td> pgNoOpenProc </td>
<td> Сторінка: обробляти закритою </td>
<td> - </td>
<td> Ознака "Виконувати сторінку навіть якщо вона закрита".
</td></tr>
<tr>
<td> pgOpenSrc </td>
<td> Сторінка: джерело відкриття </td>
<td> 3 </td>
<td>
<p>Повня адреса сторінки, що відкрила дану. 
</p>
<dl><dd> * Запис/очищення адреси віджету (ініціатору відкриття), здійснює негайне відкриття/закриття сторінки. У випадку запису адреси, та виконання <a href="#DynLink">інших умов</a>, здійснюється динамічне зв'язування поточного віджету з ініціатором. Але для сторінок типу "Зв'язок" Ви маєте віддавати перевагу використанню функції uiCmd() <a href="#UserAPI">користувацького API</a>, для керування сторінками.</dd></dl>
</td></tr>
<tr>
<td> pgGrp </td>
<td> Сторінка: група </td>
<td> 4 </td>
<td> Група сторінок.
</td></tr>
<tr>
<td colspan="4"> <i>Додаткові атрибути режиму виконання — сеансу.</i><br />(Віртуальні атрибути не доступні у процедурі віджету)
</td></tr>
<tr>
<td> event </td>
<td> Події </td>
<td> - </td>
<td> Спеціальний атрибут збору подій віджету у переліку, поділеному новим рядком. Доступ до атрибуту захищено критичною секцією для запобігання втрати подій. Атрибут завжди доступний у процедурі віджету.
</td></tr>
<tr>
<td> load </td>
<td> Завантаження </td>
<td> -1 </td>
<td> Віртуальна команда групового завантаження даних.
</td></tr>
<tr>
<td> focus </td>
<td> Фокус </td>
<td> -2 </td>
<td> Спеціальний атрибут індикації факту отримання фокусу, активним віджетом. Атрибут цього віджету та вкладених віджетів доступний у процедурах віджету.
</td></tr>
<tr>
<td> perm </td>
<td> Доступ </td>
<td> -3 </td>
<td> Віртуальний атрибут прав активного користувача на перегляд та контроль над віджетом.
</td></tr></table>
<dl><dd> * — Спеціальна функція атрибуту віджета, виконувана у сеансі проекту при користувацькій модифікації.</dd></dl>
<p>Рушій середовища візуалізації передбачає активацію атрибутів, специфічних до візуалізатору. Процес активації здійснюється при відкритті сеансу візуалізації проекту та передбачає, у цьому проекті: створення специфічного атрибуту з вказаними властивостями, якщо він відсутній, та активацію відстеження його модифікації рушієм середовища візуалізації, як для атрибутів формування образів примітивів. Для безпосереднього визначення такого атрибута можна також використовувати префікс ідентифікатору атрибуту "vs_", що швидше і виключає стадію активації. З переліком специфічних до візуалізатора атрибутів можна ознайомитися у документації відповідного візуалізатора.
</p>
<h4><span class="mw-headline" id=".D0.95.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D1.80.D0.BD.D0.B0_.D0.B3.D1.80.D0.B0.D1.84.D1.96.D1.87.D0.BD.D0.B0_.D1.84.D1.96.D0.B3.D1.83.D1.80.D0.B0_.28ElFigure.29"><span class="mw-headline-number">3.9.1</span> <span id="ElFigure" title="#ElFigure">Елементарна графічна фігура (ElFigure)</span></span></h4>
<p>Примітив є основою у відмальовці елементарних графічних фігур з різноманітною їх комбінацією у одному об'єкті. Враховуючи широкий спектр можливих фігур, які повинен підтримувати примітив, та, у цей-же час, бути достатньо простим у використанні та, по можливості, у реалізації, було вирішено обмежити перелік базових фігур, використаних для побудови результуючих графічних об'єктів, до таких: лінія, дуга, крива Без'є та заливка замкнених контурів. Ґрунтуючись вже на цих базових фігурах, можна будувати довільні фігури, комбінуючи базові. У рамках примітиву існує можливість завдання прозорості кольору у діапазоні [0...255], де '0' — повна прозорість.
</p><p><b>Таблиця.</b> Набір додаткових властивостей/атрибутів примітиву "Елементарна фігура (ElFigure)"
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Ім'я </th>
<th> Номер </th>
<th> Значення
</th></tr>
<tr>
<td> lineWdth </td>
<td> Лінія: ширина </td>
<td> 20 </td>
<td> Ширина лінії.
</td></tr>
<tr>
<td> lineClr </td>
<td> Лінія: колір </td>
<td> 21 </td>
<td>
<p>Ім'я кольору у вигляді "<b>{color}[-{alpha}]</b>", де:
</p>
<ul><li> "color" — стандартне ім'я кольору або його числове представлення з трьох шістнадцяткових чисел окремих кольорів "#RRGGBB";</li>
<li> "alpha" — рівень альфа-каналу [0...255], де 0 — повністю прозорий.<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "red" — суцільний червоний колір;</li>
<li> "#FF0000" — суцільний червоний колір у цифровому коді;</li>
<li> "red-127" — напівпрозорий червоний колір.</li></ul>
</td></tr>
<tr>
<td> lineStyle </td>
<td> Лінія: стиль </td>
<td> 22 </td>
<td> Стиль лінії: суцільна, пунктир, точкова.
</td></tr>
<tr>
<td> bordWdth </td>
<td> Границя: ширина </td>
<td> 23 </td>
<td> Ширина бордюру лінії. Нульова ширина вказує на відсутність бордюру.
</td></tr>
<tr>
<td> bordClr </td>
<td> Границя: колір </td>
<td> 24 </td>
<td> Колір бордюру (деталі у атрибуті 21).
</td></tr>
<tr>
<td> fillColor </td>
<td> Заповнення: колір </td>
<td> 25 </td>
<td> Колір заливки (деталі у атрибуті 21).
</td></tr>
<tr>
<td> fillImg </td>
<td> Заповнення: зображення </td>
<td> 26 </td>
<td>
<p>Ім'я зображення у вигляді "<b>[{src}:]{name}</b>", де:
</p>
<ul><li> "src" — джерело зображення:
<ul><li> <i>file</i> — прямо з локального файлу за шляхом;</li>
<li> <i>res</i> — з таблиці ресурсів БД.</li></ul></li>
<li> "name" — шлях файлу або ідентифікатор ресурсу.<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "res:backLogo" — з таблиці ресурсів БД для ідентифікатору "backLogo";</li>
<li> "backLogo" — як і попередній;</li>
<li> "file:/var/tmp/backLogo.png" — з локального файлу за шляхом "/var/tmp/backLogo.png".</li></ul>
</td></tr>
<tr>
<td> orient </td>
<td> Кут повороту </td>
<td> 28 </td>
<td> Кут повороту вмісту виджета.
</td></tr>
<tr>
<td> mirror </td>
<td> Віддзеркалення </td>
<td> 29 </td>
<td> Віддзеркалення вмісту віджету, <span>наразі обмежене</span>.
</td></tr>
<tr>
<td> elLst </td>
<td> Перелік елементів </td>
<td> 27 </td>
<td>
<p>Перелік графічних елементів у форматі:
</p>
<ul><li> Лінія. Загальна форма запису у переліку, для статичних та динамічних параметрів (можуть змішуватися):</li></ul>
<dl><dd><dl><dd>"<b>line:({x}|{y}):({x}|{y})[:{width}[:{color}[:{bord_w}[:{bord_clr}[:{line_stl}]]]]]</b>"</dd>
<dd>"<b>line:{p1}:{p2}[:w{n}[:c{n}[:w{n}[:c{n}[:s{n}]]]]]</b>"</dd></dl></dd></dl>
<ul><li> Дуга. Загальна форма запису у переліку, для статичних та динамічних параметрів (можуть змішуватися):</li></ul>
<dl><dd><dl><dd>"<b>arc:({x}|{y}):({x}|{y}):({x}|{y}):({x}|{y}):({x}|{y})[:{width}[:{color}[:{bord_w}[:{bord_clr}[:{line_stl}]]]]]</b>"</dd>
<dd>"<b>arc:{p1}:{p2}:{p3}:{p4}:{p5}[:w{n}[:c{n}[:w{n}[:c{n}[:s{n}]]]]]</b>"</dd></dl></dd>
<dd><a class="image" href="http://oscada.org/wiki/File:VCA_arc.png"><img alt="VCA arc.png" height="215" src="../../en/files/VCA_arc.png" width="164" /></a>
<dl><dd>p1, p2 — початкова та кінцева точка еліптичної дуги, відповідно;</dd>
<dd>p3 — центр дуги;</dd>
<dd>p4 — перший радіус;</dd>
<dd>p5 — другий радіус.</dd></dl></dd></dl>
<ul><li> Крива Без'є. Загальна форма запису у переліку, для статичних та динамічних параметрів (можуть змішуватися):</li></ul>
<dl><dd><dl><dd>"<b>bezier:({x}|{y}):({x}|{y}):({x}|{y}):({x}|{y})[:{width}[:{color}[:{bord_w}[:{bord_clr}[:{line_stl}]]]]]</b>"</dd>
<dd>"<b>bezier:{p1}:{p2}:{p3}:{p4}[:w{n}[:c{n}[:w{n}[:c{n}[:s{n}]]]]]</b>"</dd></dl></dd></dl>
<ul><li> Заливка. Загальна форма запису у переліку, для статичних та динамічних параметрів (можуть змішуватися):</li></ul>
<dl><dd><dl><dd>"<b>fill:({x}|{y}):({x}|{y}):...:({x}|{y})[:{fill_clr}[:{fill_img}]]</b>"</dd>
<dd>"<b>fill:{p1}:{p2}:...:{pN}[:c{n}[:i{n}]]</b>"<br /></dd></dl></dd></dl>
<p>Де:
</p>
<dl><dd><i>x, y</i> — пряма точка (x,y), координати у пікселях з плаваючою точкою;</dd>
<dd><i>p1 ... pN</i> — динамічна точка 1...N;</dd>
<dd><i>width, bord_w</i> — пряма ширина лінії та бордюру у пікселях з плаваючою точкою;</dd>
<dd><i>w{n}</i> — динамічна ширина 'n';</dd>
<dd><i>color, bord_clr, fill_clr</i> — прямий колір лінії, бордюру та заповнення, у вигляді назви або 32-бітного коду з альфа: {ім'я}[-{AAA}], #RRGGBB-AAA;</dd>
<dd><i>c{n}</i> — динамічний колір 'n';</dd>
<dd><i>line_stl</i> — прямий стиль лінії: 0-Суцільна, 1-Пунктирна, 2-Точкова;</dd>
<dd><i>s{n}</i> — динамічний стиль 'n';</dd>
<dd><i>fill_img</i> — пряме зображення заповнення у виді "[{src}%3A]{name}", де:
<dl><dd>"src" — джерело зображення:
<dl><dd><i>file</i> — безпосередньо з локального файлу за шляхом;</dd>
<dd><i>res</i> — з таблиці ресурсів БД.</dd></dl></dd>
<dd>"name" — шлях файлу або ідентифікатор ресурсу.</dd></dl></dd>
<dd><i>i{n}</i> — динамічне зображення заповнення 'n'.<br /></dd></dl>
<p>Наприклад:
</p>
<ul><li> line:(50|25):(90.5|25):2:yellow:3:green:2</li>
<li> arc:(25|50):(25|50):1:4:(25|50)::#000000-0</li>
<li> fill:(25|50):(25|50):c2:i2</li>
<li> fill:(50|25):(90.5|25):(90|50):(50|50):#d3d3d3:h_31 </li></ul>
</td></tr>
<tr>
<td colspan="4"> <i>Атрибути кожної точки з переліку графічних фігур <b>elLst</b></i>
</td></tr>
<tr>
<td> p{n}x </td>
<td> Точка {n}:x </td>
<td> 30+n*6 </td>
<td> Координата 'x' точки <i>n</i>.
</td></tr>
<tr>
<td> p{n}y </td>
<td> Точка {n}:y </td>
<td> 30+n*6+1 </td>
<td> Координата 'y' точки <i>n</i>.
</td></tr>
<tr>
<td> w{n} </td>
<td> Ширина {n} </td>
<td> 30+n*6+2 </td>
<td> Ширина <i>n</i>.
</td></tr>
<tr>
<td> с{n} </td>
<td> Колір {n} </td>
<td> 30+n*6+3 </td>
<td> Колір <i>n</i> (деталі у атрибуті 21).
</td></tr>
<tr>
<td> i{n} </td>
<td> Зображення {n} </td>
<td> 30+n*6+4 </td>
<td> Зображення <i>n</i> (деталі у атрибуті 26).
</td></tr>
<tr>
<td> s{n} </td>
<td> Стиль {n} </td>
<td> 30+n*6+5 </td>
<td> Стиль <i>n</i>.
</td></tr></table>
<h4><span class="mw-headline" id=".D0.95.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82_.D1.84.D0.BE.D1.80.D0.BC.D0.B8_.28FormEl.29"><span class="mw-headline-number">3.9.2</span> <span id="FormEl" title="#FormEl">Елемент форми (FormEl)</span></span></h4>
<p>Примітив, призначений для надання, у розпорядження користувача, стандартних елементів форми. Загальний перелік атрибутів залежить від типу елементу.
</p><p><b>Таблиця.</b> Набір додаткових властивостей/атрибутів примітиву "Елемент форми (FormEl)"
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Ім'я </th>
<th> Номер </th>
<th> Значення
</th></tr>
<tr>
<td> elType </td>
<td> Тип елементу </td>
<td> 20 </td>
<td> Тип елементу, від значення якого залежить перелік додаткових атрибутів:
<ul><li> Рядок редагування</li>
<li> Редактор тексту</li>
<li> Прапорець</li>
<li> Кнопка</li>
<li> Вибір з переліку (ComboBox)</li>
<li> Перелік</li>
<li> Дерево</li>
<li> Таблиця</li>
<li> Слайдер</li>
<li> Стрічка гортання</li></ul>
</td></tr>
<tr>
<td colspan="4"> <i>Рядок редагування:</i>
</td></tr>
<tr>
<td> value </td>
<td> Значення </td>
<td> 21 </td>
<td> Вміст рядку.
</td></tr>
<tr>
<td> view </td>
<td> Вид </td>
<td> 22 </td>
<td> Вид рядка редагування:
<ul><li> Текст</li>
<li> Комбобокс</li>
<li> Ціле</li>
<li> Реальне</li>
<li> Час</li>
<li> Дата</li>
<li> Дата та час</li>
<li> Пароль</li></ul>
</td></tr>
<tr>
<td> cfg </td>
<td> Конфігурація </td>
<td> 23 </td>
<td>
<p>Конфігурація рядку. Формат значення даного поля для різних видів рядка:
</p>
<dl><dd><i>Текст</i> — конфігурація форматованого воду за шаблоном з параметрами (підтримується тільки Qt у <a href="../Modules/Vision.html" title="Special:MyLanguage/Modules/Vision">UI.Vision</a>):
<dl><dd><dl><dd><b>A</b> — Потрібно ASCII алфавітний символ, [A-Za-z].</dd>
<dd><b>a</b> — Дозволено, але не обов'язково, ASCII алфавітний символ.</dd>
<dd><b>N</b> — Потрібно ASCII алфавітно-цифровий символ, [A-Za-z0-9].</dd>
<dd><b>n</b> — Дозволено, але не обов'язково, ASCII алфавітно-цифровий символ.</dd>
<dd><b>X</b> — Потрібно будь-який символ.</dd>
<dd><b>x</b> — Дозволено, але не обов'язково, будь-який символ.</dd>
<dd><b>9</b> — Необхідно ASCII цифру, [0-9].</dd>
<dd><b>0</b> — Дозволено, але не обов'язково, ASCII цифру.</dd>
<dd><b>D</b> — Необхідно ASCII цифру, [1-9].</dd>
<dd><b>d</b> — Дозволено, але не обов'язково, ASCII цифру.</dd>
<dd><b>#</b> — Дозволено, але не обов'язково, ASCII цифру або знаки плюс/мінус.</dd>
<dd><b>H</b> — Необхідно символ шістнадцяткового числа, [A-Fa-f0-9].</dd>
<dd><b>h</b> — Дозволено, але не обов'язково, символ шістнадцяткового числа.</dd>
<dd><b>B</b> — Необхідно бінарний символ, [0-1].</dd>
<dd><b>b</b> — Дозволено, але не обов'язково, бінарний символ.</dd>
<dd><b>&gt;</b> — Всі наступні алфавітні символи у верхньому регістрі.</dd>
<dd><b>&lt;</b> — Всі наступні алфавітні символи у нижньому регістрі.</dd>
<dd><b>!</b> — Виключення перетворення регістру.</dd>
<dd><b>\\</b> — Використовуйте у роздільниках, для екранування спеціальних символів, які перелічено.</dd></dl></dd></dl></dd>
<dd><i>Комбобокс</i> — перелік значень редагованого комбо-боксу, за рядками.</dd>
<dd><i>Ціле</i> — значення цілого числа у формі: "<b>{Мінімум}:{Максимум}:{КрокЗміни}:{Префікс}:{Суфікс}</b>".</dd>
<dd><i>Реальне</i> — значення реального числа в формі: "<b>{Мінімум}:{Максимум}:{КрокЗміни}:{Префікс}:{Суфікс}:{ЗнаківПісляКрапки}</b>".</dd>
<dd><i>Час</i>, <i>Дата</i>, <i>Дата та час</i> — формувати дату за шаблоном з параметрами:
<dl><dd><dl><dd><b>d</b> — номер дня (1-31);</dd>
<dd><b>dd</b> — номер дня (01-31);</dd>
<dd><b>ddd</b> — скорочене найменування дня ("Mon" ... "Sun");</dd>
<dd><b>dddd</b> — повне найменування дня ("Monday" ... "Sunday");</dd>
<dd><b>M</b> — номер місяця (1-12);</dd>
<dd><b>MM</b> — номер місяця (01-12);</dd>
<dd><b>MMM</b> — скорочене ім'я місяця ("Jan" ... "Dec");</dd>
<dd><b>MMMM</b> — повне ім'я місяця ("January" ... "December");</dd>
<dd><b>yy</b> — останні дві цифри року;</dd>
<dd><b>yyyy</b> — рік повністю;</dd>
<dd><b>h</b> — час (0-23);</dd>
<dd><b>hh</b> — час (00-23);</dd>
<dd><b>m</b> — хвилини (0-59);</dd>
<dd><b>mm</b> — хвилини (00-59);</dd>
<dd><b>s</b> — секунди (0-59);</dd>
<dd><b>ss</b> — секунди (00-59);</dd>
<dd><b>AP,ap</b> — відображати AM/PM або am/pm. </dd></dl></dd></dl></dd></dl>
</td></tr>
<tr>
<td> confirm </td>
<td> Підтверджувати </td>
<td> 24 </td>
<td> Включення режиму підтвердження.
</td></tr>
<tr>
<td> font </td>
<td> Шрифт </td>
<td> 25 </td>
<td>
<p>Ім'я шрифту у вигляді "<b>{family} {size} {bold} {italic} {underline} {strike}</b>", де:
</p>
<ul><li> "family" — сімейство шрифту, для пробілів використовуйте символ '_', на кшталт: "Arial", "Courier", "Times_New_Roman";</li>
<li> "size" — розмір шрифту у пікселях;</li>
<li> "bold" — підсилення шрифту (0 або 1);</li>
<li> "italic" — нахиленість шрифту (0 або 1);</li>
<li> "underline" — підкреслення шрифту (0 або 1);</li>
<li> "strike" — перекреслення шрифту (0 або 1).<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "Arial 10 1 0 0 0" — Arial шрифт розміром 10 пікселів та підсилений. </li></ul>
</td></tr>
<tr>
<td colspan="4"> <i>Редактор тексту:</i>
</td></tr>
<tr>
<td> value </td>
<td> Значення </td>
<td> 21 </td>
<td> Вміст редактору.
</td></tr>
<tr>
<td> wordWrap </td>
<td> Перенесення слів </td>
<td> 22 </td>
<td> Автоматичний перенесення тексту за словами.
</td></tr>
<tr>
<td> confirm </td>
<td> Підтверджувати </td>
<td> 24 </td>
<td> Включення режиму підтвердження.
</td></tr>
<tr>
<td> font </td>
<td> Шрифт </td>
<td> 25 </td>
<td> Ім'я шрифту у вигляді "<b>{family} {size} {bold} {italic} {underline} {strike}</b>" (деталі вище).
</td></tr>
<tr>
<td colspan="4"> <i>Прапорець:</i>
</td></tr>
<tr>
<td> name </td>
<td> Ім'я </td>
<td> 26 </td>
<td> Ім'я/мітка прапорця.
</td></tr>
<tr>
<td> value </td>
<td> Значення </td>
<td> 21 </td>
<td> Значення прапорця.
</td></tr>
<tr>
<td> font </td>
<td> Шрифт </td>
<td> 25 </td>
<td> Ім'я шрифту у вигляді "<b>{family} {size} {bold} {italic} {underline} {strike}</b>" (деталі вище).
</td></tr>
<tr>
<td colspan="4"> <i>Кнопка:</i>
</td></tr>
<tr>
<td> name </td>
<td> Ім'я </td>
<td> 26 </td>
<td> Ім'я-надпис на кнопці. Допустимі символи '\n' для можливості вводу багаторядних надписів.
</td></tr>
<tr>
<td> value </td>
<td> Значення </td>
<td> 21 </td>
<td>
<p>Значення, відрізняється для різних режимів:
</p>
<ul><li> "Стандарт" — параметри повтору подій при утримані <b>{затримка}-{інтервал}</b>, час у мілісекундах;</li>
<li> "Перемикач" — значення перемикача;</li>
<li> "Меню" — перелік адрес елементів меню виду <b>/grp1/grp2/item1</b>;</li>
<li> "Завантаження" — рядок опису <b>{ШаблонФайлів}|{Заголовок}|{ФайлПоЗамовчТаЗав}|{ФайлMime}</b> та вміст завантаженого файлу. Шаблон файлів у вигляді "Зображення (*.png *.xpm *.jpg);;CSV-файл (*.csv)".</li>
<li> "Збереження" — рядок опису <b>{ШаблонФайлів}|{Заголовок}|{ФайлПоЗамовч}|{ФайлMime}</b> та вміст файлу, що зберігається. Шаблон файлів як і вище.</li></ul>
</td></tr>
<tr>
<td> img </td>
<td> Зображення </td>
<td> 22 </td>
<td>
<p>Зображення на кнопці. Ім'я зображення у вигляді "<b>[{src}:]{name}</b>", де:
</p>
<ul><li> "src" — джерело зображення:
<ul><li> <i>file</i> — прямо з локального файлу за шляхом;</li>
<li> <i>res</i> — з таблиці ресурсів БД.</li></ul></li>
<li> "name" — шлях файлу або ідентифікатор ресурсу.<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "res:backLogo" — з таблиці ресурсів БД для ідентифікатору "backLogo";</li>
<li> "backLogo" — як і попередній;</li>
<li> "file:/var/tmp/backLogo.png" — з локального файлу за шляхом "/var/tmp/backLogo.png".</li></ul>
</td></tr>
<tr>
<td> color </td>
<td> Колір </td>
<td> 23 </td>
<td>
<p>Колір кнопки. Ім'я кольору у вигляді "<b>{color}[-{alpha}]</b>", де:
</p>
<ul><li> "color" — стандартне ім'я кольору або його числове представлення з трьох шістнадцяткових чисел окремих кольорів "#RRGGBB";</li>
<li> "alpha" — рівень альфа-каналу [0...255], де 0 — повністю прозорий.<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "red" — суцільний червоний колір;</li>
<li> "#FF0000" — суцільний червоний колір у цифровому коді;</li>
<li> "red-127" — напівпрозорий червоний колір.</li></ul>
</td></tr>
<tr>
<td> colorText </td>
<td> Колір: текст </td>
<td> 27 </td>
<td> Колір тексту (деталі вище).
</td></tr>
<tr>
<td> mode </td>
<td> Режим </td>
<td> 24 </td>
<td>
<p>Режим роботи кнопки:
</p>
<ul><li> "Стандарт" — звичайна кнопка з можливістю повтору подій при утримані, параметри у "value";</li>
<li> "Перемикач" — кнопка з фіксацією, значення у "value";</li>
<li> "Меню" — відкриття меню за натиском, перелік елементів у "value";</li>
<li> "Завантаження" — організація користувацького завантаження невеликих файлів через інтерфейс візуалізації; за натиском кнопки, у цьому режимі, відкривається діалог вибору файлу завантаження, а вміст обраного файлу завантажується до атрибуту "value";</li>
<li> "Збереження" — організація користувацького збереження невеликих файлів через інтерфейс візуалізації; при запису вмісту файлу до атрибуту "value" користувачу буде відкрито діалог обрання/вказання файлу для збереження, після обрання, вміст атрибуту "value" збережеться до файлу, а "value" очиститься.</li></ul>
</td></tr>
<tr>
<td> font </td>
<td> Шрифт </td>
<td> 25 </td>
<td> Ім'я шрифту у вигляді "<b>{family} {size} {bold} {italic} {underline} {strike}</b>" (деталі вище).
</td></tr>
<tr>
<td colspan="4"> <i>Список:</i>
</td></tr>
<tr>
<td> value </td>
<td> Значення </td>
<td> 21 </td>
<td> Поточне значення списку.
</td></tr>
<tr>
<td> items </td>
<td> Елементи </td>
<td> 22 </td>
<td> Перелік елементів списку.
</td></tr>
<tr>
<td> font </td>
<td> Шрифт </td>
<td> 25 </td>
<td> Ім'я шрифту у вигляді "<b>{family} {size} {bold} {italic} {underline} {strike}</b>" (деталі вище).
</td></tr>
<tr>
<td> mult </td>
<td> Множинний вибір </td>
<td> 23 </td>
<td> Дозволяти вибір множини елементів списку.
</td></tr>
<tr>
<td colspan="4"> <i>Вибір зі списку, Дерево:</i>
</td></tr>
<tr>
<td> value </td>
<td> Значення </td>
<td> 21 </td>
<td> Поточне значення переліку.
</td></tr>
<tr>
<td> items </td>
<td> Елементи </td>
<td> 22 </td>
<td> Перелік елементів списку або ієрархічних елементів дерева у вигляді шляху "<b>/{КАТ}/{КАТ}/{ЕЛЕМ}</b>".
</td></tr>
<tr>
<td> font </td>
<td> Шрифт </td>
<td> 25 </td>
<td> Ім'я шрифту у вигляді "<b>{family} {size} {bold} {italic} {underline} {strike}</b>" (деталі вище).
</td></tr>
<tr>
<td colspan="4"> <i>Таблиця:</i>
</td></tr>
<tr>
<td> set </td>
<td> Значення встановлення </td>
<td> 23 </td>
<td> Значення редагування клітинки таблиці з адресою у події "<b>ws_TableEdit_{colN}_{rowN}</b>".
</td></tr>
<tr>
<td> value </td>
<td> Значення </td>
<td> 21 </td>
<td>
<p>Адреса обраного елементу. Зміна супроводжується подією "<b>ws_TableChangeSel</b>". Формат адреси залежить від режиму обрання таблиці:
</p>
<ul><li> "Клітинка" — адреса клітинки у форматі "<b>{row}:{col}</b>".</li>
<li> "Рядок", "Стовпчик" — номер рядка-стовпчика або вміст клітинки ключа рядка-стовпчика, вказаного атрибутом "keyID".</li></ul>
</td></tr>
<tr>
<td> items </td>
<td> Елементи </td>
<td> 22 </td>
<td>
<p>Структура та вміст таблиці у вигляді XML:
</p>
<pre style="white-space: pre-wrap;">
&lt;tbl&gt;
&lt;h&gt;&lt;s&gt;{Заголовок1}&lt;/s&gt;&lt;s&gt;{Заголовок2}&lt;/s&gt;&lt;/h&gt;
&lt;r&gt;&lt;s&gt;{Рядок1Стовпчик1Рядок}&lt;/s&gt;&lt;i&gt;{Рядок1Стовпчик2Ціле}&lt;/i&gt;&lt;/r&gt;
&lt;r&gt;&lt;b&gt;{Рядок2Стовпчик1Логічне}&lt;/b&gt;&lt;r&gt;{Рядок2Стовпчик2Реальне}&lt;/r&gt;&lt;/r&gt;
&lt;/tbl&gt;</pre>
<p>Теги:
</p>
<dl><dd>"tbl" — Таблиця, властивості таблиці загалом:
<ul><li> "sel" — режим обрання-виділення елементів таблиці: "row" — за рядками, "col" — за стовпчиками, "cell" — клітинками (по замовченню);</li>
<li> "keyID" — номер ключового рядка-стовпчика, для отримання значення вибору;</li>
<li> "colsWdthFit" — підлаштовувати розмір стовпчиків, розмір яких не фіксовано, під заповнення всієї ширини таблиці;</li>
<li> "hHdrVis", "vHdrVis" — встановлення видимості горизонтального, вертикального заголовків;</li>
<li> "sortEn" — включення прямого сортування за стовпчиками.</li></ul></dd>
<dd>"h" — Рядок заголовків, можливі атрибути тегів клітинок заголовку, для стовпчика загалом:
<ul><li> "width" — ширина стовпчика, у пікселях або відсотках (10%);</li>
<li> "edit" — можливість редагування (0 або 1) клітинок стовпчика, по замовченню — ні (0);</li>
<li> "color" — колір стовпчика, загалом, у вигляді ім'я кольору або його коду;</li>
<li> "colorText" — колір тексту стовпчика, загалом, у вигляді ім'я кольору або його коду;</li>
<li> "font" — шрифт тексту стовпчика, загалом, у вигляді типового рядка OpenSCADA;</li>
<li> "prec" — точність значень клітинок реального типу у стовпчику;</li>
<li> "sort" — сортування за даним стовпчиком [0 — по зростанню-типово; 1 — по убуванню];</li>
<li> "align" — вирівнювання стовпчика щодо: "left", "right" та "center".</li></ul></dd>
<dd>"r" — Рядок значень, можливі атрибути тегів клітинок заголовку, для рядка загалом:
<ul><li> "color" — колір рядку, загалом, у вигляді ім'я кольору або його коду;</li>
<li> "colorText" — колір тексту рядка, загалом, у вигляді ім'я кольору або його коду;</li>
<li> "font" — шрифт тексту рядка, загалом, у вигляді типового рядка OpenSCADA;</li>
<li> "prec" — точність значень клітинок реального типу у рядку.</li></ul></dd>
<dd>"s", "t", "i", "r", "b" — клітинки типів даних: "Рядок", "Текст", "Ціле", "Реальне" та "Логічне". Можливі атрибути:
<ul><li> "color" — колір клітинки;</li>
<li> "colorText" — колір тексту клітинки, у вигляді ім'я кольору або його коду;</li>
<li> "prec" — точність значень клітинки реального типу;</li>
<li> "font" — шрифт тексту клітинки, у вигляді типового рядка OpenSCADA;</li>
<li> "img" — зображення клітинки, у вигляді "<b>[{src}:]{name}</b>", деталі вище;</li>
<li> "edit" — можливість редагування (0 або 1) клітинки, по замовченню — немає (0);</li>
<li> "align" — вирівнювання клітинки щодо: "left", "right" та "center".</li></ul></dd></dl>
</td></tr>
<tr>
<td> font </td>
<td> Шрифт </td>
<td> 25 </td>
<td> Ім'я шрифту у вигляді "<b>{family} {size} {bold} {italic} {underline} {strike}</b>" (деталі вище).
</td></tr>
<tr>
<td colspan="4"> <i>Слайдер та стрічка гортання:</i>
</td></tr>
<tr>
<td> value </td>
<td> Значення </td>
<td> 21 </td>
<td> Положення слайдеру.
</td></tr>
<tr>
<td> cfg </td>
<td> Конфігурація </td>
<td> 22 </td>
<td>
<p>Конфігурація слайдеру у форматі: "<b>{ВертОрієнт}:{Мінімум}:{Максимум}:{ОдинКрок}:{СторКрок}</b>".<br />
Де:
</p>
<ul><li> "ВертОрієнт" — ознака вертикальної орієнтації (0 або 1), по замовченню орієнтація горизонтальна;</li>
<li> "Мінімум" — мінімальне значення;</li>
<li> "Максимум" — максимальне значення;</li>
<li> "ОдинКрок" — розмір одного кроку;</li>
<li> "СторКрок" — розмір сторінкового кроку. </li></ul>
</td></tr></table>
<h4><span class="mw-headline" id=".D0.95.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82_.D1.82.D0.B5.D0.BA.D1.81.D1.82.D1.83_.28Text.29"><span class="mw-headline-number">3.9.3</span> <span id="Text" title="#Text">Елемент тексту (Text)</span></span></h4>
<p>Даний примітив призначено для виводу простого та HTML тексту, що використовується у ролі міток та різних підписів. З метою створення декоративних оформлень, примітив підтримує обведення тексту рамкою.
</p><p><b>Таблиця.</b> Набір додаткових властивостей/атрибутів примітиву "Елемент тексту (Text)"
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Ім'я </th>
<th> Номер </th>
<th> Значення
</th></tr>
<tr>
<td> backColor </td>
<td> Фон: колір </td>
<td> 20 </td>
<td>
<p>Фоновий колір. Ім'я кольору у виді "<b>{color}[-{alpha}]</b>", де:
</p>
<ul><li> "color" — стандартне ім'я кольору або його числове представлення з трьох шістнадцяткових чисел окремих кольорів "#RRGGBB";</li>
<li> "alpha" — рівень альфа-каналу [0...255], де 0 — повністю прозорий.<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "red" — суцільний червоний колір;</li>
<li> "#FF0000" — суцільний червоний колір у цифровому коді;</li>
<li> "red-127" — напівпрозорий червоний колір.</li></ul>
</td></tr>
<tr>
<td> backImg </td>
<td> Фон: зображення </td>
<td> 21 </td>
<td>
<p>Фонове зображення. Ім'я зображення у виді "<b>[{src}:]{name}</b>", де:
</p>
<ul><li> "src" — джерело зображення:
<ul><li> <i>file</i> — прямо з локального файлу за шляхом;</li>
<li> <i>res</i> — з таблиці ресурсів БД.</li></ul></li>
<li> "name" — шлях файлу або ідентифікатор ресурсу.<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "res:backLogo" — з таблиці ресурсів БД для ідентифікатору "backLogo";</li>
<li> "backLogo" — як і попередній;</li>
<li> "file:/var/tmp/backLogo.png" — з локального файлу за шляхом "/var/tmp/backLogo.png".</li></ul>
</td></tr>
<tr>
<td> bordWidth </td>
<td> Границя: ширина </td>
<td> 22 </td>
<td> Ширина бордюру.
</td></tr>
<tr>
<td> bordColor </td>
<td> Границя: колір </td>
<td> 23 </td>
<td> Колір бордюру (детальніше у атрибуті 20).
</td></tr>
<tr>
<td> bordStyle </td>
<td> Границя: стиль </td>
<td> 24 </td>
<td> Стиль бордюру: "Немає", "Точковий", "Пунктирний", "Суцільний", "Подвійний", "Канавка", "Кромка", "Втиснутий", "Виступаючий".
</td></tr>
<tr>
<td> font </td>
<td> Шрифт </td>
<td> 25 </td>
<td>
<p>Ім'я шрифту у виді "<b>{family} {size} {bold} {italic} {underline} {strike}</b>", де:
</p>
<ul><li> "family" — сімейство шрифту, для пробілів використовуйте символ '_', на кшталт: "Arial", "Courier", "Times_New_Roman";</li>
<li> "size" — розмір шрифту у пікселях;</li>
<li> "bold" — підсилення шрифту (0 або 1);</li>
<li> "italic" — нахиленість шрифту (0 або 1);</li>
<li> "underline" — підкреслення шрифту (0 або 1);</li>
<li> "strike" — перекреслення шрифту (0 або 1).<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "Arial 10 1 0 0 0" — Arial шрифт розміром 10 пікселів та підсилений. </li></ul>
</td></tr>
<tr>
<td> color </td>
<td> Колір </td>
<td> 26 </td>
<td> Колір тексту (детальніше у атрибуті 20).
</td></tr>
<tr>
<td> orient </td>
<td> Кут повороту </td>
<td> 27 </td>
<td> Орієнтація тексту, кут повороту.
</td></tr>
<tr>
<td> wordWrap </td>
<td> Перенесення слів </td>
<td> 28 </td>
<td> Автоматичне перенесення тексту за словами.
</td></tr>
<tr>
<td> alignment </td>
<td> Вирівнювання </td>
<td> 29 </td>
<td> Вирівнювання тексту: "Зверху ліворуч", "Зверху праворуч", "Зверху у центрі", "Зверху по ширині", "Знизу ліворуч", "Знизу праворуч", "Знизу у центрі", "Знизу по ширині", "У центрі ліворуч", "У центрі праворуч", "У центрі", "У центрі по ширині".
</td></tr>
<tr>
<td> inHtml </td>
<td> В HTML </td>
<td> 31 </td>
<td> Відображення та підтримка вмісту аргументу <i>text</i> у HTML.
</td></tr>
<tr>
<td> text </td>
<td> Текст </td>
<td> 30 </td>
<td> Значення тексту. Використовуйте "<b>%{x}</b>" для розташування значення аргументу "x" (від 1).
</td></tr>
<tr>
<td> numbArg </td>
<td> Кількість аргументів </td>
<td> 40 </td>
<td> Кількість аргументів.
</td></tr>
<tr>
<td colspan="4"> <i>Атрибути аргументів</i>
</td></tr>
<tr>
<td> arg{x}val </td>
<td> Аргумент {x}: значення </td>
<td> 50+10*x </td>
<td> Значення аргументу <i>x</i>.
</td></tr>
<tr>
<td> arg{x}tp </td>
<td> Аргумент {x}: тип </td>
<td> 50+10*x+1 </td>
<td> Тип аргументу <i>x</i>: "Цілий", "Реальний", "Рядок".
</td></tr>
<tr>
<td> arg{x}cfg </td>
<td> Аргумент {x}: конфігурація </td>
<td> 50+10*x+2 </td>
<td>
<p>Конфігурація аргументу <i>x</i>:
</p>
<ul><li> "Рядок": <b>{len}</b> — ширина рядка;</li>
<li> "Реальний": <b>{wdth};{form};{prec}</b> — ширина, форма ('g', 'e', 'f') та точність значення;</li>
<li> "Цілий": <b>{len}</b> — ширина значення. </li></ul>
</td></tr></table>
<h4><span class="mw-headline" id=".D0.95.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82_.D0.B2.D1.96.D0.B4.D0.BE.D0.B1.D1.80.D0.B0.D0.B6.D0.B5.D0.BD.D0.BD.D1.8F_.D0.BC.D0.B5.D0.B4.D1.96.D0.B0-.D0.BC.D0.B0.D1.82.D0.B5.D1.80.D1.96.D0.B0.D0.BB.D1.96.D0.B2_.28Media.29"><span class="mw-headline-number">3.9.4</span> <span id="Media" title="#Media">Елемент відображення медіа-матеріалів (Media)</span></span></h4>
<p>Даний примітив призначено для програвання різних медіа-матеріалів, починаючи від простих зображень та закінчуючи повноцінними аудіо та відео потоками.
</p><p><b>Таблиця.</b> Набір додаткових властивостей/атрибутів примітиву "Елемент відображення медіа-матеріалів (Media)"
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Ім'я </th>
<th> Номер </th>
<th> Значення
</th></tr>
<tr>
<td> backColor </td>
<td> Фон: колір </td>
<td> 20 </td>
<td>
<p>Фоновий колір. Ім'я кольору у виді "<b>{color}[-{alpha}]</b>", де:
</p>
<ul><li> "color" — стандартне ім'я кольору або його числове представлення з трьох шістнадцяткових чисел окремих кольорів "#RRGGBB";</li>
<li> "alpha" — рівень альфа-каналу [0...255], де 0 — повністю прозорий.<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "red" — суцільний червоний колір;</li>
<li> "#FF0000" — суцільний червоний колір у цифровому коді;</li>
<li> "red-127" — напівпрозорий червоний колір.</li></ul>
</td></tr>
<tr>
<td> backImg </td>
<td> Фон: зображення </td>
<td> 21 </td>
<td>
<p>Фонове зображення. Ім'я зображення у виді "<b>[{src}:]{name}</b>", де:
</p>
<ul><li> "src" — джерело зображення:
<ul><li> <i>file</i> — прямо з локального файлу за шляхом;</li>
<li> <i>res</i> — з таблиці ресурсів БД.</li></ul></li>
<li> "name" — шлях файлу або ідентифікатор ресурсу.<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "res:backLogo" — з таблиці ресурсів БД для ідентифікатору "backLogo";</li>
<li> "backLogo" — як і попередній;</li>
<li> "file:/var/tmp/backLogo.png" — з локального файлу за шляхом "/var/tmp/backLogo.png".</li></ul>
</td></tr>
<tr>
<td> bordWidth </td>
<td> Границя: ширина </td>
<td> 22 </td>
<td> Ширина бордюру.
</td></tr>
<tr>
<td> bordColor </td>
<td> Границя: колір </td>
<td> 23 </td>
<td> Колір бордюру (детальніше у атрибуті 20).
</td></tr>
<tr>
<td> bordStyle </td>
<td> Границя: стиль </td>
<td> 24 </td>
<td> Стиль бордюру: "Немає", "Точковий", "Пунктирний", "Суцільний", "Подвійний", "Канавка", "Кромка", "Втиснутий", "Виступаючий".
</td></tr>
<tr>
<td> src </td>
<td> Джерело </td>
<td> 25 </td>
<td>
<p>Ім'я джерела медіа у виді "<b>[{src}:]{name}</b>", де:
</p>
<ul><li> "src" — джерело:
<ul><li> <i>file</i> — прямо з локального, візуалізатор та рущій, файлу за шляхом;</li>
<li> <i>res</i> — з таблиці ресурсів БД;</li>
<li> <i>stream</i> — URL потоку програвання відео або аудіо.</li></ul></li>
<li> "name" — шлях файлу або ідентифікатор ресурсу.<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "res:workMedia" — з таблиці ресурсів БД для ідентифікатору "workMedia";</li>
<li> "workMedia" — як і попередній;</li>
<li> "file:/var/tmp/workMedia.mng" — з локального файлу за шляхом "/var/tmp/workMedia.mng";</li>
<li> "stream:http://localhost.localhost:5050" — програвання відео або аудіо з URL.</li></ul>
</td></tr>
<tr>
<td> type </td>
<td> Тип </td>
<td> 27 </td>
<td>
<p>Тип медіа:
</p>
<ul><li> "Зображення" — растрове або векторне (може не підтримуватися) зображення, на кшталт: PNG, JPEG, GIF, SVG;</li>
<li> "Анімація" — просте анімоване зображення, на кшталт: GIF, MNG;</li>
<li> "Відео" — повне відео або потік, на кшталт: OGM, AVI, MKV, MPG, MP4;</li>
<li> "Аудіо" — просто аудіо або потік, на кшталт: OGG, MP3, WAV.</li></ul>
</td></tr>
<tr>
<td> areas </td>
<td> Області карти </td>
<td> 28 </td>
<td> Кількість активних областей.
</td></tr>
<tr>
<td colspan="4"> <i>Атрибути зображення (Image)</i>
</td></tr>
<tr>
<td> fit </td>
<td> Заповнювати віджет </td>
<td> 26 </td>
<td> Ознака "Погоджувати вміст з розміром віджету".
</td></tr>
<tr>
<td colspan="4"> <i>Атрибути анімації-відеоролику (Animation)</i>
</td></tr>
<tr>
<td> fit </td>
<td> Заповнювати віджет </td>
<td> 26 </td>
<td> Ознака "Погоджувати вміст з розміром віджету".
</td></tr>
<tr>
<td> speed </td>
<td> Швидкість програвання </td>
<td> 29 </td>
<td> Швидкість програвання, у відсотках від оригінальної швидкості. Якщо значення менше або дорівнює 1% то програвання припиняється.
</td></tr>
<tr>
<td colspan="4"> <i>Атрибути повноформатного відео (Full video)</i>
</td></tr>
<tr>
<td> play </td>
<td> Грати </td>
<td> 29 </td>
<td> Відео/аудіо — "Грати".
</td></tr>
<tr>
<td> roll </td>
<td> Завертати програвання </td>
<td> 30 </td>
<td> Повторення програвання по завершенню.
</td></tr>
<tr>
<td> pause </td>
<td> Пауза </td>
<td> 31 </td>
<td> Призупиняти програвання.
</td></tr>
<tr>
<td> size </td>
<td> Розмір </td>
<td> 32 </td>
<td> Загальний розмір відео, у мілісекундах.
</td></tr>
<tr>
<td> seek </td>
<td> Положення </td>
<td> 33 </td>
<td> Позиція програвання відео, у мілісекундах.
</td></tr>
<tr>
<td> volume </td>
<td> Гучність </td>
<td> 34 </td>
<td> Гучність звуку [0...100].
</td></tr>
<tr>
<td colspan="4"> <i>Активні області</i>
</td></tr>
<tr>
<td> area{x}shp </td>
<td> Область {x}: образ </td>
<td> 40+3*x </td>
<td> Вид області <i>x</i>: "Квадрат", "Полілінія", "Коло".
</td></tr>
<tr>
<td> area{x}coord </td>
<td> Область {x}: координати </td>
<td> 40+3*x+1 </td>
<td> Координати області <i>x</i>, через кому йдуть координати: "x1,y1,x2,y2,xN,yN".
</td></tr>
<tr>
<td> area{x}title </td>
<td> Область {x}: заголовок </td>
<td> 40+3*x+2 </td>
<td> Заголовок області <i>x</i>.
</td></tr></table>
<h4><span class="mw-headline" id=".D0.95.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82_.D0.BF.D0.BE.D0.B1.D1.83.D0.B4.D0.BE.D0.B2.D0.B8_.D0.B4.D1.96.D0.B0.D0.B3.D1.80.D0.B0.D0.BC_.28Diagram.29"><span class="mw-headline-number">3.9.5</span> <span id="Diagram" title="#Diagram">Елемент побудови діаграм (Diagram)</span></span></h4>
<p>Цей примітив призначено для побудови різних діаграм у часі, включаючи графіки-тренди відображення поточного процесу та архівних даних. Реалізовано наступні типи діаграм:
</p>
<ul><li> "Графік-тренд" — будує графік значень параметру у часі.</li>
<li> "Спектр" — будує частотний спектр із значень параметрів. Вікно даних частотного спектру формується виходячи із розміру віджету по горизонталі, у пікселях, та доступних даних параметрів, накладених на ґратку горизонтального розміру. У зв'язку з цим, мінімальна виділювана частота визначається значенням атрибуту "tSize" — "<b>1/tSize</b>", а максимальна, половинною шириною графіка у пікселях помноженою на мінімальну частоту "<b>width/(2*tSize)</b>".</li>
<li> "XY" — будує двомірний графік значень параметрів, парами на графік, де парні по осі Y (0,2,4...) та непарні по осі X (1,3,5...). Вказаний діапазон часу даних використовується у отримані значень параметрів осі X та Y, з подальшим зображенням.</li></ul>
<p>Для всіх типів діаграм можливе визначення, у якості джерела даних:
</p>
<ul><li> параметру підсистеми "Збір Даних";</li>
<li> архіву значень;</li>
<li> прямого блоку даних користувача.</li></ul>
<p>Підтримується режим слідкування за поточними значеннями та значеннями з архіву, а також, можлива побудова графіків параметрів, що не мають архіву значень, шляхом накопичення поточних значень у буфері діаграми та тільки на момент активного відображення цієї діаграми.
</p><p>Процес доступу до архівних даних оптимізовано шляхом введення проміжного буферу відображення, а також, упаковки трафіку даних при запиті, шляхом приведення даних до якості достатньої для відображення.
</p><p><b>Таблиця.</b> Набір додаткових властивостей/атрибутів примітиву "Елемент побудови діаграм (Diagram)"
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Ім'я </th>
<th> Номер </th>
<th> Значення
</th></tr>
<tr>
<td> backColor </td>
<td> Фон: колір </td>
<td> 20 </td>
<td>
<p>Фоновий колір. Ім'я кольору у виді "<b>{color}[-{alpha}]</b>", де:
</p>
<ul><li> "color" — стандартне ім'я кольору або його числове представлення з трьох шістнадцяткових чисел окремих кольорів "#RRGGBB";</li>
<li> "alpha" — рівень альфа-каналу [0...255], де 0 — повністю прозорий.<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "red" — суцільний червоний колір;</li>
<li> "#FF0000" — суцільний червоний колір у цифровому коді;</li>
<li> "red-127" — напівпрозорий червоний колір.</li></ul>
</td></tr>
<tr>
<td> backImg </td>
<td> Фон: зображення </td>
<td> 21 </td>
<td>
<p>Фонове зображення. Ім'я зображення у виді "<b>[{src}:]{name}</b>", де:
</p>
<ul><li> "src" — джерело зображення:
<ul><li> <i>file</i> — прямо з локального файлу за шляхом;</li>
<li> <i>res</i> — з таблиці ресурсів БД.</li></ul></li>
<li> "name" — шлях файлу або ідентифікатор ресурсу.<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "res:backLogo" — з таблиці ресурсів БД для ідентифікатору "backLogo";</li>
<li> "backLogo" — як і попередній;</li>
<li> "file:/var/tmp/backLogo.png" — з локального файлу за шляхом "/var/tmp/backLogo.png".</li></ul>
</td></tr>
<tr>
<td> bordWidth </td>
<td> Границя: ширина </td>
<td> 22 </td>
<td> Ширина бордюру.
</td></tr>
<tr>
<td> bordColor </td>
<td> Границя: колір </td>
<td> 23 </td>
<td> Колір бордюру (детальніше у атрибуті 20).
</td></tr>
<tr>
<td> bordStyle </td>
<td> Границя: стиль </td>
<td> 24 </td>
<td> Стиль бордюру: "Немає", "Точковий", "Пунктирний", "Суцільний", "Подвійний", "Канавка", "Кромка", "Втиснутий", "Виступаючий".
</td></tr>
<tr>
<td> trcPer </td>
<td> Період стеження, секунд </td>
<td> 25 </td>
<td> Режим та періодичність стеження.
</td></tr>
<tr>
<td> type </td>
<td> Тип </td>
<td> 26 </td>
<td> Тип діаграми: "Графік", "Спектр", "XY".
</td></tr>
<tr>
<td colspan="4"> <i>Атрибути, загальні для всіх типів</i>
</td></tr>
<tr>
<td> tSek </td>
<td> Час: секунди </td>
<td> 27 </td>
<td> Поточний час, секунд.
</td></tr>
<tr>
<td> tUSek </td>
<td> Час: мікросекунди </td>
<td> 28 </td>
<td> Поточний час, мікросекунди.
</td></tr>
<tr>
<td> tSize </td>
<td> Розмір, секунди </td>
<td> 29 </td>
<td> Розмір даних, секунди.
</td></tr>
<tr>
<td> curSek </td>
<td> Курсор: секунди </td>
<td> 30 </td>
<td> Положення курсору, секунди.
</td></tr>
<tr>
<td> curUSek </td>
<td> Курсор: мікросекунди </td>
<td> 31 </td>
<td> Положення курсору, мікросекунди.
</td></tr>
<tr>
<td> curColor </td>
<td> Курсор: колір </td>
<td> 32 </td>
<td> Колір курсору.
</td></tr>
<tr>
<td> sclColor </td>
<td> Шкала: колір </td>
<td> 33 </td>
<td> Колір шкали-решітки (детальніше у атрибуті 20).
</td></tr>
<tr>
<td> sclHor </td>
<td> Шкала: горизонтальна </td>
<td> 34 </td>
<td> Режим горизонтальної шкали-решітки: "Не зображувати", "Ґратка", "Маркери", "Ґратка та маркери", "Ґратка (лог)", "Маркери (лог)", "Ґратка та маркери (лог)".
</td></tr>
<tr>
<td> sclHorScl </td>
<td> Шкала: гориз. масштаб (%) </td>
<td> 44 </td>
<td> Горизонтальний масштаб графіку у відсотках, виключно для типу "XY".
</td></tr>
<tr>
<td> sclHorSclOff </td>
<td> Шкала: зміщ. гориз. масштабу (%) </td>
<td> 45 </td>
<td> Зміщення горизонтального масштабу у відсотках, виключно для типу "XY".
</td></tr>
<tr>
<td> sclVer </td>
<td> Шкала: вертикальна </td>
<td> 35 </td>
<td> Режим вертикальної шкали-решітки: "Не зображувати", "Ґратка", "Маркери", "Ґратка та маркери", "Ґратка (лог)", "Маркери (лог)", "Ґратка та маркери (лог)".
</td></tr>
<tr>
<td> sclVerScl </td>
<td> Шкала: верт. масштаб (%) </td>
<td> 40 </td>
<td> Вертикальний масштаб графіку у відсотках.
</td></tr>
<tr>
<td> sclVerSclOff </td>
<td> Шкала: зміщ. верт. масштабу (%) </td>
<td> 41 </td>
<td> Зміщення вертикального масштабу у відсотках.
</td></tr>
<tr>
<td> sclMarkColor </td>
<td> Шкала: Маркери: колір </td>
<td> 36 </td>
<td> Колір маркерів шкали-решітки (детальніше у атрибуті 20).
</td></tr>
<tr>
<td> sclMarkFont </td>
<td> Шкала: Маркери: шрифт </td>
<td> 37 </td>
<td>
<p>Шрифт маркерів шкали-решітки. Ім'я шрифту у виді "<b>{family} {size} {bold} {italic} {underline} {strike}</b>", де:
</p>
<ul><li> "family" — сімейство шрифту, для пробілів використовуйте символ '_', на кшталт: "Arial", "Courier", "Times_New_Roman";</li>
<li> "size" — розмір шрифту у пікселях;</li>
<li> "bold" — підсилення шрифту (0 або 1);</li>
<li> "italic" — нахиленість шрифту (0 або 1);</li>
<li> "underline" — підкреслення шрифту (0 або 1);</li>
<li> "strike" — перекреслення шрифту (0 або 1).<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "Arial 10 1 0 0 0" — Arial шрифт розміром 10 пікселів та підсилений.</li></ul>
</td></tr>
<tr>
<td> valArch </td>
<td> Архіватор значень </td>
<td> 38 </td>
<td> Архіватор значень у вигляді "<b>{МодульАрхівів}.{IdАрхіватору}</b>".
</td></tr>
<tr>
<td> valsForPix </td>
<td> Значень на піксель </td>
<td> 42 </td>
<td> Кількість значень на піксель. Збільшити для розширення точності експорту на великих інтервалах часу.
</td></tr>
<tr>
<td> parNum </td>
<td> Кількість параметрів </td>
<td> 39 </td>
<td> Кількість параметрів, що відображаються на одному тренді.
</td></tr>
<tr>
<td colspan="4"> <i>Атрибути типу: "Графік"</i>
</td></tr>
<tr>
<td> sclHorPer </td>
<td> Шкала: розмір гор. ґратки, секунди </td>
<td> 43 </td>
<td> Фіксований період ґратки горизонтальної шкали — вимикає автоматичне обчислення періоду ґратки. Активується якщо кількість періодів на загальний розмір більш двох та розмір одного періоду не менше 15 пікселів.
</td></tr>
<tr>
<td colspan="4"> <i><u>Індивідуальні атрибути параметрів</u></i>
</td></tr>
<tr>
<td> prm{X}addr </td>
<td> Параметр {X}: адреса </td>
<td> 50+10*{X} </td>
<td>
<p>Повна адреса до атрибуту параметру <i>X</i> DAQ або архіву.<br />
Підтримується пряме встановлення даних за префіксом:
</p>
<ul><li> "<b>data:{XMLNodeData}</b>" — зображення з прямо встановлених даних;</li>
<li> "<b>line:{значення}</b>" — зображення горизонтальної лінії за значенням, не має сенсу для типу "XY".<br /></li></ul>
<p>Приклад:
</p>
<ul><li> "/DAQ/System/AutoDA/MemInfo/use" — адреса до атрибуту "use" параметру "MemInfo" об'єкту контролера "AutoDA" DAQ модуля "System";</li>
<li> "/Archive/va_CPULoad_load" — адреса до архіву "CPULoad_load";</li>
<li> "data:&lt;d s="1" aprox="1" tm="1369465209" tm_grnd="1369465200" per="1"&gt;</li></ul>
<dl><dd>0 3.14</dd>
<dd>1 3.141</dd>
<dd>5 3.1415&lt;/d&gt;" — 10 секунд даних з періодом 1 секунда від "25.05.2013 10:00:00"; можна не вказувати "tm" та "tm_grnd", у результаті чого буде підставлено значення діапазону діаграми, також, встановленням атрибуту "s", можна вказати на час у секундах; "aprox" — апроксимувати перехід від однієї точки до іншої замість підставки попереднього значення у всі точки періодичності від упаковки;</dd></dl>
<ul><li> "line:3.14159265" — горизонтальна лінія за значенням "3.14159265".</li></ul>
</td></tr>
<tr>
<td> prm{X}bordL </td>
<td> Параметр {X}: границя відображ.: нижня </td>
<td> 50+10*{X}+1 </td>
<td> Нижня границя значень параметру <i>X</i>.
</td></tr>
<tr>
<td> prm{X}bordU </td>
<td> Параметр {X}: границя відображ.: верхня </td>
<td> 50+10*{X}+2 </td>
<td> Верхня границя значень параметру <i>X</i>.
</td></tr>
<tr>
<td> prm{X}color </td>
<td> Параметр {X}: колір </td>
<td> 50+10*{X}+3 </td>
<td> Колір відображення графіку параметру <i>X</i> (детальніше у атрибуті 20).
</td></tr>
<tr>
<td> prm{X}width </td>
<td> Параметр {X}: ширина </td>
<td> 50+10*{X}+6 </td>
<td> Ширина лінії графіку параметра <i>X</i>, у пікселях.
</td></tr>
<tr>
<td> prm{X}scl </td>
<td> Параметр {X}: шкала </td>
<td> 50+10*{X}+5 </td>
<td> Режим окремої вертикальної шкали параметру <i>X</i>: "Глобально", "Маркери", "Ґратка та маркери", "Маркери (лог)", "Ґратка та маркери (лог)".
</td></tr>
<tr>
<td> prm{X}val </td>
<td> Параметр {X}: значення </td>
<td> 50+10*{X}+4 </td>
<td> Значення параметру <i>X</i> під курсором, або на поточний час, для типа "XY".
</td></tr>
<tr>
<td> prm{X}prop </td>
<td> Параметр {X}: властивості </td>
<td> 50+10*{X}+7 </td>
<td> Властивості реального архіву у вигляді "<b>{BegArh}:{EndArh}:{DataPeriod}</b>", де "BegArh", "EndArh", "DataPeriod" — початок, кінець та період даних архіву, у секундах, у реальному представлені, безпосередньо до мікросекунд (1e-6).
</td></tr></table>
<h4><span class="mw-headline" id=".D0.95.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82_.D0.BF.D0.BE.D0.B1.D1.83.D0.B4.D0.BE.D0.B2.D0.B8_.D0.BF.D1.80.D0.BE.D1.82.D0.BE.D0.BA.D0.BE.D0.BB.D1.96.D0.B2_.D0.BD.D0.B0_.D0.BE.D1.81.D0.BD.D0.BE.D0.B2.D1.96_.D0.B0.D1.80.D1.85.D1.96.D0.B2.D1.96.D0.B2_.D0.BF.D0.BE.D0.B2.D1.96.D0.B4.D0.BE.D0.BC.D0.BB.D0.B5.D0.BD.D1.8C_.28Protocol.29"><span class="mw-headline-number">3.9.6</span> <span id="Protocol" title="#Protocol">Елемент побудови протоколів на основі архівів повідомлень (Protocol)</span></span></h4>
<p>Цей примітив призначено для візуалізації даних архіву повідомлень шляхом формування протоколів з різними способами візуалізації, починаючи від статичного сканувального перегляду та закінчуючи динамічним стеженням.
</p><p><b>Таблиця.</b> Набір додаткових властивостей/атрибутів примітиву "Елемент побудови протоколів на основі архівів повідомлень (Protocol)"
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Ім'я </th>
<th> Номер </th>
<th> Значення
</th></tr>
<tr>
<td> backColor </td>
<td> Фон: колір </td>
<td> 20 </td>
<td>
<p>Фоновий колір. Ім'я кольору у виді "<b>{color}[-{alpha}]</b>", де:
</p>
<ul><li> "color" — стандартне ім'я кольору або його числове представлення з трьох шістнадцяткових чисел окремих кольорів "#RRGGBB";</li>
<li> "alpha" — рівень альфа-каналу [0...255], де 0 — повністю прозорий.<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "red" — суцільний червоний колір;</li>
<li> "#FF0000" — суцільний червоний колір у цифровому коді;</li>
<li> "red-127" — напівпрозорий червоний колір.</li></ul>
</td></tr>
<tr>
<td> backImg </td>
<td> Фон: зображення </td>
<td> 21 </td>
<td>
<p>Фонове зображення. Ім'я зображення у виді "<b>[{src}:]{name}</b>", де:
</p>
<ul><li> "src" — джерело зображення:
<ul><li> <i>file</i> — прямо з локального файлу за шляхом;</li>
<li> <i>res</i> — з таблиці ресурсів БД.</li></ul></li>
<li> "name" — шлях файлу або ідентифікатор ресурсу.<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "res:backLogo" — з таблиці ресурсів БД для ідентифікатору "backLogo";</li>
<li> "backLogo" — як і попередній;</li>
<li> "file:/var/tmp/backLogo.png" — з локального файлу за шляхом "/var/tmp/backLogo.png".</li></ul>
</td></tr>
<tr>
<td> font </td>
<td> Шрифт </td>
<td> 22 </td>
<td>
<p>Ім'я шрифту у виді "<b>{family} {size} {bold} {italic} {underline} {strike}</b>", де:
</p>
<ul><li> "family" — сімейство шрифту, для пробілів використовуйте символ '_', на кшталт: "Arial", "Courier", "Times_New_Roman";</li>
<li> "size" — розмір шрифту у пікселях;</li>
<li> "bold" — підсилення шрифту (0 або 1);</li>
<li> "italic" — нахиленість шрифту (0 або 1);</li>
<li> "underline" — підкреслення шрифту (0 або 1);</li>
<li> "strike" — перекреслення шрифту (0 або 1).<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "Arial 10 1 0 0 0" — Arial шрифт розміром 10 пікселів та підсилений.</li></ul>
</td></tr>
<tr>
<td> headVis </td>
<td> Заголовок видимий </td>
<td> 23 </td>
<td> Видимість заголовку таблиці.
</td></tr>
<tr>
<td> time </td>
<td> Час, секунди </td>
<td> 24 </td>
<td> Поточний час, секунди.
</td></tr>
<tr>
<td> tSize </td>
<td> Розмір, секунди </td>
<td> 25 </td>
<td> Розмір запиту даних, секунди. Встановіть значення у '0' для отримання всіх порушень, для "lev" &lt; 0.
</td></tr>
<tr>
<td> trcPer </td>
<td> Період стеження, секунди </td>
<td> 26 </td>
<td> Режим та періодичність стеження.
</td></tr>
<tr>
<td> arch </td>
<td> Архіватор </td>
<td> 27 </td>
<td> Архіватор повідомлень у вигляді "<b>{МодульАрхівів}.{IdАрхіватору}</b>".
</td></tr>
<tr>
<td> tmpl </td>
<td> Шаблон </td>
<td> 28 </td>
<td>
<p>Шаблон категорії або регулярний вираз "<b>/{re}/</b>". Для шаблона зарезервовано символи:
</p>
<ul><li> '*' — множина будь-яких, група символів;</li>
<li> '?' — будь-який, один символ;</li>
<li> '\\' — використовуйте для екранування спеціальних символів.</li></ul>
</td></tr>
<tr>
<td> lev </td>
<td> Рівень </td>
<td> 29 </td>
<td> Рівень повідомлень. Встановіть значення &lt; 0 для отримання поточних порушень.
</td></tr>
<tr>
<td> viewOrd </td>
<td> Порядок відображення </td>
<td> 30 </td>
<td> Порядок відображення: "За часом", "За рівнем", "За категорією", "За повідомленням", "За часом (обернений)", "За рівнем (обернений)", "За категорією (обернений)", "За повідомленням (обернений)".
</td></tr>
<tr>
<td> col </td>
<td> Показати стовпчики </td>
<td> 31 </td>
<td>
<p>Перелік видимих та порядок стовпчиків, поділених символом ';'. Передбачаються стовпчики:
</p>
<ul><li> "pos" — номер рядку;</li>
<li> "tm" — дата та час повідомлення;</li>
<li> "utm" — мікросекундна частина часу повідомлення;</li>
<li> "lev" — рівень повідомлення;</li>
<li> "cat" — категорія повідомлення;</li>
<li> "mess" — текст повідомлення.</li></ul>
</td></tr>
<tr>
<td> itProp </td>
<td> Властивості елементу </td>
<td> 32 </td>
<td> Кількість властивостей елементу.
</td></tr>
<tr>
<td colspan="4"> <i><u>Індивідуальні атрибути властивостей елемента</u></i>
</td></tr>
<tr>
<td> it{X}lev </td>
<td> Елемент {X}: рівень </td>
<td> 40+5*{X} </td>
<td> Критерій: рівень елементу <i>X</i> більш або дорівнює вказаному.
</td></tr>
<tr>
<td> it{X}tmpl </td>
<td> Елемент {X}: шаблону </td>
<td> 40+5*{X}+1 </td>
<td> Критерій: шаблон категорії елементу <i>X</i> (детальніше у атрибуті 28).
</td></tr>
<tr>
<td> it{X}fnt </td>
<td> Елемент {X}: шрифт </td>
<td> 40+5*{X}+2 </td>
<td> Шрифт елементу <i>X</i> (детальніше у атрибуті 22).
</td></tr>
<tr>
<td> it{X}сolor </td>
<td> Елемент {X}: кольору </td>
<td> 40+5*{X}+3 </td>
<td> Колір елементу <i>X</i> (детальніше у атрибуті 20).
</td></tr></table>
<h4><span class="mw-headline" id=".D0.95.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82_.D1.84.D0.BE.D1.80.D0.BC.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F_.D0.B7.D0.B2.D1.96.D1.82.D0.BD.D0.BE.D1.97_.D0.B4.D0.BE.D0.BA.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D1.86.D1.96.D1.97_.28Document.29"><span class="mw-headline-number">3.9.7</span> <span id="Document" title="#Document">Елемент формування звітної документації (Document)</span></span></h4>
<p>Примітив призначено для формування звітної, оперативної та іншої документації на основі шаблонів документів.
</p><p><b>Таблиця.</b> Набір додаткових властивостей/атрибутів примітиву "Елемент формування звітної документації (Document)"
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Ім'я </th>
<th> Номер </th>
<th> Значення
</th></tr>
<tr>
<td> style </td>
<td> CSS </td>
<td> 20 </td>
<td> Правила CSS в рядках, виду "<b>body { background-color:#818181; }</b>".
</td></tr>
<tr>
<td> tmpl </td>
<td> Шаблон </td>
<td> 21 </td>
<td>
<p>Шаблон документу у XHTML, починаючи з тегу "body" та включаючи процедурні вставки:
</p>
<pre style="white-space: pre-wrap;">
&lt;body docProcLang="JavaLikeCalc.JavaScript"&gt;
  &lt;h1&gt;Значення&lt;?dp return wCod+1.314;?&gt;&lt;/h1&gt;
&lt;/body&gt;</pre> 
</td></tr>
<tr>
<td> doc </td>
<td> Документ </td>
<td> 22 </td>
<td> Фінальний документ у XHTML, починається з тегу "body".
</td></tr>
<tr>
<td> font </td>
<td> Шрифт </td>
<td> 26 </td>
<td>
<p>Базовий шрифт тексту документа. Ім'я шрифту у виді "<b>{family} {size} {bold} {italic} {underline} {strike}</b>", де:
</p>
<ul><li> "family" — сімейство шрифту, для пробілів використовуйте символ '_', на кшталт: "Arial", "Courier", "Times_New_Roman";</li>
<li> "size" — розмір шрифту у пікселях;</li>
<li> "bold" — підсилення шрифту (0 або 1);</li>
<li> "italic" — нахиленість шрифту (0 або 1);</li>
<li> "underline" — підкреслення шрифту (0 або 1);</li>
<li> "strike" — перекреслення шрифту (0 або 1).<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "Arial 10 1 0 0 0" — Arial шрифт розміром 10 пікселів та підсилений.</li></ul>
</td></tr>
<tr>
<td> bTime </td>
<td> Час: початок </td>
<td> 24 </td>
<td> Час початку документу, секунди.
</td></tr>
<tr>
<td> time </td>
<td> Час: поточне </td>
<td> 23 </td>
<td> Час генерації документу, секунди. Записати час для генерації документа від цієї точки або нуль для перегенерації.
</td></tr>
<tr>
<td> process </td>
<td> У процесі </td>
<td> 27 </td>
<td> Ознака процесу формування документу окремим потоком.
</td></tr>
<tr>
<td> n </td>
<td> Розмір архіву </td>
<td> 25 </td>
<td> Кількість документів або глибина архіву.
</td></tr>
<tr>
<td colspan="4"> <i>Атрибути увімкненого режиму архівування</i>
</td></tr>
<tr>
<td> aCur </td>
<td> Архів: курсор: поточний </td>
<td> - </td>
<td> Позиція поточного документу у архіві. Запис значення <i>&lt;0</i> здійснює архівацію поточного документу.
</td></tr>
<tr>
<td> vCur </td>
<td> Архів: курсор: вид </td>
<td> - </td>
<td>
<p>Поточний візуалізований документ архіву. Запис значення:
</p>
<ul><li> <i>-1</i> — вибір наступного документу;</li>
<li> <i>-2</i> — вибір попереднього документу.</li></ul>
</td></tr>
<tr>
<td> aDoc </td>
<td> Архів: поточний документ </td>
<td> - </td>
<td> Поточний документ архіву у XHTML, починається з тегу "body".
</td></tr>
<tr>
<td> aSize </td>
<td> Архів: розмір </td>
<td> - </td>
<td> Реальний розмір архіву документу.
</td></tr></table>
<p>Можливості примітиву "Документ":
</p>
<ul><li> Гнучке формування структури документу на основі мови гіпертекстової розмітки, що надає підтримку широких можливостей форматування документів.</li>
<li> Формування документів за командою або розкладом, що необхідно для формування звітної документації до архіву, з подальшим переглядом архіву.</li>
<li> Формування документів у режимі реального часу, для надання їх повністю динамічно та на основі архівів за вказаний час.</li>
<li> Використання атрибутів віджету для передачі у документ значень та адрес на архіви, що дозволяє використовувати віджет документу як шаблон, при формуванні звітів з іншими вхідними даними.</li></ul>
<p>У основі будь-якого документу лежить XHTML-шаблон. XHTML-шаблон це тег "body" WEB-сторінки, що містить статику документу у стандарті XHTML 1.0 та елементи виконувальних інструкцій на мові користувацького програмування OpenSCADA, у вигляді <b>&lt;?dp {procedure}&nbsp;?&gt;</b>. Результуючий документ формується шляхом виконання процедур та вставки їх результату у документ.
</p><p>Джерелом значень виконуваних інструкцій є атрибути віджету цього примітиву, а також всі механізми мови користувацького програмування OpenSCADA. Атрибути можуть додаватися користувачем та лінкуватися на реальні атрибути параметрів або-ж бути автономними, значення яких будуть формуватися у процедурі віджету. У випадку зі злінкованими атрибутами, значення можуть вийматися з архіву-історії.
</p><p>На рисунку зображено структурну схему віджету примітива "Документ". Згідно цієї структури, "Документ" містить: XHTML-шаблон, результатні документи та процедуру обробки даних. Джерелом даних процедури та результатних документів є атрибути віджету.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:556px;"><a class="image" href="http://oscada.org/wiki/File:VCA_document_uk.png"><img class="thumbimage" height="381" src="../files/VCA_document_uk.png" width="554" /></a>  <div class="thumbcaption">Рисунок. Структурна схема примітиву "Документ".</div></div></div></div>
<p>Передбачено роботу віджету у двох режимах: "Динамічний" та "Архівний". Відмінністю архівного режиму є наявність архіву визначеної глибини та атрибутів, що дозволяють керувати процесом архівування та перегляду вказаного документу у архіві.
</p><p>Генерація документу завжди здійснюється у момент встановлення атрибуту часу <i>time</i> відносно встановленого раніш початкового часу документу у атрибуті <i>bTime</i>. При вимкненому архіві, результатний документ поміщається безпосередньо у атрибут <i>doc</i>. При увімкненому архіві, результатний документ поміщається до клітинки під курсором, атрибут <i>aCur</i>, а також у <i>doc</i>, якщо значення курсору архіву <i>aCur</i> та курсору візуалізованого документу <i>vCur</i> збігаються. Атрибути архівних курсорів передбачають декілька командних значень:
</p>
<ul><li> "aCur &lt; 0" — переміщує курсор архіватору на наступну позицію, тим самим залишаючи попередній документ у архіві та очищаючи документ під курсором, якщо кільцевий архів замкнувся.</li>
<li> "vCur == -1" — вибір наступного документу для відображення, обраний документ копіюється до атрибуту <i>doc</i>.</li>
<li> "vCur == -2" — вибір попереднього документу для відображення, обраний документ копіюється до атрибуту <i>doc</i>.</li></ul>
<p>Як було вказано вище, динаміка шаблону документа визначається вставками виконуваних інструкцій виду "<b>&lt;?dp {procedure}&nbsp;?&gt;</b>". У процедурах можуть використовуватися однойменні атрибути віджету та функції користувацького інтерфейсу програмування OpenSCADA. Крім атрибутів віджету, зарезервовано спеціальні атрибути, дивись таблицю.
</p><p><b>Таблиця.</b> Спеціальні та зарезервовані елементи шаблону.
</p>
<table class="wikitable">

<tr>
<th> Ім'я </th>
<th> Призначення
</th></tr>
<tr>
<td colspan="2"> <i>Атрибути</i>
</td></tr>
<tr>
<td> rez </td>
<td> Атрибут результату виконання процедури, вміст якого поміщається у дерево документа.
</td></tr>
<tr>
<td> lTime </td>
<td> Час останнього формування. Якщо документ формується вперше то <i>lTime</i> дорівнює <i>bTime</i>.
</td></tr>
<tr>
<td> rTime </td>
<td> Містить час перебируваних значень, секунди, визначається всередині тегів з атрибутом "docRept".
</td></tr>
<tr>
<td> rTimeU </td>
<td> Містить час перебируваних значень, мікросекунди, визначається всередині тегів з атрибутом "docRept".
</td></tr>
<tr>
<td> rPer </td>
<td> Містить період перебору значень, атрибут "docRept".
</td></tr>
<tr>
<td> mTime, mTimeU, mLev, mCat, mVal </td>
<td>
<p>Визначаються всередині тегів з атрибутом "docAMess" при розборі повідомлень архіву повідомлень:
</p>
<dl><dd><i>mTime</i> — час повідомлення, секунди;</dd>
<dd><i>mTimeU</i> — час повідомлення, мікросекунди;</dd>
<dd><i>mLev</i> — рівень повідомлення;</dd>
<dd><i>mCat</i> — категорія повідомлення;</dd>
<dd><i>mVal</i> — значення повідомлення.</dd></dl>
</td></tr>
<tr>
<td colspan="2"> <i>Спеціальні теги</i>
</td></tr>
<tr>
<td colspan="2"> <i>Спеціальні атрибути стандартних тегів</i>
</td></tr>
<tr>
<td> body.docProcLang </td>
<td> Мова виконуваних процедур документу, по замовченню це "JavaLikeCalc.JavaScript".
</td></tr>
<tr>
<td> *.docRept="1s" </td>
<td> Тег з указаним атрибутом розмножується, при формуванні, шляхом зсуву часу у атрибуті "rTime" на значення, вказане у даному атрибуті.
</td></tr>
<tr>
<td> *.docAMess="1:PLC*" </td>
<td> Вказує на необхідність розмноження тегу з атрибутом, повідомленнями з архіву повідомлень за вказаний інтервал часу, згідно рівня "1" та шаблону запиту "PLC*", за категорією повідомлення. У шаблоні запиту можуть вказуватися <a class="extiw" href="https://en.wikipedia.org/wiki/Regular_expression" title="wikipedia:Regular expression">регулярні вирази</a> у вигляді "<b>/{re}/</b>". Для даного тегу, у процесі розмноження, визначаються атрибути: "mTime", "mTimeU", "mLev", "mCat" и "mVal".
</td></tr>
<tr>
<td> *.docAMessArchs="ArchMod0.Archivator0[;ArchModN.ArchivatorN]" </td>
<td> Доповнює атрибут "*.docAMess" переліком архіваторів для читання повідомлень.
</td></tr>
<tr>
<td> *.docRevers="1" </td>
<td> Вказує на інвертування порядку розмноження — останній нагорі.
</td></tr>
<tr>
<td> *.docAppend="1" </td>
<td> Ознака необхідності додання результату виконання процедури до тегу процедури. Інакше результат виконання заміняє вміст тегу.
</td></tr>
<tr>
<td> body.docTime </td>
<td> Час формування документу, використовується для встановлення атрибуту <i>lTime</i> при наступному формуванні документа. Не встановлюється користувачем!
</td></tr>
<tr>
<td> table.export="1" </td>
<td> Ввімкнення можливості експорту вмісту вказаної таблиці у CSV-файл або інші табличні формати.
</td></tr></table>
<h4><span class="mw-headline" id=".D0.9A.D0.BE.D0.BD.D1.82.D0.B5.D0.B9.D0.BD.D0.B5.D1.80_.28Box.29"><span class="mw-headline-number">3.9.8</span> <span id="Box" title="#Box">Контейнер (Box)</span></span></h4>
<p>Примітив контейнеру, використовується для формування складених віджетів та/або сторінок користувацького інтерфейсу.
</p><p><b>Таблиця.</b> Набір додаткових властивостей/атрибутів примітиву "Контейнер (Box)"
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Ім'я </th>
<th> Номер </th>
<th> Значення
</th></tr>
<tr>
<td> pgOpenSrc </td>
<td> Сторінка: джерело відкриття </td>
<td> 3 </td>
<td> Повна адреса сторінки, яка включена усередину даного контейнеру.
</td></tr>
<tr>
<td> pgGrp </td>
<td> Сторінка: група </td>
<td> 4 </td>
<td> Група контейнеру сторінок.
</td></tr>
<tr>
<td> backColor </td>
<td> Фон: колір </td>
<td> 20 </td>
<td>
<p>Фоновий колір. Ім'я кольору у виді "<b>{color}[-{alpha}]</b>", де:
</p>
<ul><li> "color" — стандартне ім'я кольору або його числове представлення з трьох шістнадцяткових чисел окремих кольорів "#RRGGBB";</li>
<li> "alpha" — рівень альфа-каналу [0...255], де 0 — повністю прозорий.<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "red" — суцільний червоний колір;</li>
<li> "#FF0000" — суцільний червоний колір у цифровому коді;</li>
<li> "red-127" — напівпрозорий червоний колір.</li></ul>
</td></tr>
<tr>
<td> backImg </td>
<td> Фон: зображення </td>
<td> 21 </td>
<td>
<p>Фонове зображення. Ім'я зображення у виді "<b>[{src}:]{name}</b>", де:
</p>
<ul><li> "src" — джерело зображення:
<ul><li> <i>file</i> — прямо з локального файлу за шляхом;</li>
<li> <i>res</i> — з таблиці ресурсів БД.</li></ul></li>
<li> "name" — шлях файлу або ідентифікатор ресурсу.<br /></li></ul>
<p>Приклади:
</p>
<ul><li> "res:backLogo" — з таблиці ресурсів БД для ідентифікатору "backLogo";</li>
<li> "backLogo" — як і попередній;</li>
<li> "file:/var/tmp/backLogo.png" — з локального файлу за шляхом "/var/tmp/backLogo.png".</li></ul>
</td></tr>
<tr>
<td> bordWidth </td>
<td> Границя: ширина </td>
<td> 22 </td>
<td> Ширина бордюру.
</td></tr>
<tr>
<td> bordColor </td>
<td> Границя: колір </td>
<td> 23 </td>
<td> Колір бордюру (детальніше у атрибуті 20).
</td></tr>
<tr>
<td> bordStyle </td>
<td> Границя: стиль </td>
<td> 24 </td>
<td> Стиль бордюру: "Немає", "Точковий", "Пунктирний", "Суцільний", "Подвійний", "Канавка", "Кромка", "Втиснутий", "Виступаючий".
</td></tr></table>
<p><br />
</p>
<h3><span class="mw-headline" id=".D0.92.D0.B8.D0.BA.D0.BE.D1.80.D0.B8.D1.81.D1.82.D0.B0.D0.BD.D0.BD.D1.8F_.D0.91.D0.94_.D0.B4.D0.BB.D1.8F_.D0.B7.D0.B1.D0.B5.D1.80.D1.96.D0.B3.D0.B0.D0.BD.D0.BD.D1.8F_.D0.B1.D1.96.D0.B1.D0.BB.D1.96.D0.BE.D1.82.D0.B5.D0.BA_.D0.B2.D1.96.D0.B4.D0.B6.D0.B5.D1.82.D1.96.D0.B2_.D1.82.D0.B0_.D0.BF.D1.80.D0.BE.D0.B5.D0.BA.D1.82.D1.96.D0.B2"><span class="mw-headline-number">3.10</span> Використання БД для зберігання бібліотек віджетів та проектів</span></h3>
<p>Зберігання даних віджетів, бібліотек віджетів та проектів реалізовано у БД, доступних OpenSCADA. БД організовано за приналежністю даних до бібліотеки-проекту. Тобто, окрема бібліотека-проект зберігається у окремій групі таблиць БД. Перелік бібліотек віджетів зберігається у індексній таблиці бібліотек з іменем "VCALibs" та структурою "Libs", а перелік проектів у індексній таблиці "VCAPrjs" та структурою "Projs". Екземпляр цих таблиць створюється у кожній БД, де зберігаються дані цього модуля. До складу таблиць, що належать бібліотеці віджетів та проекту, входять наступні:
</p>
<ul><li> "<b>{DB_TBL}</b>" — таблиця віджетів, що належать бібліотеці (структура "LibWigets"), або сторінок, що належать проекту (структура "ProjPages");</li>
<li> "<b>{DB_TBL}_io</b>" — таблиця робочих властивостей віджетів та вкладених віджетів бібліотеки (структура "LibWidgetIO") або властивостей сторінок проекту (структура "ProjPageIO");</li>
<li> "<b>{DB_TBL}_uio</b>" — таблиця користувацьких властивостей віджетів та вкладених віджетів бібліотеки (структура "LibWidgetUserIO") або користувацьких властивостей сторінок проекту (структура "ProjPageUserIO");</li>
<li> "<b>{DB_TBL}_incl</b>" — таблиця віджетів, вкладених у віджети-контейнери, бібліотеки (структура "LibWidgetIncl") або проекту (структура "ProjPageWIncl");</li>
<li> "<b>{DB_TBL}_mime</b>" — таблиця ресурсів бібліотеки та її віджетів (структура "LibWidgetMime"), або проекту та його сторінок (структура "ProjMime");</li>
<li> "<b>{DB_TBL}_stl</b>" — таблиця значень стильових параметрів проекту (структура "PrjStlIO");</li>
<li> "<b>{DB_TBL}_ses</b>" — таблиця даних режиму виконання проекту, тобто сеансів (структура "PrjSesIO").</li></ul>
<p>Проекції (структури) основних таблиць такі:
</p>
<ul><li> <b>Libs(<u>ID</u>, NAME, DSCR, DB_TBL, ICO)</b> — бібліотеки віджетів <i>ID</i>.</li></ul>
<dl><dd><dl><dd><i>ID</i> — ідентифікатор;</dd>
<dd><i>NAME</i> — ім'я;</dd>
<dd><i>DSCR</i> — опис;</dd>
<dd><i>DB_TBL</i> — корінь таблиць БД з віджетами;</dd>
<dd><i>ICO</i> — закодоване (Base64) зображення іконки бібліотеки.</dd></dl></dd></dl>
<ul><li> <b>LibWigets(<u>ID</u>, ICO, PARENT, PROC, PROC_PER, ATTRS, TIMESTAMP)</b> — віджети <i>ID</i> бібліотеки.</li></ul>
<dl><dd><dl><dd><i>ID</i> — ідентифікатор;</dd>
<dd><i>ICO</i> — закодоване (Base64) зображення іконки віджету;</dd>
<dd><i>PARENT</i> — адреса віджету основи, у вигляді <i>/wlb_originals/wdg_Box</i>;</dd>
<dd><i>PROC</i> — внутрішня процедура та мова процедури віджету;</dd>
<dd><i>PROC_PER</i> — період обчислення процедури віджету;</dd>
<dd><i>ATTRS</i> — перелік атрибутів віджету, модифікованих користувачем;</dd>
<dd><i>TIMESTAMP</i> — мітка часу останньої модифікації.</dd></dl></dd></dl>
<ul><li> <b>LibWidgetIO(<u>IDW</u>, <u>ID</u>, <u>IDC</u>, IO_VAL, SELF_FLG, CFG_TMPL, CFG_VAL)</b> — робочі атрибути <i>ID</i> віджету <i>IDW</i> дочірнього віджету <i>IDC</i>.</li></ul>
<dl><dd><dl><dd><i>IDW</i> — ідентифікатор віджету;</dd>
<dd><i>ID</i> — ідентифікатор атрибуту;</dd>
<dd><i>IDC</i> — ідентифікатор дочірнього віджету;</dd>
<dd><i>IO_VAL</i> — значення атрибуту;</dd>
<dd><i>SELF_FLG</i> — внутрішні прапорці атрибутів;</dd>
<dd><i>CFG_TMPL</i> — шаблон елементу конфігурації, заснованого на даному атрибуті;</dd>
<dd><i>CFG_VAL</i> — значення елементу конфігурації (посилання, константа ...).</dd></dl></dd></dl>
<ul><li> <b>LibWidgetUserIO(<u>IDW</u>, <u>ID</u>, <u>IDC</u>, NAME, IO_TP, IO_VAL, SELF_FLG, CFG_TMPL, CFG_VAL)</b> — користувацькі атрибути <i>ID</i> віджету <i>IDW</i> дочірнього віджету <i>IDC</i>.</li></ul>
<dl><dd><dl><dd><i>IDW</i> — ідентифікатор віджету;</dd>
<dd><i>ID</i> — ідентифікатор атрибуту;</dd>
<dd><i>IDC</i> — ідентифікатор дочірнього віджету;</dd>
<dd><i>NAME</i> — ім'я атрибуту;</dd>
<dd><i>IO_TP</i> — тип та головні прапорці атрибуту;</dd>
<dd><i>IO_VAL</i> — значення атрибуту;</dd>
<dd><i>SELF_FLG</i> — внутрішні прапорці атрибуту;</dd>
<dd><i>CFG_TMPL</i> — шаблон елементу конфігурації, заснованого на даному атрибуті;</dd>
<dd><i>CFG_VAL</i> — значення елементу конфігурації (посилання, константа ...).</dd></dl></dd></dl>
<ul><li> <b>LibWidgetIncl(<u>IDW</u>, <u>ID</u>, PARENT, ATTRS)</b> — включені у контейнер <i>IDW</i> віджети <i>ID</i>.</li></ul>
<dl><dd><dl><dd><i>IDW</i> — ідентифікатор віджету;</dd>
<dd><i>ID</i> — ідентифікатор екземпляру вкладеного віджету;</dd>
<dd><i>PARENT</i> — адреса віджету основи, у вигляді <i>/wlb_originals/wdg_Box</i>;</dd>
<dd><i>ATTRS</i> — перелік атрибутів віджету, модифікованих користувачем.</dd></dl></dd></dl>
<ul><li> <b>LibWidgetMime(<u>ID</u>, MIME, DATA)</b> — audio, video, media та інші ресурси віджетів <i>ID</i> бібліотеки.</li></ul>
<dl><dd><dl><dd><i>ID</i> — ідентифікатор ресурсу;</dd>
<dd><i>MIME</i> — MIME ресурсу, у форматі — "<b>{MIME};{Size}</b>";</dd>
<dd><i>DATA</i> — дані ресурсу, кодовані Base64.</dd></dl></dd></dl>
<ul><li> <b>Projs(<u>ID</u>, NAME, DSCR, DB_TBL, ICO, USER, GRP, PERMIT, PER, FLGS, STYLE)</b> — проекти <i>ID</i> інтерфейсу візуалізації.</li></ul>
<dl><dd><dl><dd><i>ID</i> — ідентифікатор проекту;</dd>
<dd><i>NAME</i> — ім'я проекту;</dd>
<dd><i>DSCR</i> — опис проекту;</dd>
<dd><i>DB_TBL</i> — корінь таблиць БД зі сторінками;</dd>
<dd><i>ICO</i> — закодоване (Base64) зображення іконки проекту;</dd>
<dd><i>USER</i> — ім'я власника проекту;</dd>
<dd><i>GRP</i> — ім'я групи користувачів проекту;</dd>
<dd><i>PERMIT</i> — права доступу до проекту;</dd>
<dd><i>PER</i> — період обчислення проекту, у мілісекундах;</dd>
<dd><i>FLGS</i> — прапорці проекту;</dd>
<dd><i>STYLE</i> — типовий стиль проекту.</dd></dl></dd></dl>
<ul><li> <b>ProjPages(<u>OWNER</u>, <u>ID</u>, ICO, PARENT, PROC, PROC_PER, FLGS, ATTRS, TIMESTAMP)</b> — сторінки <i>ID</i>, що містяться у проекті-сторінці <i>OWNER</i>.</li></ul>
<dl><dd><dl><dd><i>OWNER</i> — проект-сторінка — власник даної сторінки, у вигляді — "/AGLKS/so/1/gcadr";</dd>
<dd><i>ID</i> — ідентифікатор сторінки;</dd>
<dd><i>ICO</i> — закодоване (Base64) зображення іконки сторінки;</dd>
<dd><i>PARENT</i> — адреса віджету основи, у вигляді <i>/wlb_originals/wdg_Box</i>;</dd>
<dd><i>PROC</i> — внутрішня процедура та мова процедури сторінки;</dd>
<dd><i>PROC_PER</i> — період обчислення процедури сторінки;</dd>
<dd><i>FLGS</i> — прапорці типів сторінки;</dd>
<dd><i>ATTRS</i> — перелік атрибутів сторінки, модифікованих користувачем;</dd>
<dd><i>TIMESTAMP</i> — мітка часу останньої модифікації.</dd></dl></dd></dl>
<ul><li> <b>ProjPageIO(<u>IDW</u>, <u>ID</u>, <u>IDC</u>, IO_VAL, SELF_FLG, CFG_TMPL, CFG_VAL)</b> — робочі атрибути сторінок, структура фактично збігається з таблицею "LibWidgetIO".</li>
<li> <b>ProjPageUserIO(<u>IDW</u>, <u>ID</u>, <u>IDC</u>, NAME, IO_TP, IO_VAL, SELF_FLG, CFG_TMPL, CFG_VAL)</b> — користувацькі атрибути сторінок, структура фактично збігається з таблицею "LibWidgetUserIO".</li>
<li> <b>ProjPageWIncl(<u>IDW</u>, <u>ID</u>, PARENT, ATTRS)</b> — віджети, включені на сторінки, структура фактично збігається з таблицею "LibWidgetIncl".</li>
<li> <b>ProjMime(<u>ID</u>, MIME, DATA)</b> — audio, video, media та інші ресурси сторінок проектів, структура фактично збігається з таблицею "LibWidgetMime".</li>
<li> <b>PrjStl(<u>ID</u>, V_0, V_1, V_2, V_3, V_4, V_5, V_6, V_7, V_8, V_9)</b> — значення поля стилю <i>ID</i> проекту.</li></ul>
<dl><dd><dl><dd><i>ID</i> — ідентифікатор поля стилю;</dd>
<dd><i>V_{N}</i> — значення поля стилю для стилю <i>N</i>.</dd></dl></dd></dl>
<ul><li> <b>ProjSess(<u>IDW</u>, <u>ID</u>, IO_VAL)</b> — таблиця проекту <i>IDW</i> для збереження даних сеансів, що виконують проект.</li></ul>
<dl><dd><dl><dd><i>IDW</i> — повний шлях елементу проекту;</dd>
<dd><i>ID</i> — атрибут елементу;</dd>
<dd><i>IO_VAL</i> — значення атрибуту.</dd></dl></dd></dl>
<p><br />
</p>
<h3><span class="mw-headline" id="API_.D0.BA.D0.BE.D1.80.D0.B8.D1.81.D1.82.D1.83.D0.B2.D0.B0.D1.86.D1.8C.D0.BA.D0.BE.D0.B3.D0.BE_.D0.BF.D1.80.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F_.D1.82.D0.B0_.D1.81.D0.B5.D1.80.D0.B2.D1.96.D1.81.D0.BD.D1.96_.D1.96.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D0.B8_OpenSCADA"><span class="mw-headline-number">3.11</span> <span id="UserAPI" title="#UserAPI">API користувацького програмування та сервісні інтерфейси OpenSCADA</span></span></h3>
<h4><span class="mw-headline" id="API_.D0.BA.D0.BE.D1.80.D0.B8.D1.81.D1.82.D1.83.D0.B2.D0.B0.D1.86.D1.8C.D0.BA.D0.BE.D0.B3.D0.BE_.D0.BF.D1.80.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F"><span class="mw-headline-number">3.11.1</span> <span id="UserAPI" title="#UserAPI">API користувацького програмування</span></span></h4>
<p>API користувацького програмування рушія візуалізації безпосередньо представлено об'єктами OpenSCADA, що формують користувацький інтерфейс, а саме "Сеансом" та "Віджетами-сторінками". Для користувача ці об'єкти надають набір функцій управління:
</p>
<div class="floatright"><a class="image" href="http://oscada.org/wiki/File:Oscada_UserOM_VCAEngine_uk.png" title="Об&#039;єктна модель користувача модуля VCAEngine."><img alt="Об&#039;єктна модель користувача модуля VCAEngine." height="238" src="../files/Oscada_UserOM_VCAEngine_uk.png" width="360" /></a></div>
<p><b>Об'єкт "Сеанс" ( this.ownerSess() )</b>
</p>
<ul><li> <i>string user( )</i> — поточний користувач сеансу.</li>
<li> <i>int alrmQuietance( int quit_tmpl, string wpath = "", bool ret = false )</i> — квітує порушення <i>wpath</i> з шаблоном <i>quit_tmpl</i>. Якщо <i>wpath</i> це порожній рядок то здійснюється глобальна квітація. У рядку <i>wpath</i>, через символ ';', може бути перелічено адреси декількох віджетів. При встановлені <i>ret</i> здійснюється повернення квітації.</li>
<li> <i>int reqTm( )</i> — час останнього запиту у секундах від епохи 1.1.1970.</li>
<li> <i>string reqUser( )</i> — користувач останнього запиту.</li>
<li> <i>string reqLang( )</i> — мова останнього запиту.</li>
<li> <i>int userActTm( )</i> — час останньої дії користувача у секундах від епохи 1.1.1970.</li>
<li> <i>bool uiCmd( string cmd, string prm, string src )</i> — надсилає UI команду керування сторінками, як то: "open", "next", "prev"; детальніше дивиться у <a href="#Events">секції подій</a>. Ця функція має бути приоритетною для використання у керуванні сторінками перед прямим записом до атрибутів сторінок "pgOpen" та "pgOpenSrc", оскільки це єдиний метод коректної роботи з <a href="#Project">лінкованими сторінками</a>.</li></ul>
<p><b>Об'єкт "Віджет" (this)</b>
</p>
<ul><li> <i>TCntrNodeObj ownerSess( )</i> — об'єкт сеансу даного віджету.</li>
<li> <i>TCntrNodeObj ownerPage( )</i> — об'єкт батьківської сторінки даного віджету.</li>
<li> <i>TCntrNodeObj ownerWdg( bool base = false )</i> — об'єкт батьківського віджету даного віджету. При указанні <i>base</i> буде повернено й об'єкти сторінок.</li>
<li> <i>TCntrNodeObj wdgAdd( string wid, string wname, string parent )</i> — додає віджет <i>wid</i> з ім'ям <i>wname</i> на основі бібліотечного віджету <i>parent</i>.</li></ul>
<pre style="white-space: pre-wrap; margin-left: 15px">
//Додає новий віджет на основі віджету текстового примітиву
nw = this.wdgAdd("nw", "Новий віджет", "/wlb_originals/wdg_Text");
nw.attrSet("geomX", 50).attrSet("geomY", 50);
</pre>
<ul><li> <i>bool wdgDel( string wid )</i> — видаляє віджет <i>wid</i>.</li>
<li> <i>TCntrNodeObj wdgAt( string wid, bool byPath = false )</i> — підключається до дочірнього або глобального віджету, за посередництвом шляху <i>byPath</i>. У випадку глобального підключення можна використати абсолютний або відносний шлях до віджету. Точкою відліку абсолютної адреси виступає об'єкт кореня модуля "VCAEngine", а значить, першим елементом абсолютної адреси є ідентифікатор сеансу, який опускається. Відносна адреса бере відлік від поточного віджету. Спеціальним елементом відносної адреси є елемент вищестоящого вузла "..".</li>
<li> <i>Array attrList()</i> — перелік атрибутів віджету.</li>
<li> <i>bool attrPresent( string attr )</i> — перевіряє атрибут віджета <i>attr</i> на факт присутності.</li>
<li> <i>ElTp attr( string attr, bool fromSess = false )</i> — значення атрибуту віджету <i>attr</i> або з сеансу <i>fromSess</i>. Для відсутніх атрибутів повертає порожній рядок.</li>
<li> <i>TCntrNodeObj attrSet( string attr, ElTp vl, bool toSess = false )</i> — встановлює значення <i>vl</i> у атрибут віджету <i>attr</i> або сеанс, для <i>toSess</i>. Повертає поточний об'єкт, для конкатенації функцій встановлення.</li>
<li> <i>string link( string attr, bool prm = false )</i> — посилання атрибуту віджету <i>attr</i>. При встановленні <i>prm</i> запитує посилання групи атрибутів (параметр), представлене вказаним атрибутом.</li>
<li> <i>string linkSet( string attr, string vl, bool prm = false )</i> — встановлює посилання атрибуту віджету <i>attr</i>. При встановленні <i>prm</i> здійснює встановлення посилання групи атрибутів (параметр), представленого вказаним атрибутом.</li></ul>
<pre style="white-space: pre-wrap; margin-left: 15px">
//Встановлює посилання восьмого тренду параметром
this.linkSet("el8.name", "prm:/LogicLev/experiment/Pi", true);
</pre>
<ul><li> <i>string {resource,mime}( string addr, string MIME = "" )</i> — ресурс об'єкту за адресою <i>addr</i> (пряме посилання на ресурс або атрибут віджету з цим посиланням) з типом <i>MIME</i>, з таблиці сеансу або джерела. Призначено для редагування ресурсу об'єкта та підставлення його у контексті сеансу, наприклад, зображень SVG.</li>
<li> <i>int {resourceSet,mimeSet}( string addr, string data, string MIME = "" )</i> — встановлює ресурс об'єкту у <i>data</i> з типом <i>MIME</i> за адресою <i>addr</i>.</li>
<li> <i>int messDebug( string mess ); int messInfo( string mess ); int messNote( string mess ); int messWarning( string mess ); int messErr( string mess ); int messCrit( string mess ); int messAlert( string mess ); int messEmerg( string mess );</i> — формує повідомлення програми <i>mess</i> з категорією — шлях до даного віджету.</li></ul>
<p><b>Об'єкт "Віджет", примітиву "Документ" (this)</b>
</p>
<ul><li> <i>string getArhDoc( int nDoc)</i> — текст документу архіву на глибині <i>nDoc</i> (0-{aSize-1}).</li></ul>
<p><br />
Застаріле, але підтримуване, API представляється групою функцій безпосередньо у модулі рушія СВУ. Виклик цих функцій з процедури віджету може здійснюватися прямо за ідентифікатором, оскільки їх область імен визначається у контексті процедур віджетів.
</p><p><b>Перелік віджетів (WdgList)</b><br />
<i>Опис:</i> Повертає перелік віджетів, у контейнері віджетів, або дочірніх віджетів. Якщо встановлено <i>pg</i>, то повертається перелік сторінок проектів та сеансу.<br />
<i>Параметри:</i>
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Ім'я </th>
<th> Тип </th>
<th> Режим </th>
<th> По замовчанню
</th></tr>
<tr>
<td> list </td>
<td> Перелік </td>
<td> Рядок </td>
<td> Повернення </td>
<td>
</td></tr>
<tr>
<td> addr </td>
<td> Адреса </td>
<td> Рядок </td>
<td> Вхід </td>
<td>
</td></tr>
<tr>
<td> pg </td>
<td> Сторінки </td>
<td> Логічний </td>
<td> Вхід </td>
<td> 0
</td></tr></table>
<p><b>Присутність вузла (NodePresent)</b><br />
<i>Опис:</i> Перевірка вузла на присутність, включаючи віджети, атрибути та інше.<br />
<i>Параметри:</i>
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Ім'я </th>
<th> Тип </th>
<th> Режим </th>
<th> По замовченню
</th></tr>
<tr>
<td> rez </td>
<td> Результат </td>
<td> Логічний </td>
<td> Повернення </td>
<td>
</td></tr>
<tr>
<td> addr </td>
<td> Адреса </td>
<td> Рядок </td>
<td> Вхід </td>
<td>
</td></tr></table>
<p><b>Перелік атрибутів (AttrList)</b><br />
<i>Опис:</i> Повертає перелік атрибутів віджету. Якщо встановлено <i>noUser</i> тоді повертаються тільки атрибути не користувача.<br />
<i>Параметри:</i>
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Ім'я </th>
<th> Тип </th>
<th> Режим </th>
<th> По замовченню
</th></tr>
<tr>
<td> list </td>
<td> Перелік </td>
<td> Рядок </td>
<td> Повернення </td>
<td>
</td></tr>
<tr>
<td> addr </td>
<td> Адреса </td>
<td> Рядок </td>
<td> Вхід </td>
<td>
</td></tr>
<tr>
<td> noUser </td>
<td> Без користувацьких </td>
<td> Логічний </td>
<td> Вхід </td>
<td> 1
</td></tr></table>
<p><b>Отримати атрибут (AttrGet)</b><br />
<i>Опис:</i> Отримання значення атрибуту віджета. Запит може здійснюватися як указанням повної адреси атрибуту у <i>addr</i>, так і окремо: адресу віджету у <i>addr</i> та ідентифікатор атрибута у <i>attr</i>.<br />
<i>Параметри:</i>
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Ім'я </th>
<th> Тип </th>
<th> Режим </th>
<th> По замовченню
</th></tr>
<tr>
<td> val </td>
<td> Значення </td>
<td> Рядок </td>
<td> Повернення </td>
<td>
</td></tr>
<tr>
<td> addr </td>
<td> Адреса </td>
<td> Рядок </td>
<td> Вхід </td>
<td>
</td></tr>
<tr>
<td> attr </td>
<td> Атрибут </td>
<td> Логічний </td>
<td> Вхід </td>
<td>
</td></tr></table>
<p><b>Встановити атрибут (AttrSet)</b><br />
<i>Опис:</i> Встановлення значення атрибуту віджета. Встановлення може здійснюватися як указанням повної адреси атрибуту у <i>addr</i>, так і окремо: адресу віджету у <i>addr</i> та ідентифікатор атрибута у <i>attr</i>.<br />
<i>Параметри:</i>
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Ім'я </th>
<th> Тип </th>
<th> Режим </th>
<th> По замовченню
</th></tr>
<tr>
<td> addr </td>
<td> Адреса </td>
<td> Рядок </td>
<td> Вхід </td>
<td>
</td></tr>
<tr>
<td> val </td>
<td> Значення </td>
<td> Рядок </td>
<td> Вхід </td>
<td>
</td></tr>
<tr>
<td> attr </td>
<td> Атрибут </td>
<td> Логічний </td>
<td> Вхід </td>
<td>
</td></tr></table>
<p><b>Користувач сеансу (SesUser)</b><br />
<i>Опис:</i> Повертає користувача сеансу за шляхом віджета сеансу.<br />
<i>Параметри:</i>
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Ім'я </th>
<th> Тип </th>
<th> Режим </th>
<th> По замовченню
</th></tr>
<tr>
<td> user </td>
<td> Користувач </td>
<td> Рядок </td>
<td> Повернення </td>
<td>
</td></tr>
<tr>
<td> addr </td>
<td> Адреса </td>
<td> Рядок </td>
<td> Вхід </td>
<td>
</td></tr></table>
<h4><span class="mw-headline" id=".D0.A1.D0.B5.D1.80.D0.B2.D1.96.D1.81.D0.BD.D1.96_.D1.96.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D0.B8_OpenSCADA"><span class="mw-headline-number">3.11.2</span> Сервісні інтерфейси OpenSCADA</span></h4>
<p>Сервісні інтерфейси це інтерфейси доступу до OpenSCADA за посередництвом <a href="../../en/API.html#CntrNode" title="Special:MyLanguage/Documents/API">інтерфейсу управління OpenSCADA</a>. Даний механізм покладено у основу всіх механізмів обміну всередині OpenSCADA, реалізованих за посередництвом слабких зв'язків та стандартного протоколу обміну OpenSCADA.
</p>
<h5><span class="mw-headline" id=".D0.94.D0.BE.D1.81.D1.82.D1.83.D0.BF_.D0.B4.D0.BE_.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D1.8C_.D0.B0.D1.82.D1.80.D0.B8.D0.B1.D1.83.D1.82.D1.96.D0.B2_.D0.B5.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D1.96.D0.B2_.D0.B2.D1.96.D0.B7.D1.83.D0.B0.D0.BB.D1.96.D0.B7.D0.B0.D1.86.D1.96.D1.97_.28.D0.B2.D1.96.D0.B4.D0.B6.D0.B5.D1.82.D0.B8.29"><span class="mw-headline-number">3.11.2.1</span> Доступ до значень атрибутів елементів візуалізації (віджети)</span></h5>
<p>З метою надання уніфікованого, групового та порівняно швидкого доступу до значень атрибутів візуальних елементів, передбачено сервісну функція візуального елементу "/serv/attr" та команди отримання-установки значень атрибутів:
</p>
<ul><li> отримання: <b>&lt;get path="/UI/VCAEngine/{wdg_addr}/%2fserv%2fattr"/&gt;</b>;</li>
<li> установка: <b>&lt;set path="/UI/VCAEngine/{wdg_addr}/%2fserv%2fattr"/&gt;</b>.</li></ul>
<p><b>Таблиця.</b> Атрибути команд отримання та встановлення атрибутів візуальних елементів
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Ім'я </th>
<th> Значення
</th></tr>
<tr>
<td colspan="3"> <i>Команда запиту візуальних атрибутів віджету: <b>&lt;get path="/UI/VCAEngine/{wdg_addr}/%2fserv%2fattr"/&gt;</b></i>
</td></tr>
<tr>
<td> tm </td>
<td> Час-лічильник змін </td>
<td> Встановлення часу-лічильника змін для запиту тільки атрибутів, що змінилися.
</td></tr>
<tr>
<td> &lt;el id="{attr}" p="{a_id}"&gt;{val}&lt;/el&gt; </td>
<td> Формування дочірніх елементів з результатами атрибутів </td>
<td> У дочірньому елементі вказуються: строковий ідентифікатор <i>attr</i>, індекс <i>a_id</i> та значення <i>val</i> атрибуту.
</td></tr>
<tr>
<td colspan="3"> <i>Команда встановлення візуальних атрибутів віджету: <b>&lt;set path="/UI/VCAEngine/{wdg_addr}/%2fserv%2fattr"/&gt;</b></i>
</td></tr>
<tr>
<td> &lt;el id="{attr}"&gt;{val}&lt;/el&gt; </td>
<td> Встановлення атрибутів </td>
<td> У дочірніх елементах вказується: строковий ідентифікатор <i>attr</i> та значення <i>val</i> атрибуту.
</td></tr>
<tr>
<td colspan="3"> <i>Команда активації-створення специфічного до візуалізатору атрибуту: <b>&lt;activate path="/UI/VCAEngine/{wdg_addr}/%2fserv%2fattr/{attrId}" aNm="{Name}" aTp="{Type} aFlg="{Flags}"/&gt;</b></i>
</td></tr>
<tr>
<td> attrId </td>
<td> Ідентифікатор атрибуту </td>
<td>
</td></tr>
<tr>
<td> aNm </td>
<td> Ім'я атрибуту </td>
<td>
</td></tr>
<tr>
<td> aTp </td>
<td> Тип атрибуту </td>
<td>
</td></tr>
<tr>
<td> aFlg </td>
<td> Прапорці атрибуту </td>
<td>
</td></tr></table>
<h5><span class="mw-headline" id=".D0.93.D1.80.D1.83.D0.BF.D0.BE.D0.B2.D0.B8.D0.B9_.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF_.D0.B4.D0.BE_.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D1.8C_.D0.B0.D1.82.D1.80.D0.B8.D0.B1.D1.83.D1.82.D1.96.D0.B2_.D0.B5.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D1.96.D0.B2_.D0.B2.D1.96.D0.B7.D1.83.D0.B0.D0.BB.D1.96.D0.B7.D0.B0.D1.86.D1.96.D1.97_.28.D0.B2.D1.96.D0.B4.D0.B6.D0.B5.D1.82.D0.B0.D0.BC.29"><span class="mw-headline-number">3.11.2.2</span> Груповий доступ до значень атрибутів елементів візуалізації (віджетам)</span></h5>
<p>З метою оптимізації трафіку мережевої взаємодії шляхом виключення мілких запитів та використання одного великого, передбачено груповий запит значень атрибутів візуальних елементів. Групування даного запиту передбачає запит атрибутів всієї гілки віджету, включаючи й вкладені елементи. Для даного запиту передбачено сервісну команду "/serv/attrBr". Запит даної сервісної команди еквівалентний сервісній команді "/serv/attr" та виглядає наступним чином:<br />
<b>&lt;get path="/UI/VCAEngine/{wdg_addr}/%2fserv%2fattrBr"/&gt;</b>
</p>
<dl><dd><i>tm</i> — час-лічильник змін. Встановлення часу-лічильника змін для запиту тільки змінений атрибутів.<br /></dd></dl>
<p>Результат:
</p>
<dl><dd><i>&lt;el id="{attr}" p="{a_id}"&gt;{val}&lt;/el&gt;</i> — елементи з результатами атрибутів. У елементі вказуються: строковий ідентифікатор <i>attr</i>, індекс <i>a_id</i> та значення <i>val</i> атрибуту.</dd>
<dd><i>&lt;w id="{wid}" lnkPath="{lnk_path}"&gt;{childs+attrs}&lt;/w&gt;</i> — елементи з дочірніми віджетами та їх атрибутами. У елементі вказуються: ідентифікатор дочірнього віджету <i>wid</i> та шлях віджету, на який посилається даний віджет якщо він є посиланням <i>lnk_path</i>.</dd></dl>
<h5><span class="mw-headline" id=".D0.94.D0.BE.D1.81.D1.82.D1.83.D0.BF_.D0.B4.D0.BE_.D1.81.D1.82.D0.BE.D1.80.D1.96.D0.BD.D0.BE.D0.BA_.D1.81.D0.B5.D0.B0.D0.BD.D1.81.D1.83"><span class="mw-headline-number">3.11.2.3</span> Доступ до сторінок сеансу</span></h5>
<p>З метою уніфікації та оптимізації доступу до сторінок, передбачено сервісну функцію сеансу "/serv/pg" та команди:
</p>
<ul><li> запит переліку відкритих сторінок: <b>&lt;openlist path="/UI/VCAEngine/ses_{Session}/%2fserv%2fpg"/&gt;</b>;</li>
<li> відкриття сторінки: <b>&lt;open path="/UI/VCAEngine/ses_{Session}/%2fserv%2fpg"/&gt;</b>;</li>
<li> закриття сторінки: <b>&lt;close path="/UI/VCAEngine/ses_{Session}/%2fserv%2fpg"/&gt;</b>.</li></ul>
<p>Результатом запиту переліку відкритих сторінок є дочірні елементи <b>&lt;el&gt;{OpPage}&lt;/el&gt;</b>, що містять повний шлях відкритої сторінки. Крім переліку відкритих сторінок запит повертає значення поточного лічильника обчислення сеансу, у атрибуті <i>tm</i>. Якщо даний атрибут встановлюється при запиті, то, для кожної відкритої сторінки, повертається перелік змінених, з моменту вказаного значення лічильника, віджетів відкритої сторінки.
</p>
<h5><span class="mw-headline" id=".D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D1.96.D0.BD.D0.BD.D1.8F_.D1.81.D0.B8.D0.B3.D0.BD.D0.B0.D0.BB.D1.96.D0.B7.D0.B0.D1.86.D1.96.D1.94.D1.8E"><span class="mw-headline-number">3.11.2.4</span> Управління сигналізацією</span></h5>
<p>Для надання механізму глобального контролю за сигналізацією сеансу, передбачено сервісну функцію сеансу "/serv/alarm" та команди:
</p>
<ul><li> запит статусу сигналів: <b>&lt;get path="/UI/VCAEngine/ses_{Session}/%2fserv%2falarm"/&gt;</b>;</li>
<li> квітація сигналів: <b>&lt;quietance path="/UI/VCAEngine/ses_{Session}/%2fserv%2falarm"/&gt;</b>.</li></ul>
<p>Запит статусу сигналів повертає узагальнений стан сигналів, а також ресурс сповіщення, якщо атрибут "mode" дорівнює "resource". Результатом запиту ресурсу сповіщення, зазвичай, є звуковий файл, для відтворення. В той-же час, забезпечується відстеження послідовності сигналізації та квітації окремих ресурсів сповіщення.
</p><p>Запит на квітацію виконує квітацію, вказаного у атрибуті <i>wdg</i>, віджету, згідно до шаблону у атрибуті <i>tmpl</i>.
</p>
<h5><span class="mw-headline" id=".D0.9C.D0.B0.D0.BD.D1.96.D0.BF.D1.83.D0.BB.D1.8F.D1.86.D1.96.D1.8F_.D1.81.D0.B5.D0.B0.D0.BD.D1.81.D0.B0.D0.BC.D0.B8_.D0.BF.D1.80.D0.BE.D0.B5.D0.BA.D1.82.D1.96.D0.B2"><span class="mw-headline-number">3.11.2.5</span> Маніпуляція сеансами проектів</span></h5>
<p>Для надання уніфікованого механізму маніпуляції сеансами, модулем рушія СВУ (VCAEngine), для візуалізаторів СВУ, передбачено сервісну функцію "/serv/sess" та команди:
</p>
<ul><li> запиту переліку відкритих сеансів: <b>&lt;list path="/UI/VCAEngine/%2fserv%2fsess"/&gt;</b>;</li>
<li> підключення-створення нового сеансу: <b>&lt;connect path="/UI/VCAEngine/%2fserv%2fsess"/&gt;</b>; </li>
<li> відключення-видалення сеансу: <b>&lt;disconnect path="/UI/VCAEngine/%2fserv%2fsess"/&gt;</b>.</li></ul>
<p><b>Таблиця.</b> Атрибути команд механізму маніпуляції сеансами
</p>
<table class="wikitable">

<tr>
<th> Ідентифікатор </th>
<th> Ім'я </th>
<th> Значення
</th></tr>
<tr>
<td colspan="3"> <i>Команда запиту переліку відкритих сеансів для проекту: <b>&lt;list path="/UI/VCAEngine/%2fserv%2fsess"/&gt;</b></i>
</td></tr>
<tr>
<td> prj </td>
<td> Визначення проекту </td>
<td> Визначає проект, для якого повертати перелік відкритих сеансів.
</td></tr>
<tr>
<td> &lt;el&gt;{Session}&lt;/el&gt; </td>
<td> Контроль переліку сеансів </td>
<td> У дочірніх елементах вказуються сеанси, відкриті для запитаного проекту.
</td></tr>
<tr>
<td colspan="3"> <i>Команда підключення-відкриття сеансу: <b>&lt;connect path="/UI/VCAEngine/%2fserv%2fsess"/&gt;</b></i>
</td></tr>
<tr>
<td> sess </td>
<td> Встановлення та контроль ім'я сеансу </td>
<td> Якщо атрибут визначений, то здійснюється підключення до чинного сеансу, інакше — створення нового сеансу. У випадку відкриття нового сеансу, до даного атрибуту поміщається його ім'я.
</td></tr>
<tr>
<td> prj </td>
<td> Встановлення імені проекту </td>
<td> Використовується для відкриття нового сеансу для вказаного проекту та коли атрибут <i>sess</i> не вказано.
</td></tr>
<tr>
<td colspan="3"> <i>Команда відключення-закриття сеансу: <b>&lt;disconnect path="/UI/VCAEngine/%2fserv%2fsess"/&gt;</b></i>
</td></tr>
<tr>
<td> sess </td>
<td> Встановлення імені сеансу </td>
<td> Вказує ім'я сеансу від якого виконується відключення або закриття. Сеанси, що не є фоновими, та до яких не підключено жодного візуалізатору, автоматично закриваються.
</td></tr></table>
<h5><span class="mw-headline" id=".D0.93.D1.80.D1.83.D0.BF.D0.BE.D0.B2.D0.B8.D0.B9_.D0.B7.D0.B0.D0.BF.D0.B8.D1.82_.D0.B4.D0.B5.D1.80.D0.B5.D0.B2.D0.B0_.D0.B1.D1.96.D0.B1.D0.BB.D1.96.D0.BE.D1.82.D0.B5.D0.BA_.D0.B2.D1.96.D0.B4.D0.B6.D0.B5.D1.82.D1.96.D0.B2"><span class="mw-headline-number">3.11.2.6</span> Груповий запит дерева бібліотек віджетів</span></h5>
<p>З метою оптимізації продуктивності локальної та, особливо, мережевої взаємодії, передбачено сервісну функцію "/serv/wlbBr" та команду запиту дерева бібліотек віджетів: <b>&lt;get path="/UI/VCAEngine/%2fserv%2fwlbBr"/&gt;</b>. Результатом запиту є дерево з елементами бібліотек віджетів — теги <i>wlb</i>. Всередині тегів бібліотек віджетів міститься тег іконки <i>ico</i> та теги віджетів бібліотеки <i>w</i>. Теги віджетів, своєю чергою, містять тег іконки та теги дочірніх віджетів <i>cw</i>.
</p><p><br />
</p>
<h2><span class="mw-headline" id=".D0.9A.D0.BE.D0.BD.D1.84.D1.96.D0.B3.D1.83.D1.80.D0.B0.D1.86.D1.96.D1.8F_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D1.8F_.D0.B7.D0.B0_.D0.BF.D0.BE.D1.81.D0.B5.D1.80.D0.B5.D0.B4.D0.BD.D0.B8.D1.86.D1.82.D0.B2.D0.BE.D0.BC_.D1.96.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D1.83_.D1.83.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D1.96.D0.BD.D0.BD.D1.8F_OpenSCADA"><span class="mw-headline-number">4</span> Конфігурація модуля за посередництвом інтерфейсу управління OpenSCADA</span></h2>
<p>За посередництвом інтерфейсу управління OpenSCADA компоненти, які його використовують, можна конфігурувати з будь-якого конфігуратору OpenSCADA. Даним модулем надається інтерфейс доступу до всіх об'єктів даних СВУ. Головна вкладка конфігураційної сторінки модуля надає доступ до бібліотек віджетів та проектів (рис.4.1). Вкладка "Сеанси" надає доступ до відкритих сеансів проектів (рис.4.2).
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:670px;"><a class="image" href="http://oscada.org/wiki/File:VCAeng_main_uk.png"><img class="thumbimage" height="558" src="../files/VCAeng_main_uk.png" width="668" /></a>  <div class="thumbcaption">Рис.4.1. Головна конфігураційна сторінка модуля.</div></div></div></div>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:670px;"><a class="image" href="http://oscada.org/wiki/File:VCAeng_sess_uk.png"><img class="thumbimage" height="531" src="../files/VCAeng_sess_uk.png" width="668" /></a>  <div class="thumbcaption">Рис.4.2. Вкладка "Сеанси" конфігураційної сторінки модуля.</div></div></div></div>
<p>Крім переліку відкритих сеансів, вкладка на рисунку 4.2 містить таблицю з переліком сеансів, які мають створюватися та запускатися у момент завантаження OpenSCADA. Створення сеансів за посередництвом цього механізму може бути корисним для Web-інтерфейсу. У такому випадку, при підключені Web-користувача, всі дані вже готові та забезпечується неперервність формування архівних документів.
</p><p>Конфігурація контейнерів віджетів у особі бібліотек віджетів та проектів виконується за посередництвом сторінок на рисунку 4.3 (для проекту) та рисунку 4.5 (для бібліотеки віджетів). Бібліотека віджетів містить віджети, а проект — сторінки. Обидва типи контейнеру містять вкладку конфігурації ресурсів, що використовуються віджетами (рис.4.6). Сторінка проекту також містить вкладку "Діагностика" (рис.4.4) для налагодження та контролю за виконанням сторінки у сеансах.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:817px;"><a class="image" href="http://oscada.org/wiki/File:VCAeng_pg_uk.png"><img class="thumbimage" height="690" src="../files/VCAeng_pg_uk.png" width="815" /></a>  <div class="thumbcaption">Рис.4.3. Сторінка конфігурації проектів.</div></div></div></div>
<p>За допомогою цієї сторінки можна встановити:
</p>
<ul><li> Стан контейнеру, а саме: "Ввімкнено", ім'я БД (що містить конфігурацію та з відстеженням наявності даних у різних сховищах та наданням послідовного видалення дублікатів), дата та час останньої модифікації, лічильник використання.</li></ul>
<dl><dd> <a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../../en/files/At.png" width="22" /></a> Об'єкт все ще підтримує визначення надлишкової адреси сховку із таблицею до того часу як ви перейменуєте її у стандартну форму "<b>prj_{ObjID}</b>".</dd></dl>
<ul><li> Ідентифікатор, ім'я, опис та іконка контейнеру.</li>
<li> Власник, група користувачів та права доступу до елементу.</li>
<li> Період обчислення сеансів, заснованих на даному проекті.</li>
<li> Ознака увімкнення за потреби.</li></ul>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:1074px;"><a class="image" href="http://oscada.org/wiki/File:VCAeng_pg_diag_uk.png"><img class="thumbimage" height="561" src="../files/VCAeng_pg_diag_uk.png" width="1072" /></a>  <div class="thumbcaption">Рис.4.4. Вкладка "Діагностика" проекту.</div></div></div></div>
<p>У цій вкладці Ви можете обрати час (або оновити до поточного) та розмір для отримання діагностичних повідомлень сеансів виконання даного проекту.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:776px;"><a class="image" href="http://oscada.org/wiki/File:VCAeng_wlb_uk.png"><img class="thumbimage" height="605" src="../files/VCAeng_wlb_uk.png" width="774" /></a>  <div class="thumbcaption">Рис.4.5. Сторінка конфігурації бібліотек віджетів.</div></div></div></div>
<p>За допомогою цієї сторінки можна встановити:
</p>
<ul><li> Стан контейнеру, а саме: "Ввімкнено", ім'я БД (що містить конфігурацію та з відстеженням наявності даних у різних сховищах та наданням послідовного видалення дублікатів), дата та час останньої модифікації, лічильник використання.</li></ul>
<dl><dd> <a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../../en/files/At.png" width="22" /></a> Об'єкт все ще підтримує визначення надлишкової адреси сховку із таблицею до того часу як ви перейменуєте її у стандартну форму "<b>wlb_{ObjID}</b>".</dd></dl>
<ul><li> Ідентифікатор, ім'я, опис та іконка контейнеру.</li></ul>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:691px;"><a class="image" href="http://oscada.org/wiki/File:VCAeng_mime_uk.png"><img class="thumbimage" height="605" src="../files/VCAeng_mime_uk.png" width="689" /></a>  <div class="thumbcaption">Рис.4.6. Вкладка конфігурації ресурсів контейнеру.</div></div></div></div>
<p>Конфігурація сеансу проекту значно відрізняється від конфігурації проекту (рис.4.7), однак, також, містить сторінки проекту.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:1041px;"><a class="image" href="http://oscada.org/wiki/File:VCAeng_pg_ses_uk.png"><img class="thumbimage" height="647" src="../files/VCAeng_pg_ses_uk.png" width="1039" /></a>  <div class="thumbcaption">Рис.4.7. Сторінка конфігурації сеансів проектів.</div></div></div></div>
<p>За допомогою цієї сторінки можна встановити:
</p>
<ul><li> Стан сеансу, а саме: "Ввімкнено"; "Виконується"; користувач; власник; група користувачів; доступ; початковий проект; режим виконання у фоні; час виконання сеансу; лічильник клієнтських підключень; час, користувач, мова останнього запиту; остання дія користувача та залишок часу до примусового закриття.</li>
<li> Період обрахунку сеансу.</li>
<li> Поточний стиль проекту.</li>
<li> Перелік відкритих сторінок.</li></ul>
<p>Сторінки конфігурації візуальних елементів, розташованих у різних контейнерах, можуть сильно відрізнятися, однак, ця різниця полягає у наявності або відсутності окремих вкладок. Головна вкладка візуальних елементів фактично всюди однакова, відрізняючись на одне конфігураційне поле та три у сеансі (рис.4.8). У сторінок присутні вкладки дочірніх сторінок та вкладених віджетів. У контейнерних віджетів міститься вкладка вкладених віджетів. Всі візуальні елементи містять вкладку атрибутів (рис.4.9), крім логічних контейнерів проектів. Елементи, на рівні яких можна формувати користувацьку процедуру та визначати зв'язки, містять вкладки "Обробка" (рис.4.10) та "Зв'язки" (рис.4.11).
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:809px;"><a class="image" href="http://oscada.org/wiki/File:VCAeng_vit_main_uk.png"><img class="thumbimage" height="743" src="../files/VCAeng_vit_main_uk.png" width="807" /></a>  <div class="thumbcaption">Рис.4.8. Головна вкладка конфігурації візуальних елементів.</div></div></div></div>
<p>За допомогою цієї сторінки можна встановити:
</p>
<ul><li> Стан елементу, а саме: "Ввімкнено", кількість використання, батьківський елемент та перехід до нього, дата та час останьої модифікації.</li>
<li> Стан режиму сеансу виконання: "Відкрито", "Обробка" та використано часу при виконанні піддерева та елемента, у <a href="../Program_manual.html#Config" title="Special:MyLanguage/Documents/Program manual">режимі налагодження</a>.</li>
<li> Ідентифікатор, тип, корінь, шлях, ім'я, опис та іконка елементу.</li>
<li> Команда — очистити зміни.</li>
<li> Команда — опустити зміни віджета його предку.</li></ul>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:837px;"><a class="image" href="http://oscada.org/wiki/File:VCAeng_vit_attr_uk.png"><img class="thumbimage" height="740" src="../files/VCAeng_vit_attr_uk.png" width="835" /></a>  <div class="thumbcaption">Рис.4.9. Вкладка атрибутів візуальних елементів.</div></div></div></div>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:1139px;"><a class="image" href="http://oscada.org/wiki/File:VCAeng_vit_proc_uk.png"><img class="thumbimage" height="766" src="../files/VCAeng_vit_proc_uk.png" width="1137" /></a>  <div class="thumbcaption">Рис.4.10. Вкладка обробки візуальних елементів.</div></div></div></div>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:1087px;"><a class="image" href="http://oscada.org/wiki/File:VCAeng_vit_lnk_uk.png"><img class="thumbimage" height="563" src="../files/VCAeng_vit_lnk_uk.png" width="1085" /></a>  <div class="thumbcaption">Рис.4.11. Вкладка зв'язків візуальних елементів.</div></div></div></div>






</div><table style="border-top: dotted 2px #999999; margin-top: 20pt; color: gray;" width="100%"><tr><td style="text-align: left;" width="40%"><a href="http://oscada.org/wiki/Modules/VCAEngine/uk">Modules/VCAEngine/uk</a> - <a href="http://oscada.org/en/main/about-the-project/licenses/">GFDL</a></td><td style="text-align: center;">October 2021</td><td style="text-align: right;" width="40%">OpenSCADA 1+r2777</td></tr></table></body>
</html>