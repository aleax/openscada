<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html class="client-nojs" dir="ltr" lang="en">
<head>
<meta charset="UTF-8" />
<title>Модулі/FireBird - OpenSCADAWiki</title>
<meta content="MediaWiki 1.26.4" name="generator" />
<link href="https://www.gnu.org/copyleft/fdl.html" rel="copyright" />
<link href="../../en/files/doc.css" rel="stylesheet" /></head>
<body><div class="floatright"><a href="http://oscada.org"><img alt="OpenSCADA" src="../../en/files/Logo-big.png" /></a></div><div id="mw_header">
			<div class="mw-indicators">
</div>
			<h1 id="firstHeading" lang="uk">Модулі/FireBird</h1>
		</div><div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="uk"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a class="external text" href="http://oscada.org/wiki/index.php?title=Special:Translate&amp;group=page-Modules%2FFireBird&amp;action=page&amp;filter=&amp;language=uk" rel="nofollow noreferrer noopener" target="_blank">translated version</a></span> of the page <a class="external" href="http://oscada.org/wiki/Modules/FireBird" title="Modules/FireBird">Modules/FireBird</a> and the translation is 100% complete.</div><hr /><div class="mw-pt-languages" dir="ltr" lang="en"><div class="mw-pt-languages-list autonym"><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" href="../../en/Modules/FireBird.html" title="Modules/FireBird (100% translated)">English</a>&nbsp;• ‎<a class="mw-pt-progress mw-pt-progress--complete" href="../../ru/Modules/FireBird.html" title="Модули/FireBird (100% translated)">российский</a>&nbsp;• ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">українська</span></div></div>
<table class="wikitable">

<tr>
<th> Модуль </th>
<th> Ім'я </th>
<th> Версія </th>
<th> Ліцензія </th>
<th> Джерело </th>
<th> Мови </th>
<th> Платформи </th>
<th> Тип </th>
<th> Автор </th>
<th> Опис
</th></tr>

<tr>
<td> <a href="../Modules/FireBird.html" title="Special:MyLanguage/Modules/FireBird">FireBird</a> </td>
<td> БД FireBird
</td>
<td> 2.5 </td>
<td> GPL2 </td>
<td> bd_FireBird.so </td>
<td> en,uk,ru,de </td>
<td> x86,x86_64,ARM
</td>
<td> БД </td>
<td> Роман Савоченко </td>
<td> Модуль БД. Надає підтримку СУБД FireBird.
</td></tr></table>
<p>Модуль надає до OpenSCADA підтримку СУБД FireBird, та InterBase, яка є невеликою та вбудованою СУБД з функціями мережевої та підтримкою SQL-запитів. FireBird побудовано на основі комерційної СУБД InterBase та вона розповсюджується за вільною ліцензією. Ознайомитися з СУБД можна на сайті <a class="external free" href="http://www.firebirdsql.org" rel="nofollow noreferrer noopener" target="_blank">http://www.firebirdsql.org</a>. Модуль засновано на бібліотеці API виробника СУБД на мові "С" та він дозволяє виконувати дії над базами даних, таблицями та вмістом таблиць.
</p>
<div class="toc" id="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D1.96.D1.97_.D0.BD.D0.B0.D0.B4_.D0.91.D0.94"><span class="tocnumber">1</span> <span class="toctext">Операції над БД</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D1.96.D1.97_.D0.BD.D0.B0.D0.B4_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D0.B5.D1.8E"><span class="tocnumber">2</span> <span class="toctext">Операції над таблицею</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D1.96.D1.97_.D0.BD.D0.B0.D0.B4_.D0.B2.D0.BC.D1.96.D1.81.D1.82.D0.BE.D0.BC_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D1.96"><span class="tocnumber">3</span> <span class="toctext">Операції над вмістом таблиці</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#.D0.94.D0.BE.D1.81.D1.82.D1.83.D0.BF_.D0.B4.D0.BE_.D0.91.D0.94"><span class="tocnumber">4</span> <span class="toctext">Доступ до БД</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#.D0.9F.D1.80.D0.BE.D0.B4.D1.83.D0.BA.D1.82.D0.B8.D0.B2.D0.BD.D1.96.D1.81.D1.82.D1.8C_.D0.A1.D0.A3.D0.91.D0.94"><span class="tocnumber">5</span> <span class="toctext"><span>Продуктивність СУБД</span></span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#.D0.97.D0.B0.D1.83.D0.B2.D0.B0.D0.B6.D0.B5.D0.BD.D0.BD.D1.8F"><span class="tocnumber">6</span> <span class="toctext">Зауваження</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id=".D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D1.96.D1.97_.D0.BD.D0.B0.D0.B4_.D0.91.D0.94"><span class="mw-headline-number">1</span> Операції над БД</span></h2>
<p>Підтримуються операції відкриття та закриття БД, з можливістю створення нової БД при відкритті та видалення існуючої при закритті. У термінах підсистеми "БД" OpenSCADA, відкриттям БД є її реєстрація для наступного використання програмою. Також, підтримується операція запиту переліку таблиць у БД.
</p><p>СУБД FireBird адресується шляхом визначення ім'я файлу БД, користувача та пароля. Загалом адреса БД записується наступним чином: <b>{file};{user};{pass}[;{conTm}]</b>.
Де:
</p>
<ul><li> <i>file</i> — повне ім'я файлу БД;</li>
<li> <i>user</i> — користувач БД, від ім'я якого здійснюється доступ;</li>
<li> <i>pass</i> — пароль користувача, від ім'я якого здійснюється доступ;</li>
<li> <i>conTm</i> — таймаут підключення, секунд.</li></ul>
<h2><span class="mw-headline" id=".D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D1.96.D1.97_.D0.BD.D0.B0.D0.B4_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D0.B5.D1.8E"><span class="mw-headline-number">2</span> Операції над таблицею</span></h2>
<p>Підтримуються операції відкриття, закриття таблиці, з можливістю створення нової таблиці при відкритті та видалення існуючої при закриті, а також запит структури таблиці.
</p>
<h2><span class="mw-headline" id=".D0.9E.D0.BF.D0.B5.D1.80.D0.B0.D1.86.D1.96.D1.97_.D0.BD.D0.B0.D0.B4_.D0.B2.D0.BC.D1.96.D1.81.D1.82.D0.BE.D0.BC_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D1.96"><span class="mw-headline-number">3</span> Операції над вмістом таблиці</span></h2>
<ul><li> сканування записів таблиці;</li>
<li> запит значень визначених записів;</li>
<li> встановлення значень визначених записів;</li>
<li> видалення записів.</li></ul>
<p>API підсистеми "БД" передбачає доступ до вмісту таблиці за значенням ключового(их) полів. Так, операція запиту запису передбачає попереднє встановлення ключових стовпчиків об'єкту TConfig, за яким буде здійснено запит. Створення нового запису(рядка) здійснюється операцією встановлення значень запису, який відсутній.
</p><p>Модуль дозволяє динамічно міняти структуру таблиць БД FireBird. Так, у випадку невідповідності структури таблиці та структури запису що встановлюється, структуру таблиці буде приведено до потрібної структури запису. У випадку запиту значень запису та невідповідності структур запису і таблиці, буде отримано тільки значення загальних елементів запису та таблиці. Модуль не відстежує послідовності розташування елементів запису та структури таблиці, крім цього операція зміни типу стовпчика не є безпечною та дані у стовпчиках що змінюються буде втрачено!
</p><p>Модулем реалізується механізм підтримки багатомовних текстових змінних. Для полів із багатомовною текстовою змінною створюються стовпчики окремих мов у форматі "<b>{lang}#{FldID}</b>" (en#NAME). При цьому, базовий стовпчик містить значення для базової мови. Стовпчики окремих мов створюються за потреби, у момент збереження до БД та при виконанні OpenSCADA у відповідній локалі. У випадку відсутності значень для конкретної мови буде використано значення для базової мови.
</p><p>Типи елементів СУБД FireBird наступним чином відповідають типам елементів OpenSCADA:
</p>
<table class="wikitable">

<tr>
<th> Типи полів OpenSCADA </th>
<th> Типи полів FireBird
</th></tr>
<tr>
<td> TFld::String </td>
<td> VARCHAR, BLOB SUBTYPE TEXT
</td></tr>
<tr>
<td> TFld::Integer </td>
<td> INTEGER
</td></tr>
<tr>
<td> TFld::Real </td>
<td> DOUBLE
</td></tr>
<tr>
<td> TFld::Boolean </td>
<td> SMALLINT
</td></tr></table>
<h2><span class="mw-headline" id=".D0.94.D0.BE.D1.81.D1.82.D1.83.D0.BF_.D0.B4.D0.BE_.D0.91.D0.94"><span class="mw-headline-number">4</span> Доступ до БД</span></h2>
<p>Права доступу до БД визначаються правами файлу БД.
</p><p>Коротко розглянемо процедуру первинного налаштування серверу FireBird, з метою підключення до нього за допомогою цього модуля:
</p>
<ul>
<li>Встановлення СУБД FireBird у вигляді пакету або збіркою.</li>
<li>Запуск СУБД:
<pre style="white-space: pre-wrap;">
# Запуск класичного серверу
$ service firebird start
# Запуск у супер-сервері
$ service xinetd restart</pre></li>
<li>Встановлення потрібного пароля системного користувача "sysdba":
<pre style="white-space: pre-wrap;">
$ gsec -user sysdba -pass masterkey -mo sysdba -pw 123456</pre></li>
<li>Підключення до СУБД за допомогою цього модуля, ввівши адресу БД: <b>"/var/tmp/test.fbd;sysdba;123456"</b></li>
</ul>
<h2><span class="mw-headline" id=".D0.9F.D1.80.D0.BE.D0.B4.D1.83.D0.BA.D1.82.D0.B8.D0.B2.D0.BD.D1.96.D1.81.D1.82.D1.8C_.D0.A1.D0.A3.D0.91.D0.94"><span class="mw-headline-number">5</span> <span id="Tests" title="#Tests">Продуктивність СУБД</span></span></h2>
<p>Вимірювання продуктивності СУБД здійснювалося тестом "БД" модуля тестів "SystemTests", шляхом виконання операцій над записами структурою: "<b>name char (20), descr char (50), val double (10.2), id int (7), stat bool, reqKey string, reqVal string</b>".
</p>
<table class="wikitable">

<tr>
<th> Operations for 1000 records, seconds
</th>
<th> FireBird 2.5<br />AMD Turion L625 1.6, 2G, FireBird [2.1.3 Local SuperServer; 100Base-TX; 2.5.2 100Base-TX SuperServer ForcedWrites=Off; ForcedWrites=On]<br /> Intel(R) Core(TM) i3 CPU 1.33GHz, 3G, HDD [2.5.2 100Base-TX SuperServer ForcedWrites=Off; ForcedWrites=On] </th>
<th> FireBird 3<br />Intel(R) Core(TM) i7 CPU 2.6GHz, 12G, FastSSD, Local network
</th></tr>
<tr>
<td> <i>Creating:</i> </td>
<td> [0.93; 1.15; 4.4; 5.2]; [3.68; 4.67] </td>
<td> 0.5
</td></tr>
<tr>
<td> <i>Updating:</i> </td>
<td> [2.74; 2.94; 5.1; 5.2]; [3.88; 4.54] </td>
<td> 0.47
</td></tr>
<tr>
<td> <i>Getting:</i> </td>
<td> [1.64; 2.22; 5.0; <span style="color: red">27.8</span>]; [3.69; <span style="color: red">28.8</span>] </td>
<td> 2.95
</td></tr>
<tr>
<td> <i>Seeking:</i> </td>
<td> -&nbsp;; [5.36; <span style="color: red">32</span>] </td>
<td> 3.3
</td></tr>
<tr>
<td> <i>Seeking in preload:</i> </td>
<td> -&nbsp;; [0.045; 0.065] </td>
<td> 0.047
</td></tr>
<tr>
<td> <i>Deleting:</i> </td>
<td> [0.65; 1.04; 2.0; 2.4]; [1.69; 1.66] </td>
<td> 0.17
</td></tr></table>
<h2><span class="mw-headline" id=".D0.97.D0.B0.D1.83.D0.B2.D0.B0.D0.B6.D0.B5.D0.BD.D0.BD.D1.8F"><span class="mw-headline-number">6</span> Зауваження</span></h2>
<p>СУБД FireBird має багато архітектурних обмежень та проблем у зв'язку із спадковістю InterBase та батьківської ОС MS Windows, які заважають її широкому використанню у багатьох задачах. Відомі проблеми:
</p>
<ul><li> СУБД повільніше у порівнянні з MySQL або PostgreSQL, див. попередній розділ. Особливо у режимі ForcedWrites On(sync).</li>
<li> СУБД має фіксоване обмеження на розмір виразу SQL у 65536 КБ, яке заважає розташуванню великого вмісту виключно за посередництвом SQL.</li>
<li> Класичний сервер на Linux, у режимі вимикання ForcedWrites, може намертво зависати.</li>
<li> Відсутній контроль за лімітами часу підключення, що призводить до тривалого та неконтрольованого очікування у клієнтських додатках.</li></ul>






</div><table style="border-top: dotted 2px #999999; margin-top: 20pt; color: gray;" width="100%"><tr><td style="text-align: left;" width="40%"><a href="http://oscada.org/wiki/Modules/FireBird/uk">Modules/FireBird/uk</a> - <a href="http://oscada.org/en/main/about-the-project/licenses/">GFDL</a></td><td style="text-align: center;">October 2020</td><td style="text-align: right;" width="40%">OpenSCADA 1+r2711</td></tr></table></body>
</html>