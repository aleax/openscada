<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html class="client-nojs" dir="ltr" lang="en">
<head>
<meta charset="UTF-8" />
<title>Документи/API - OpenSCADAWiki</title>
<meta content="MediaWiki 1.26.4" name="generator" />
<link href="https://www.gnu.org/copyleft/fdl.html" rel="copyright" />
<link href="../en/files/doc.css" rel="stylesheet" /></head>
<body><div class="floatright"><a href="index.html"><img alt="OpenSCADA" src="../en/files/index.png" /></a></div><div id="mw_header">
			<div class="mw-indicators">
</div>
			<h1 id="firstHeading" lang="uk">Документи/API</h1>
		</div><div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="uk"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a class="external text" href="http://oscada.org/wiki/index.php?title=Special:Translate&amp;group=page-Documents%2FAPI&amp;action=page&amp;filter=&amp;language=uk" rel="nofollow noreferrer noopener" target="_blank">translated version</a></span> of the page <a class="external" href="http://oscada.org/wiki/Documents/API" title="Documents/API">Documents/API</a> and the translation is 32% complete.</div><hr /><div class="mw-pt-languages" dir="ltr" lang="en"><div class="mw-pt-languages-list autonym"><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" href="../en/API.html" title="Documents/API (100% translated)">English</a>&nbsp;• ‎<a class="mw-pt-progress mw-pt-progress--stub" href="../ru/API.html" title="Документы/API (2% translated)">mRussian</a>&nbsp;• ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--low">Українська</span></div></div>
<div style="float:right; border:1px solid gray; width:300px; padding:2px; margin-left: 10pt; margin-bottom: 10pt;">
<ul><li> <b>Автор:</b> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Роман Савоченко</a></li>
<li> <b>Початково створено:</b> у <a class="external text" href="http://wiki.oscada.org/HomePageEn/Doc/API" rel="nofollow noreferrer noopener" target="_blank">старій Wiki</a> </li></ul>
</div>
<p>Ця сторінка описує інтерфейс програмування (API) додатку OpenSCADA.
</p><p>OpenSCADA це проєкт відкритої SCADA-системи побудованої за модульним принципом. У документі міститься вичерпна інформація зі внутрішньої архітектури об'єктів OpenSCADA. Також надаються довідкові дані з методів та атрибутів цих об'єктів.
</p><p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../en/files/At.png" width="22" /></a> Цей документ призначено для програмістів які бажають розібратися у архітектурі OpenSCADA та розробляти розширення до неї. Документ переважно не призначено для користувачів та інтеграторів OpenSCADA, хоча окремі речі можуть бути корисні і їм для розуміння роботи.
</p><p>Для розуміння документу потрібні знання концепції Об'єктно Орієнтованого Програмування (ООП) та універсальної мови моделювання програмного забезпечення (UML), а для можливості вивчення вихідного коду проєкту потрібні знання мови програмування C++. Крім того у документі містяться згадки про технології: реляційні БД, XML.
</p>
<div class="toc" id="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.92.D0.BD.D1.83.D1.82.D1.80.D1.96.D1.88.D0.BD.D1.8F_.D1.81.D1.82.D1.80.D1.83.D0.BA.D1.82.D1.83.D1.80.D0.B0"><span class="tocnumber">1</span> <span class="toctext">Внутрішня структура</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.D0.97.D0.B0.D0.B3.D0.B0.D0.BB.D1.8C.D0.BD.D0.B0_.D1.81.D1.82.D1.80.D1.83.D0.BA.D1.82.D1.83.D1.80.D0.B0_.D0.BF.D1.80.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D0.B8_.E2.80.94_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D1.8C.D0.BD.D1.96.D1.81.D1.82.D1.8C"><span class="tocnumber">2</span> <span class="toctext">Загальна структура програми — модульність</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#The_root_object_system_.28TSYS.29"><span class="tocnumber">2.1</span> <span class="toctext"><span>The root object system (TSYS)</span></span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Object_of_the_messages_system_.28TMess.29"><span class="tocnumber">2.2</span> <span class="toctext"><span>Object of the messages system (TMess)</span></span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Object_subsystem_.28TSubSYS.29"><span class="tocnumber">2.3</span> <span class="toctext"><span>Object subsystem (TSubSYS)</span></span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Object_Module_.28TModule.29"><span class="tocnumber">2.4</span> <span class="toctext"><span>Object Module (TModule)</span></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Subsystem_.22DB.22"><span class="tocnumber">3</span> <span class="toctext"><span>Subsystem "DB"</span></span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Object_of_subsystem_.22Database.22_.28TBDS.29"><span class="tocnumber">3.1</span> <span class="toctext"><span>Object of subsystem "Database" (TBDS)</span></span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Modular_object_of_types_of_databases_.28TTypeBD.29"><span class="tocnumber">3.2</span> <span class="toctext"><span>Modular object of types of databases (TTypeBD)</span></span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#The_object_of_the_database_.28TBD.29"><span class="tocnumber">3.3</span> <span class="toctext"><span>The object of the database (TBD)</span></span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#The_object_of_the_table_.28TTable.29"><span class="tocnumber">3.4</span> <span class="toctext"><span>The object of the table (TTable)</span></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Subsystem_.22Data_acquisition.22"><span class="tocnumber">4</span> <span class="toctext">Subsystem "Data acquisition"</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#Object_of_subsystem_.22Data_acquisition.22_.28TDAQS.29"><span class="tocnumber">4.1</span> <span class="toctext"><span>Object of subsystem "Data acquisition" (TDAQS)</span></span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Modular_object_of_the_controller.27s_type_.28TTypeDAQ.29"><span class="tocnumber">4.2</span> <span class="toctext"><span>Modular object of the controller's type (TTypeDAQ)</span></span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Controller.27s_object_.28TController.29"><span class="tocnumber">4.3</span> <span class="toctext"><span>Controller's object (TController)</span></span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Parameters.27_type_object_.28TTypeParam.29"><span class="tocnumber">4.4</span> <span class="toctext"><span>Parameters' type object (TTypeParam)</span></span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Object_of_the_physical_level_parameter_.28TParamContr.29"><span class="tocnumber">4.5</span> <span class="toctext"><span>Object of the physical level parameter (TParamContr)</span></span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Object_of_the_value_.28TValue.29"><span class="tocnumber">4.6</span> <span class="toctext"><span>Object of the value (TValue)</span></span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Attribute.27s_object_.28TVal.29"><span class="tocnumber">4.7</span> <span class="toctext"><span>Attribute's object (TVal)</span></span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Object_of_the_templates_library_of_parameters_of_the_.22DAQ.22_subsystem_.28TPrmTmplLib.29"><span class="tocnumber">4.8</span> <span class="toctext"><span>Object of the templates library of parameters of the "DAQ" subsystem (TPrmTmplLib)</span></span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#The_object_of_the_parameter.27s_template_of_the_.22DAQ.22_subsystem_.28TPrmTempl.29"><span class="tocnumber">4.9</span> <span class="toctext"><span>The object of the parameter's template of the "DAQ" subsystem (TPrmTempl)</span></span></a>
<ul>
<li class="toclevel-3 tocsection-22"><a href="#The_object_of_the_implementation_of_the_template.27s_parameters_of_the_.22DAQ.22_subsystem_.28TPrmTempl::Impl.29"><span class="tocnumber">4.9.1</span> <span class="toctext"><span>The object of the implementation of the template's parameters of the "DAQ" subsystem (TPrmTempl::Impl)</span></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-23"><a href="#Subsystem_.22Archives-History.22"><span class="tocnumber">5</span> <span class="toctext"><span>Subsystem "Archives-History"</span></span></a>
<ul>
<li class="toclevel-2 tocsection-24"><a href="#The_object_of_the_subsystem_.22Archives.22_.28TArchiveS.29"><span class="tocnumber">5.1</span> <span class="toctext"><span>The object of the subsystem "Archives" (TArchiveS)</span></span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#The_object_of_the_values.27_archive_.28TVArchive.29"><span class="tocnumber">5.2</span> <span class="toctext"><span>The object of the values' archive (TVArchive)</span></span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Object_of_the_values.27_buffer_.28TValBuf.29"><span class="tocnumber">5.3</span> <span class="toctext"><span>Object of the values' buffer (TValBuf)</span></span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#The_modular_object_of_the_archiver.27s_type_.28TTypeArchivator.29"><span class="tocnumber">5.4</span> <span class="toctext"><span>The modular object of the archiver's type (TTypeArchivator)</span></span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#The_object_of_the_messages.27_archiver_.28TMArchivator.29"><span class="tocnumber">5.5</span> <span class="toctext"><span>The object of the messages' archiver (TMArchivator)</span></span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#The_object_of_the_values.27_archiver_.28TVArchivator.29"><span class="tocnumber">5.6</span> <span class="toctext"><span>The object of the values' archiver (TVArchivator)</span></span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#The_object_of_the_archive.27s_element_in_the_archiver_.28TVArchEl.29"><span class="tocnumber">5.7</span> <span class="toctext"><span>The object of the archive's element in the archiver (TVArchEl)</span></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-31"><a href="#Subsystem_.22Transports.22"><span class="tocnumber">6</span> <span class="toctext"><span>Subsystem "Transports"</span></span></a>
<ul>
<li class="toclevel-2 tocsection-32"><a href="#The_object_of_the_.22Transports.22_subsystem_.28TTransportS.29"><span class="tocnumber">6.1</span> <span class="toctext"><span>The object of the "Transports" subsystem (TTransportS)</span></span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#The_modular_object_of_the_transports.27_type_.28TTypeTransport.29"><span class="tocnumber">6.2</span> <span class="toctext"><span>The modular object of the transports' type (TTypeTransport)</span></span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#The_object_of_the_input_transports_.28TTransportIn.29"><span class="tocnumber">6.3</span> <span class="toctext"><span>The object of the input transports (TTransportIn)</span></span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#The_object_of_the_output_transports_.28TTransportOut.29"><span class="tocnumber">6.4</span> <span class="toctext"><span>The object of the output transports (TTransportOut)</span></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-36"><a href="#Subsystem_.22Transport_protocols.22"><span class="tocnumber">7</span> <span class="toctext"><span>Subsystem "Transport protocols"</span></span></a>
<ul>
<li class="toclevel-2 tocsection-37"><a href="#The_object_of_the_.22Communication_interfaces.27_protocols.22_subsystem_.28TProtocolS.29"><span class="tocnumber">7.1</span> <span class="toctext"><span>The object of the "Communication interfaces' protocols" subsystem (TProtocolS)</span></span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#The_modular_object_of_the_protocol_.28TProtocol.29"><span class="tocnumber">7.2</span> <span class="toctext"><span>The modular object of the protocol (TProtocol)</span></span></a></li>
<li class="toclevel-2 tocsection-39"><a href="#The_object_of_the_input_protocol.27s_session_.28TProtocolIn.29"><span class="tocnumber">7.3</span> <span class="toctext"><span>The object of the input protocol's session (TProtocolIn)</span></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-40"><a href="#Subsystem_.22User_interfaces.22"><span class="tocnumber">8</span> <span class="toctext">Subsystem "User interfaces"</span></a>
<ul>
<li class="toclevel-2 tocsection-41"><a href="#The_object_of_the_.22User_interfaces.22_subsystem_.28TUIS.29"><span class="tocnumber">8.1</span> <span class="toctext"><span>The object of the "User interfaces" subsystem (TUIS)</span></span></a></li>
<li class="toclevel-2 tocsection-42"><a href="#The_modular_object_of_the_user_interface_.28TUI.29"><span class="tocnumber">8.2</span> <span class="toctext"><span>The modular object of the user interface (TUI)</span></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-43"><a href="#Subsystem_.22Specials.22"><span class="tocnumber">9</span> <span class="toctext">Subsystem "Specials"</span></a>
<ul>
<li class="toclevel-2 tocsection-44"><a href="#The_object_of_the_.22Specials.22_subsystem_.28TSpecialS.29"><span class="tocnumber">9.1</span> <span class="toctext"><span>The object of the "Specials" subsystem (TSpecialS)</span></span></a></li>
<li class="toclevel-2 tocsection-45"><a href="#The_modular_object_of_the_specials_.28TSpecial.29"><span class="tocnumber">9.2</span> <span class="toctext"><span>The modular object of the specials (TSpecial)</span></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-46"><a href="#Subsystem_.22Security.22"><span class="tocnumber">10</span> <span class="toctext">Subsystem "Security"</span></a>
<ul>
<li class="toclevel-2 tocsection-47"><a href="#The_object_of_the_.22Security.22_subsystem_.28TSecurity.29"><span class="tocnumber">10.1</span> <span class="toctext"><span>The object of the "Security" subsystem (TSecurity)</span></span></a></li>
<li class="toclevel-2 tocsection-48"><a href="#The_user.27s_object_.28TUser.29"><span class="tocnumber">10.2</span> <span class="toctext"><span>The user's object (TUser)</span></span></a></li>
<li class="toclevel-2 tocsection-49"><a href="#The_users.27_group_object_.28TGroup.29"><span class="tocnumber">10.3</span> <span class="toctext"><span>The users' group object (TGroup)</span></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-50"><a href="#Subsystem_.22Modules_scheduler.22"><span class="tocnumber">11</span> <span class="toctext">Subsystem "Modules scheduler"</span></a>
<ul>
<li class="toclevel-2 tocsection-51"><a href="#The_object_of_the_subsystem_.22Modules.27_sheduling.22_.28TModSchedul.29"><span class="tocnumber">11.1</span> <span class="toctext"><span>The object of the subsystem "Modules' sheduling" (TModSchedul)</span></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-52"><a href="#Components_of_the_object_model_of_OpenSCADA"><span class="tocnumber">12</span> <span class="toctext">Components of the object model of OpenSCADA</span></a>
<ul>
<li class="toclevel-2 tocsection-53"><a href="#The_function_object_.28TFunction.29"><span class="tocnumber">12.1</span> <span class="toctext"><span>The function object (TFunction)</span></span></a></li>
<li class="toclevel-2 tocsection-54"><a href="#The_object_of_the_function.27s_parameter_.28IO.29"><span class="tocnumber">12.2</span> <span class="toctext"><span>The object of the function's parameter (IO)</span></span></a></li>
<li class="toclevel-2 tocsection-55"><a href="#The_object_of_the_function.27s_value_.28TValFunc.29"><span class="tocnumber">12.3</span> <span class="toctext"><span>The object of the function's value (TValFunc)</span></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-56"><a href="#Data_in_OpenSCADA_and_their_storage"><span class="tocnumber">13</span> <span class="toctext"><span>Data in OpenSCADA and their storage</span></span></a>
<ul>
<li class="toclevel-2 tocsection-57"><a href="#Data_storing_conception"><span class="tocnumber">13.1</span> <span class="toctext"><span>Data storing conception</span></span></a></li>
<li class="toclevel-2 tocsection-58"><a href="#Data_object_.28TConfig.29"><span class="tocnumber">13.2</span> <span class="toctext"><span>Data object (TConfig)</span></span></a></li>
<li class="toclevel-2 tocsection-59"><a href="#Data_cell_.28TCfg.29"><span class="tocnumber">13.3</span> <span class="toctext"><span>Data cell (TCfg)</span></span></a></li>
<li class="toclevel-2 tocsection-60"><a href="#Data_structure_object_.28TElem.29"><span class="tocnumber">13.4</span> <span class="toctext"><span>Data structure object (TElem)</span></span></a></li>
<li class="toclevel-2 tocsection-61"><a href="#Data_structure_cell_.28TFld.29"><span class="tocnumber">13.5</span> <span class="toctext"><span>Data structure cell (TFld)</span></span></a></li>
<li class="toclevel-2 tocsection-62"><a href="#The_object_which_preacts_about_changing_of_the_structure_.28TValElem.29"><span class="tocnumber">13.6</span> <span class="toctext"><span>The object which preacts about changing of the structure (TValElem)</span></span></a></li>
<li class="toclevel-2 tocsection-63"><a href="#Data_cell_.28TVariant.29"><span class="tocnumber">13.7</span> <span class="toctext"><span>Data cell (TVariant)</span></span></a></li>
<li class="toclevel-2 tocsection-64"><a href="#User_object_.28TVarObj.29"><span class="tocnumber">13.8</span> <span class="toctext"><span>User object (TVarObj)</span></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-65"><a href="#.D0.86.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81_.D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D1.96.D0.BD.D0.BD.D1.8F_.D1.82.D0.B0_.D0.B4.D0.B8.D0.BD.D0.B0.D0.BC.D1.96.D1.87.D0.BD.D0.B5_.D0.B4.D0.B5.D1.80.D0.B5.D0.B2.D0.BE_.D0.BE.D0.B1.27.D1.94.D0.BA.D1.82.D1.96.D0.B2_.D0.BF.D1.80.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D0.B8_.28TCntrNode.29"><span class="tocnumber">14</span> <span class="toctext"><span>Інтерфейс Управління та динамічне дерево об'єктів програми (TCntrNode)</span></span></a>
<ul>
<li class="toclevel-2 tocsection-66"><a href="#.D0.A1.D0.B8.D0.BD.D1.82.D0.B0.D0.BA.D1.81.D0.B8.D1.81_.D0.B7.D0.B0.D0.BF.D0.B8.D1.82.D1.83_.D1.82.D0.B0_.D0.B2.D1.96.D0.B4.D0.BF.D0.BE.D0.B2.D1.96.D0.B4.D1.96_.D0.86.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D1.83_.D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D1.96.D0.BD.D0.BD.D1.8F"><span class="tocnumber">14.1</span> <span class="toctext">Синтаксис запиту та відповіді Інтерфейсу Управління</span></a></li>
<li class="toclevel-2 tocsection-67"><a href="#.D0.97.D0.B0.D0.BF.D0.B8.D1.82_.D1.96.D0.BD.D1.84.D0.BE.D1.80.D0.BC.D0.B0.D1.86.D1.96.D0.B9.D0.BD.D0.BE.D1.97_.D1.81.D1.82.D1.80.D1.83.D0.BA.D1.82.D1.83.D1.80.D0.B8_.D0.BA.D0.BE.D0.BD.D1.82.D1.80.D0.BE.D0.BB.D1.8E_.E2.80.94_.3Cinfo_user.3D.27.7Buser.7D.27_lang.3D.27.7Blang.7D.27_path.3D.27.7Bpath.7D.27_.2F.3E"><span class="tocnumber">14.2</span> <span class="toctext">Запит інформаційної структури контролю — &lt;info user='{user}' lang='{lang}' path='{path}' /&gt;</span></a></li>
<li class="toclevel-2 tocsection-68"><a href="#.D0.9D.D0.B0.D0.B4.D1.81.D0.B8.D0.BB.D0.B0.D0.BD.D0.BD.D1.8F_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4_.D1.81.D1.82.D0.B0.D0.BD.D0.B4.D0.B0.D1.80.D1.82.D0.BD.D0.B8.D1.85_.D0.B5.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D1.96.D0.B2_.E2.80.94_.3C.7Bcmd.7D_path.3D.27.7Bpath.7D.27.3E.7Btext.7D.3C.2F.7Bcmd.7D.3E"><span class="tocnumber">14.3</span> <span class="toctext">Надсилання команд стандартних елементів — &lt;{cmd} path='{path}'&gt;{text}&lt;/{cmd}&gt;</span></a>
<ul>
<li class="toclevel-3 tocsection-69"><a href="#.D0.9A.D0.BE.D0.BD.D1.84.D1.96.D0.B3.D1.83.D1.80.D0.B0.D1.86.D1.96.D0.B9.D0.BD.D0.B5_.D0.BF.D0.BE.D0.BB.D0.B5_.E2.80.94_.22fld.22"><span class="tocnumber">14.3.1</span> <span class="toctext">Конфігураційне поле — "fld"</span></a></li>
<li class="toclevel-3 tocsection-70"><a href="#.D0.9F.D0.BE.D0.BB.D0.B5_.D0.BF.D0.B5.D1.80.D0.B5.D0.BB.D1.96.D0.BA.D1.83_.E2.80.94_.22list.22"><span class="tocnumber">14.3.2</span> <span class="toctext">Поле переліку — "list"</span></a></li>
<li class="toclevel-3 tocsection-71"><a href="#.D0.9F.D0.BE.D0.BB.D0.B5_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D1.96_.E2.80.94_.22table.22"><span class="tocnumber">14.3.3</span> <span class="toctext">Поле таблиці — "table"</span></a></li>
<li class="toclevel-3 tocsection-72"><a href="#.D0.9F.D0.BE.D0.BB.D0.B5_.D0.B7.D0.BE.D0.B1.D1.80.D0.B0.D0.B6.D0.B5.D0.BD.D0.BD.D1.8F_.E2.80.94_.22img.22"><span class="tocnumber">14.3.4</span> <span class="toctext">Поле зображення — "img"</span></a></li>
<li class="toclevel-3 tocsection-73"><a href="#.D0.9F.D0.BE.D0.BB.D0.B5_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D0.B8_.E2.80.94_.22comm.22"><span class="tocnumber">14.3.5</span> <span class="toctext">Поле команди — "comm"</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-74"><a href="#.D0.A1.D0.B5.D1.80.D0.B2.D1.96.D1.81.D0.BD.D1.96_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D0.B8-.D1.84.D1.83.D0.BD.D0.BA.D1.86.D1.96.D1.97"><span class="tocnumber">14.4</span> <span class="toctext"><span>Сервісні команди-функції</span></span></a>
<ul>
<li class="toclevel-3 tocsection-75"><a href="#.D0.9A.D0.BE.D1.80.D0.B5.D0.BD.D0.B5.D0.B2.D0.B8.D0.B9_.D0.92.D1.83.D0.B7.D0.BE.D0.BB_.D1.82.D0.B0_.D0.B7.D0.B0.D0.B3.D0.B0.D0.BB.D1.8C.D0.BD.D0.B5_.D0.B4.D0.BB.D1.8F_.D0.B2.D1.81.D1.96.D1.85_.D0.B2.D1.83.D0.B7.D0.BB.D1.96.D0.B2"><span class="tocnumber">14.4.1</span> <span class="toctext">Кореневий Вузол та загальне для всіх вузлів</span></a></li>
<li class="toclevel-3 tocsection-76"><a href="#.D0.9F.D1.96.D0.B4.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.B0_.22.D0.91.D0.B0.D0.B7.D0.B8_.D0.94.D0.B0.D0.BD.D0.B8.D1.85_.28DB.29.22"><span class="tocnumber">14.4.2</span> <span class="toctext">Підсистема "Бази Даних (DB)"</span></a></li>
<li class="toclevel-3 tocsection-77"><a href="#.D0.9F.D1.96.D0.B4.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.B0_.22.D0.97.D0.B1.D1.96.D1.80_.D0.94.D0.B0.D0.BD.D0.B8.D1.85_.28DAQ.29.22"><span class="tocnumber">14.4.3</span> <span class="toctext">Підсистема "Збір Даних (DAQ)"</span></a>
<ul>
<li class="toclevel-4 tocsection-78"><a href="#.D0.9C.D0.BE.D0.B4.D1.83.D0.BB.D1.8C_JavaLikeCalc"><span class="tocnumber">14.4.3.1</span> <span class="toctext">Модуль JavaLikeCalc</span></a></li>
<li class="toclevel-4 tocsection-79"><a href="#.D0.9C.D0.BE.D0.B4.D1.83.D0.BB.D1.8C_LogicLev"><span class="tocnumber">14.4.3.2</span> <span class="toctext">Модуль LogicLev</span></a></li>
<li class="toclevel-4 tocsection-80"><a href="#.D0.9C.D0.BE.D0.B4.D1.83.D0.BB.D1.8C_BlockCalc"><span class="tocnumber">14.4.3.3</span> <span class="toctext">Модуль BlockCalc</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-81"><a href="#.D0.9F.D1.96.D0.B4.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.B0_.22.D0.90.D1.80.D1.85.D1.96.D0.B2.D0.B8-.D1.96.D1.81.D1.82.D0.BE.D1.80.D1.96.D1.8F.22"><span class="tocnumber">14.4.4</span> <span class="toctext">Підсистема "Архіви-історія"</span></a></li>
<li class="toclevel-3 tocsection-82"><a href="#.D0.9F.D1.96.D0.B4.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.B0_.22.D0.9A.D0.BE.D1.80.D0.B8.D1.81.D1.82.D1.83.D0.B2.D0.B0.D1.86.D1.8C.D0.BA.D1.96_.D0.86.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D0.B8_.28UI.29.22"><span class="tocnumber">14.4.5</span> <span class="toctext">Підсистема "Користувацькі Інтерфейси (UI)"</span></a>
<ul>
<li class="toclevel-4 tocsection-83"><a href="#.D0.9C.D0.BE.D0.B4.D1.83.D0.BB.D1.8C_VCAEngine"><span class="tocnumber">14.4.5.1</span> <span class="toctext">Модуль VCAEngine</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-84"><a href="#Object_of_the_dynamic_tree_node_.28TCntrNode.29"><span class="tocnumber">14.5</span> <span class="toctext"><span>Object of the dynamic tree node (TCntrNode)</span></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-85"><a href="#Resources_locking"><span class="tocnumber">15</span> <span class="toctext">Resources locking</span></a>
<ul>
<li class="toclevel-2 tocsection-86"><a href="#Resource_R.2FW_lock_object_.28ResRW.29"><span class="tocnumber">15.1</span> <span class="toctext"><span>Resource R/W lock object (ResRW)</span></span></a></li>
<li class="toclevel-2 tocsection-87"><a href="#Automatic_resource_RW_unlock_object_.28ResAlloc.29"><span class="tocnumber">15.2</span> <span class="toctext"><span>Automatic resource RW unlock object (ResAlloc)</span></span></a></li>
<li class="toclevel-2 tocsection-88"><a href="#Template_.28AutoHD.29"><span class="tocnumber">15.3</span> <span class="toctext"><span>Template (AutoHD)</span></span></a></li>
<li class="toclevel-2 tocsection-89"><a href="#Resources_allocation_object.2C_by_mutex_.28ResMtx.29"><span class="tocnumber">15.4</span> <span class="toctext"><span>Resources allocation object, by mutex (ResMtx)</span></span></a></li>
<li class="toclevel-2 tocsection-90"><a href="#Object_of_the_string_with_the_access_shared_by_the_resource_.28ResString.29"><span class="tocnumber">15.5</span> <span class="toctext"><span>Object of the string with the access shared by the resource (ResString)</span></span></a></li>
<li class="toclevel-2 tocsection-91"><a href="#Conditional_variable_object.2C_by_mutex_.28CondVar.29"><span class="tocnumber">15.6</span> <span class="toctext"><span>Conditional variable object, by mutex (CondVar)</span></span></a></li>
<li class="toclevel-2 tocsection-92"><a href="#Object_of_automatic_unlock_POSIX_mutex_.28MtxAlloc.29"><span class="tocnumber">15.7</span> <span class="toctext"><span>Object of automatic unlock POSIX mutex (MtxAlloc)</span></span></a></li>
<li class="toclevel-2 tocsection-93"><a href="#Object_of_the_string_with_the_access_shared_by_the_global_the_data_resource_.28mutex.29_.28MtxString.29"><span class="tocnumber">15.8</span> <span class="toctext"><span>Object of the string with the access shared by the global the data resource (mutex) (MtxString)</span></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-94"><a href="#Other_generic_objects"><span class="tocnumber">16</span> <span class="toctext">Other generic objects</span></a>
<ul>
<li class="toclevel-2 tocsection-95"><a href="#XML-tag_.28XMLNode.29"><span class="tocnumber">16.1</span> <span class="toctext"><span>XML-tag (XMLNode)</span></span></a></li>
<li class="toclevel-2 tocsection-96"><a href="#Error_exception_.28TError.29"><span class="tocnumber">16.2</span> <span class="toctext"><span>Error exception (TError)</span></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-97"><a href="#Organization_and_structure_of_the_database_of_the_system_components"><span class="tocnumber">17</span> <span class="toctext">Organization and structure of the database of the system components</span></a>
<ul>
<li class="toclevel-2 tocsection-98"><a href="#System_tables"><span class="tocnumber">17.1</span> <span class="toctext">System tables</span></a></li>
<li class="toclevel-2 tocsection-99"><a href="#Tables_of_the_.22Data_acquisition.22_subsystem"><span class="tocnumber">17.2</span> <span class="toctext">Tables of the "Data acquisition" subsystem</span></a></li>
<li class="toclevel-2 tocsection-100"><a href="#Tables_of_the_.22Transports.22_subsystem"><span class="tocnumber">17.3</span> <span class="toctext">Tables of the "Transports" subsystem</span></a></li>
<li class="toclevel-2 tocsection-101"><a href="#Tables_of_the_.22Archives.22_subsystem"><span class="tocnumber">17.4</span> <span class="toctext">Tables of the "Archives" subsystem</span></a></li>
<li class="toclevel-2 tocsection-102"><a href="#Tables_of_the_.22Security.22_subsystem"><span class="tocnumber">17.5</span> <span class="toctext">Tables of the "Security" subsystem</span></a></li>
<li class="toclevel-2 tocsection-103"><a href="#The_structure_of_the_databases_of_the_modules"><span class="tocnumber">17.6</span> <span class="toctext">The structure of the databases of the modules</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-104"><a href="#API_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D1.8F"><span class="tocnumber">18</span> <span class="toctext"><span>API модуля</span></span></a></li>
<li class="toclevel-1 tocsection-105"><a href="#Debugging_and_Testing_OpenSCADA"><span class="tocnumber">19</span> <span class="toctext">Debugging and Testing OpenSCADA</span></a></li>
<li class="toclevel-1 tocsection-106"><a href="#Rules_for_design_and_commenting_of_the_sources_of_OpenSCADA_and_its_modules"><span class="tocnumber">20</span> <span class="toctext"><span>Rules for design and commenting of the sources of OpenSCADA and its modules</span></span></a></li>
<li class="toclevel-1 tocsection-107"><a href="#.D0.A3.D0.BC.D0.BE.D0.B2.D0.BD.D1.96_.D0.BF.D0.BE.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.BD.D1.8F_.D0.BF.D0.BE_.D1.82.D0.B5.D0.BA.D1.81.D1.82.D1.83_.D1.82.D0.B0_.D1.83_.D0.B2.D0.B8.D1.85.D1.96.D0.B4.D0.BD.D0.B8.D1.85"><span class="tocnumber">21</span> <span class="toctext">Умовні позначення по тексту та у вихідних</span></a></li>
<li class="toclevel-1 tocsection-108"><a href="#Links"><span class="tocnumber">22</span> <span class="toctext">Links</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id=".D0.92.D0.BD.D1.83.D1.82.D1.80.D1.96.D1.88.D0.BD.D1.8F_.D1.81.D1.82.D1.80.D1.83.D0.BA.D1.82.D1.83.D1.80.D0.B0"><span class="mw-headline-number">1</span> Внутрішня структура</span></h2>
<p>З метою наочного та доступного сприйняття архітектури OpenSCADA на рисунку 1 зображено статичну діаграму класів OpenSCADA на універсальній мові моделювання (UML).
</p><p>Із діаграми видно, що OpenSCADA містить модульні підсистеми: "Архіви-Історія", "Бази Даних", "Транспорти", "Транспортні протоколи", "Користувацькі Інтерфейси", "Збір Даних" та "Спеціадьні", а також підсистеми: "Безпека" та "Управління Модулями". На діаграмі наведено взаємозв'язки між модульними підсистемами та модулями відповідних типів.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:718px;"><a class="image" href="http://oscada.org/wiki/File:API_uml_classdep.png"><img class="thumbimage" height="836" src="../en/files/API_uml_classdep.png" width="716" /></a>  <div class="thumbcaption">Рис.1. Статична діаграма класів.</div></div></div></div>
<h2><span class="mw-headline" id=".D0.97.D0.B0.D0.B3.D0.B0.D0.BB.D1.8C.D0.BD.D0.B0_.D1.81.D1.82.D1.80.D1.83.D0.BA.D1.82.D1.83.D1.80.D0.B0_.D0.BF.D1.80.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D0.B8_.E2.80.94_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D1.8C.D0.BD.D1.96.D1.81.D1.82.D1.8C"><span class="mw-headline-number">2</span> Загальна структура програми — модульність</span></h2>
<p>Коренем, із якого будується вся програма, є об'єкт <a href="#TSYS">#TSYS</a>. Корінь містить підсистеми <a href="#TSubSYS">#TSubSYS</a>. Підсистеми можуть бути звичайними та модульними. Відмінність модульних підсистем чітко відстежується на рисунку 1. Таким чином, модульні підсистеми обов'язково містять перелік модульних об'єктів <a href="#TModule">#TModule</a>, наприклад, підсистема архівів-історії <a href="#TArchiveS">#TArchiveS</a> містить модульні об'єкти <a href="#TTypeArchivator">#TTypeArchivator</a>. Тим часом, звичайна підсистема таких об'єктів не містить, наприклад, підсистема безпеки <a href="#TSecurity">#TSecurity</a> (рис.2).
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:703px;"><a class="image" href="http://oscada.org/wiki/File:Oscada_struct_uk.png"><img class="thumbimage" height="360" src="files/Oscada_struct_uk.png" width="701" /></a>  <div class="thumbcaption">Рис.2. Ієрархічна структура OpenSCADA.</div></div></div></div>
<p>У процесі ініціалізації кореня <a href="#TSYS">#TSYS</a> визначається глобальна змінна "SYS", яка може використовуватися для прямого звернення до кореню програми із будь якого її вузла. Ініціалізація кореню виконується одноразово із головної функції виклику. Після запуску, управління захоплюється кореневим об'єктом програми до зупинки. Кореневий об'єкт концентрує всі загальні функції OpenSCADA.
</p><p>Продовженням кореневого об'єкту <a href="#TSYS">#TSYS</a>, що здійснює функції обслуговування потоку повідомлень програми, виступає об'єкт <a href="#TMess">#TMess</a>, який доступний посередництвом глобальної змінної "Mess" ініціалізованої коренем програми. Об'єкт містить функції кодування, декодування та локалізації повідомлень.
</p><p>У підсистемах <a href="#TSubSYS">#TSubSYS</a> реалізуються функції, що індивідуальні до кожної підсистеми, та із загальним для всіх підсистем доступом через об'єкт <a href="#TSubSYS">#TSubSYS</a>. Модульна підсистема має можливість розширення функціональності посередництвом модулів, для чого вона надає доступ до модулів свого типа у вигляді модульних об'єктів.
</p><p>Модуль, це складова частина модульної підсистеми. Модуль надає інформацію про себе, своє походження та функції, що експортуються. Окремо взятий модуль реалізує функціонал відповідно до власних потреб.
</p>
<h3><span class="mw-headline" id="The_root_object_system_.28TSYS.29"><span class="mw-headline-number">2.1</span> <span id="TSYS" title="#TSYS">The root object system (TSYS)</span></span></h3>
<table class="wikitable">

<tr>
<td> <b>Inherits:</b> </td>
<td> <a href="#TCntrNode">TCntrNode</a>.
</td></tr></table>
<p><b>Data:</b><br />
Information variables of the program:
</p>
<ul><li> <i>PACKAGE_LICENSE</i> — Distribution license of the program </li>
<li> <i>PACKAGE_DESCR</i> — Brief description of the program</li>
<li> <i>PACKAGE_AUTHOR</i> — Author of the program</li>
<li> <i>PACKAGE_SITE</i> — Web site of the program support</li></ul>
<p>Methods for coding of symbol sequences (enum — TSYS::Code):
</p>
<ul><li> <i>PathEl</i> — element of the path (the characters: '/' and '%' to the form '%2f');</li>
<li> <i>HttpURL</i> — address of the browser (http url);</li>
<li> <i>Html</i> — special characters for use in html;</li>
<li> <i>JavaSc</i> — end of line character for JavaScript;</li>
<li> <i>SQL</i> — SQL-query value;</li>
<li> <i>Custom</i> — selective coding of the specified characters;</li>
<li> <i>base64</i> — encoding in the standard Base64;</li>
<li> <i>FormatPrint</i> — coding/masking of the formatting elements for functions like "printf";</li>
<li> <i>oscdID</i> — coding of the nodes' identifiers;</li>
<li> <i>Bin</i> — encoding of the binary data in text and vice versa;</li>
<li> <i>Reverse</i> — invert the order of characters in the line;</li>
<li> <i>ToLower</i> — convert to the lower case;</li>
<li> <i>ShieldSymb</i> — shielding-encoding symbols with the slash symbol "\" and decoding their back to the real code;</li>
<li> <i>ShieldBin</i> — shielding-encoding all binary symbols [\x0-\x8\xB-\xC\x0E-\x1F] with the slash symbol "\".</li></ul>
<p>Types of representations of the integer in the function TSYS::int2str(), and TSYS::ll2str() (enum — TSYS::IntView):
</p>
<ul><li> <i>Dec</i> — decimal;</li>
<li> <i>Oct</i> — octal;</li>
<li> <i>Hex</i> — hexadecimal.</li></ul>
<p>Structure of redundant station (class — TSYS::SStat):
</p>
<ul><li> <i>int8_t lev;</i> — station level;</li>
<li> <i>bool isLive;</i> — flag "Station Alive";</li>
<li> <i>float cnt;</i> — counter of requests to the remote station or timer of a re-connection try;</li>
<li> <i>ResMtx reqM;</i> — the station requesting functional lock;</li>
<li> <i>SStat( int8_t ilev, bool iisLive = false, float icnt = 0 )</i> — station object constructor with level <i>ilev</i>, initiated as "Alive" <i>iisLive</i> and counter <i>icnt</i>;</li>
<li> <i>SStat( )</i> — constructor by default, initiated as as a missed and an inactive station;</li>
<li> <i>bool isActive( )</i> — station is active.</li></ul>
<p>Structure of OpenSCADA task (class — TSYS::STask):
</p>
<ul><li> <i>STask( pthread_t ithr, char ipolicy, char iprior );</i> — constructor of the task's descriptor for thread <i>ithr</i>, it's scheduling policy <i>ipolicy</i> and priority <i>iprior</i>.</li>
<li> <i>float consumpt( ) const;</i> — the task's last CPU time consumption, in seconds.</li>
<li> <i>float period( );</i> — the task's call instant periodicity, in seconds.</li>
<li> <i>string path;</i> — path.</li>
<li> <i>pthread_t thr;</i> — thread handler.</li>
<li> <i>uint8_t policy, phase;</i> — scheduling policy and phase. </li>
<li> <i>int16_t prior;</i> — scheduling priority. </li>
<li> <i>pid_t tid;</i> — thread's identifier as a Linux process's ID.</li>
<li> <i>ResString cpuSet;</i> — used processors/cores list.</li>
<li> <i>void *(*task) (void *);</i> — pointer to the task.</li>
<li> <i>void *taskArg;</i> — arguments of the task.</li>
<li> <i>unsigned flgs;</i> — flags, "enum Flgs { Detached = 0x01, FinishTask = 0x02; }".</li>
<li> <i>int64_t tm_beg, tm_end, tm_per, tm_pnt, cycleLost, lagMax, consMax;</i> — statistic variables of the task execution.</li></ul>
<p><b>Templates/definitions:</b>
</p>
<ul><li> <i>NSTR_BUF_LEN</i> — Length of string buffers for numbers (50 symbols).</li>
<li> <i>CFG_A_LEN</i> — Maximum attribute size of the configuration cell in XML (100 symbols).</li>
<li> <i>DAQ_APER_FRQ</i> — Frequency of representing the aperiodic invokes, like to "f_start", of the periodic processes in Hz (1000000).</li>
<li> <i>RECURS_DET_HOPS</i> — Hops/depth number of the recursion detection.</li>
<li> <i>ARCH_BUF</i> — Name of requesting the messages buffer ("&lt;buffer&gt;").</li>
<li> <i>ARCH_ALRM</i> — Name of requesting the actual alarms table ("&lt;alarms&gt;").</li>
<li> <i>ARCH_ALRM_CH</i> — Name of requesting for records change of the the actual alarms table ("&lt;alarmsChange&gt;").</li>
<li> <i>ARCH_NOALRM</i> — Name of requesting for the buffer and archivers and without the actual alarms table ("&lt;noalarms&gt;").</li>
<li> <i>__func__</i> — The full name of the calling function.</li>
<li> <i>vmin (a,b)</i> — Determination of the minimum value.</li>
<li> <i>vmax (a,b)</i> — Definition of the maximum value.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TSYS( int argi, char **argb, char **env );</i> — The initialisation constructor.</li>
<li> <i>bool isRunning( );</i> — Sign of the station running state — executing the main threaded module or waiting the stop signal.</li>
<li> <i>bool isFinalKill( );</i> — Sign "The final killing of". It is used for forced disconnection of blocked objects on the the final stage of shutdown.</li>
<li> <i>int stopSignal( );</i> — The return code in the case of system shutdown. Can be used as a sign of "System shutdown" of the various subsystems. </li>
<li> <i>void unload( );</i> — Unload subsystems.</li>
<li> <i>int start(  );</i> — Start of the system. The function is finished only with the finishing of the system. The return code is returned.</li>
<li> <i>void stop( int sig = SIGUSR1 );</i> — Stop program by the signal <i>sig</i>, by default it is SIGUSR1 and SIGUSR2 reserved for projects manager.</li>
<li> <i>string id( ) const;</i> — station ID.</li>
<li> <i>string name( ) const;</i> — Localized name of the station.</li>
<li> <i>void setName( const string &amp;vl );</i> — Setting the localized name of the station.</li>
<li> <i>string ico( string *tp = NULL );</i> — Common station icon obtaining with placing the file type to <i>tp</i>.</li>
<li> <i>string user( ) const;</i> — The system user on behalf of which the system is running.</li>
<li> <i>string host( );</i> — Host name for the station run.</li>
<li> <i>void list( vector&lt;string&gt; &amp;list ) const;</i> — A list of registered subsystems in the system.</li>
<li> <i>bool present( const string &amp;name ) const;</i> — Check the availability of the subsystem.</li>
<li> <i>void add( TSubSYS *sub );</i> — Add/registration of the subsystem.</li>
<li> <i>void del( const string &amp;name );</i> — Removing the subsystem.</li>
<li> <i>AutoHD&lt;TSubSYS&gt; at( const string &amp;name ) const;</i> — Connection to the specified subsystem.</li>
<li> <i>AutoHD&lt;TUIS&gt; ui( );</i> — Direct access to the subsystem "User interfaces".</li>
<li> <i>AutoHD&lt;TArchiveS&gt; archive( );</i> — Direct access to the subsystem "Archives".</li>
<li> <i>AutoHD&lt;TBDS&gt; db( );</i> — Direct access to the subsystem "Databases".</li>
<li> <i>AutoHD&lt;TControllerS&gt; daq( );</i> — Direct access to the subsystem "Data acquisition".</li>
<li> <i>AutoHD&lt;TProtocolS&gt; protocol( );</i> — Direct access to the subsystem "Protocols".</li>
<li> <i>AutoHD&lt;TTransportS&gt; transport( );</i> — Direct access to the subsystem "Transports".</li>
<li> <i>AutoHD&lt;TSpecialS&gt; special( );</i> — Direct access to the subsystem "Special".</li>
<li> <i>AutoHD&lt;TModSchedul&gt; modSchedul( );</i> — Direct access to the subsystem "Module".</li>
<li> <i>AutoHD&lt;TSesurity&gt; sesurity( );</i> — Direct access to the subsystem "Security".</li>
<li> <i>string workDir( );</i> — Working directory of the station.</li>
<li> <i>string modDir( );</i> — Directories with the modules of OpenSCADA, separated by ';', they can include a files' template into the end (/my/modules/path/lib*.so).</li>
<li> <i>string icoDir( );</i> — Directory of the icons of OpenSCADA.</li>
<li> <i>string docDir( );</i> — Directory of the documents of OpenSCADA.</li>
<li> <i>void setWorkDir( const string &amp;wdir, bool init = false );</i> — Setting the working directory of the station.</li>
<li> <i>void setModDir( const string &amp;mdir, bool init = false );</i> — Specifying the directories of the modules of OpenSCADA.</li>
<li> <i>void setIcoDir( const string &amp;idir );</i> — Specifying of the directory of icons of OpenSCADA.</li>
<li> <i>void setDocDir( const string &amp;idir );</i> — Specifying of the directory of documents of OpenSCADA.</li>
<li> <i>string cfgFile( );</i> — Name of configuration file of the system.</li>
<li> <i>XMLNode &amp;cfgRoot( );</i> — Parsed structure of the configuration file.</li>
<li> <i>XMLNode *cfgNode( const string &amp;path, bool create = false );</i> — Node of configuration getting by it path <i>path</i>. Elements of the path creation by it miss <i>create</i>.</li>
<li> <i>void modifCfg( bool chkPossibleWR = false );</i> — Configuration mark to modification or write possibility <i>chkPossibleWR</i>, for next saving to file.</li>
<li> <i>ResRW &amp;cfgRes( );</i> — Lock of the access to the config file tree.</li>
<li> <i>string workDB( );</i> — The full name of the working database.</li>
<li> <i>string mainCPUs( );</i> — Used processors list.</li>
<li> <i>bool clockRT( );</i> — The Real-time clock selection for the tasks planning, else used the monotonic one (by defaults).</li>
<li> <i>int taskInvPhs( );</i> — Number of the tasks invoking phases.</li>
<li> <i>bool saveAtExit( );</i> — Sign - "Save configuration on exit".</li>
<li> <i>int savePeriod( );</i> — Frequency of the automatically saving the station in the database (seconds).</li>
<li> <i>bool modifCalc( );</i> — Set modification for the calculated objects.</li>
<li> <i>void setSelDB( const string &amp;vl );</i> — Installation of the selected database for the specified  boot.</li>
<li> <i>void setMainCPUs( const string &amp;vl );</i> — Setting of used processors list.</li>
<li> <i>void setClockRT( bool vl );</i> — Setting of the Real-time clock selection for the tasks planning.</li>
<li> <i>void setTaskInvPhs( int vl );</i> — Setting number of the tasks invoking phases.</li>
<li> <i>void setSaveAtExit( bool vl );</i> — Setting of the sign - "Save configuration on exit".</li>
<li> <i>void setSavePeriod( int vl );</i> — Set the frequency of the automatically saving of the station to the database (seconds).</li>
<li> <i>void setModifCalc( bool vl );</i> — Set of setting the modification for the calculated objects.</li>
<li> <i>string selDB( );</i> — Chosen DB. Used for selective loading from the specified database in the subsystem "DB".</li>
<li> <i>void setWorkDB( const string &amp;wdb );</i> — Setting of  the full name of the working database.</li>
<li> <i>bool chkSelDB( const string &amp;wDB );</i> — The function of checking for compliance of the specified database <i>wDB</i>  with the selected "selDB()".</li>
<li> <i>XMLNode *cfgCtx( bool last = false );</i> — The global configuration context of the interstation copying or the <i>last</i> setting link, for the access lock used <i>cfgLoadSaveM()</i>.</li>
<li> <i>void setCfgCtx( XMLNode *vl, bool last = false );</i> — Set the global configuration context of the interstation copying or the <i>last</i> setting link, for the access lock used <i>cfgLoadSaveM()</i>. At any operation with the global configuration context the last setting link is cleared.</li>
<li> <i>ResMtx &amp;cfgLoadSaveM( );</i> — Lock of the loading and saving configuration.</li>
<li> <i>static void sighandler( int signal );</i> — Function of the  default handler of the signals of the system as a whole.</li>
<li> <i>unsigned long long sysClk( );</i> — The estimated frequency of the processor on which the system works (Hz). </li>
<li> <i>void clkCalc( );</i> — Calculation of frequency of the processor on which the system works. It is called periodically for the systems with variable CPU  frequency.</li>
<li> <i>unsigned long long shrtCnt( );</i> — The function of the measurement of small intervals of time by the counter of the CPU cycles. Returns the value of the counter of CPU cycles.</li>
<li> <i>static long HZ( );</i> — Time of the system teak  of the CPU.</li>
<li> <i>void taskCreate( const string &amp;path, int priority, void *(*start_routine)(void *), void *arg, int wtm = 5, pthread_attr_t *pAttr = NULL, bool *startSt = NULL );</i> — Create task (thread) with id <i>path</i>, <i>priority</i> (-1...99), task's function <i>start_routine</i> and it argument <i>arg</i>, and also wait for user's code start by flag <i>startSt</i>.</li>
<li> <i>void taskDestroy( const string &amp;path, bool *endrunCntr = NULL, int wtm = 5, bool noSignal = false );</i> — Destroy task with id <i>path</i>, start control flag <i>startCntr</i>. Use <i>noSignal</i> for exclude signal <i>SIGALRM</i> send to the task.</li>
<li> <i>void taskSendSIGALRM( const string &amp;path );</i> — Sending the termination signal "ALARM" to a task with id <i>path</i>.</li>
<li> <i>double taskUtilizTm( const string &amp;path, bool max = false );</i> — Utilization of CPU time, in seconds, for task <i>path</i> or it's maximum <i>max</i>.</li>
<li> <i>static bool taskEndRun( );</i> — Check for the task endrun by signal <i>SIGUSR1</i>.</li>
<li> <i>static const STask&amp; taskDescr( );</i> — Get reference to the task's descriptor.</li>
<li> <i>static int sysSleep( float tm );</i> — System sleep in seconds up to nanoseconds (1e-9).</li>
<li> <i>time_t sysTm( );</i> — System time fast access, from updated cell</li>
<li> <i>static int64_t curTime( clockid_t clc = CLOCK_REALTIME );</i> — The clock <i>clc</i> time in microseconds from the beginning of the era (01.01.1970).</li>
<li> <i>static uint64_t curTimeN( clockid_t clc = CLOCK_REALTIME );</i> — The clock <i>clc</i> time in nanoseconds from the beginning of the era (01.01.1970).</li>
<li> <i>string prjUserDir( );</i> — Directory of the user projects.</li>
<li> <i>bool prjCustMode( );</i> — Custom mode of projects.</li>
<li> <i>void setPrjCustMode( bool vl );</i> — Set for custom mode of projects.</li>
<li> <i>string prjNm( );</i> — Project name of the configuration.</li>
<li> <i>void setPrjNm( const string &amp;vl );</i> — Set project name of the configuration.</li>
<li> <i>bool prjSwitch( const string &amp;prj, bool toCreate = false );</i> — Switch to project <i>prj</i>.</li>
<li> <i>int prjLockUpdPer( );</i> — Get project lock updating period, zero for the lock disable.</li>
<li> <i>bool prjLock( const char *cmd );</i> — Project lock process for the command <i>cmd</i> ("hold", "free", "update").</li>
<li> <i>static void taskSleep( int64_t per, const string &amp;cron = "", int64_t *lag = NULL );</i> — The function of the flow sleep by the grid of absolute time with the period <i>per</i> in the nanosecond or for the scheduled time <i>cron</i>. If set <i>lag</i> then to it will return different value from real and planed wake up time (lost cycles).</li>
<li> <i>static time_t cron( const string &amp;vl, time_t base=0 );</i> — Planning the execution time on the format of the standard Cron <i>vl</i> beginning at the basic time <i>base</i> or at the current time if the base is not specified.</li>
<li> <i>static bool eventWait( bool &amp;m_mess_r_stat, bool exempl, const string &amp;loc, time_t time=0 );</i> — Function of the event waiting <i>exempl</i> for the variable <i>m_mess_r_stat</i> within a specified time interval <i>time</i> for the source <i>loc</i>.</li>
<li> <i>bool cntrEmpty( );</i> — Debug counters checking to empty.</li>
<li> <i>double cntrGet( const string &amp;id );</i> — Debug counter <i>id</i> getting.</li>
<li> <i>void cntrSet( const string &amp;id, double vl );</i> — Debug counter <i>id</i> setting to value <i>vl</i>.</li>
<li> <i>void cntrIter( const string &amp;id, double vl );</i> — Debug counter <i>id</i> iteration to value <i>vl</i>.</li>
<li> <i>bool rdEnable( );</i> — Redundancy enabled, at least one redundancy station presented.</li>
<li> <i>bool rdActive( );</i> — Redundancy active, at least one active station presented.</li>
<li> <i>void rdStList( vector&lt;string&gt; &amp;ls );</i> — List of <i>ls</i> stations into the redundancy.</li>
<li> <i>SStat rdSt( const string &amp;id );</i> — Get copy of state structure of the redundancy station <i>id</i>.</li>
<li> <i>map&lt;string, SStat&gt; rdSts( );</i> — Get copy of list of state structures of redundancy stations.</li>
<li> <i>int rdStLevel( );</i> — Current station level into the redundancy system.</li>
<li> <i>void setRdStLevel( int vl );</i> — Set current station level into the redundancy system.</li>
<li> <i>float rdTaskPer( );</i> — Period of execution of the redundancy processing task.</li>
<li> <i>void setRdTaskPer( float vl );</i> — Set period of execution of the redundancy processing task.</li>
<li> <i>int rdRestConnTm( );</i> — Time of the retry attempts to reconnect to the backup station after its loss in seconds.</li>
<li> <i>void setRdRestConnTm( int vl );</i> — Set time of the retry attempts to reconnect to the backup station after its loss in seconds.</li>
<li> <i>string rdStRequest( XMLNode &amp;req, const string &amp;st = "" );</i> — Common request <i>req</i> to pointed redundancy station <i>st</i>.</li>
<li> <i>static string int2str( int val, IntView view=Dec );</i> — Transformation of a signed integer to the string of the type of view <i>view</i>. </li>
<li> <i>static string uint2str( unsigned val, IntView view=Dec );</i> — Transformation of unsigned integer to the string type of view <i>view</i>.</li>
<li> <i>static string ll2str( long long val, IntView view=Dec );</i> — Transformation of a long integer (64bit) to the string type of view <i>view</i>.</li>
<li> <i>static string real2str( double val, int prec=15, char tp='g');</i> — Real transformation with an accuracy <i>prec</i> signs and type <i>tp</i> to the string.</li>
<li> <i>static double realRound( double val, int dig=0, bool toint=false );</i> — Rounding the real number to the specified digit <i>dig</i> after the decimal point with the possibility of transformation to integer after rounding <i>toint</i>.</li>
<li> <i>static string atime2str( time_t tm, const string &amp;format = "", bool gmt = false );</i> — Astronomic UNIX time <i>tm</i> conversion to a string, in the <i>format</i> of the POSIX-function "strftime()" or "gmtime()", for <i>gmt</i>.</li>
<li> <i>static string time2str( double tm );</i> — Convert time interval, in seconds, to string like "1hour 23min 10sec".</li>
<li> <i>static string cpct2str( double cnt );</i> — Traffic counter <i>cnt</i> (bytes) convert to string like "12.5KiB".</li>
<li> <i>static double str2real( const string &amp;val );</i> — String transformation to the real.</li>
<li> <i>static time_t str2atime( const string &amp;val, const string &amp;format = "", bool gmt = false )</i> — String time <i>val</i> conversion to an astronomic UNIX time, in the <i>format</i> of the POSIX-function "strptime()", and by the function "mktime()" or "timegm()", for <i>gmt</i>.</li>
<li> <i>static string addr2str( void *addr );</i> — Convert addresses into string.</li>
<li> <i>static void *str2addr( const string &amp;str );</i> — Convert string into the address.</li>
<li> <i>static string strTrim( const string &amp;val, const string &amp;cfg = " \n\t\r" );</i> — Deletes from the original string <i>val</i> pointed into <i>cfg</i> (mostly empty) characters at the beginning and end of it.</li>
<li> <i>static string strSepParse( const string &amp;path, int level, char sep, int *off = NULL );</i> — Parsing of the string <i>path</i> into the components separated by the dividing symbol <i>sep</i>, beginning with the offset <i>off</i> and controlling the offset of the element end in itself.</li>
<li> <i>static string {strParse,strParseEnd}( const string &amp;str, int level, const string &amp;sep, int *off = NULL, bool mergeSepSymb = false );</i> — Parse function's "strSepParse()" expanded version which allow using multi-symbols separators and one symbol merging. <i>strParseEnd</i> does the same but from the end.</li>
<li> <i>static string strLine( const string &amp;str, int level, int *off = NULL );</i> — Parsing text lines for different ways to the end of a line (CR, LF and CR/LF).</li>
<li> <i>static string pathLev( const string &amp;path, int level, bool decode = true, int *offCmtbl = NULL, int *off = NULL );</i> — Obtaining of the element/token <i>level</i> of the <i>path</i> with the ability of their decode, starting with the offset <i>off</i> (stopping on the next token begin) or <i>offCmtbl</i> (stopping on next symbol of the current token end — for compatibility).</li>
<li> <i>static string pathLevEnd( const string &amp;path, int level, bool decode = true, int *off = NULL );</i> — Obtaining of the element/token <i>level</i> of the <i>path</i> from the end with the ability of their decode, starting with the offset <i>off</i> (stopping on the next token end).</li>
<li> <i>static string path2sepstr( const string &amp;path, char sep = '.' );</i> — Transformation the path into string with the separator <i>sep</i> of the elements.</li>
<li> <i>static string sepstr2path( const string &amp;str, char sep = '.' );</i> — Transformation of the string with the separator <i>sep</i> of the elements into the path.</li>
<li> <i>static string strEncode( const string &amp;in, Code tp, const string &amp;opt = "" );</i> — Encoding of the string by the specified rule <i>tp</i> and the option <i>opt</i> (symbols by "Custom").</li>
<li> <i>static string strDecode( const string &amp;in, Code tp = Custom, const string &amp;opt = "" );</i> — Decoding of the string <i>in</i> by the specified rule <i>tp</i> and the option <i>opt</i> (separator or "&lt;text&gt;" for "Bin").</li>
<li> <i>static string strMess( const char *fmt, ... );</i> — Formation of the string by the template <i>fmt</i> and arguments. It is implemented on the basis of "printf".</li>
<li> <i>static string strLabEnum( const string &amp;base );</i> — Individual string labels from <i>base</i> forming by increment at end. Supported numbering into decimal, hexadecimal (prefix "0x") or octal (prefix "0") notation.</li>
<li> <i>string strCompr( const string &amp;in, int lev=-1);</i> — Compression of the string <i>in</i> with the compression level <i>lev</i>.</li>
<li> <i>string strUncompr( const string &amp;in );</i> — Decompression of the string <i>in</i>.</li>
<li> <i>static inline uint16_t getUnalign16( const void *p ); static inline uint32_t getUnalign32( const void *p ); static inline uint64_t getUnalign64( const void *p );</i> — Unaligned read for unsigned </li>
<li> <i>static inline int getUnalignInt( const void *p );</i> — Unaligned read for integer from buffer by offset.</li>
<li> <i>static inline float getUnalignFloat( const void *p );</i> — Unaligned read by real "float" from buffer by offset.</li>
<li> <i>static inline double getUnalignDbl( const void *p );</i> — Unaligned read by real "double" from buffer by offset.</li>
<li> <i>static uint16_t i16_LE( uint16_t in ); static uint32_t i32_LE( uint32_t in ); static uint64_t i64_LE( uint64_t in );</i> — Byte order conversion for integer <i>in</i> from Little-Endian (LE) to internal represent.</li>
<li> <i>static uint16_t i16_BE( uint16_t in ); static uint32_t i32_BE( uint32_t in ); static uint64_t i64_BE( uint64_t in );</i> —Byte order conversion for integer <i>in</i> from Big-Endian (BE) to internal represent.</li>
<li> <i>static float floatLE( float in ); static double doubleLE( double in );</i> — Real number <i>in</i> conversion from internal to format IEEE754 Little-Endian (LE).</li>
<li> <i>static float floatLErev( float in ); static double doubleLErev( double in );</i> — Real number <i>in</i> conversion from format IEEE754 Little-Endian (LE) to internal.</li>
<li> <i>static float floatBE( float in ); static double doubleBE( double in );</i> — Real number <i>in</i> conversion from internal to format IEEE754 Big-Endian (BE).</li>
<li> <i>static float floatBErev( float in ); static double doubleBErev( double in );</i> — Real number <i>in</i> conversion from format IEEE754 Big-Endian (BE) to internal.</li>
<li> <i>string optDescr( );</i> — Full localized help on the options of the command line and parameters of the configuration file.</li>
<li> <i>string getCmdOpt( int &amp;curPos, string *argVal = NULL ); static string getCmdOpt_( int &amp;curPos, string *argVal, int argc, char **argv );</i> — Command line parameters parsing by cursor scanning <i>curPos</i>. Return argument name and it's possible value into <i>argVal</i>. Implement formats for short keys: "-v", "-v val", "-abcv", "-abcv val"; and long keys: "--var", "--var=val", "--var val".</li>
<li> <i>bool cmdOptPresent( const string &amp;opt );</i> — Check the command-line option <i>opt</i> for presence.</li>
<li> <i>string cmdOpt( const string &amp;opt, const string &amp;setVl = "" );</i> — Get command-line option <i>opt</i>. Set it at <i>setVl</i> if pointing.</li>
<li> <i>int permCrtFiles( bool exec = false );</i> — get permission for files created OpenSCADA in form 0777 (RWXRWXRWX), where <i>exec</i> is not mask the bit 01.</li>
<li> <i>ResMtx *commonLock( const string &amp;nm );</i> — creates and gets a lock for the name <i>nm</i> — for non multithread system functions, typically.</li>
<li> <i>static void ctrListFS( XMLNode *nd, const string &amp;fsBase, const string &amp;fileExt = "" );</i> — Browsing list for file system's items from base <i>fsBase</i>, for the files with extensions <i>fileExt</i> in list "png;jpeg;gif;".</li></ul>
<p><b>Public attributes:</b>
</p>
<ul><li> <i>AutoHD&lt;TModule&gt; mainThr;</i> — Connection to a module executing in the main thread.</li></ul>
<p><b>Short calls for global functions into "OSCADA" namespace:</b>
</p>
<ul><li> <i>template &lt;class fVal&gt; fVal fmin( fVal a, fVal b ); template &lt;class fVal&gt; fVal fmax( fVal a, fVal b );</i> — functional templates for obtain of two values minimum and maximum.</li>
<li> <i>inline string i2s( int val, TSYS::IntView view = TSYS::Dec )</i> —&gt; TSYS::int2str(val, view);</li>
<li> <i>inline string u2s( unsigned val, TSYS::IntView view = TSYS::Dec )</i> —&gt; TSYS::uint2str(val, view);</li>
<li> <i>inline string ll2s( long long val, TSYS::IntView view = TSYS::Dec )</i> —&gt; TSYS::ll2str(val, view);</li>
<li> <i>inline string r2s( double val, int prec = 15, char tp = 'g' )</i> —&gt; TSYS::real2str(val, prec, tp);</li>
<li> <i>inline double rRnd( double val, int dig = 0, bool toint = false )</i> —&gt; TSYS::realRound(val, dig, toint);</li>
<li> <i>inline string atm2s( time_t tm, const string &amp;format = "", bool gmt = false )</i> —&gt; TSYS::atime2str(tm, format, gmt);</li>
<li> <i>inline string tm2s( double tm )</i> —&gt; TSYS::time2str(tm);</li>
<li> <i>inline int s2i( const string &amp;val )</i> —&gt; atoi(val.c_str());</li>
<li> <i>inline long s2l( const string &amp;val, int base = 10 )</i> —&gt; strtol(val.c_str(), NULL, base);</li>
<li> <i>inline unsigned long s2u( const string &amp;val, int base = 10 )</i> —&gt; strtoul(val.c_str(), NULL, base);</li>
<li> <i>inline long long s2ll( const string &amp;val )</i> —&gt; atoll(val.c_str());</li>
<li> <i>inline double s2r( const string &amp;val )</i> — TSYS::str2real(val);</li>
<li> <i>inline string sTrm( const string &amp;val, const string &amp;cfg = " \n\t\r")</i> —&gt; TSYS::strTrim(val, cfg);</li></ul>
<h3><span class="mw-headline" id="Object_of_the_messages_system_.28TMess.29"><span class="mw-headline-number">2.2</span> <span id="TMess" title="#TMess">Object of the messages system (TMess)</span></span></h3>
<p><b>Data:</b><br />
Types (levels) of messages (enum — TMess::Type):
</p>
<ul><li> <i>Debug</i> (0) — debug;</li>
<li> <i>Info</i> (1) — information;</li>
<li> <i>Notice</i> (2) — the notification;</li>
<li> <i>Warning </i> (3) — warning;</li>
<li> <i>Error</i> (4) — error;</li>
<li> <i>Crit</i> (5) — critical situation;</li>
<li> <i>Alert</i> (6) — alert;</li>
<li> <i>Emerg</i> (7) — emergency;</li>
<li> <i>MaxLev</i> (79) — maximum message level, where [0...7] are the generic named levels and the second digit is them sub-levels.</li></ul>
<p>Direction for the messages (enum — TMess::Direct):
</p>
<ul><li> <i>DIR_SYSLOG</i> (0x1) — to SYSLOG;</li>
<li> <i>DIR_STDOUT</i> (0x2) — to standard output;</li>
<li> <i>DIR_STDERR</i> (0x4) — to standard errors output;</li>
<li> <i>DIR_ARCHIVE</i> (0x8) — to messages archive.</li></ul>
<p>The structure of the message (class — TMess::SRec):
</p>
<ul><li> <i>SRec( ); SRec( time_t itm, int iutime = 0, const string &amp;icat = "", int8_t ilev = 0, const string &amp;imess = "" );</i> — the class constructors;</li>
<li> <i>bool operator==( SRec &amp;vl );</i> — the object comparing;</li>
<li> <i>time_t time; </i> — time of the message;</li>
<li> <i>int utime;</i> — microsecond of the message time;</li>
<li> <i>string categ;</i> — category of messages (usually the way inside the system);</li>
<li> <i>int8_t level;</i> — the level of the message;</li>
<li> <i>string mess;</i> — message.</li></ul>
<p><b>Templates:</b>
</p>
<ul><li> <i>_(mess); trS(mess)</i> — Wrappers over the translation of the messages function for the provision of the accepted by the most of the programs translation of the messages. trS() also provides the prestoring, when the base message stored together the catalogue, that is "{base}\000{cat}" and what is translated really in second call inward the translation context or _().</li>
<li> <i>trD(base)</i> — Wrapper over the text variables dynamic translation using the translation context to the function <i>translGet()</i>.</li>
<li> <i>trD_L(base,lng); trD_U(base,usr); trD_LU(base,lng,usr)</i> — Wrappers over the text variables dynamic translation functions by language and user.</li>
<li> <i>trDSet(base,mess)</i> — Wrapper over the text variables dynamic translation set using the translation context to the function <i>translSet()</i>.</li>
<li> <i>trDSet_L(base,lng,mess); trDSet_U(base,usr,mess); trDSet_LU(base,lng,usr,mess)</i> — Wrapper over the text variables dynamic translation set functions by language and user.</li>
<li> <i>FTM(rec); FTM2(tm, utm)</i> — Get a full time of the message, in microseconds, using the two fields of time of the message structure. </li>
<li> <i>mess_lev()</i> — The system's messages level. Often used for debug mode check (=Debug).</li>
<li> <i>message( cat, lev, fmt, args ... )</i> — Formation of the the full message. </li>
<li> <i>mess_debug( cat, fmt, args ... )</i> — Formation of the debug message. </li>
<li> <i>mess_info( cat, fmt, args ... )</i> — Formation of the information message. </li>
<li> <i>mess_note( cat, fmt, args ... )</i> — Formations of the message - notification. </li>
<li> <i>mess_warning( cat, fmt, args ... )</i> — Formation of the warning message. </li>
<li> <i>mess_err( cat, fmt, args ... )</i> — Formation of the error message. </li>
<li> <i>mess_crit( cat, fmt, args ... )</i> — Formation of the critical condition message. </li>
<li> <i>mess_alert( cat, fmt, args ... )</i> — Formation of the alarm message. </li>
<li> <i>mess_emerg( cat, fmt, args ... )</i> — Formation of the emergency message. </li>
<li> <i>message_( cat, lev, fmt, args ... )</i> — Formation of the the full message (selected level and debug categories are ignored). </li>
<li> <i>mess_debug_( cat, fmt, args ... )</i> — Formation of the debug message (selected level and debug categories are ignored). </li>
<li> <i>mess_info_( cat, fmt, args ... )</i> — Formation of the information message (selected level is ignored). </li>
<li> <i>mess_note_( cat, fmt, args ... )</i> — Formations of the message - notification (selected level is ignored). </li>
<li> <i>mess_warning_( cat, fmt, args ... )</i> — Formation of the warning message (selected level is ignored). </li>
<li> <i>mess_err_( cat, fmt, args ... )</i> — Formation of the error message (selected level is ignored). </li>
<li> <i>mess_crit_( cat, fmt, args ... )</i> — Formation of the critical condition message (selected level is ignored). </li>
<li> <i>mess_alert_( cat, fmt, args ... )</i> — Formation of the alarm message (selected level is ignored). </li>
<li> <i>mess_emerg_( cat, fmt, args ... )</i> — Formation of the emergency message (selected level is ignored). </li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>void load( );</i> — Download. </li>
<li> <i>void save( );</i> — Saving. </li>
<li> <i>string codeConv( const string &amp;fromCH, const string &amp;toCH, const string &amp;mess);</i> — Conversion of the codepage of the messages. </li>
<li> <i>string codeConvIn( const string &amp;fromCH, const string &amp;mess);</i> — Conversion the codepage of the messages into the internal system codepage. </li>
<li> <i>string codeConvOut ( const string &amp;toCH, const string &amp;mess);</i> — Conversion of the message from the internal system codepage.</li>
<li> <i>string I18N( const string &amp;mess, const char *mLang = NULL, const char *d_name = NULL );</i> — Getting the message <i>mess</i> in the language <i>mLang</i> for the system translation from the directory <i>d_name</i>, NULL for the OpenSCADA core.</li>
<li> <i>string lang( );</i> — Language of the system, as en_US.UTF-8. </li>
<li> <i>string langCode( const string &amp;user = "", bool onlyUser = false );</i> — Language code of the system. Specify <i>user</i> for obtaining its language and <i>onlyUser</i> for only that.</li>
<li> <i>string &amp;charset( );</i> — The system codepage. </li>
<li> <i>int logDirect( );</i> — Receivers to whom the system messages (stdout, stderr, syslog, archive) are sent.</li>
<li> <i>int messLevel( );</i> — The level below which the messages are ignored.</li>
<li> <i>static bool messLevelTest( int8_t condLev, int8_t messLev );</i> — The message level testing for <i>messLev</i> &gt;= <i>condLev</i> counting the message sub-levels — the second digit, where <i>condLev</i> is ±[0...7] and <i>messLev</i> is ±[0...79].</li>
<li> <i>string selDebCats( );</i> — Selected debug categories (by separated ';' list).</li>
<li> <i>bool isUTF8( );</i> — Internal codepage is UTF-8.</li>
<li> <i>void setLang( const string &amp;lang );</i> — Setting of the system language (localization).</li>
<li> <i>void setLogDirect( int dir );</i> — Setting receivers to which the system messages are sent. For <i>dir</i> the bit mask is used. Where: </li></ul>
<dl><dd>1 — to syslog;</dd>
<dd>2 — to stdout;</dd>
<dd>4 — to stderr;</dd>
<dd>8 — to the archive.</dd></dl>
<ul><li> <i>void setMessLevel( int level );</i> — Setting a minimum level of processed messages. </li>
<li> <i>void setSelDebCats( const string &amp;vl );</i> — Debug categories set (by separated ';' list).</li>
<li> <i>void put( const char *categ, int8_t level, const char *fmt,  ... );</i> — The message forming for the current time with the category <i>categ</i>, the <i>level</i>, the formatted message <i>fmt</i> and the followed arguments.</li>
<li> <i>void put_( const char *categ, int8_t level, const char *fmt, ... ); void putArg( const char *categ, int8_t level, const char *fmt, va_list ap );</i> — The message forming for the current time (selected level and debug categories are ignored) with the category <i>categ</i>, the <i>level</i>, the formatted message <i>fmt</i> and the followed arguments.</li>
<li> <i>void get( time_t b_tm, time_t e_tm, vector&lt;TMess::SRec&gt; &amp;recs, const string &amp;category = "", int8_t level = Debug );</i> — Get the message from the archive for the period of time <i>b_tm</i> — <i>e_tm</i> under the category template <i>category</i> and minimum level <i>level</i>. </li>
<li> <i>string langCodeBase( );</i> — The language of basic variables of the text messages.</li>
<li> <i>string langBase( );</i> — The language-locale of basic variables and the locales list used in the project translation, separated by ';'.</li>
<li> <i>string langToLocale( const string &amp;lang );</i> — Getting the complete locale from <i>langBase()</i> at the language <i>lang</i>.</li>
<li> <i>bool translCfg( );</i> — The configuration translation sign, combined as "<b>langCodeBase().size() &amp;&amp; langCode()&nbsp;!= langCodeBase()</b>".</li>
<li> <i>bool translDyn( bool plan = false );</i> — Mode "Dynamic translation" or the <i>plan</i> to next start.</li>
<li> <i>bool translEnMan( );</i> — The sign "Enabled translations manager", for activation of the built translation messages index and the translation manager.</li>
<li> <i>string translLangs( );</i> — List of translation languages, into the manager.</li>
<li> <i>string translFld( const string &amp;lng, const string &amp;fld, bool isCfg = false );</i> — Representing the translated field name by the field name <i>fld</i> and language <i>lng</i> for configuration <i>isCfg</i> or DB.</li>
<li> <i>bool isMessTranslable( const string &amp;vl );</i> — Checking the message <i>vl</i> for availability of it translation, has no only space, digit and punctuation symbols.</li>
<li> <i>void setLangBase( const string &amp;vl );</i> — Setting the language-locale of basic variables and the locales list used in the project translation.</li>
<li> <i>void setTranslDyn( bool val, bool plan = true );</i> — Setting the mode "Dynamic translation" or the <i>plan</i> to value <i>val</i> for next start.</li>
<li> <i>void setTranslEnMan( bool vl, bool passive = false );</i> — Setting "Enabled translation manager" to value <i>vl</i> and passive mode <i>passive</i>.</li>
<li> <i>void setTranslLangs( const string &amp;vl );</i> — Setting a list of translation languages.</li>
<li> <i>string translGet( const string &amp;base );</i> — Getting translation for <i>base</i> text variable using the translation context.</li>
<li> <i>string translGet( const string &amp;base, const string &amp;lang, const string &amp;src = "" ); string translGetU( const string &amp;base, const string &amp;user, const string &amp;src = "" ); string translGetLU( const string &amp;base, const string &amp;lang, const string &amp;user, const string &amp;src = "" );</i> — Getting translation for <i>base</i> text variable for language <i>lang</i> or <i>user</i> and optional source <i>src</i>.</li>
<li> <i>string translSet( const string &amp;base, const string &amp;mess );</i> — Setting translation for <i>base</i> text variable to value <i>mess</i> using the translation context.</li>
<li> <i>string translSet( const string &amp;base, const string &amp;lang, const string &amp;mess, bool *needReload = NULL ); string translSetU( const string &amp;base, const string &amp;user, const string &amp;mess, bool *needReload = NULL ); string translSetLU( const string &amp;base, const string &amp;lang, const string &amp;user, const string &amp;mess, bool *needReload = NULL );</i> — Setting translation for <i>base</i> text variable for language <i>lang</i> or <i>user</i> and optional source <i>src</i> to value <i>mess</i>.</li>
<li> <i>void translReg( const string &amp;mess, const string &amp;src, const string &amp;prms = "" );</i> — Registering the translated message <i>mess</i> with source <i>src</i> and appended parameters <i>prms</i> into the translations index.</li>
<li> <i>string translCacheGet( const string &amp;key, bool *ok = NULL );</i> — Getting the translation message at the <i>key</i> in the form "{lang}#{base}[\000{cat}]" from the translation cache. Where <i>cat' can be: EMPTY — for dynamic messages, "sys" — for system messages and "user" — for the users used in the dynamic language obtaining. You can pass </i>ok<i> for detection the message really placing in the cache.</i></li>
<li> <i>void translCacheSet( const string &amp;key, const string &amp;val );</i> — Setting the translation message <i>val</i> at the <i>key</i> to the translation cache.</li>
<li> <i>void translCacheLimits( time_t tmLim = 0, const char *clrCat = NULL );</i> — Processing the translation cache limits at the size <i>trMessCache</i> and the nonzero time <i>tmLim</i>. Also that can clear the messages in the category <i>clrCat</i>.</li>
<li> <i>void translIdxCacheUpd( const string &amp;base, const string &amp;lang, const string &amp;mess, const string &amp;src );</i> — Updating the operative translation messages' index and cache in the MULTILANGUAGE-DYNAMIC mode.</li>
<li> <i>bool translItSplit( const string &amp;base, const string &amp;srcFltr = "" );</i> — Splitting the BASE message <i>base</i> per it sources and only for matched ones to <i>srcFltr</i>.</li>
<li> <i>bool translItRemTrs( const string &amp;base, const string &amp;srcFltr = "" );</i> — Removing the BASE message <i>base</i> from the individual messages table "Trs" and only for matched sources to <i>srcFltr</i>.</li>
<li> <i>string trCtx( const string &amp;user_lang = mess_TrModifMark, bool *hold = NULL );</i> — Getting (by default) and registering(no empty)/clearing(empty) the translation context <i>user_lang</i> bound to the call pthread. <i>hold</i> can be pointed to detect the context already registered and do not clear that.</li>
<li> <i>static string labStor( bool nogen = false ); static string labStorRemGenStor( ); static string labSecCRON( ); static string labSecCRONsel( ); static string labTaskPrior( ); static string labMessCat( ); static string labStdOutTrs( );</i> — Common help labels.</li>
<li> <i>int getUTF8( const string &amp;str, int off = 0, int32_t *symb = NULL );</i> — Get and parse a UTF-8 symbol.</li>
<li> <i>static string setUTF8( int32_t symb );</i> — Set, form and return a UTF-8 symbol from their code <i>symb</i>.</li></ul>
<h3><span class="mw-headline" id="Object_subsystem_.28TSubSYS.29"><span class="mw-headline-number">2.3</span> <span id="TSubSYS" title="#TSubSYS">Object subsystem (TSubSYS)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TCntrNode">TCntrNode</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td><i><a href="#TArchiveS">TArchiveS</a>, <a href="#TProtocolS">TProtocolS</a>, <a href="#TBDS">TBDS</a>, <a href="#TFunctionS">TFunctionS</a>, <a href="#TSesurity">TSesurity</a>, <a href="#TModShedul">TModShedul</a>, <a href="#TTransportS">TTransportS</a>, <a href="#TUIS">TUIS</a>, <a href="#TSpecialS">TSpecialS</a>, <a href="#TControllerS">TControllerS</a>.</i>
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TSubSYS( const string &amp;id, bool mod = false );</i> — Initialize the constructor. Sign <i>mod</i> indicates that subsystem is module one. </li>
<li> <i>string subId( ) const;</i> — ID of the subsystem. </li>
<li> <i>virtual string subName( );</i> — Localized name of the subsystem.</li>
<li> <i>bool subStartStat( );</i> — Sign of the subsystem execution. </li>
<li> <i>bool subModule( ) const;</i> — Sign of the modularity of the subsystem.</li>
<li> <i>virtual int subVer( ) const;</i> — Version of the subsystems. </li>
<li> <i>virtual void subStart( );</i> — Start of the the subsystem. </li>
<li> <i>virtual void subStop( );</i> — Stop of the subsystem. </li>
<li> <i>void modList( vector &lt;string&gt; &amp;list );</i> — List <i>list</i> of the modules of the modular subsystem. </li>
<li> <i>bool modPresent( const string &amp;name );</i> — Check for the availability of the module <i>name</i>. </li>
<li> <i>void modAdd( TModule *modul );</i> — Add/registration of the module <i>modul</i>. </li>
<li> <i>void modDel( const string &amp;name );</i> — Deleting of the module <i>name</i>. </li>
<li> <i>AutoHD &lt;TModule&gt; modAt( const string &amp;name ) const;</i> — Connection to the module <i>name</i>. </li>
<li> <i>virtual void perSYSCall( unsigned int cnt );</i> —  Periodic call from system thread, with period 10 seconds and seconds counter <i>cnt</i>.</li>
<li> <i>virtual bool rdProcess( XMLNode *reqSt = NULL );</i> — Processing of redundancy of the subsystem, calls from the system's task of redundancy. <i>reqSt</i> pass a result of a state request to the redundancy station for this subsystem.</li>
<li> <i>virtual string optDescr( );</i> — Localized help on the options of the command line and parameters of the configuration file for the whole subsystem, includes its modules.</li>
<li> <i>TSYS &amp;owner( ) const;</i> — The system - the owner of the subsystem. </li></ul>
<h3><span class="mw-headline" id="Object_Module_.28TModule.29"><span class="mw-headline-number">2.4</span> <span id="TModule" title="#TModule">Object Module (TModule)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TCntrNode">TCntrNode</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td><i><a href="#TProtocol">TProtocol</a>, <a href="#TTypeBD">TTypeBD</a>, <a href="#TTypeArchive">TTypeArchive</a>, <a href="#TTypeTransport">TTypeTransport</a>, <a href="#TUI">TUI</a>, <a href="#TSpecial">TSpecial</a>, <a href="#TTypeDAQ">TTypeDAQ</a></i>
</td></tr></table>
<p><b>Data:</b><br />
The data structure which identifies the module (class — TModule::SAt):
</p>
<ul><li> <i>SAt( const string &amp;iid, const string &amp;itype = "", int itver = 0 );</i> — initialize the constructor; </li>
<li> <i>bool operator ==(const TModule::SAt &amp;amst ) const;</i> — comparison function identifiers modules;</li>
<li> <i>string id;</i> — the identifier of the module; </li>
<li> <i>string type;</i> — the type of module (subsystem); </li>
<li> <i>int tVer;</i> — version of the type of module (subsystem) to which the module is designed. </li></ul>
<p>The structure of exported functions (class — TModule::ExpFunc):
</p>
<ul><li> <i>string prot;</i> — a prototype of the function; </li>
<li> <i>string dscr;</i> — localized description of the function; </li>
<li> <i>void (TModule::*ptr) ();</i> — relative address of the function (with respect to the object module). </li></ul>
<p><b>Public methods</b>:
</p>
<ul><li> <i>TModule( const string &amp;id );</i> — Initialize the constructor of module <i>id</i>.</li>
<li> <i>string modId( );</i> — ID of the module.</li>
<li> <i>string modName( );</i> — Localized name of the module. </li>
<li> <i>virtual void modStart( );</i> — Start of the module. </li>
<li> <i>virtual void modStop( );</i> — Stop of the module. </li>
<li> <i>virtual void modInfo( vector&lt;string&gt; &amp;list );</i> — A list of information items <i>list</i> of the module.</li>
<li> <i>virtual string modInfo (const string &amp;name );</i> — Getting the contents of the specified information item <i>name</i>. For get the item on different language, at [../ProgrammManual#h932-1 dynamic messages translation], you can set the name in way "{Name}:{lang}".</li>
<li> <i>virtual void perSYSCall( unsigned int cnt );</i> —  Periodic call from system thread, with period 10 seconds and seconds counter <i>cnt</i>.</li>
<li> <i>void modFuncList( vector&lt;string&gt; &amp;list );</i> — The list of exported functions <i>list</i> of the module.</li>
<li> <i>bool modFuncPresent( const string &amp;prot );</i> — Check the availability of the specified function by its prototype <i>prot</i>.</li>
<li> <i>ExpFunc &amp;modFunc (const string &amp; prot);</i> — Get the information about exported function of the module <i>prot</i>.</li>
<li> <i>bool modFunc( const string &amp;prot, void (TModule::**offptr)(), bool noex = false );</i> — Getting the relative address <i>offptr</i> of the exported function <i>prot</i>. Returns TRUE for successful and the non-exceptional mode <i>noex</i>.</li>
<li> <i>string I18N( const string &amp;mess, const char *mLang = NULL );</i> — Localisation of modular message <i>mess</i> in accordance with the current locale and user language <i>mLang</i> in the MULTILANGUAGE modes.</li>
<li> <i>virtual string optDescr( );</i> — Localized help on the options of the command line and parameters of the configuration file for the module.</li>
<li> <i>TSubSYS &amp;owner( ) const;</i> — Subsystem - the owner of the module.</li></ul>
<p><b>Protected Attributes:</b>
</p>
<ul><li> <i>string mModName;</i> — Name of the module. </li>
<li> <i>string mModDescr;</i> — Description of the module. </li>
<li> <i>string mModType;</i> — Type of module. </li>
<li> <i>string mModVers;</i> — Version of the module. </li>
<li> <i>string mModAutor;</i> — Author of the module. </li>
<li> <i>string mModLicense;</i> — License of the module. </li>
<li> <i>string mModSource;</i> — Source/origin of the module. </li></ul>
<p><b>Protected methods are:</b>
</p>
<ul><li> <i>void modInfoMainSet( const string &amp;name, const string &amp;type, const string &amp;vers, const string &amp;author, const string &amp;descr, const string &amp;license, const string &amp;source );</i> — Main module information set.</li>
<li> <i>void modFuncReg (ExpFunc * func);</i> — Registration of the exported by module functions.</li></ul>
<h2><span class="mw-headline" id="Subsystem_.22DB.22"><span class="mw-headline-number">3</span> <span id="TBDS" title="#TBDS">Subsystem "DB"</span></span></h2>
<p>Subsystem "Databases" is represented by the object <i>TBDS</i>, which contains a modular objects of the following types of DB <i>TTypeBD</i>. Each type of database contains objects of individual databases of that type <i>TBD</i>. Each database in its turn, contains the objects of their tables <i>TTable</i> (Fig. 3).
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:370px;"><a class="image" href="http://oscada.org/wiki/File:Oscada_subsys_db_str.png"><img class="thumbimage" height="297" src="../en/files/Oscada_subsys_db_str.png" width="368" /></a>  <div class="thumbcaption">Fig. 3. Hierarchical structure of the subsystem "DB".</div></div></div></div>
<p>The subsystem provides the basic functions to access the type of database, as well as generalized functions for the manipulation of the databases and tables. For example, to hide the source of data, which may be a configuration file, the functions of an abstract access to the data source are provided. For the storage system-wide data the system table and the function of the abstract to access it are provided. Consequently, system-wide data can be stored in the configuration file and in the database table. More about the data organisation conception you can read in the <a href="#Data">Data in OpenSCADA and their storage</a> section.
</p><p>Being a modular object, the type of database (TTypeBD) provides access to the implementation of the mechanism of one or another database. Access is made through a public databases of the module of a given type of database. Open/registered database is described in the table of databases to be opened or in the configuration file. There is, the so-called, the working database, which is always opens and is shown in the configuration file. DB which support the SQL-queries can grant access based on direct SQL-queries.
</p><p>While working, the components of OpenSCADA open tables (TTable) available in the database and work with them.
</p>
<h3><span class="mw-headline" id="Object_of_subsystem_.22Database.22_.28TBDS.29"><span class="mw-headline-number">3.1</span> <span id="TBDS" title="#TBDS">Object of subsystem "Database" (TBDS)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TSubSYS">TSubSYS</a></i>
</td></tr></table>
<p><b>Data:</b><br />
Flags of the function <i>dbList()</i> (enum – TDBS::DBLsFlg):
</p>
<ul><li> <i>LsNoFlg</i> (0) — no list flag;</li>
<li> <i>LsCheckSel</i> (0x01) —  points to the necessity of verifying the fact of boot from the selected database and to insert to the db list the only selected one;</li>
<li> <i>LsInclGenFirst</i> (0x02) — include the Generic Storage "<b>*.*</b>" in the first.</li></ul>
<p>Flags of the queries to the storage (enum – TDBS::ReqGenFlg):
</p>
<ul><li> <i>NoFlg</i> (0) — no query flag;</li>
<li> <i>NoException</i> (0x01) — do not generate the exceptions, return error result;</li>
<li> <i>OnlyCfg</i> (0x02) — force request to the configuration file, in genPrmGet(), genPrmSet() and dataSet() only;</li></ul>
<dl><dd> <i>Specific flags</i></dd></dl>
<ul><li> <i>UseTranslation</i> (0x04) — use the translation of the text variable, in genPrmGet() and genPrmSet() only;</li>
<li> <i>UseCache</i> (0x04) — use the cache, in dataSeek() only, defines the seek cache using — preloading the result in whole and significant acceleration, as the unique cacheKey this function uses the <i>cfg</i> address.</li>
<li> <i>UseAllKeys</i> (0x04) — use all keys, in dataDel() only, is used to indicate the necessity of the all keys set fro their using while deleting with the restoration of the original state of the keys selection when the function is finished. If this flag is not set, the early selected keys are used to perform the operation.</li></ul>
<p><b>Public generic static methods:</b>
</p>
<ul><li> <i>static string fullDBSYS( );</i> — The full name of the system table.</li>
<li> <i>static string fullDB( );</i> — The full name of the table with a description of the registered databases.</li>
<li> <i>static string realDBName( const string &amp;bdn, bool back = false );</i> — Conversion of the full template name of the database or table (of view *.*.myTbl) in the real name. Actually the replacement of the special elements '*' by the elements of the working DB. Use <i>back</i> for the backward conversion.</li>
<li> <i>static string dbPart( const string &amp;bdn, bool tbl = false );</i> — Getting the generic storage address part or the table at <i>tbl</i> from the common storage name <i>bdn</i>.</li>
<li> <i>static void dbList( vector&lt;string&gt; &amp;ls, char flags = LsNoFlg );</i> — List of available databases with the DBLsFlg <i>flags</i>.</li>
<li> <i>static AutoHD&lt;TTable&gt; tblOpen( const string &amp;bdn, bool create = false );</i> — Opening the table <i>bdn</i> of the storage by it full path with the creation <i>create</i> at absence.</li>
<li> <i>static void tblClose( const string &amp;bdn, bool del = false );</i> — Closing the table <i>bdn</i> of the storage by it full path with deleting at <i>del</i>.</li>
<li> <i>static bool dataSeek( const string &amp;bdn, const string &amp;path, int lev, TConfig &amp;cfg, char flags = NoFlg, XMLNode *localCfgCtx = NULL );</i> — Complete scanning of the records on the storage according to the ReqGenFlg <i>flags</i>. If the DB name <i>bdn</i> or path <i>path</i> to the Configuration File are not pointed, their processing is skipped. More about conditions of using the Configuration File and the Data Bases read in the <a href="#DataConcept">Data storing conception</a>. <i>localCfgCtx</i> is used for loading from the local configuration context, prepared in <i>dataSet()</i>, and it missing causes for checking and using, at presence, the global configuration context <i>SYS-&gt;cfgCtx()</i>.</li>
<li> <i>static bool dataGet( const string &amp;bdn, const string &amp;path, TConfig &amp;cfg, char flags = NoFlg, XMLNode *localCfgCtx = NULL );</i> — Getting the record from the storage according to the ReqGenFlg <i>flags</i>. If the DB name <i>bdn</i> or path <i>path</i> to the configuration file are not pointed, their processing is skipped. More about conditions of using the Configuration File and the Data Bases read in the <a href="#DataConcept">Data storing conception</a>. <i>localCfgCtx</i> is used for loading from the local configuration context, prepared in <i>dataSet()</i>, and it missing causes for checking and using, at presence, the global configuration context <i>SYS-&gt;cfgCtx()</i>.</li>
<li> <i>static bool dataSet( const string &amp;bdn, const string &amp;path, TConfig &amp;cfg, char flags = NoFlg, XMLNode *localCfgCtx = NULL );</i> — Setting/Saving the record to the storage according to the ReqGenFlg <i>flags</i>. If the DB name <i>bdn</i> or path <i>path</i> to the configuration file are not pointed, their processing is skipped. More about conditions of using the Configuration File and the Data Bases read in the <a href="#DataConcept">Data storing conception</a>. <i>localCfgCtx</i> is used for saving to the local configuration context, is prepared for <i>dataSeek()</i> and <i>dataGet()</i>, and it missing causes for checking and using, at presence, the global configuration context <i>SYS-&gt;cfgCtx()</i>.</li>
<li> <i>static bool dataDel( const string &amp;bdn, const string &amp;path, TConfig &amp;cfg, char flags = NoFlg );</i> — Deleting the record in the storage according to the ReqGenFlg <i>flags</i>. If the DB name <i>bdn</i> or path <i>path</i> to the configuration file are not pointed, their processing is skipped. More about conditions of using the Configuration File and the Data Bases read in the <a href="#DataConcept">Data storing conception</a>.</li>
<li> <i>static bool dataDelTbl( const string &amp;bdn, const string &amp;path = "", char flags = NoFlg );</i> — The data container table common removing from the storage <i>bbn</i> and the configuration file <i>path</i>, according to the ReqGenFlg <i>flags</i>.</li>
<li> <i>static string genPrmGet( const string &amp;path, const string &amp;oval = "", const string &amp;user = "root", char flags = NoFlg );</i> — Getting the generic parameter <i>path</i> from the Generic Storage "<b>*.*.SYS</b>" on behalf of the <i>user</i> and according to the ReqGenFlg <i>flags</i>. If the data are not available the value <i>oval</i> is returned. On the Configuration File there are used the object parameters by the tags "prm" and on the Data Base there is used the table "SYS".</li>
<li> <i>static void genPrmSet( const string &amp;path, const string &amp;val, const string &amp;user = "root", char flags = NoFlg );</i> — Setting/Saving the generic parameter <i>path</i> to the Generic Storage "<b>*.*.SYS</b>" of the <i>user</i> and according to the ReqGenFlg <i>flags</i>.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>int subVer( );</i> — Subsystem version.</li>
<li> <i>int tblLifeTime( );</i> — Lifetime of the inactive tables closing, in seconds.</li>
<li> <i>void setTblLifeTime( int vl );</i> — Sets lifetime of the inactive tables closing in <i>vl</i> seconds.</li>
<li> <i>TElem &amp;openDB_E( )</i> — The structure of the table of registered databases.</li>
<li> <i>AutoHD&lt;TTypeBD&gt; at( const string &amp;iid )</i> — Referencing to the DB module(DB type).</li></ul>
<h3><span class="mw-headline" id="Modular_object_of_types_of_databases_.28TTypeBD.29"><span class="mw-headline-number">3.2</span> <span id="TTypeBD" title="#TTypeBD">Modular object of types of databases (TTypeBD)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TModule">TModule</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td>By root objects of the modules of subsystem "DB".
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>virtual string features( );</i> — Keyword list of features supported by the DB.</li>
<li> <i>virtual int lsPr( )</i> — The DB priority base [0...9] in the generic storages list.</li>
<li> <i>bool fullDeleteDB( );</i> — Sign of the complete removal of the database.</li>
<li> <i>void list( vector&lt;string&gt; &amp;list ) const;</i> — The list of registered (opened) databases.</li>
<li> <i>bool openStat( const string &amp;idb ) const;</i> — Check the availability of the specified opened database.</li>
<li> <i>string open( const string &amp;id );</i> — Opening of the database. Returns the end created identifier.</li>
<li> <i>void close( const string &amp;id, bool erase = false );</i> — Closing the database. If the sign <i>erase</i> is set, the database will be completely removed.</li>
<li> <i>AutoHD&lt;TBD&gt; at( const string &amp;id ) const;</i> — Connection to the opened database.</li>
<li> <i>TBDS &amp;owner( ) const;</i> — Subsystem - the owner of the module.</li></ul>
<h3><span class="mw-headline" id="The_object_of_the_database_.28TBD.29"><span class="mw-headline-number">3.3</span> <span id="TBD" title="#TBD">The object of the database (TBD)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TCntrNode">TCntrNode</a>, <a href="#TConfig">TConfig</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td>By the database objects of the modules of subsystem "DB".
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TBD( const string &amp;iid, TElem *cf_el );</i> — Initializing constructor.</li>
<li> <i>string id( );</i> — DB identifier.</li>
<li> <i>string fullDBName( );</i> — Full name a storage-DB.</li>
<li> <i>string name( );</i> — DB name.</li>
<li> <i>string dscr( );</i> — DB description.</li>
<li> <i>string addr( ) const;</i> — Address of the database. The form of recording is different for each type of database.</li>
<li> <i>string codePage( );</i> — Codepage in which the data of the database are stored.</li>
<li> <i>int lsPr( );</i> — The DB priority in the generic storages list, in the range [0...99].</li>
<li> <i>double trTm_ClsOnOpen( );</i> — Transaction closing: after opening, seconds.</li>
<li> <i>double trTm_ClsOnReq( );</i> — Transaction closing: after request, seconds.</li>
<li> <i>int trPr_ClsTask( );</i> — Transaction closing: separate task priority.</li>
<li> <i>bool enableStat( ) const;</i> — The state of the database: "Enabled".</li>
<li> <i>bool toEnable( );</i> — Sign of the DB: "To Enable".</li>
<li> <i>bool disabledByUser( );</i> — Sign of the node disabling by user, to prevent its enabling restore.</li>
<li> <i>void setName( const string &amp;inm );</i> — Setting the DB name.</li>
<li> <i>void setDscr( const string &amp;idscr );</i> — Setting the DB description.</li>
<li> <i>void setAddr( const string &amp;iaddr );</i> — Setting the DB address.</li>
<li> <i>void setCodePage( const string &amp;icp );</i> — Setting of the codepage for the storage of the DB data.</li>
<li> <i>void setLsPr( int vl );</i> — Setting the DB priority in the generic storages list, in the range [0...99].</li>
<li> <i>void setToEnable( bool ivl );</i> — Setting of the sign: "To Enable".</li>
<li> <i>virtual void enable( );</i> — Enabling of the DB.</li>
<li> <i>virtual void disable( );</i> — Disabling of the DB.</li>
<li> <i>virtual void allowList( vector&lt;string&gt; &amp;list ) const;</i> — The list of the tables in this DB.</li>
<li> <i>void list( vector&lt;string&gt; &amp;list ) const;</i> — The list of opened tables.</li>
<li> <i>bool openStat( const string &amp;table ) const;</i> — The sign that indicates of the fact that the requested table is opened.</li>
<li> <i>virtual void open( const string &amp;table, bool create );</i> — Opening of the table. If the sign <i>create</i> is set, in the case of absence the table will be created.</li>
<li> <i>virtual void close( const string &amp;table, bool del = false, long tm = -1 );</i> — Closing of the table. If the sign <i>del</i> is set, the table will be completely removed.</li>
<li> <i>AutoHD&lt;TTable&gt; at( const string &amp;name ) const;</i> — Connection to the table.</li>
<li> <i>virtual void sqlReq( const string &amp;req, vector&lt; vector&lt;string&gt; &gt; *tbl = NULL, char intoTrans = EVAL_BOOL );</i> — Sending the SQL-request <i>req</i> to the DB and receiving the result in tabular form <i>tbl</i>. If set <i>intoTrans</i> to true then will open transaction for the request, else if set to false then transaction will close.</li>
<li> <i>virtual void transCloseCheck( )</i> — The function call periodic for opened transaction check to close for old transaction or overloaded.</li>
<li> <i>TTypeBD &amp;owner( ) const;</i> — DB type – the owner of the DB.</li></ul>
<p><b>Protected attributes:</b>
</p>
<ul><li> <i>ResMtx resTbls, connRes;</i> — locks of the table and connection resources.</li></ul>
<p><b>Protected methods:</b>
</p>
<ul><li> <i>virtual TTable *openTable( const string &amp;table, bool create );</i> — The modular method for opening the table.</li></ul>
<h3><span class="mw-headline" id="The_object_of_the_table_.28TTable.29"><span class="mw-headline-number">3.4</span> <span id="TTable" title="#TTable">The object of the table (TTable)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TCntrNode">TCntrNode</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td>By tables objects of the modules of subsystem "DB".
</td></tr></table>
<p><b>Data:</b><br />
Flags of the SQL requests (enum – TTable::SQLFeqFlag):
</p>
<ul><li> <i>SQLNoFlg</i> (0) — no list flag;</li>
<li> <i>SQLOrderForSeek</i> (0x01) — sort-order the records at all requested fields, needed for PostgreSQL in the limiting SEEK requests;</li>
<li> <i>SQLFirstSkipForSeek</i> (0x02) — use the FIRST and SKIP SELECT operators, needed for FireBird in the limiting SEEK requests.</li></ul>
<p>Item of the table structure (class — TTable::TStrIt):
</p>
<ul><li> <i>string nm, tp, def;</i> — field name, type and the default value;</li>
<li> <i>int key;</i> — field key;</li>
<li> <i>TStrIt( )</i> — constructor by default;</li>
<li> <i>TStrIt( const string &amp;inm, const string itp, int ikey, const string &amp;idef = "" )</i> — the main parametric constructor.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TTable( const string &amp;name );</i> — Initializing constructor.</li>
<li> <i>string name( );</i> — Table name.</li>
<li> <i>string fullDBName( );</i> — Full name a storage-table into DB.</li>
<li> <i>virtual void fieldStruct( TConfig &amp;cfg );</i> — Getting the structure of the table.</li>
<li> <i>virtual bool fieldSeek( int row, TConfig &amp;cfg, const string &amp;cacheKey = "" );</i> — Scanning the records <i>cfg</i> of the table by <i>row</i>, where <i>cacheKey</i> defines the seek cache using — preloading the result in whole and significant acceleration.</li>
<li> <i>virtual void fieldGet( TConfig &amp;cfg );</i> — Request the specified record. The requested record is determined by the values of key cells of the original record <i>cfg</i>.</li>
<li> <i>virtual void fieldSet( TConfig &amp;cfg );</i> — Setting the values of the specified record. In the case of absence the record will be removed.</li>
<li> <i>virtual void fieldDel( TConfig &amp;cfg );</i> — Deleting of the specified record.</li>
<li> <i>virtual void fieldFix( TConfig &amp;cfg, const string &amp;langLs = "" );</i> — Internal request declaration of fixing fields, for the SQL request mostly. Use <i>langLs</i> for the languages list separated by ';' to create the corresponded translation columns.</li>
<li> <i>TBD &amp;owner( ) const;</i> — DB – the owner of the table.</li>
<li> <i>virtual string getSQLVal( TCfg &amp;cf, uint8_t RqFlg = 0 );</i> — Get the SQL encoded value from <i>cf</i> for placing to the SQL request.</li>
<li> <i>virtual void setSQLVal( TCfg &amp;cf, const string &amp;vl, bool tr = false );</i> — Set the SQL encoded value to <i>cf</i> from the SQL response table.</li>
<li> <i>bool fieldSQLSeek( int row, TConfig &amp;cfg, const string &amp;cacheKey, int flags = SQLNoFlg );</i> — Unified-ANSI SQL variant of the fieldSeek() request with the TTable::SQLFeqFlag <i>flags</i>, which implements also the OpenSCADA multilaguage translation (the "TR" feature).</li>
<li> <i>void fieldSQLGet( TConfig &amp;cfg );</i> — Unified-ANSI SQL variant of the fieldGet() request, which implements also the OpenSCADA multilaguage translation (the "TR" feature).</li>
<li> <i>void fieldSQLSet( TConfig &amp;cfg );</i> — Unified-ANSI SQL variant of the fieldSet() request, which implements also the OpenSCADA multilaguage translation (the "TR" feature).</li>
<li> <i>void fieldSQLDel( TConfig &amp;cfg );</i> — Unified-ANSI SQL variant of the fieldDel() request.</li></ul>
<p><b>Protected attributes:</b>
</p>
<ul><li> <i>time_t mLstUse;</i> — time of the last usage;</li>
<li> <i>vector&lt;TStrIt&gt; tblStrct;</i> — table structure, list of the table items;</li>
<li> <i>map&lt;string, vector&lt; vector&lt;string&gt; &gt; &gt;</i> — container of the SEEK sessions in the PRELOAD mode;</li></ul>
<h2><span class="mw-headline" id="Subsystem_.22Data_acquisition.22"><span class="mw-headline-number">4</span> Subsystem "Data acquisition"</span></h2>
<p>The subsystem "Data acquisition" is represented by the <i>TDAQS</i> object which contains modular objects of the data sources' types <i>TTypeDAQ</i> and the objects of the libraries of parameters' templates of subsystem "Data acquisition" <i>TPrmTmplLib</i>. Object of the data sources types contains objects of the controllers TController and objects of the  parameters' types <i>TTypeParam</i>. Parameters' types objects are provided by the controller module and contain the DB structure of the separate parameters' types (analog, digital ...). Controllers' objects contain parameters' objects <i>TParamContr</i>. Each parameter is associated with only one type of the parameter. For the attribute storage parameter is inherited from the values object <i>TValue</i>, which contains the attributes' values <i>TVal</i>. The library of the parameters' templates of this subsystem contains templates' objects <i>TPrmTmpl</i>. An example of the described hierarchical structure is shown in Fig. 4.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:309px;"><a class="image" href="http://oscada.org/wiki/File:Oscada_subsys_daq_str.png"><img class="thumbimage" height="335" src="../en/files/Oscada_subsys_daq_str.png" width="307" /></a>  <div class="thumbcaption">Fig. 4. Hierarchical structure of the subsystem "Data acquisition".</div></div></div></div>
<p>Subsystem contains the types of data sources. The source may be virtually any substance providing any data. Type of source can be divided into individual sources (controllers) within the limits of the particular type. For example, if we take the data from the operating system (OS), then the single source can be the separate operating system of the separate PC.
</p><p>Data source (controller) is further divided (contains) into the parameters. The parameter is the part of the data source. In the case of the OS it will be, for example,: used RAM, the processor's frequency and many other parts.
</p><p>Parameter, in its turn, contains the attributes, which provide the data. In addition to the basic data attributes can provide the related or detailing data. In the case of the same operating system and the memory usage, the attributes may not only provide the used memory, and also how much it all, how much in the swap, etc.
</p><p>Some of the implementation of the data sources may provide the possibility of setting the structure of the parameter based on previously developed parameters' templates. For this purpose subsystem contains templates' libraries, which, in their turn, provide the parameters' templates . The example shows a library of templates "base" with the templates "digAlrm" and "smplBrd".
</p><p>At the level of the subsystem the redundancy mechanism for data sources is provided. Redundancy means the possibility of coordinated work of several OpenSCADA stations to perform common task of data acquisition from the same data sources.
</p>
<h3><span class="mw-headline" id="Object_of_subsystem_.22Data_acquisition.22_.28TDAQS.29"><span class="mw-headline-number">4.1</span> <span id="TDAQS" title="#TDAQS">Object of subsystem "Data acquisition" (TDAQS)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TSubSYS">TSubSYS</a></i>
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>int subVer( );</i> — Version of the subsystem.</li>
<li> <i>void subStart( );</i> — Start the subsystem.</li>
<li> <i>void subStop( );</i> — Stop the subsystem.</li>
<li> <i>AutoHD&lt;TTypeDAQ&gt; at( const string &amp;name ) const;</i> — Connection to the type of data source.</li>
<li> <i>AutoHD&lt;TCntrNode&gt; daqAt( const string &amp;path, char sep = 0, bool noex = false, bool waitForAttr = false, TCntrNode *ndBase = NULL ) const;</i> — Generic connection to the DAQ node by <i>path</i> or separated by <i>sep</i> string, and from the base <i>ndBase</i> in the relative addressing. Set <i>waitForAttr</i> at the DAQ node waiting is an attribute. Do not throw an exceptions if set <i>noex</i>.</li>
<li> <i>AutoHD&lt;TValue&gt; prmAt( const string &amp;path, char sep = 0, bool noex = false, TCntrNode *ndBase = NULL ) const;</i> — Connection to the parameter by <i>path</i> or separated by <i>sep</i> string, and from the base <i>ndBase</i> in the relative addressing. Do not throw an exceptions if set <i>noex</i>.</li>
<li> <i>AutoHD&lt;TVal&gt; attrAt( const string &amp;path, char sep = 0, bool noex = false, TCntrNode *ndBase = NULL ) const;</i> — Connection to the parameter's attribute by <i>path</i> or separated by <i>sep</i> string, and from the base <i>ndBase</i> in the relative addressing. Do not throw an exceptions if set <i>noex</i>.</li>
<li> <i>void ctrListPrmAttr( XMLNode *nd, const string &amp;addrBase, bool toPrm = false, char sep = 0, const string &amp;pref = "", TCntrNode *ndBase = NULL );</i> — Browsing list for items of attributes of parameters or only the parameters DAQ by <i>toPrm</i> with prefix <i>pref</i> from path or separated by <i>sep</i> string from base address <i>addrBase</i>, and from the base <i>ndBase</i> in the relative addressing.</li>
<li> <i>string tmplLibTable( );</i> — Name of table to store the parameters' templates  of the subsystem "Data acquisition".</li>
<li> <i>void tmplLibList( vector&lt;string&gt; &amp;list ) const;</i> — The list of available parameters' templates.</li>
<li> <i>bool tmplLibPresent( const string &amp;id ) const;</i> — Check the availability of the parameter's template <i>id</i>.</li>
<li> <i>void tmplLibReg( TPrmTmplLib *lib );</i> — Registration of the parameter's template <i>lib</i>.</li>
<li> <i>void tmplLibUnreg( const string &amp;id, int flags = NodeNoFlg );</i> — Deleting/removing of the registration of the parameter's template <i>id</i>, according to the <i>flags</i>.</li>
<li> <i>AutoHD&lt;TPrmTmplLib&gt; tmplLibAt( const string &amp;id ) const;</i> — Connection to the parameter's template <i>id</i>.</li>
<li> <i>double rdRestDtTm( );</i> — Maximum depth of the archive data recovery when starting in hours.</li>
<li> <i>void setRdRestDtTm( double vl );</i> — Set of the maximum depth of the archive data recovery when starting in hours.</li>
<li> <i>void rdActCntrList( vector&lt;string&gt; &amp;ls, bool isRun = false );</i> — The list of active controllers working in the redundancy scheme. When we indicate <i>isRun</i> there will be in the list only running controllers in this station.</li>
<li> <i>string rdStRequest( const string &amp;cntr, XMLNode &amp;req, const string &amp;prevSt = "", bool toRun = true );</i> — Request <i>req</i> to the redundant station on behalf of the controller <i>cntr</i>. The station for the request is selected after specified in <i>prevSt</i> for the running remote controller when indicating <i>toRun</i>.</li>
<li> <i>TElem &amp;elLib( );</i> — The structure of the table of the libraries if parameters' templates.</li>
<li> <i>TElem &amp;elTmpl( );</i> — The structure of the table of  parameters' templates.</li>
<li> <i>TElem &amp;elTmplIO( );</i> — The structure of the attributes of parameters' templates.</li>
<li> <i>TElem &amp;elErr( );</i> — The structure of the attribute(s) of parameters' errors.</li></ul>
<h3><span class="mw-headline" id="Modular_object_of_the_controller.27s_type_.28TTypeDAQ.29"><span class="mw-headline-number">4.2</span> <span id="TTypeDAQ" title="#TTypeDAQ">Modular object of the controller's type (TTypeDAQ)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TModule">TModule</a>, <a href="#TElem">TElem</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td>Root object of the modules of subsystem "Data acquisition".
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>string DAQPath( );</i> — Getting for DAQ-address of the element.</li>
<li> <i>void modStart( );</i> — Start of the module.</li>
<li> <i>void modStop( );</i> — Stop of the module.</li>
<li> <i>void list( vector&lt;string&gt; &amp;list ) const;</i> — The list of the controllers.</li>
<li> <i>bool present( const string &amp;id ) const;</i> — Check for the availability of the specified controller object.</li>
<li> <i>string add( const string &amp;id, const string &amp;daq_db = "*.*" );</i> — Add the controller object. Returns the end created identifier.</li>
<li> <i>void del( const string &amp;id );</i> — Delete the controller object.</li>
<li> <i>AutoHD&lt;TController&gt; at( const string &amp;id, const string &amp;who = "" ) const;</i> — Connect to the controller object.</li>
<li> <i>bool tpPrmPresent( const string &amp;name_t );</i> — Check for the availability of the specified controller type.</li>
<li> <i>unsigned tpPrmToId( const string &amp;name_t );</i> — Getting of the index of the parameters' types by their names.</li>
<li> <i>int tpParmAdd( const char *id, const char *n_db, const char *name );</i> — Addition/registration of the parameters' types.</li>
<li> <i>unsigned tpPrmSize( );</i> — Quantity of the parameters' types.</li>
<li> <i>TTypeParam &amp;tpPrmAt( unsigned id );</i> — Get the object of the parameters' type.</li>
<li> <i>virtual bool compileFuncLangs( vector&lt;string&gt; *ls = NULL );</i> — Request of the list of languages for which it is realised the possibility of formation of user procedures in this module, and check for fact of that support.</li>
<li> <i>virtual void compileFuncSnthHgl( const string &amp;lang, XMLNode &amp;shgl );</i> — Request the rules of the syntax highlight <i>shgl</i> for the specified language <i>lang</i>.</li>
<li> <i>virtual string compileFunc( const string &amp;lang, TFunction &amp;fnc_cfg, const string &amp;prog_text, const string &amp;usings = "", int maxCalcTm = 0 );</i> — compiling-registering of the user function on the supported programming language <i>lang</i> and on the source code of procedure <i>prog_text</i>, based on the procedure parameters <i>fnc_cfg</i>. Returns address of the compiled function's object, ready for execution.</li>
<li> <i>virtual bool redntAllow( );</i> — State of support the redundancy mechanisms by the module. Should be overridden and return TRUE if supported, otherwise FALSE.</li></ul>
<p><b>Protected methods:</b>
</p>
<ul><li> <i>virtual TController *ContrAttach( const string &amp;name, const string &amp;daq_db );</i> — Connecting of the controller. It must be obligatory overridden in the descendant of the module.</li></ul>
<h3><span class="mw-headline" id="Controller.27s_object_.28TController.29"><span class="mw-headline-number">4.3</span> <span id="TController" title="#TController">Controller's object (TController)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TCntrNode">TCntrNode</a>, <a href="#TConfig">TConfig</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td>Objects of the modules of subsystem "Data acquisition".
</td></tr></table>
<p><b>Data:</b><br />
Redundancy modes (enum TController::Redundant):
</p>
<ul><li> <i>Off (0)</i> — Turned off;</li>
<li> <i>Asymmetric (1)</i> — asymmetric;</li>
<li> <i>OnlyAlarms (2)</i> — only alarms, suppressing on the reserve.</li></ul>
<dl><dd><i>Command specific</i></dd></dl>
<ul><li> <i>Any (0)</i> — any mode.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TController( const string &amp;name_c, const string &amp;daq_db, TElem *cfgelem );</i> — Initializing constructor of the controller.</li>
<li> <i>string DAQPath( );</i> — Getting for DAQ-address of the element.</li>
<li> <i>string id( );</i> — Controller ID.</li>
<li> <i>string workId( );</i> — Work ID of the controller, including the ID of the module.</li>
<li> <i>string name( );</i> — Controller's name.</li>
<li> <i>string descr( );</i> — Controller's description.</li>
<li> <i>int64_t timeStamp( );</i> — Timestamp of the object changing as maximum of timestamps of the included parameter objects.</li>
<li> <i>virtual string getStatus( );</i> — Request function of the controller status.</li>
<li> <i>string DB( bool qTop = false ) const;</i> — Storage name of the controller's instance, <i>qTop</i> for the storage queue top.</li>
<li> <i>string tbl( ) const;</i> — The name of the table of DB of the controller's instance.</li>
<li> <i>string fullDB( bool qTop = false ) const;</i> — The full name of the table of storage of the controller's instance, <i>qTop</i> for the storage queue top.</li>
<li> <i>void setName( const string &amp;nm );</i> — Set the controller's name.</li>
<li> <i>void setDescr( const string &amp;dscr );</i> — Set the controller's description.</li>
<li> <i>void setDB( const string &amp;vl, bool qTop = false );</i> — Setting of the storage name of the controller's instance, <i>qTop</i> for the storage queue top.</li>
<li> <i>bool toEnable( );</i> — Sign "To enable the controller".</li>
<li> <i>bool toStart( );</i> — Sign "To start the controller".</li>
<li> <i>bool enableStat( ) const;</i> — Status "Enable".</li>
<li> <i>bool startStat( );</i> — Status "Run".</li>
<li> <i>int messLev( );</i> — Messages level of diagnostic information.</li>
<li> <i>void start( );</i> — Controller's start.</li>
<li> <i>void stop( );</i> — Controller's stop.</li>
<li> <i>void enable( );</i> — Controller's enabling.</li>
<li> <i>void disable( );</i> — Controller's stopping.</li>
<li> <i>void list( vector&lt;string&gt; &amp;list ) const;</i> — Parameter's list in the controller.</li>
<li> <i>bool present( const string &amp;id ) const;</i> — Check for the availability of the parameter <i>id</i>.</li>
<li> <i>string add( const string &amp;id, unsigned type );</i> — Addition the parameter <i>id</i> of the type <i>type</i>. Returns the end created identifier.</li>
<li> <i>void del( const string &amp;id, int flags = NodeNoFlg );</i> — Deleting the parameter <i>id</i>, according the {TCntrNode,TParamContr}::EnDisFlag <i>flags</i>.</li>
<li> <i>AutoHD&lt;TParamContr&gt; at( const string &amp;id, const string &amp;who = "th_contr" ) const;</i> — Connection to the controller's parameter <i>id</i>.</li>
<li> <i>bool redntUse( Redundant md = Asymmetric );</i> — Redundancy state for mode <i>md</i>.</li>
<li> <i>void setRedntUse( bool vl );</i> — Changing of the getting the data from the backup station mode.</li>
<li> <i>Redundant redntMode( );</i> — Redundancy mode ("&lt;high&gt;", "&lt;low&gt;", "&lt;optimal&gt;", {ForceStation}), enabling.</li>
<li> <i>void setRedntMode( Redundant vl );</i> — Setting of the redundancy mode, enabling.</li>
<li> <i>string redntRun( );</i> — Configuration of the preferred execution.</li>
<li> <i>void setRedntRun( const string &amp;vl );</i> — Setting the configuration of the preferred execution.</li>
<li> <i>virtual void redntDataUpdate( );</i> — Operation of the data receiving from the backup station, called automatically by the service procedure of the redundancy scheme of the subsystem.</li>
<li> <i>virtual string catsPat( );</i> — List of the regular expression rules, separated by '|', for matching by category the messages generated by the object.</li>
<li> <i>virtual void messSet( const string &amp;mess, int lev, const string &amp;type2Code = "OP", const string &amp;prm = "", const string &amp;cat = "" );</i> — Formation of the DAQ-sourced messages for the parameter object <i>prm</i> (<b>{PrmId}</b>), or the controller object in whole if the parameter object is not specified, for the message <i>mess</i>, level <i>lev</i> and for the type code <i>type2Code</i>. This function generates the messages with the unified DAQ-transparency category <b>{type2Code}{ModId}:{CntrId}[.{prm}][:{cat}]</b>.</li>
<li> <i>void alarmSet( const string &amp;mess, int lev = -TMess::Crit, const string &amp;prm = "", bool force = false );</i> — Formation of alarms (a violation) for the parameter object <i>prm</i> (<b>{PrmId}\n{PrmNm}</b>), or the controller object in whole if the object is not specified, the message <i>mess</i> and level <i>lev</i>. The negative value of the level <i>lev</i> is used to set and positive for removal of the violation. This function generates the violation and message with the category <b>al{ModId}:{CntrId}[.{prm}]</b> and the text <b>{CntrNm} &gt; {PrmNm}: {MessText}</b>. The alarms clearance, as the setting also, works in the toggling mode, so means of passing the clearance messages to the message buffer, and the same clearance, only at the according violations presence, what may be disabled setting <i>force</i>.</li>
<li> <i>TTypeDAQ &amp;owner( ) const;</i> — The type of the data source (module) - the owner of the controller.</li></ul>
<p><b>Protected attributes:</b>
</p>
<ul><li> <i>bool enSt;</i> — The sign "Enable".</li>
<li> <i>bool runSt;</i> — The sign "Running".</li></ul>
<p><b>Protected methods:</b>
</p>
<ul><li> <i>virtual void enable_(  );</i> — Enabling of the controller object. Usually at this stage the initialisation of the parameters' objects and their interfaces in the form of attributes is made, the attributes can sometimes be requested from the associated remote source.</li>
<li> <i>virtual void disable_(  );</i> — Disabling the controller object.</li>
<li> <i>virtual void start_( );</i> — Starting the controller object. Usually at this stage the task of periodic or scheduled polling is created and started.</li>
<li> <i>virtual void stop_( );</i> — Stopping the controller object.</li>
<li> <i>virtual TParamContr *ParamAttach( const string &amp;id, int type );</i> — Modular method of the creation/opening of the new parameter.</li></ul>
<h3><span class="mw-headline" id="Parameters.27_type_object_.28TTypeParam.29"><span class="mw-headline-number">4.4</span> <span id="TTypeParam" title="#TTypeParam">Parameters' type object (TTypeParam)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TElem">TElem</a></i>
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TTypeParam( const char *iid, const char *iname, const char *idb = "", bool i_isPrmCntr = false );</i> — Initializing constructor.</li>
<li> <i>virtual void create( TParamContr *prm );</i> — Create or set the parameter <i>prm</i> type.</li>
<li> <i>virtual void destroy( TParamContr *prm );</i> — Remove or clean the parameter <i>prm</i> type.</li>
<li> <i>virtual string DB( TController *cntr );</i> — Get table name of the parameters of the controller <i>cntr</i>.</li>
<li> <i>void setDB( TController *cntr, const string &amp;vl );</i> — Set the table name of the parameters of the controller <i>cntr</i>.</li>
<li> <i>virtual void enable( TParamContr *prm );</i> — To enable the parameter <i>prm</i>.</li>
<li> <i>virtual void disable( TParamContr *prm );</i> — To disable the parameter <i>prm</i>.</li>
<li> <i>virtual bool cfgChange( TParamContr *prm, TCfg &amp;cfg );</i> — The configuration filed <i>cfg</i> of the parameter <i>prm</i> change.</li>
<li> <i>virtual void vlGet( TParamContr *prm, TVal &amp;vo );</i> — Predicting function of the value getting, through the parameter <i>prm</i>. It is used for direct (synchronous) reading.</li>
<li> <i>virtual void vlSet( TParamContr *prm, TVal &amp;vo, const TVariant &amp;vl, const TVariant &amp;pvl );</i> — Predicting function of the value setting, through the parameter <i>prm</i>. It is used for direct (synchronous) writing <i>vl</i> with the previous value into <i>pvl</i>.</li>
<li> <i>bool vlSetRednt( TVal &amp;vo, const TVariant &amp;vl, const TVariant &amp;pvl );</i> — Processing of the values setting, mostly in the predicting function, under the redundancy. Returns true at processing the setting in the redundancy.</li>
<li> <i>virtual void vlArchMake( TParamContr *prm, TVal &amp;val );</i> — Notifying function of the creation of the archive for the <i>val</i> attribute, through parameter <i>prm</i>. It is used to configure the created archive in accordance with the peculiarities of the data source.</li>
<li> <i>virtual void getVals( TParamContr *prm );</i> — Asynchronous mode internal realization, called into the controller object cycle for parameter <i>prm</i>.</li>
<li> <i>virtual bool cntrCmdProc( TParamContr *prm, XMLNode *opt );</i> — Function of requests' processing of the control interface, from parameter <i>prm</i>.</li></ul>
<p><b>Public attributes:</b>
</p>
<ul><li> <i>string name;</i> — Parameter's type name.</li>
<li> <i>string descr;</i> — Parameter's type description.</li>
<li> <i>string db;</i> — DB of the parameter's type.</li></ul>
<h3><span class="mw-headline" id="Object_of_the_physical_level_parameter_.28TParamContr.29"><span class="mw-headline-number">4.5</span> <span id="TParamContr" title="#TParamContr">Object of the physical level parameter (TParamContr)</span></span></h3>
<table class="wikitable">

<tr>
<td> <b>Inherits:</b> </td>
<td> <i><a href="#TConfig">TConfig</a>, <a href="#TValue">TValue</a></i>
</td></tr>
<tr>
<td> <b>Inherited:</b> </td>
<td> Objects of the module's parameters of subsystem "Data acquisition".
</td></tr></table>
<p><b>Data:</b><br />
Flags of the enabling/disabling modes of the node (enum TParamContr::EnDisFlag):
</p>
<ul><li> <i>TParamContr::NodeRemove_NoArch</i> (TCntrNode::NodeSpecific) — do not remove archives at the DAQ-Parameter node removing.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TParamContr( const string &amp;name, TTypeParam *tpprm );</i> — Initializing constructor.</li>
<li> <i>string DAQPath( );</i> — Getting for DAQ-address of the element.</li>
<li> <i>string ownerPath( bool inclSelf = false );</i> — The parameter-owner path, include <i>inclSelf</i> the parameter.</li>
<li> <i>bool operator==( TParamContr &amp; PrmCntr );</i> — Parameter's comparison.</li>
<li> <i>string id( );</i> — Parameter's ID (key).</li>
<li> <i>string name( );</i> — Parameter's name.</li>
<li> <i>string descr( );</i> — Parameter's description.</li>
<li> <i>bool toEnable( );</i> — Sign "To enable parameter".</li>
<li> <i>int64_t timeStamp( );</i> — Timestamp of the object changing accounting the included parameter objects.</li>
<li> <i>bool enableStat( ) const;</i> — Status "Enable".</li>
<li> <i>void setName( const string &amp;inm );</i> — Setting of the parameter's name.</li>
<li> <i>void setDescr( const string &amp;idsc );</i> — Setting of the parameter's description.</li>
<li> <i>void setToEnable( bool vl );</i> — Setting of the sign "To enable the parameter".</li>
<li> <i>void list( vector&lt;string&gt; &amp;list ) const;</i> — Parameter's list in the parameter.</li>
<li> <i>bool present( const string &amp;id ) const;</i> — Check for the availability of the parameter <i>id</i>.</li>
<li> <i>string add( const string &amp;id, unsigned type = 0 );</i> — Addition of the parameter <i>id</i> of the type <i>type</i>. Returns the end created identifier.</li>
<li> <i>void del( const string &amp;id, int flags = NodeNoFlg );</i> — Deleting the parameter <i>id</i>, according the {TCntrNode,TParamContr}::EnDisFlag <i>flags</i>.</li>
<li> <i>AutoHD&lt;TParamContr&gt; at( const string &amp;id, const string &amp;who = "th_prm" ) const;</i> — Connection to the controller's parameter <i>id</i>.</li>
<li> <i>TTypeParam &amp;type( ) const;</i> — Parameter's type.</li>
<li> <i>virtual TElem *dynElCntr( );</i> — Container of the dynamic elements of the DAQ attributes.</li>
<li> <i>virtual void enable( );</i> — Enable the parameter object, the formation of the attributes set and filling them with the value of unreliability is made.</li>
<li> <i>virtual void disable( );</i> — Disable the parameter object.</li>
<li> <i>TController &amp;owner( ) const;</i> — Controller – the parameter's owner.</li></ul>
<p><b>Protected methods:</b>
</p>
<ul><li> <i>virtual void setType( const string &amp;tpId );</i> — called to change the parameter type to <i>tpId</i> and can be processed in the module object to change own data.</li></ul>
<h3><span class="mw-headline" id="Object_of_the_value_.28TValue.29"><span class="mw-headline-number">4.6</span> <span id="TValue" title="#TValue">Object of the value (TValue)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TCntrNode">TCntrNode</a>, <a href="#TValElem">TValElem</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td><i><a href="#TParamContr">TParamContr</a></i>
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>bool dataActive( );</i> — Activity (updatable) flag of data.</li>
<li> <i>virtual string DAQPath( );</i> — Getting for DAQ-address of the element.</li>
<li> <i>void vlList( vector&lt;string&gt; &amp;list ) const;</i> — Getting the attributes' list.</li>
<li> <i>bool vlPresent( const string &amp;name ) const;</i> — Check for the availability of the specified attribute.</li>
<li> <i>AutoHD&lt;TVal&gt; vlAt( const string &amp;name ) const;</i> — Connection to the attribute.</li></ul>
<p><b>Protected methods:</b>
</p>
<ul><li> <i>TConfig *vlCfg( )</i> — Getting of the associated configuration object. If NULL is returned then there is no associated configuration object.</li>
<li> <i>void setVlCfg( TConfig *cfg );</i> — Setting of the associated configuration object <i>cfg</i>.</li>
<li> <i>bool vlElemPresent( TElem *ValEl );</i> — Check for the availability if the attributes' elements <i>ValEl</i>.</li>
<li> <i>void vlElemAtt( TElem *ValEl );</i> — Attach of the data structure <i>ValEl</i>.</li>
<li> <i>void vlElemDet( TElem *ValEl );</i> — Detach of the data structure <i>ValEl</i>.</li>
<li> <i>TElem &amp;vlElem( const string &amp;name );</i> — Get the data structure by its name <i>name</i>.</li>
<li> <i>virtual TVal* vlNew( );</i> — Called at the stage of a new attribute creation. It can be overridden to implement the particular behaviour within its own, inherited from the <b>TVal</b>, class during the access of the attribute.</li>
<li> <i>virtual void vlGet( TVal &amp;vo );</i> — Called for an attribute with the direct reading mode <b>TVal::DirRead</b> (synchronous mode, or reading from an internal buffer of the object) when reading the value in order to directly read the value from the physical source or the object buffer.</li>
<li> <i>virtual void vlSet( TVal &amp;vo, const TVariant &amp;vl, const TVariant &amp;pvl );</i> — Called for the attribute <i>vo</i> with the direct recording mode <b>TVal::DirWrite</b> (synchronous or writing to an internal buffer of the object) when set to immediate record the value <i>vl</i> to the physical source or buffer object, with the previous value <i>pvl</i>.</li>
<li> <i>virtual void vlArchMake( TVal &amp;val );</i> — Called at the stage of creation the value archive with the <i>val</i> attribute as the source in the order to initialise the qualitative characteristics of the archive buffer according to the characteristics of the data source and polling.</li></ul>
<h3><span class="mw-headline" id="Attribute.27s_object_.28TVal.29"><span class="mw-headline-number">4.7</span> <span id="TVal" title="#TVal">Attribute's object (TVal)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TCntrNode">TCntrNode</a></i>
</td></tr></table>
<p><b>Data:</b><br />
Additional flags to the object <a href="#TFld">#TFld</a> (enum TVal::AttrFlag):
</p>
<ul><li> <i>TVal::DirRead(0x100)</i> — Flag for the direct reading of the value;</li>
<li> <i>TVal::DirWrite(0x200)</i> — Flag for the direct writing of the value;</li>
<li> <i>TVal::Dynamic(0x400)</i> — Flag of the dynamic attribute, creates in typical from user procedures.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TVal( );</i> — Default constructor.</li>
<li> <i>TVal( TFld &amp;fld );</i> — Initialization as the repository of dynamic data.</li>
<li> <i>TVal( TCfg &amp;cfg );</i> — Initialization as the reflection of static data (DB).</li>
<li> <i>string DAQPath( );</i> — Getting for DAQ-address of the element.</li>
<li> <i>void setFld( TFld &amp;fld );</i> — Initialization as the repository of dynamic data.</li>
<li> <i>void setCfg( TCfg &amp;cfg );</i> — Initialization as the reflection of static data (DB).</li>
<li> <i>string name( );</i> — Attribute's name.</li>
<li> <i>int64_t time( );</i> — Time marker of the the last/current value (10<sup>-6</sup>s).</li>
<li> <i>bool isCfg( );</i> — Sign of the value object created in base of a configuration element.</li>
<li> <i>bool dataActive( );</i> — Activity (updatable) flag of data.</li>
<li> <i>string getSEL( long long *tm = NULL, bool sys = false );</i> — Request of the selected type value for the specified time <i>tm</i>. If NULL then it will be returned the last value.</li>
<li> <i>TVariant get( long long *tm = NULL, bool sys = false );</i> — Request of the value for the specified time <i>tm</i>. If NULL then it will be returned the last value.</li>
<li> <i>string getS( long long *tm = NULL, bool sys = false );</i> — Request of the string type value for the specified time <i>tm</i>. If NULL then it will be returned the last value.</li>
<li> <i>double getR( long long *tm = NULL, bool sys = false );</i> — Request of the real type value for the specified time <i>tm</i>. If NULL then it will be returned the last value.</li>
<li> <i>int64_t getI( long long *tm = NULL, bool sys = false );</i> — Request of the integer type value for the specified time <i>tm</i>. If NULL then it will be returned the last value.</li>
<li> <i>char getB( long long *tm = NULL, bool sys = false );</i> — Request of the boolean type value for the specified time <i>tm</i>. If NULL then it will be returned the last value.</li>
<li> <i>AutoHD&lt;TVarObj&gt; getO( int64_t *tm = NULL, bool sys = false );</i> — Request of the object type value.</li>
<li> <i>void setSEL( const string &amp;value, long long tm = 0, bool sys = false );</i> — Setting of the selected type value <i>value</i>.</li>
<li> <i>void set( const TVariant &amp;value, long long tm = 0, bool sys = false );</i> — Setting of the value <i>value</i>.</li>
<li> <i>void setS( const string &amp;value, long long tm = 0, bool sys = false );</i> — Setting of the string type value <i>value</i>.</li>
<li> <i>void setR( double value, long long tm = 0, bool sys = false );</i> — Setting of the real type value <i>value</i>.</li>
<li> <i>void setI( int64_t value, long long tm = 0, bool sys = false );</i> — Setting of the integer type value <i>value</i>.</li>
<li> <i>void setB( char value, long long tm = 0, bool sys = false );</i> — Setting of the boolean type value <i>value</i>.</li>
<li> <i>void setO( AutoHD&lt;TVarObj&gt; value, int64_t tm = 0, bool sys = false );</i> — Setting of the object type value <i>value</i>.</li>
<li> <i>AutoHD&lt;TVArchive&gt; arch( );</i> — Getting the associated with the value archive.</li>
<li> <i>void setArch( const AutoHD&lt;TVArchive&gt; &amp;vl );</i> — Setting the associated with the value archive.</li>
<li> <i>string setArch( const string &amp;nm = "" );</i> — Setting/creation new archive with proposed name <i>nm</i> or automatic, if name empty.</li>
<li> <i>bool reqFlg( ); bool resB1( ); bool resB2( )</i> — Get some realisation-specific flags.</li>
<li> <i>void setReqFlg( bool vl ); void setResB1( bool vl ); void setResB2( bool vl )</i> — Set some realization-specific flags.</li>
<li> <i>TFld &amp;fld( );</i> — Descriptor of the attribute's structure.</li></ul>
<h3><span class="mw-headline" id="Object_of_the_templates_library_of_parameters_of_the_.22DAQ.22_subsystem_.28TPrmTmplLib.29"><span class="mw-headline-number">4.8</span> <span id="TPrmTmplLib" title="#TPrmTmplLib">Object of the templates library of parameters of the "DAQ" subsystem (TPrmTmplLib)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TCntrNode">TCntrNode</a>, <a href="#TConfig">TConfig</a></i>
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TPrmTmplLib( const char *id, const char *name, const string &amp;lib_db );</i> — Initializing constructor.</li>
<li> <i>string id( );</i> — Library ID.</li>
<li> <i>string name( );</i> — Library name.</li>
<li> <i>string descr( );</i> — Library description.</li>
<li> <i>string DB( bool qTop = false ) const;</i> — DB of the library instance, <i>qTop</i> for the storage queue top.</li>
<li> <i>string tbl( ) const;</i> — DB table of the library instance.</li>
<li> <i>string fullDB( bool qTop = false ) const;</i> — Full address of the DB table of the library instance, <i>qTop</i> for the storage queue top.</li>
<li> <i>bool startStat( );</i> — Sign "Library started".</li>
<li> <i>void start( bool val );</i> — Satart/stop of the library.</li>
<li> <i>void setName( const string &amp;vl );</i> — Setting of the library name.</li>
<li> <i>void setDescr( const string &amp;vl );</i> — Setting of the library description.</li>
<li> <i>void setDB( const string &amp;vl, bool qTop = false );</i> — Setting of the storage name of the library, <i>qTop</i> for the storage queue top.</li>
<li> <i>void setFullDB( const string &amp;vl );</i> — Setting of the full address of the DB table of the library instance.</li>
<li> <i>void list( vector&lt;string&gt; &amp;ls ) const;</i> — Templates list in the library.</li>
<li> <i>bool present( const string &amp;id ) const;</i> — Check for the presence of the template <i>id</i> in the library.</li>
<li> <i>AutoHD&lt;TPrmTempl&gt; at( const string &amp;id ) const;</i> — Connection to the template <i>id</i>.</li>
<li> <i>void add( const char *id, const char *name = "" );</i> — Addition of the template <i>id.name</i> into the library.</li>
<li> <i>void del( const char *id, bool full_del = false );</i> — Deleting of the template <i>id</i> from the library.</li>
<li> <i>TDAQS &amp;owner( ) const;</i> — Object subsystem "DAQ", owner of the library.</li></ul>
<h3><span class="mw-headline" id="The_object_of_the_parameter.27s_template_of_the_.22DAQ.22_subsystem_.28TPrmTempl.29"><span class="mw-headline-number">4.9</span> <span id="TPrmTempl" title="#TPrmTempl">The object of the parameter's template of the "DAQ" subsystem (TPrmTempl)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TFunction">TFunction</a>, <a href="#TConfig">TConfig</a></i>
</td></tr></table>
<p><b>Data:</b><br />
Additional flags to the attribute's object of the function IO (enum TPrmTempl::IOTmplFlgs):
</p>
<ul><li> <i>TPrmTempl::AttrRead</i> (0x10) — Read only attribute;</li>
<li> <i>TPrmTempl::AttrFull</i> (0x20) — Full access attribute;</li>
<li> <i>TPrmTempl::CfgPublConst</i> (0x40) — Public constant;</li>
<li> <i>TPrmTempl::CfgLink</i> (0x80) — External link;</li>
<li> <i>TPrmTempl::LockAttr</i> (0x100) — Blocked attribute.</li>
<li> <i>reserves up to 0x800 and 0x1000 is already used by <a href="#IO">TFunction::IO</a></i></li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TPrmTempl( const char *id, const char *name = "" );</i> —  Initializing constructor of the template.</li>
<li> <i>string id( );</i> — Parameter's template ID.</li>
<li> <i>string name( );</i> — Parameter's template name.</li>
<li> <i>string descr( );</i> — Parameter's template description.</li>
<li> <i>int maxCalcTm( );</i> — The limit on the maximum time calculation of procedure template.</li>
<li> <i>string progLang( );</i> — Parameter's template programming language.</li>
<li> <i>bool progTr( );</i> — Parameter's template program transaltion. </li>
<li> <i>string prog( );</i> — Parameter's template program.</li>
<li> <i>int64_t timeStamp( );</i> — Timestamp for the object changes into DB.</li>
<li> <i>void setName( const string &amp;inm );</i> — Setting the name of the parameter's template.</li>
<li> <i>void setDescr( const string &amp;idsc );</i> — Setting the description of the parameter's template.</li>
<li> <i>void setMaxCalcTm( int vl );</i> — Setting the limit on the maximum time calculation of procedure template.</li>
<li> <i>void setProgLang( const string &amp;ilng );</i> — Setting the programming language of the parameter's template.</li>
<li> <i>void setProgTr( bool vl );</i> — Setting the program of the parameter's template translation.</li>
<li> <i>void setProg( const string &amp;iprg );</i> — Setting the program of the parameter's template.</li>
<li> <i>void setStart( bool val );</i> — Start/stop of the parameter's template.</li>
<li> <i>AutoHD&lt;TFunction&gt; func( );</i> — Connection to the function formed by the template.</li>
<li> <i>TPrmTmplLib &amp;owner( ) const;</i> — Object of the templates' library - the owner of the template.</li></ul>
<h4><span class="mw-headline" id="The_object_of_the_implementation_of_the_template.27s_parameters_of_the_.22DAQ.22_subsystem_.28TPrmTempl::Impl.29"><span class="mw-headline-number">4.9.1</span> <span id="TPrmTempl_Impl" title="#TPrmTempl_Impl">The object of the implementation of the template's parameters of the "DAQ" subsystem (TPrmTempl::Impl)</span></span></h4>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TValFunc">TValFunc</a></i>
</td></tr></table>
<p><b>Data:</b><br />
Structure of template links (class — TPrmTempl::Impl::SLnk):
</p>
<ul><li> <i>int objOff;</i> — offset of an Object part to direct accessing by it;</li>
<li> <i>string addr, addrSpec;</i> — original and special (like to ModBus final address) link address;</li>
<li> <i>AutoHD&lt;TVal&gt; con;</i> — connection to the destination, DAQ attribute;</li>
<li> <i>SLnk( const string &amp;iaddr = "" )</i> — structure constructor.</li></ul>
<p><b>Public methods:</b><br />
</p>
<ul><li> <i>Impl( TCntrNode *iobj, const string &amp;iname = "", bool blked = true );</i> — Constructs for the template implementation with the control node <i>iobj</i> and the name <i>iname</i>.</li>
<li> <i>int  lnkId( const string &amp;nm );</i> — Returns the link <i>nm</i> (function's IO) identifier/number.</li>
<li> <i>bool lnkPresent( int num );</i> — Checks the link number <i>num</i> to presence, returns TRUE for accessibility the link.</li>
<li> <i>void lnkList( vector&lt;int&gt; &amp;ls ) const</i> — Gets for list of the linked attributes ID.</li>
<li> <i>virtual void lnkAdd( int num, const SLnk &amp;l );</i> — Adds a link with the number <i>num</i> and the "SLnk" structure <i>l</i>.</li>
<li> <i>string lnkAddr( int num, bool spec = false ) const;</i> — Returns the link address for the number <i>num</i> and the special link address for <i>spec</i>.</li>
<li> <i>void lnkAddrSet( int num, const string &amp;vl, bool spec = false );</i> — Sets the link address to <i>vl</i> for number <i>num</i> and the special link address for <i>spec</i>.</li>
<li> <i>virtual bool lnkInit( int num, bool toRecnt = false );</i> — Inits/connects the link for the number <i>num</i>, which means reading "addr" and forming "con" or "addrSpec". Set <i>toRecnt</i> to force the re-linking. Returns TRUE at the need for the initialization/activation repeating.</li>
<li> <i>virtual bool lnkActive( int num );</i> — Checks the link number <i>num</i> initialization/activation state.</li>
<li> <i>virtual TVariant lnkInput( int num );</i> — Returns a value by the link number <i>num</i>.</li>
<li> <i>virtual bool lnkOutput( int num, const TVariant &amp;vl );</i> — Sets the value <i>vl</i> by the link number <i>num</i>. Returns TRUE at correct setting.</li>
<li> <i>void addLinksAttrs( TElem *attrsCntr = NULL );</i> — Adds links and DAQ parameter's attributes, at <i>attrsCntr</i> presence.</li>
<li> <i>bool initLnks( bool toRecnt = false );</i> — Inits/connects all the links. Set <i>toRecnt</i> to force the re-linking. Returns TRUE at presence at last one not initiated link — needs for the initialization/activation repeating.</li>
<li> <i>virtual void cleanLnks( bool andFunc = false );</i> — Cleans all the links and the function, for <i>andFunc</i>.</li>
<li> <i>void inputLinks( );</i> — Gets for values of all the links.</li>
<li> <i>void outputLinks( );</i> — Sets for values of all the links.</li>
<li> <i>void archAttrs( TValue *vl );</i> — Updating the attribute values in <i>vl</i> from the Logical Level context and with writing them to the archive for the archivating attributes.</li>
<li> <i>virtual bool cntrCmdProc( XMLNode *opt, const string &amp;pref = "/cfg" );</i> — Calls for control interface of the links with the prefix "pref".</li></ul>
<p><b>Protected attributes:</b><br />
</p>
<ul><li> <i>map&lt;int,SLnk&gt; lnks;</i> — links contatiner;</li>
<li> <i>TCntrNode *obj;</i> — associated control node;</li></ul>
<p><b>Protected methods:</b><br />
</p>
<ul><li> <i>virtual string lnkHelp( );</i> — Returns help for the links address' syntax.</li></ul>
<h2><span class="mw-headline" id="Subsystem_.22Archives-History.22"><span class="mw-headline-number">5</span> <span id="TArchiveS" title="#TArchiveS">Subsystem "Archives-History"</span></span></h2>
<p>Subsystem "Archives" is represented by an object TArchiveS, which contains at the subsystem level the modular objects of the archivers types TTypeArchivator. Each object of the archiver type contains objects of the messages' archivers  TMArchivator and values' archivers TVArchivator. In addition, the subsystem object contains the methods of the messages archive and objects of the values' archives TVArchive. The object of the values' archive TVArchive contains the buffer of values through the inheritance of the buffer object TValBuf. To connect the archive of values with the archivers the object of the value element TVArchEl is provided. This object is contained in the archiver and it is referenced by the archive. Structure of the subsystem "Archives" is presented in Fig. 5.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:221px;"><a class="image" href="http://oscada.org/wiki/File:Oscada_subsys_arch_str.png"><img class="thumbimage" height="251" src="../en/files/Oscada_subsys_arch_str.png" width="219" /></a>  <div class="thumbcaption">Fig. 5. Hierarchical structure of the subsystem "Archives".</div></div></div></div>
<p>Subsystem "Archives" contains the mechanisms for archiving of messages and values. It directly contains the messages' archive together with its buffer. Contains methods for accessing the archives of the values and for the archivers of values and messages. Besides it performs the actively data acquisition from sources of values for the archives of values, as well as archiving the archive of messages by the archivers.
</p><p>Archive of values (TVArchive) contains the buffer (TValBuf) for intermediate values' accumulation before archiving. It is connected with the source of values in the person of OpenSCADA parameters in active or passive mode, as well as with other sources in the passive mode. To archive to the physical storage it is connected with the values' archivers of various types.
</p><p>Object of the buffer TValBuf contains an array of values of the main types of OpenSCADA: string, integer, real and boolean. It is supported the storage of values in the modes of hard, soft grid and in the free access mode. It is also provided the mode of high-resolution time (microseconds). It is used for direct storage of large arrays of values, and for the exchange of large arrays by the frame-accurate method of access. 
</p><p>Root object of the module of subsystem "Archives" (TTypeArchivator) contains information about the specific type of module. Within the individual modules it can implement their own module-wide functions. In general, for modules of this type it contains methods to access the repositories of values and messages.
</p><p>Object of the messages' archiver (TMArchivator) contains the specific implementation of the message storage. In general, for messages' archivers the interface of access to the implementation of an archiving mechanism in modules is provided.
</p><p>Object of the values' archiver (TVArchivator) contains the specific implementation of the repository of values. In general, for the values' archivers the access interface to implementation of the archiving mechanism and the appointment of archives of values for service by archiver are provided.
</p><p>Object of the archive element TVArchEl links the archive objects  with the archivers. It is used to access the archiver from the archive, as well as to archives from the archiver, ie for cross-calls.
</p>
<h3><span class="mw-headline" id="The_object_of_the_subsystem_.22Archives.22_.28TArchiveS.29"><span class="mw-headline-number">5.1</span> <span id="TArchiveS" title="#TArchiveS">The object of the subsystem "Archives" (TArchiveS)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TSubSYS">TSubSYS</a></i>
</td></tr></table>
<p>Modes of forming ID of the automatic created archives:
</p>
<ul><li> <i>BothPrmAttrId</i> — combining the parameter and the attribute ID.</li>
<li> <i>OnlyPrmId</i> — only the parameter ID.</li>
<li> <i>OnlyAttrId</i> — only the attribute ID.</li>
<li> <i>AllCntrPrmAttrId</i> — all controller, parameter and attribute ID.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>int subVer( );</i> — Subsystem's version.</li>
<li> <i>int messPeriod( );</i> — Period of archiving of messages from the buffer (seconds).</li>
<li> <i>int valPeriod( );</i> — Acquisition of values period for the active archivers (milliseconds).</li>
<li> <i>int valPrior( );</i> — Priority of the tasks of the values acquisition for the active archivers.</li>
<li> <i>bool valForceCurTm( );</i> — Points to force of current time as the time-stamp of the getting values.</li>
<li> <i>AutoIdMode autoIdMode( );</i> — Gets the mode of forming ID of the automatic created archives.</li>
<li> <i>void setMessPeriod( int ivl );</i> — Setting the period of the archiving of messages from the buffer (seconds).</li>
<li> <i>void setValPeriod( int ivl );</i> — Setting the values' acquisition period for active archivers (milliseconds).</li>
<li> <i>void setValPrior( int ivl );</i> — Setting the priority of the values' acquisition task for the active archivers.</li>
<li> <i>void setValForceCurTm( bool vl );</i> — Force of current time as the time-stamp of the getting values.</li>
<li> <i>void setAutoIdMode( AutoIdMode vl );</i> — Sets the mode <i>vl</i> of forming ID of the automatic created archives.</li>
<li> <i>void setToUpdate( );</i> — Planing update flag set.</li>
<li> <i>void subStart( );</i> — Start of the subsystem.</li>
<li> <i>void subStop( );</i> — Stop of the system.</li>
<li> <i>void valList( vector&lt;string&gt; &amp;list ) const;</i> — The list of the values'archives in the subsystem.</li>
<li> <i>bool valPresent( const string &amp;id ) const;</i> — Check for the availability of the values' archive <i>id</i>.</li>
<li> <i>string valAdd( const string &amp;id, const string &amp;idb = "*.*" );</i> — Addition of the new values' archive <i>id</i>. Returns the end created identifier.</li>
<li> <i>void valDel( const string &amp;id, bool db = false );</i> — Deleting of the values' archive <i>id</i>.</li>
<li> <i>AutoHD&lt;TVArchive&gt; valAt( const string &amp;id ) const;</i> — Connection/addressing to the values' archive <i>id</i>.</li>
<li> <i>void setActMess( TMArchivator *a, bool val );</i> — Setting of the messages archivator <i>a</i> into the active status <i>val</i>. Active archivator will be provided by the subsystem with the flow of messages.</li>
<li> <i>void setActVal( TVArchive *a, bool val );</i> — Setting of the value archive <i>a</i> into the active status <i>val</i>. Active archive will be provided by the subsystem with the periodic flow of values (is determined by the periodicity of the archive).</li>
<li> <i>AutoHD&lt;TTypeArchivator&gt; at( const string &amp;name );</i> — Connection/addressing to the archiver's type (module) <i>name</i>.</li>
<li> <i>void messPut( time_t tm, int utm, const string &amp;categ, int8_t level, const string &amp;mess, const string &amp;arch = "" ); void messPut( const TMess::SRec &amp;rec, const string &amp;arch = "" );</i> — Location of the message <i>mess</i> with the <i>level</i> of the category <i>categ</i> and time <i>tm+utm</i>, or the complete TMess::SRec structure <i>rec</i>, into the buffer, and then into the messages' archive or direct to the pointed archivators <i>arch</i> (separated by symbol ';').</li>
<li> <i>void messPut( const vector&lt;TMess::SRec&gt; &amp;recs, const string &amp;arch = "" );</i> — Location of the group of values <i>recs</i> into the buffer, and then into the messages' archive or direct to the pointed archivators <i>arch</i> (separated by symbol ';').</li>
<li> <i>time_t messGet( time_t bTm, time_t eTm, vector&lt;TMess::SRec&gt; &amp;recs, const string &amp;category = "", int8_t level = TMess::Debug, const string &amp;arch = "", time_t upTo = 0 );</i> — Values' request <i>reqs</i> for the specified period of time <i>bTm, eTm</i> for the specified category (by the template) <i>category</i> and level <i>level</i> from the archivators <i>arch</i> (separated by symbol ';'). Return time of the request stop, useful for continue from the point.</li>
<li> <i>time_t messBeg( const string &amp;arch = "" );</i> — Beginning of the messages' archive as a whole or for the specified archiver <i>arch</i>.</li>
<li> <i>time_t messEnd( const string &amp;arch = "" );</i> — End of the messages' archive as a whole or for the specified archiver <i>arch</i>.</li>
<li> <i>time_t rdTm( );</i> — Time of the last redundancy operation, maximum for message archivers in the active redundancy.</li>
<li> <i>double rdRestDtOverTm( );</i> — Overtime of the reserve history reload at start in days.</li>
<li> <i>void setRdRestDtOverTm( double vl );</i> — Setting of overtime of the reserve history reload at start in days.</li>
<li> <i>void rdActArchMList( vector&lt;string&gt; &amp;ls, bool isRun = false );</i> — The list of active message archivators working in the redundancy scheme. When we indicate <i>isRun</i> there will be in the list only running message archvators in this station.</li>
<li> <i>string rdStRequest( const string &amp;arch, XMLNode &amp;req, const string &amp;prevSt = "", bool toRun = true );</i> — Request <i>req</i> to the redundant station on behalf of the message archivator <i>arch</i>. The station for the request is selected after specified in <i>prevSt</i> for the running remotely message archivators when indicating <i>toRun</i>.</li>
<li> <i>TElem &amp;messE( );</i> — DB structure of the messages' archivers.</li>
<li> <i>TElem &amp;valE( );</i> — DB structure of the values' archivers.</li>
<li> <i>TElem &amp;aValE( );</i> — DB structure of the values' archives.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>bool SubStarting;</i> — The subsystem starting flag.</li></ul>
<h3><span class="mw-headline" id="The_object_of_the_values.27_archive_.28TVArchive.29"><span class="mw-headline-number">5.2</span> <span id="TVArchive" title="#TVArchive">The object of the values' archive (TVArchive)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TCntrNode">TCntrNode</a>, <a href="#TValBuf">TValBuf</a>, <a href="#TConfig">TConfig</a></i>
</td></tr></table>
<p><b>Data:</b><br />
The data acquisition mode/source (enumeration — TVArchive::SrcMode):
</p>
<ul><li> <i>SaveCur (-1)</i> — save current mode in the commands;</li>
<li> <i>Passive (0)</i> — passive mode of the data acquisition, the source puts the data into the archive itself;</li>
<li> <i>DAQAttr (1)</i> — the data acquisition from the DAQ attribute when the DAQ attribute puts the data into the archive itself;</li>
<li> <i>ActiveAttr (2)</i> [DEPRECATED] — active mode of the data acquisition from the DAQ attribute when the DAQ attribute is periodically polled by the subsystem "Archives";</li></ul>
<p>The data combination mode (enumeration — TVArchive::CombMode):
</p>
<ul><li> <i>MovAver (0)</i> — moving average;</li>
<li> <i>LastVal (1)</i> — last-previous value;</li>
<li> <i>MinVal (2)</i> — minimum value;</li>
<li> <i>MaxVal (3)</i> — maximum value.</li></ul>
<p>Data modes of the <a href="#ServFunc">service request</a> "Requesting for values of the specified value archive" (enumeration — TVArchive::ServReqDtMode):
</p>
<ul><li> <i>DMSimple (0)</i> — simple record, one item per line;</li>
<li> <i>DMPack (1)</i> — packed record, one adjacent equal (rounded) value per line;</li>
<li> <i>DMBin (2)</i> — array of unpacked binary values encoded by Base64.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TVArchive( const string &amp;id, const string &amp;db, TElem *cf_el );</i> — Initializing constructor of the archive, where <i>id</i> — archive ID, <i>db</i> — DB for storage and <i>cf_el</i> — DB structure of the values' archives.</li>
<li> <i>string id( );</i> — Archive's ID.</li>
<li> <i>string name( );</i> — Archive's name.</li>
<li> <i>string dscr( );</i> — Archive's description.</li>
<li> <i>SrcMode srcMode( );</i> — Linkage mode with the data source.</li>
<li> <i>AutoHD&lt;TVal&gt; srcPAttr( bool force = false, const string &amp;ipath = "" );</i> — Connect to associated attribute of parameter of data source.</li>
<li> <i>string srcData( );</i> — Parameters of the data source, in the case of access mode to the parameter this is the address of the parameter.</li>
<li> <i>bool toStart( );</i> — Sign: "Start the archive when starting the system".</li>
<li> <i>bool startStat( );</i> — Status: "Archive started".</li>
<li> <i>string DB( bool qTop = false ) const;</i> — Storage address of the values' archive, <i>qTop</i> for the storage queue top.</li>
<li> <i>string tbl( );</i> — DB table of the values' archive.</li>
<li> <i>string fullDB( bool qTop = false );</i> — Full name of the storage table of the values' archive, <i>qTop</i> for the storage queue top.</li>
<li> <i>int64_t end( const string &amp;arch = ARCH_BUF );</i> — End of the archive time at whole (arch="") or the specified archiver, buffer (arch="&lt;bufer&gt;").</li>
<li> <i>int64_t begin( const string &amp;arch = ARCH_BUF );</i> — Start of the archive time at whole (arch="") or the specified archiver, buffer (arch="&lt;bufer&gt;").</li>
<li> <i>int64_t period( const string &amp;arch = ARCH_BUF );</i> — Periodicity of the archive buffer or the specified archiver (microseconds).</li>
<li> <i>TFld::Type valType( bool full = false );</i> — Type of the archived value. <i>full</i> — request full type, else only generic.</li>
<li> <i>bool hardGrid( );</i> — Using of the hard grid in the archive buffer.</li>
<li> <i>bool highResTm( );</i> — Using of the high-resolution time in the archive buffer (microseconds).</li>
<li> <i>bool fillLast( );</i> — Fill pass points to a last value. Mostly the pass values fill by EVAL but sometime the source's data periodicity greater to the archive's one and it is normal.</li>
<li> <i>int size( );</i> — Archive buffer size (units).</li>
<li> <i>void setName( const string &amp;inm );</i> — Setting the name of the archive.</li>
<li> <i>void setDscr( const string &amp;idscr );</i> — Setting the description of the archive.</li>
<li> <i>void setSrcMode( SrcMode vl = SaveCur, const string &amp;isrc = "&lt;*&gt;", bool noex = false );</i> — Setting the linkage mode with the data source.</li>
<li> <i>void setToStart( bool vl );</i> — Setting the sign: "Start the archive when starting the system".</li>
<li> <i>void setDB( const string &amp;vl, bool qTop = false );</i> — Setting the storage address of the values' archive, <i>qTop</i> for the storage queue top.</li>
<li> <i>void setValType( TFld::Type vl );</i> — Setting the type of the archived value.</li>
<li> <i>void setHardGrid( bool vl );</i> — Setting the using of the hard grid in the archive buffer.</li>
<li> <i>void setHighResTm( bool vl );</i> — Setting of using of the high-resolution time in the archive buffer (microseconds).</li>
<li> <i>void setFillLast( bool vl );</i> — Set to fill pass points to a last value.</li>
<li> <i>void setSize( int vl );</i> — Setting of the archive buffer size (units).</li>
<li> <i>void setPeriod( int64_t vl );</i> — Setting the periodicity of the archive buffer.</li>
<li> <i>void start( );</i> — Start of the archive.</li>
<li> <i>void stop( bool full_del = false );</i> — Stop of the archive with it's completely deleting <i>full_del</i>.</li>
<li> <i>TVariant getVal( int64_t *tm = NULL, bool up_ord = false, const string &amp;arch = "", bool onlyLocal = false );</i> — Request of the single value for the time <i>tm</i> and with the sign of the moving to the top <i>up_ord</i> from the specified archiver <i>arch</i>, buffer (arch = "&lt;bufer&gt;") or from all archivers in the course of falling quality (arch =""). To process the request only by the local station <i>onlyLocal</i> is set.</li>
<li> <i>void getVals( TValBuf &amp;buf, int64_t beg = 0, int64_t end = 0, const string &amp;arch = "", int limit = 100000, bool onlyLocal = false );</i> — Request of the values' frame <i>buf</i> for the time from <i>beg</i> to <i>end</i> from the specified archiver <i>arch</i>, buffer (arch = "&lt;bufer&gt;") or from the all archivers in the course of falling quality (arch =""), limiting the size of the request <i>limit</i> of the record. To request only the local archives, without compensation gaps in the archives from the backup stations, set <i>onlyLocal</i>.</li>
<li> <i>void setVals( TValBuf &amp;buf, int64_t beg, int64_t end, const string &amp;arch );</i> — Set of the values' frame <i>buf</i> for the time from <i>beg</i> to <i>end</i> to the specified archiver <i>arch</i>, buffer (arch = "&lt;bufer"&gt;) or to all archivers (arch ="").</li>
<li> <i>void getActiveData( const int64_t &amp;tm = 0 );</i> — To interrogate the data source with forcing time-stamp to <i>tm</i> (not zero). Is used for periodic data acquisition by the active archives in the subsystem.</li>
<li> <i>void archivatorList( vector&lt;string&gt; &amp;ls );</i> — List of archivers which serves the archive.</li>
<li> <i>bool archivatorPresent( const string &amp;arch );</i> — Check the archiver for it's servicing of the given archive.</li>
<li> <i>void archivatorAttach( const string &amp;arch );</i> — Connecting the archive to be served by the specified archiver.</li>
<li> <i>void archivatorDetach( const string &amp;arch, bool full = false );</i> — Disabling this archive from the servicing of the specified archiver.</li>
<li> <i>void archivatorSort( );</i> — Sort of the serving archivers in the order of decreasing quality.</li>
<li> <i>string makeTrendImg( int64_t beg, int64_t end, const string &amp;arch, int hsz = 650, int vsz = 230 );</i> — Building of the (pdf) image of the trend for the specified amount of time <i>beg, end</i> and for this archiver <i>arch</i>.</li>
<li> <i>TArchiveS &amp;owner( ) const;</i> — Subsystem "Archives" - the owner of the archive of values.</li></ul>
<h3><span class="mw-headline" id="Object_of_the_values.27_buffer_.28TValBuf.29"><span class="mw-headline-number">5.3</span> <span id="TValBuf" title="#TValBuf">Object of the values' buffer (TValBuf)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherited:</b></td>
<td><i><a href="#TVArchive">TVArchive</a></i>
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TValBuf( );</i> — Buffer initializer with default settings.</li>
<li> <i>TValBuf( TFld::Type vtp, int isz, int64_t ipr, bool ihgrd = false, bool ihres = false );</i> — Buffer initializer with the specified parameters.</li>
<li> <i>TValBuf( const TValBuf &amp;src );</i> — Copying constructor.</li>
<li> <i>TValBuf &amp;operator=( const TValBuf &amp;src );</i> — Object copying.</li>
<li> <i>void clear( );</i> — Cleaning the buffer.</li>
<li> <i>TFld::Type valType( bool full = false );</i> — Type of the value stored in the buffer. <i>full</i> — request full type, else only generic.</li>
<li> <i>bool hardGrid( );</i> — Hard grid working mode.</li>
<li> <i>bool highResTm( );</i> — High resolution (microseconds) working mode of the buffer.</li>
<li> <i>bool fillLast( );</i> — Fill pass points to a last value. Mostly the pass values fill by EVAL but sometime the source's data periodicity greater to the archive's one and it is normal.</li>
<li> <i>int size( );</i> — Maximum buffer size (units).</li>
<li> <i>int realSize( );</i> — Real buffer size (units).</li>
<li> <i>int64_t period( );</i> — Frequency of values in the buffer (microseconds). If the frequency is zero the buffer operates in the mode of free access.</li>
<li> <i>int64_t begin( );</i> — Start time of the buffer (microseconds).</li>
<li> <i>int64_t end( );</i> — End time of the buffer (microseconds).</li>
<li> <i>bool vOK( int64_t ibeg, int64_t iend );</i> — Checking for values in the buffer for the specified period of time from <i>ibeg</i> to <i>iend</i>.</li>
<li> <i>void setValType( TFld::Type vl );</i> — Setting of the value type stored by the buffer.</li>
<li> <i>void setHardGrid( bool vl );</i> — Setting the hard grid mode.</li>
<li> <i>void setHighResTm( bool vl );</i> — High resolution (microseconds) working mode setting.</li>
<li> <i>void setFillLast( bool vl );</i> — Set to fill pass points to a last value.</li>
<li> <i>void setSize( int vl );</i> — Buffer size (units) setting.</li>
<li> <i>void setPeriod( int64_t vl );</i> — Frequency of values in the buffer (microseconds) setting.</li>
<li> <i>virtual void getVals( TValBuf &amp;buf, int64_t beg = 0, int64_t end = 0 );</i> — Request of the values' frame  <i>buf</i> for the time from <i>beg</i> to <i>end</i>.</li>
<li> <i>TVariant get( int64_t *tm = NULL, bool up_ord = false );</i> — Request value for the time <i>tm</i> and with the sign of moving to the top <i>up_ord</i>.</li>
<li> <i>virtual string getS( int64_t *tm = NULL, bool up_ord = false );</i> — Request of the string type value for the time <i>tm</i> and with the sign of moving to the top <i>up_ord</i>.</li>
<li> <i>virtual double getR( int64_t *tm = NULL, bool up_ord = false );</i> — Request of the real type value for the time <i>tm</i> and with the sign of moving to the top <i>up_ord</i>.</li>
<li> <i>virtual int64_t getI( int64_t *tm = NULL, bool up_ord = false );</i> — Request of the integer type value for the time <i>tm</i> and with the sign of moving to the top <i>up_ord</i>.</li>
<li> <i>virtual char getB( int64_t *tm = NULL, bool up_ord = false );</i> — Request of the boolean type value for the time <i>tm</i> and with the sign of moving to the top <i>up_ord</i>.</li>
<li> <i>virtual void setVals( TValBuf &amp;buf, int64_t beg = 0, int64_t end = 0 );</i> — Setting the values' frame from <i>buf</i> fro the time from <i>beg</i> to <i>end</i>.</li>
<li> <i>void set( const TVariant &amp;value, int64_t tm = 0 );</i> — Setting value with the time <i>tm</i>.</li>
<li> <i>virtual void setS( const string &amp;value, int64_t tm = 0 );</i> — Setting the string type value with the time <i>tm</i>.</li>
<li> <i>virtual void setR( double value, int64_t tm = 0 );</i> — Setting the real type value with the time <i>tm</i>.</li>
<li> <i>virtual void setI( int64_t value, int64_t tm = 0 );</i> — Setting the integer type value with the time <i>tm</i>.</li>
<li> <i>virtual void setB( char value, int64_t tm = 0 );</i> — Setting the boolean type value with the time <i>tm</i>.</li></ul>
<p><b>Protected methods:</b>
</p>
<ul><li> <i>void makeBuf( TFld::Type v_tp, int isz, int64_t ipr, bool hd_grd, bool hg_res );</i> — Rebuilding the buffer for the specified parameters.</li></ul>
<h3><span class="mw-headline" id="The_modular_object_of_the_archiver.27s_type_.28TTypeArchivator.29"><span class="mw-headline-number">5.4</span> <span id="TTypeArchivator" title="#TTypeArchivator">The modular object of the archiver's type (TTypeArchivator)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TModule">TModule</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td>By the root objects of the modules of subsystem "Archives".
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>void messList( vector&lt;string&gt; &amp;list ) const;</i> — The list of the messages' archivers.</li>
<li> <i>bool messPresent( const string &amp;id ) const;</i> — Check for the presence of the specified messages' archiver.</li>
<li> <i>string messAdd( const string &amp;id, const string &amp;idb = "*.*" );</i> — Adding of the messages' archiver. Returns the end created identifier.</li>
<li> <i>void messDel( const string &amp;id, bool full = false );</i> — Deleting of the messages' archiver.</li>
<li> <i>AutoHD&lt;TMArchivator&gt; messAt( const string &amp;id ) const;</i> — Connection to the messages' archiver.</li>
<li> <i>void valList( vector&lt;string&gt; &amp;list ) const;</i> — The list of the values' archivers.</li>
<li> <i>bool valPresent( const string &amp;id ) const;</i> — Check for the presence of the specified values' archiver.</li>
<li> <i>string valAdd( const string &amp;id, const string &amp;idb = "*.*" );</i> — Adding of the values' archiver. Returns the end created identifier.</li>
<li> <i>void valDel( const string &amp;id, bool full = false );</i> — Deleting of the values' archiver.</li>
<li> <i>AutoHD&lt;TVArchivator&gt; valAt( const string &amp;id ) const;</i> — Connection to the values' archiver.</li>
<li> <i>TArchiveS &amp;owner( ) const;</i> — Subsystem "Archives" - the owner of the archiver's type.</li></ul>
<p><b>Protected methods:</b>
</p>
<ul><li> <i>virtual TMArchivator *AMess( const string &amp;id, const string &amp;stor );</i> — Called when a new object of the message archiver is opened or created by this module with the identifier <i>id</i> and in the storage <i>stor</i>.</li>
<li> <i>virtual TVArchivator *AVal( const string &amp;id, const string &amp;stor );</i> — Called when a new object of the value archiver is opened or created by this module with the identifier <i>id</i> and in the storage <i>stor</i>.</li></ul>
<h3><span class="mw-headline" id="The_object_of_the_messages.27_archiver_.28TMArchivator.29"><span class="mw-headline-number">5.5</span> <span id="TMArchivator" title="#TMArchivator">The object of the messages' archiver (TMArchivator)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TCntrNode">TCntrNode</a>, <a href="#TConfig">TConfig</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td>By the objects of the archivers of messages of modules of the subsystem "Archives".
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TMArchivator( const string &amp;id, const string &amp;db, TElem *cf_el );</i> — Initializing constructor of the messages' archiver with the ID <i>id</i>, for the storage in the database <i>db</i> with the structure <i>&lt;cf_el&gt;</i>.</li>
<li> <i>string id( );</i> — Archiver's ID.</li>
<li> <i>string workId( );</i> — Working identifier, it includes the name of the module.</li>
<li> <i>string name( );</i> — Archiver's name.</li>
<li> <i>string dscr( );</i> — Archiver's description.</li>
<li> <i>bool toStart( );</i> — The sign "To start the archiver".</li>
<li> <i>bool startStat( );</i> — Archivers' status "Run".</li>
<li> <i>string &amp;addr( ) const;</i> — Address of the archiver's storage.</li>
<li> <i>int &amp;level( );</i> — The level of messages, serviced by the archiver.</li>
<li> <i>void categ( vector&lt;string&gt; &amp;list );</i> — Categories (templates) of messages, serviced by the archiver.</li>
<li> <i>string DB( bool qTop = false ) const;</i> — Storage address of the archiver, <i>qTop</i> for the storage queue top.</li>
<li> <i>string tbl( );</i> — Table address of the archiver's DB.</li>
<li> <i>string fullDB( bool qTop = false );</i> — The full table address of the archiver's storage, <i>qTop</i> for the storage queue top.</li>
<li> <i>void setName( const string &amp;vl );</i> — Setting the archiver's name.</li>
<li> <i>void setDscr( const string &amp;vl );</i> — Setting the archiver's description.</li>
<li> <i>void setToStart( bool vl );</i> — Setting the sign "To start the archiver".</li>
<li> <i>void setAddr( const string &amp;vl );</i> — Setting the address of the archiver's storage.</li>
<li> <i>void setLevel( int lev );</i> — Setting the level of messages, serviced by the archiver.</li>
<li> <i>void setDB( const string &amp;vl, bool qTop = false );</i> — Setting the storage address of the archiver, <i>qTop</i> for the storage queue top.</li>
<li> <i>time_t redntTm( );</i> — Time of the last redundancy operation.</li>
<li> <i>bool redntUse( );</i> — Getting the data from the backup station mode.</li>
<li> <i>void setRedntUse( bool vl );</i> — Changing of the getting the data from the backup station mode.</li>
<li> <i>Redundant redntMode( );</i> — Redundancy mode ("&lt;high&gt;", "&lt;low&gt;", "&lt;optimal&gt;", {ForceStation}), enabling.</li>
<li> <i>void setRedntMode( Redundant vl );</i> — Setting of the redundancy mode, enabling.</li>
<li> <i>string redntRun( );</i> — Configuration of the preferred execution.</li>
<li> <i>void setRedntRun( const string &amp;vl );</i> — Setting the configuration of the preferred execution.</li>
<li> <i>virtual void redntDataUpdate( );</i> — Operation of the data receiving from the backup station, called automatically by the service procedure of the redundancy scheme of the subsystem.</li>
<li> <i>virtual void start( );</i> — Starting the archiver object, the archiver starts for receiving messages and placing them into the storage.</li>
<li> <i>virtual void stop( );</i> — Stopping the archiver object.</li>
<li> <i>virtual time_t begin( );</i> — Begin time of the archiver data accordingly with the current state of the storage.</li>
<li> <i>virtual time_t end( );</i> — End time of the archiver data accordingly with the current state of the storage.</li>
<li> <i>virtual bool put( vector&lt;TMess::SRec&gt; &amp;mess, bool force = false );</i> — Placing the message group <i>mess</i> to the archiver. Returns TRUE on the successful operation. Set <i>force</i> for direct writing to the archiver omit the redundancy.</li>
<li> <i>virtual time_t get( time_t bTm, time_t eTm, vector&lt;TMess::SRec&gt; &amp;mess, const string &amp;category = "", char level = 0, time_t upTo = 0 );</i> — Getting the messages to <i>mess</i> from the archiver for the specified filter parameters. Returns time of the request stop, useful for proceeding from this position as the end time, i.e. iteratively digging into the story. The filter specified by the time range [<i>bTm</i>...<i>eTm</i>], <i>category</i> rules, <i>level</i> and limited up to the time <i>upTo</i>. In the absence of a direct definition of the limiting time <i>upTo</i>, this limitation is set to <i>prmInterf_TM</i> — 7 seconds.</li>
<li> <i>TTypeArchivator &amp;owner( ) const;</i> — Archiver's type – the owner of the messages' archiver.</li></ul>
<p><b>Protected attributes:</b>
</p>
<ul><li> <i>bool runSt;</i> — The sign "Running".</li>
<li> <i>int messHead;</i> — The pointer to last read message of the messages buffer.</li></ul>
<p><b>Protected methods:</b>
</p>
<ul><li> <i>bool chkMessOK( const string &amp;icateg, int8_t ilvl );</i> — Check the message to the filter conditions.</li></ul>
<h3><span class="mw-headline" id="The_object_of_the_values.27_archiver_.28TVArchivator.29"><span class="mw-headline-number">5.6</span> <span id="TVArchivator" title="#TVArchivator">The object of the values' archiver (TVArchivator)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TCntrNode">TCntrNode</a>, <a href="#TConfig">TConfig</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td>By the objects of the archivers of values of modules of the subsystem "Archives".
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TVArchivator( const string &amp;id, const string &amp;db, TElem *cf_el );</i> — Initializing constructor of the values' archiver with the ID <i>id</i>, for the storage in the database <i>db</i> with the structure <i>cf_el</i>.</li>
<li> <i>string id( );</i> — Archiver's ID.</li>
<li> <i>string workId( );</i> — Working identifier, it includes the name of the module.</li>
<li> <i>string name( );</i> — Archiver's name.</li>
<li> <i>string dscr( );</i> — Archiver's description.</li>
<li> <i>string addr( ) const;</i> — Address of the archiver's storage.</li>
<li> <i>double valPeriod( );</i> — Frequency of values of the archiver (microseconds).</li>
<li> <i>int archPeriod( );</i> — Frequency of the values' archiving by the archiver. Time after which the archiver makes archiving of the frame of values from the archive's buffer.</li>
<li> <i>int selPrior( );</i> — Selection priority for mode "All" archivers.</li>
<li> <i>bool toStart( );</i> — The sign "To start the archiver".</li>
<li> <i>bool startStat( );</i> — Archivers' status "Run".</li>
<li> <i>string DB( bool qTop = false ) const;</i> — Storage address of the archiver, <i>qTop</i> for the storage queue top.</li>
<li> <i>string tbl( );</i> — Table address of the archiver's DB.</li>
<li> <i>string fullDB( bool qTop = false );</i> — The full table address of the archiver's storage, <i>qTop</i> for the storage queue top.</li>
<li> <i>void setName( const string &amp;inm );</i> — Setting the archiver's name.</li>
<li> <i>void setDscr( const string &amp;idscr );</i> — Setting the archiver's description.</li>
<li> <i>void setAddr( const string &amp;vl );</i> — Setting the address of the archiver's storage.</li>
<li> <i>void setValPeriod( double iper );</i> — Setting the frequency of values of the archiver (microseconds).</li>
<li> <i>void setArchPeriod( int iper );</i> — Setting the frequency of the values' archiving by the archiver. Time after which the archiver makes archiving of the frame of values from the archive's buffer.</li>
<li> <i>void setSelPrior( int vl );</i> — Set selection priority for mode "All" archivers.</li>
<li> <i>void setToStart( bool vl );</i> — Setting the sign "To start the archiver".</li>
<li> <i>void setDB( const string &amp;vl, bool qTop = false );</i> — Setting the storage address of the archiver, <i>qTop</i> for the storage queue top.</li>
<li> <i>virtual void start( );</i> — starting the archiver object, the archiver starts for receiving values and placing them into the storage.</li>
<li> <i>virtual void stop( bool full_del = false );</i> — stopping the archiver object with the ability to completely remove its data from the storage at <i>full_del</i>.</li>
<li> <i>void archiveList( vector&lt;string&gt; &amp;ls );</i> — The archive's list, serviced by the archiver.</li>
<li> <i>bool archivePresent( const string &amp;iid );</i> — Check for the servicing of the specified archive by the specified archiver.</li>
<li> <i>TTypeArchivator &amp;owner( ) const;</i> — Archiver's type – the owner of the values' archiver.</li></ul>
<p><b>Protected methods:</b>
</p>
<ul><li> <i>TVArchEl *archivePlace( TVArchive &amp;item );</i> — Add the archive <i>item</i> to the processing by the archiver.</li>
<li> <i>void archiveRemove( const string &amp;id, bool full = false );</i> — Remove the archive <i>id</i> from the processing by the archiver, with the possibility of its full deleting  <i>full</i>.</li>
<li> <i>virtual TVArchEl *getArchEl( TVArchive &amp;arch );</i> — Getting the element object of the value archive for the specified archive <i>arch</i>.</li>
<li> <i>virtual void pushAccumVals( );</i> — Pushing the accumulated values by the archivation task, for the accumulative archivers.</li></ul>
<p><b>Protected attributes:</b>
</p>
<ul><li> <i>ResRW archRes;</i> — Resource locker of the archiving process.</li>
<li> <i>bool runSt;</i> — The sign "Archiver is run".</li>
<li> <i>bool endrunReq;</i> — The sign "End run request to the archiver task".</li>
<li> <i>vector&lt;TVArchEl *&gt; archEl;</i> — Array of elements of archives in the archiver.</li></ul>
<h3><span class="mw-headline" id="The_object_of_the_archive.27s_element_in_the_archiver_.28TVArchEl.29"><span class="mw-headline-number">5.7</span> <span id="TVArchEl" title="#TVArchEl">The object of the archive's element in the archiver (TVArchEl)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherited:</b></td>
<td>By the objects of the archivers of values of modules of the subsystem "Archives".
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TVArchEl( TVArchive &amp;iarchive, TVArchivator &amp;iarchivator );</i> — Initializing constructor fro the connection the archive <i>iarchive</i> with the archiver <i>iarchivator</i>.</li>
<li> <i>virtual void fullErase( );</i> — Called to complete removal of the archive part in the archiver.</li>
<li> <i>virtual int64_t end( );</i> — End time in microseconds of the available values in the archive of the archiver.</li>
<li> <i>virtual int64_t begin( );</i> — Begin time in microseconds of the available values in the archive of the archiver.</li>
<li> <i>int64_t lastGet( );</i> — Time of last transfer of the data from the buffer to the storage.</li>
<li> <i>TVariant getVal( int64_t *tm, bool up_ord, bool onlyLocal = false );</i> — Request of the value for the time <i>tm</i> and with the sign of moving to the top <i>up_ord</i>, with the specifying of the request of only local archive in <i>onlyLocal</i>.</li>
<li> <i>void getVals( TValBuf &amp;buf, int64_t beg = 0, int64_t end = 0, bool onlyLocal = false );</i> — Request of the values' frame <i>buf</i> for the time from <i>beg</i> to <i>end</i>, with the specifying of the request of only local archive in <i>onlyLocal</i>.</li>
<li> <i>void setVals( TValBuf &amp;buf, int64_t beg = 0, int64_t end = 0, bool toAccum = false );</i> — Setting the values' frame from the <i>buf</i> for the time from <i>beg</i> to <i>end</i>, through the accumulation <i>toAccum</i>.</li>
<li> <i>TVArchive &amp;archive( );</i> — Elements' archive.</li>
<li> <i>TVArchivator &amp;archivator( );</i> — Elements' archiver.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>int64_t prev_tm;</i> — The previous value time. It is used for averaging.</li>
<li> <i>string prev_val;</i> — The previous value time. It is used for averaging.</li></ul>
<p><b>Protected methods:</b>
</p>
<ul><li> <i>virtual TVariant getValProc( int64_t *tm, bool up_ord );</i> — Requesting of one value from the archive for the time <i>tm</i> and fine-tuning to the upper value in the sampling grid <i>up_ord</i>.</li>
<li> <i>virtual void getValsProc( TValBuf &amp;buf, int64_t beg, int64_t end );</i> — Requesting of a value group to <i>buf</i> from the archive and for the time range [<i>beg</i>...<i>end</i>].</li>
<li> <i>virtual void setValsProc( TValBuf &amp;buf, int64_t beg, int64_t end, bool toAccum );</i> — Setting of the value group <i>buf</i> to the archive, for the time range [<i>beg</i>...<i>end</i>] and through the accumulation <i>toAccum</i>.</li></ul>
<h2><span class="mw-headline" id="Subsystem_.22Transports.22"><span class="mw-headline-number">6</span> <span id="TTransportS" title="#TTransportS">Subsystem "Transports"</span></span></h2>
<p>"Transports" subsystem is represented by the TTransportS object, which contains modular objects of the transports' types TTypeTransport on the subsystem-level. Each type of transport contains objects TTransportIn of the input and TTransportOut of the output transports. The overall structure of the subsystem is shown in Fig. 6.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:293px;"><a class="image" href="http://oscada.org/wiki/File:Oscada_subsys_tr_str.png"><img class="thumbimage" height="296" src="../en/files/Oscada_subsys_tr_str.png" width="291" /></a>  <div class="thumbcaption">Fig. 6. Hierarchical structure of the subsystem "Transports".</div></div></div></div>
<p>The root object of the "Transports" subsystem's module provides information about the specific type of module and about the external OpenSCADA hosts/stations. As part of the single module it can be implemented the own general-module functionality. In general, for all modules, the access methods for both: inbound and outbound transports of the specific module are contained.
</p><p>The object of the input transport TTransportIn provides an interface to the implementation of the modular method of input transport.
</p><p>The object of the output transport TTransportOut provides an interface to the implementation of the modular method of output transport.
</p>
<h3><span class="mw-headline" id="The_object_of_the_.22Transports.22_subsystem_.28TTransportS.29"><span class="mw-headline-number">6.1</span> <span id="TTransportS" title="#TTransportS">The object of the "Transports" subsystem (TTransportS)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TSubSYS">TSubSYS</a></i>
</td></tr></table>
<p><b>Data:</b><br />
External hosts mode (enum — TTransportS::ExtHost::Mode):
</p>
<ul><li> <i>User</i> (0) — User.</li>
<li> <i>System</i> (1) — System.</li>
<li> <i>UserSystem</i> (2) — User and System.</li></ul>
<p>The structure of the external OpenSCADA hosts/stations (class TTransportS::ExtHost):
</p>
<ul><li> <i>ExtHost( const string &amp;iUserOpen, const string &amp;iid, const string &amp;iname = "", const string &amp;itransp = "", const string &amp;iaddr = "", const string &amp;iuser = "", const string &amp;ipass = "", uint8_t iUpRiseLev = 0 );</i> — Constructor of the structure initialization.</li>
<li> <i>string userOpen;</i> — User who created the record about the external host/station.</li>
<li> <i>string id;</i> — Id of the external host/station.</li>
<li> <i>string name;</i> — Name of an external host/station.</li>
<li> <i>string transp;</i> — Transport which is used to access an external host/station.</li>
<li> <i>string addr;</i> — Address for the transport, which is used to access an external host/station.</li>
<li> <i>string user;</i> — Users of the external host/station.</li>
<li> <i>string pass;</i> — Password of the external host/station user.</li>
<li> <i>uint8_t upRiseLev;</i> — External hosts uprising level/depth of this host/station.</li>
<li> <i>int8_t mode;</i> — Host mode.</li>
<li> <i>time_t mdf;</i> — Modification time.</li></ul>
<p>Data types of the IO logs (enum — TTransportS::LogType):
</p>
<ul><li> <i>LTP_BinaryText</i> (0) — Binary &amp; Text.</li>
<li> <i>LTP_Binary</i> (1) — Binary.</li>
<li> <i>LTP_Text</i> (2) — Text.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>int subVer( );</i> — Subsystem's version.</li>
<li> <i>void inTrList( vector&lt;string&gt; &amp;ls );</i> — Full list of input transports.</li>
<li> <i>void outTrList( vector&lt;string&gt; &amp;ls );</i> — Full list of output transports.</li>
<li> <i>AutoHD&lt;TTransportOut&gt; outAt( const string &amp;addr );</i> — Unified function of the output transport generic obtaining at that address <i>addr</i> in the form:</li></ul>
<dl><dd> "<b>{TrModule}.[out_]{TrID}[:{TrAddr}]</b>" — typical output with automatic creation <i>TrID</i> at it missing and allowing <i>TrAddr</i>;</dd>
<dd> "<b>{TrModule}.in_{TrID}:{RemConId}</b>" — initiative input with the connection identifier in <i>RemConId</i>.</dd></dl>
<ul><li> <i>string extHostsDB( );</i> — Database for the storing the list of external hosts.</li>
<li> <i>void extHostList( const string &amp;user, vector&lt;ExtHost&gt; &amp;list, bool andSYS = false, int upRiseLev = -1, const string &amp;lang = "" );</i> — The <i>list</i> of external hosts for <i>user</i>, include system <i>andSYS</i>, the uprising level <i>upRiseLev</i> (-1 - starting from the host's entry level) and for the language <i>lang</i>.</li>
<li> <i>ExtHost extHostGet( const string &amp;user, const string &amp;id, bool andSYS = false );</i> — Getting the information object from the external host <i>id</i> on behalf of the user <i>user</i>, include system <i>andSYS</i> ( "*" — for the system hosts).</li>
<li> <i>ExtHost extHostSeek( const string &amp;id, int lev );</i> — Direct hosts scanning at the station <i>id</i> and the level <i>lev</i>. The scanning starts at <i>lev</i> in 0 and stops at return empty host ID.</li>
<li> <i>AutoHD&lt;TTransportOut&gt; extHost( TTransportS::ExtHost host, const string &amp;pref = "" );</i> — Creation - request of the output transport to service the external host <i>host</i> with the prefix of the identification of the system node <i>pref</i>.</li>
<li> <i>void extHostSet( const ExtHost &amp;host, bool andSYS = false );</i> — Setting of the external host/station <i>host</i>, include system <i>andSYS</i>.</li>
<li> <i>void extHostDel( const string &amp;user, const string &amp;id, bool andSYS = false );</i> — Deleting of the external host/station <i>id</i> on behalf of the user <i>user</i>, include system <i>andSYS</i> ( "*" — for the system hosts).</li>
<li> <i>int cntrIfCmd( XMLNode &amp;node, const string &amp;senderPref, const string &amp;user = "" );</i> — Transfer of the control area request of the OpenSCADA <i>node</i> to the remote station.  </li>
<li> <i>void subStart( );</i> — Start of the subsystem.</li>
<li> <i>void subStop( );</i> — Stop of the subsystem.</li>
<li> <i>TElem &amp;inEl( );</i> — DB structure of the input transports</li>
<li> <i>TElem &amp;outEl( );</i> — DB structure of the output transports</li>
<li> <i>AutoHD&lt;TTypeTransport&gt; at( const string &amp;id ) const;</i> — Addressing/connection to the type of transport <i>id</i>.</li></ul>
<h3><span class="mw-headline" id="The_modular_object_of_the_transports.27_type_.28TTypeTransport.29"><span class="mw-headline-number">6.2</span> <span id="TTypeTransport" title="#TTypeTransport">The modular object of the transports' type (TTypeTransport)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TModule">TModule</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td>By the root object of the subsystem's "Transports" modules..
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>virtual bool isNetwork( );</i> — The sign of network implementation by this module.</li>
<li> <i>void inList( vector&lt;string&gt; &amp;list ) const;</i> — The list of the input transports.</li>
<li> <i>bool inPresent( const string &amp;id ) const;</i> — Check for an input transport presence.</li>
<li> <i>string inAdd( const string &amp;id, const string &amp;db = "*.*" );</i> — Addition of the input transport. Returns the end created identifier.</li>
<li> <i>void inDel( const string &amp;id, bool complete = false );</i> — Deleting of the input transport. It is possible to completely delete with the database included, by setting the <i>complete</i> sign.</li>
<li> <i>AutoHD&lt;TTransportIn&gt; inAt( const string &amp;id ) const;</i> — Connection to the input transport.</li>
<li> <i>void outList( vector&lt;string&gt; &amp;list ) const;</i> — The list of the output transports.</li>
<li> <i>bool outPresent( const string &amp;id ) const;</i> — Check for an output transport presence.</li>
<li> <i>string outAdd( const string &amp;id, const string &amp;db = "*.*" );</i> — Addition of the output transport. Returns the end created identifier.</li>
<li> <i>void outDel( const string &amp;id, bool complete = false );</i> — Deleting of the output transport. It is possible to completely delete with the database included, by setting the <i>complete</i> sign.</li>
<li> <i>AutoHD&lt;TTransportOut&gt; outAt( const string &amp;id ) const;</i> — Connection to the output transport.</li>
<li> <i>virtual string outAddrHelp( );</i> — Address format help of the output transports.</li>
<li> <i>int outLifeTime( );</i> — Output transport lifetime, 0 for disable.</li>
<li> <i>void setOutKeepAliveTm( int vl );</i> — Set the output transport lifetime, 0 for disable.</li>
<li> <i>TTransportS &amp;owner( ) const;</i> — "Transports" subsystem - the owner of the transport's type.</li></ul>
<p><b>Protected methods:</b>
</p>
<ul><li> <i>virtual TTransportIn *In( const string &amp;id, const string &amp;stor );</i> — The modular method of the creating/opening of the new "input" transport.</li>
<li> <i>virtual TTransportOut *Out( const string &amp;name, const string &amp;stor );</i> — The modular method of the creating/opening of the new "output" transport.</li></ul>
<h3><span class="mw-headline" id="The_object_of_the_input_transports_.28TTransportIn.29"><span class="mw-headline-number">6.3</span> <span id="TTransportIn" title="#TTransportIn">The object of the input transports (TTransportIn)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TCntrNode">TCntrNode</a>, <a href="#TConfig">TConfig</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td>By the objects of input transports of the subsystem's "Transports" modules.
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TTransportIn( const string &amp;id, const string &amp;db, TElem *el );</i> — Initializing constructor.</li>
<li> <i>string id( );</i> — Transport's Id.</li>
<li> <i>string workId( );</i> — Full ID including the ID of the module.</li>
<li> <i>string name( );</i> — Transport's name.</li>
<li> <i>string dscr( );</i> — Transport's description.</li>
<li> <i>string addr( ) const;</i> — Address.</li>
<li> <i>string protocols( );</i> — Linked transport protocols.</li>
<li> <i>virtual unsigned keepAliveReqs( );</i> — Maximum Keep Alive requests.</li>
<li> <i>virtual unsigned keepAliveTm( );</i> — Keep Alive time.</li>
<li> <i>virtual string getStatus( );</i> — Getting the status of the input transport.</li>
<li> <i>bool toStart( );</i> — The sign "To start".</li>
<li> <i>bool startStat( );</i> — The status "Running".</li>
<li> <i>string DB( bool qTop = false ) const;</i> — Transport's storage address, <i>qTop</i> for the storage queue top.</li>
<li> <i>string tbl( ) const;</i> — Transport's DB table.</li>
<li> <i>string fullDB( bool qTop = false ) const;</i> — Full name of the transport's storage table, <i>qTop</i> for the storage queue top.</li>
<li> <i>void setName( const string &amp;inm );</i> — Setting the name of transport in <i>inm</i>.</li>
<li> <i>void setDscr( const string &amp;idscr );</i> — Setting the description of transport in <i>idscr</i>.</li>
<li> <i>void setAddr( const string &amp;addr );</i> — Setting the address of transport in <i>addr</i>.</li>
<li> <i>void setProtocols( const string &amp;prt );</i> — Setting of the linked transport protocols.</li>
<li> <i>void setToStart( bool val );</i> — Setting of the sign "To start".</li>
<li> <i>void setDB( const string &amp;vl, bool qTop = false );</i> — Setting of the transport's storage address, <i>qTop</i> for the storage queue top.</li>
<li> <i>virtual void start( );</i> — Start of the transport.</li>
<li> <i>virtual void stop( );</i> — Stop of the transport.</li>
<li> <i>virtual int writeTo( const string &amp;sender, const string &amp;data );</i> — Sending <i>data</i> backward to the <i>sender</i>. <a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../en/files/At.png" width="22" /></a> Deprecated mostly and replaced by the polling mode of the <a href="API.html#TProtocolIn" title="Special:MyLanguage/Documents/API">input transport protocol</a>, Initially implemented in transports with support of the initiative sending, not only at a request.</li>
<li> <i>vector&lt;AutoHD&lt;TTransportOut&gt; &gt; associateTrs( bool checkForCleanDisabled = false );</i> — The associated output transports massive, created by the input transport for typical requests to the connection initiator. Set <i>checkForCleanDisabled</i> for prior checking and clean up disabled ones.</li>
<li> <i>AutoHD&lt;TTransportOut&gt; associateTr( const string &amp;id );</i> — Getting the associated output transport at that connection ID.</li>
<li> <i>int logLen( );</i> — length of the IO log.</li>
<li> <i>void setLogLen( int vl );</i> — set length of the IO log.</li>
<li> <i>void pushLogMess( const string &amp;vl, const string &amp;data = "", int dataDir = 0 );</i> — push the message <i>vl</i> with the <i>data</i> in the direction <i>dataDir</i> to the log in the format "<b>{vl}\n{data}</b>".</li>
<li> <i>TTypeTransport &amp;owner( ) const;</i> — Transport's type – the owner of the input transport.</li></ul>
<p><b>Protected methods:</b>
</p>
<ul><li> <i>string associateTrO( const string &amp;addr );</i> — The associated output transport creation with the address <i>addr</i>.</li></ul>
<p><b>Protected attributes:</b>
</p>
<ul><li> <i>bool runSt;</i> — The sign "Running".</li></ul>
<h3><span class="mw-headline" id="The_object_of_the_output_transports_.28TTransportOut.29"><span class="mw-headline-number">6.4</span> <span id="TTransportOut" title="#TTransportOut">The object of the output transports (TTransportOut)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TCntrNode">TCntrNode</a>, <a href="#TConfig">TConfig</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td>By the objects of output transports of the subsystem's "Transports" modules.
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TTransportOut( const string &amp;id, const string &amp;db, TElem *el );</i> — Initializing constructor.</li>
<li> <i>bool isNetwork( );</i> — The sign — "The transport is network one", what is specified by the timeouts in seconds.</li>
<li> <i>string id( );</i> — Transport's Id.</li>
<li> <i>string workId( );</i> — Full ID including the ID of the module.</li>
<li> <i>string name( );</i> — Transport name.</li>
<li> <i>string dscr( );</i> — Transport description.</li>
<li> <i>string addr( ) const;</i> — Transport address.</li>
<li> <i>virtual string timings( );</i> — Transport timeouts.</li>
<li> <i>virtual unsigned short attempts( );</i> — Connection attempts.</li>
<li> <i>TVariant conPrm( const string &amp;nm );</i> — Getting the connection parameter <i>nm</i> value.</li>
<li> <i>bool startStat( );</i> — Status "Running".</li>
<li> <i>time_t startTm( );</i> — Status "Time of starting/connection".</li>
<li> <i>int64_t lstReqTm( );</i> — Status "Last request time".</li>
<li> <i>virtual string getStatus( );</i> — Getting the status of the transport.</li>
<li> <i>string DB( bool qTop = false ) const;</i> — Transport's storage address, <i>qTop</i> for the storage queue top.</li>
<li> <i>string tbl( ) const;</i> — Transport's DB table.</li>
<li> <i>string fullDB( bool qTop = false ) const;</i> — Full name of the transport's DB table, <i>qTop</i> for the storage queue top.</li>
<li> <i>void setName( const string &amp;inm );</i> — Setting the name of transport.</li>
<li> <i>void setDscr( const string &amp;idscr );</i> — Setting the description of transport.</li>
<li> <i>void setAddr( const string &amp;addr );</i> — Setting the address of transport.</li>
<li> <i>virtual void setTimings( const string &amp;vl, bool isDef = false );</i> — Setting the transport timeouts, as default one for <i>isDef</i>.</li>
<li> <i>virtual void setAttempts( unsigned short vl );</i> — Setting the connection attempts.</li>
<li> <i>void setConPrm( const string &amp;nm, const TVariant &amp;vl );</i> — Setting the connection parameter <i>nm</i> to value <i>vl</i>.</li>
<li> <i>void clearConPrm( );</i> — Clearing the connection parameters.</li>
<li> <i>void setDB( const string &amp;vl, bool qTop = false );</i> — Setting of the transport's storage address, <i>qTop</i> for the storage queue top.</li>
<li> <i>virtual void start( int time = 0 );</i> — Starting the transport with the connection timeout <i>time</i>. When you start the output transport the actual connection to the remote station is established for the interfaces that works by the connection. At this time the errors can occur if the connection is impossible and the transport should return to the stopped state.</li>
<li> <i>virtual void stop( );</i> — Stopping the transport.</li>
<li> <i>virtual int messIO( const char *obuf, int len_ob, char *ibuf = NULL, int len_ib = 0, int time = 0 );</i> — Sending of the data over the transport. The waiting timeout <i>time</i> of the connection in milliseconds. The <i>time</i> in negative disables the transport's request/respond mode and allows for the independently reading/writing to a buffer IO, with the reading timeout <i>time</i> in absolute.</li>
<li> <i>void messProtIO( XMLNode &amp;io, const string &amp;prot );</i> — Sending of the data in the XML tree <i>in</i> over the transport using the transport protocol <i>prot</i>.</li>
<li> <i>int logLen( );</i> — length of the IO log.</li>
<li> <i>void setLogLen( int vl );</i> — set length of the IO log.</li>
<li> <i>void pushLogMess( const string &amp;vl, const string &amp;data = "", int dataDir = 0 );</i> — push the message <i>vl</i> with the <i>data</i> in the direction <i>dataDir</i> to the log in the format "<b>{vl}\n{data}</b>".</li>
<li> <i>TTypeTransport &amp;owner( ) const;</i> — Type of transport - the owner of output transport.</li>
<li> <i>ResMtx &amp;reqRes( );</i> — The requesting resource, needs to global lock into protocols with fragments receiving.</li></ul>
<p><b>Protected attributes:</b>
</p>
<ul><li> <i>bool runSt;</i> — The sign "Running".</li>
<li> <i>int64_t mLstReqTm;</i> — The last request time.</li></ul>
<h2><span class="mw-headline" id="Subsystem_.22Transport_protocols.22"><span class="mw-headline-number">7</span> <span id="TProtocolS" title="#TProtocolS">Subsystem "Transport protocols"</span></span></h2>
<p>Subsystem "Communication interfaces' protocols" is presented by the TProtocolS object, which contains modular objects of the separate protocols TProtocol on the a subsystem's level. Each protocol contains objects of the opened sessions of the input protocols TProtocolIn.
</p><p>TProtocolS object provides an access to the both: the input and the output protocols of the individual types of transport protocols. The inner side of output protocol based on the steaming principle with the individual structure of the stream for each implementation of the protocol.
</p>
<h3><span class="mw-headline" id="The_object_of_the_.22Communication_interfaces.27_protocols.22_subsystem_.28TProtocolS.29"><span class="mw-headline-number">7.1</span> <span id="TProtocolS" title="#TProtocolS">The object of the "Communication interfaces' protocols" subsystem (TProtocolS)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TSubSYS">TSubSYS</a></i>
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>int subVer( );</i> — Subsystem's version.</li>
<li> <i>AutoHD&lt;TProtocol&gt; at( const string &amp;id ) const;</i> — Connection to the protocol's <i>id</i> module.</li></ul>
<h3><span class="mw-headline" id="The_modular_object_of_the_protocol_.28TProtocol.29"><span class="mw-headline-number">7.2</span> <span id="TProtocol" title="#TProtocol">The modular object of the protocol (TProtocol)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TModule">TModule</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td>By the root object of the subsystem's "Protocols" modules.
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>virtual void itemListIn( vector&lt;string&gt; &amp;ls, const string &amp;curIt = "" );</i> — the list <i>ls</i> of the input protocol sub-elements from the current item  <i>curIt</i>, if the protocol provides them. It is used when selecting an object in the input transport configuration.</li>
<li> <i>void list( vector&lt;string&gt; &amp;list ) const;</i> — The list of open input sessions.</li>
<li> <i>bool openStat( const string &amp;name ) const;</i> — Check for the openness of the input session with the specified name.</li>
<li> <i>void open( const string &amp;name, TTransportIn *tr = NULL, const string &amp;sender = "" );</i> — Opening of the session on behalf of the input transport <i>tr</i>.</li>
<li> <i>void close( const string &amp;name );</i> — Closing of the input session.</li>
<li> <i>AutoHD&lt;TProtocolIn&gt; at( const string &amp;name ) const;</i> — Connecting to the open input sessions.</li>
<li> <i>virtual void outMess( XMLNode &amp;io, TTransportOut &amp;tro );</i> — The data transfer by the objects of the OpenSCADA core in the XML tree <i>io</i> to the remote system via the <i>tro</i> transport and the current output protocol. Presenting the data in the XML tree is non-standardized and specific to the logical structure of the protocol. This data are serialized — converted in a sequence of bytes according to the protocol, and are sent via the specified <i>tro</i> output transport by the <a href="API.html#TTransportOut" title="Special:MyLanguage/Documents/API">messIO() function</a>.</li></ul>
<h3><span class="mw-headline" id="The_object_of_the_input_protocol.27s_session_.28TProtocolIn.29"><span class="mw-headline-number">7.3</span> <span id="TProtocolIn" title="#TProtocolIn">The object of the input protocol's session (TProtocolIn)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TCntrNode">TCntrNode</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td>By the session objects of the input modules' protocol of the subsystem "Protocols".
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TProtocolIn( const string &amp;name );</i> — Initializing constructor.</li>
<li> <i>string name( );</i> — The name of the input session.</li>
<li> <i>AutoHD&lt;TTransportIn&gt; &amp;srcTr( )</i> — The transport-source of the opening of the session of the input protocol.</li>
<li> <i>const string &amp;srcAddr( )</i> — The sender address; second line contains service part of the address for backward messages.</li>
<li> <i>virtual unsigned waitReqTm( );</i> — The request waiting time on the input transport in milliseconds, call after what to the protocol with the empty message — the polling mode. Setting it to zero disable the polling mode.</li>
<li> <i>virtual void setSrcTr( TTransportIn *vl )</i> — Setting of the transport-source of the opening of the session of the input protocol.</li>
<li> <i>virtual void setSrcAddr( const string &amp;vl );</i> — Setting of the sender address.</li>
<li> <i>int writeTo( const string &amp;data );</i> — Sending the messages <i>data</i> backward to the sender, into srcAddr().</li>
<li> <i>virtual bool mess( const string &amp;request, string &amp;answer );</i> — transfer of the <i>request</i> data sequence to the protocol object for it parsing accordingly to the protocol implementation. The protocol function should process the <i>request</i>, generate the response in <i>answer</i> and return FALSE in the case of the completeness of the request. If the <i>request</i> is not complete, it is necessary to return TRUE for the transport to indicate the "expectation of the completion", the previous parts of the request should be saved in the context of the protocol object.</li>
<li> <i>TProtocol &amp;owner( ) const;</i> — The protocol, the owner of input sessions.</li></ul>
<h2><span class="mw-headline" id="Subsystem_.22User_interfaces.22"><span class="mw-headline-number">8</span> Subsystem "User interfaces"</span></h2>
<p>The subsystem "User Interfaces" is presented by the TUIS object, which contains modular objects of the TUI user interfaces' on the subsystem's level.
</p>
<h3><span class="mw-headline" id="The_object_of_the_.22User_interfaces.22_subsystem_.28TUIS.29"><span class="mw-headline-number">8.1</span> <span id="TUIS" title="#TUIS">The object of the "User interfaces" subsystem (TUIS)</span></span></h3>
<table class="wikitable">

<tr>
<td> <b>Inherits:</b> </td>
<td> <i><a href="#TSubSYS">TSubSYS</a></i>
</td></tr></table>
<p><b>Data:</b><br />
Requests parameters (enum — GetOpts):
</p>
<ul><li> <i>GetPathURL</i> (1) — Path get.</li>
<li> <i>GetContent</i> (2) — Open document command get.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>int subVer( );</i> — Subsystem's version.</li>
<li> <i>void subStart( );</i> — Start of the subsystem.</li>
<li> <i>void subStop( );</i> — Stop of the subsystem.</li>
<li> <i>AutoHD&lt;TUI&gt; at( const string &amp;name ) const;</i> — Connects to the user's interface module.</li>
<li> <i>string fontSnthHglCode( );</i> — Getting the font name used in the syntax highlight for code.</li>
<li> <i>void setFontSnthHglCode( const string &amp;val )</i> — Setting the font name used in the syntax highlight for code.</li>
<li> <i>static string icoGet( const string &amp;inm, string *tp = NULL, bool retPath = false );</i> — Downloads image of the icon <i>inm</i> from standard directories or return path, on <i>retPath</i>, to allowed icon. Detecting icons for file extensions "png", "gif", "jpg", "jpeg", which return into <i>tp</i>.</li>
<li> <i>static string docGet( const string &amp;inm, string *tp = NULL, unsigned opt = 0 );</i> — Downloads document <i>inm</i> from standard directories or return path, on <i>retPath</i>, to allowed document. Detecting documents for file extensions "pdf", "html", "odt", which return into <i>tp</i>.</li>
<li> <i>static string docKeyGet( const string &amp;itxt );</i> — Gets the inline documentation key from the text <i>itxt</i> of a configuration field, often it is the node description and the key "DOC" in it.</li>
<li> <i>static string mimeGet( const string &amp;inm, const string &amp;fDt, const string &amp;orig = "" );</i> — Gets file's mime type in view <b>{group}/{type}</b> for the file name <i>inm</i>, its content <i>fDt</i> and the original hint <i>orig</i>.</li></ul>
<h3><span class="mw-headline" id="The_modular_object_of_the_user_interface_.28TUI.29"><span class="mw-headline-number">8.2</span> <span id="TUI" title="#TUI">The modular object of the user interface (TUI)</span></span></h3>
<table class="wikitable">

<tr>
<td> <b>Inherits:</b> </td>
<td> <i><a href="#TModule">TModule</a></i>
</td></tr>
<tr>
<td> <b>Inherited:</b> </td>
<td> By the root objects of the "User interfaces" subsystem.
</td></tr></table>
<p><b>Protected attributes:</b>
</p>
<ul><li> <i>bool runSt;</i> — The sign "Running".</li></ul>
<h2><span class="mw-headline" id="Subsystem_.22Specials.22"><span class="mw-headline-number">9</span> Subsystem "Specials"</span></h2>
<p>The subsystem "Specials" is presented by TSpecialS object, which contains modular objects of TSpecial special on the subsystem's level.
</p>
<h3><span class="mw-headline" id="The_object_of_the_.22Specials.22_subsystem_.28TSpecialS.29"><span class="mw-headline-number">9.1</span> <span id="TSpecialS" title="#TSpecialS">The object of the "Specials" subsystem (TSpecialS)</span></span></h3>
<table class="wikitable">

<tr>
<td>Inherits:</td>
<td><i><a href="#TSubSYS">TSubSYS</a></i>
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>int subVer( );</i> — Subsystem's version.</li></ul>
<h3><span class="mw-headline" id="The_modular_object_of_the_specials_.28TSpecial.29"><span class="mw-headline-number">9.2</span> <span id="TSpecial" title="#TSpecial">The modular object of the specials (TSpecial)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TModule">TModule</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td>By the root objects of the subsystem's “Specials” modules.
</td></tr></table>
<p><b>Protected attributes:</b>
</p>
<ul><li> <i>bool runSt;</i> — The sign "Running".</li></ul>
<h2><span class="mw-headline" id="Subsystem_.22Security.22"><span class="mw-headline-number">10</span> Subsystem "Security"</span></h2>
<p>Security subsystem is presented by an object TSesurity, which contains group objects of TGroup and users TUser.
</p><p>User object TUser contains user information and checks the authenticity of the user in accordance with the specified password.
</p><p>TGroup user object contains information about the group of users and checks the user's belonging to the group.
</p>
<h3><span class="mw-headline" id="The_object_of_the_.22Security.22_subsystem_.28TSecurity.29"><span class="mw-headline-number">10.1</span> <span id="TSecurity" title="#TSecurity">The object of the "Security" subsystem (TSecurity)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TSubSYS">TSubSYS</a></i>
</td></tr></table>
<p><b>Data (definition):</b><br />
</p>
<ul><li> <i>SEC_HASH_MAGIC</i> — String-pointer (prefix) of the passwords in the hash.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>bool access( const string &amp;user, char mode, int owner, int groups, int access );</i> — Check the access of the <i>user</i> in the <i>mode</i> to the resource with the <i>owner</i>, <i>groups</i> (separated ',') and permition <i>access</i>.</li>
<li> <i>void usrList( vector&lt;string&gt; &amp;list ) const;</i> — The list of the users <i>list</i>.</li>
<li> <i>void usrGrpList( const string &amp;name, vector&lt;string&gt; &amp;list );</i> — The list of the users' groups <i>list</i>, in which the user <i>name</i> is included.</li>
<li> <i>bool usrPresent( const string &amp;name ) const;</i> — Check fro the presence of the specified user <i>name</i>.</li>
<li> <i>string usrAdd( const string &amp;name, const string &amp;db = "*.*" );</i> — Addition of the user <i>name</i> with the saving to the DB <i>db</i>. Returns the end created name of the user.</li>
<li> <i>void usrDel( const string &amp;name, bool complete = false );</i> — Deleting of the user <i>name</i> with the possibility of the completely deleting <i>complete</i>.</li>
<li> <i>AutoHD&lt;TUser&gt; usrAt( const string &amp;name ) const;</i> — Attaching of the user <i>name</i>.</li>
<li> <i>void grpList( vector&lt;string&gt; &amp;list ) const;</i> — The list of the users' groups <i>list</i>.</li>
<li> <i>bool grpPresent( const string &amp;name ) const;</i> — Check fro the presence of the specified users' group <i>name</i>.</li>
<li> <i>string grpAdd( const string &amp;name, const string &amp;db = "*.*" );</i> — Addition of the users' group <i>name</i> with the saving to the DB <i>db</i>. Returns the end created name of the user group.</li>
<li> <i>void grpDel( const string &amp;name, bool complete = false );</i> — Deleting of the users' group <i>name</i> with the possibility of the completely deleting <i>complete</i>.</li>
<li> <i>AutoHD&lt;TGroup&gt; grpAt( const string &amp;name ) const;</i> — Connection to the users' group <i>name</i>.</li></ul>
<h3><span class="mw-headline" id="The_user.27s_object_.28TUser.29"><span class="mw-headline-number">10.2</span> <span id="TUser" title="#TUser">The user's object (TUser)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TCntrNode">TCntrNode</a>, <a href="#TConfig">TConfig</a></i>
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TUser( const string &amp;name, const string &amp;db, TElem *el );</i> — Initialising constructor.</li>
<li> <i>string name( );</i> — User name.</li>
<li> <i>string descr( );</i> — User description.</li>
<li> <i>string longDescr( );</i> — User long description.</li>
<li> <i>string picture( );</i> — User image.</li>
<li> <i>string lang( );</i> — User language, only into the dynamic translation text variables mode.</li>
<li> <i>bool sysItem( );</i> — Sign of the system user.</li>
<li> <i>bool auth( const string &amp;pass, string *hash = NULL );</i> — Check the authenticity of the user by the password <i>pass</i>. The password hash, if it is supports, placing into the <i>hash</i>.</li>
<li> <i>int permitCmpr( const string &amp;user );</i> — Comparing the <i>user</i> permition with the user object. Returns -1 for lesser, 1 for greater and 0 for even permition.</li>
<li> <i>string DB( bool qTop = false ) const;</i> — User storage address, <i>qTop</i> for the storage queue top.</li>
<li> <i>string tbl( ) const;</i> — Address of the table of user's storage.</li>
<li> <i>string fullDB( bool qTop = false ) const;</i> — Full name of the table of user's storage, <i>qTop</i> for the storage queue top.</li>
<li> <i>void setDescr( const string &amp;vl );</i> — Setting user's description to <i>vl</i>.</li>
<li> <i>void setLongDescr( const string &amp;vl );</i> — Setting user's long description to <i>vl</i>.</li>
<li> <i>void setPicture( const string &amp;pct );</i> — Setting user's image to <i>pct</i>.</li>
<li> <i>void setLang( const string &amp;vl );</i> — Setting user's language to <i>vl</i>.</li>
<li> <i>void setPass( const string &amp;pass );</i> — Setting user's password to <i>pass</i>.</li>
<li> <i>void setSysItem( bool vl );</i> — Setting the sign of system user to <i>vl</i>.</li>
<li> <i>void setDB( const string &amp;vl, bool qTop = false );</i> — Setting the user's storage address, <i>qTop</i> for the storage queue top.</li>
<li> <i>TSecurity &amp;owner( ) const;</i> — "Security" subsystem - the owner of the user.</li></ul>
<h3><span class="mw-headline" id="The_users.27_group_object_.28TGroup.29"><span class="mw-headline-number">10.3</span> <span id="TGroup" title="#TGroup">The users' group object (TGroup)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TCntrNode">TCntrNode</a>, <a href="#TConfig">TConfig</a></i>
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TGroup( const string &amp;name, const string &amp;db, TElem *el );</i> —  Initializing constructor.</li>
<li> <i>string name( );</i> — Users group name.</li>
<li> <i>string descr( );</i> — Users group description.</li>
<li> <i>string longDescr( );</i> — Users group long description.</li>
<li> <i>bool sysItem( );</i> — The sign of the system user.</li>
<li> <i>string DB( bool qTop = false ) const;</i> — Users' group storage address, <i>qTop</i> for the storage queue top.</li>
<li> <i>string tbl( ) const;</i> — Address of the table of the users' group DB.</li>
<li> <i>string fullDB( bool qTop = false ) const;</i> — Full name of the table of the users' group storage, <i>qTop</i> for the storage queue top.</li>
<li> <i>void setDescr( const string &amp;vl );</i> — Setting users group description to <i>vl</i>.</li>
<li> <i>void setLongDescr( const string &amp;vl );</i> — Setting users group long description to <i>vl</i>.</li>
<li> <i>void setDB( const string &amp;vl, bool qTop = false );</i> — Setting the users' group storage address, <i>qTop</i> for the storage queue top.</li>
<li> <i>bool user( const string &amp;name );</i> — Check for the user's belonging to the group <i>name</i>.</li>
<li> <i>void userAdd( const string &amp;name );</i> — Addition of the user <i>name</i> to the group.</li>
<li> <i>void userDel( const string &amp;name );</i> — Deleting of the user <i>name</i> from the group.</li>
<li> <i>TSecurity &amp;owner( ) const;</i> — "Security" subsystem - the owner of the users' group.</li></ul>
<h2><span class="mw-headline" id="Subsystem_.22Modules_scheduler.22"><span class="mw-headline-number">11</span> Subsystem "Modules scheduler"</span></h2>
<p>Subsystem “Modules' sheduling” is presented by the object TModSchedul.
</p><p>The subsystem contains the control mechanism for modules contained in shared libraries.
</p>
<h3><span class="mw-headline" id="The_object_of_the_subsystem_.22Modules.27_sheduling.22_.28TModSchedul.29"><span class="mw-headline-number">11.1</span> <span id="TModSchedul" title="#TModSchedul">The object of the subsystem "Modules' sheduling" (TModSchedul)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TSubSYS">TSubSYS</a></i>
</td></tr></table>
<p><b>Data:</b><br />
The structure of information about the shared library (struct – TModSchedul::SHD):
</p>
<ul><li> <i>void *hd;</i> — the title of the shared library (if NULL, the library is present, but not connected);</li>
<li> <i>vector&lt;string&gt; use;</i> — list of connected modules;</li>
<li> <i>time_t tm;</i> — modification time of the library;</li>
<li> <i>string name;</i> — full name/path of the shared library.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>string allowList( ) const;</i> — The list of permitted shared libraries (modules).</li>
<li> <i>string denyList( );</i> — The list of prohibited shared libraries (modules).</li>
<li> <i>int chkPer( );</i> — The verification period of the directory with the modules (s).</li>
<li> <i>void setAllowList( const string &amp;vl );</i> — Setting of the list of permitted shared libraries (modules).</li>
<li> <i>void setDenyList( const string &amp;vl );</i> — Setting of the list of prohibited shared libraries (modules).</li>
<li> <i>void setChkPer( int per );</i> — Setting the verification period of the directory with the modules (s). If the frequency is equal to zero, the check will be disabled.</li>
<li> <i>void subStart( );</i> — Subsystem's start.</li>
<li> <i>void subStop( );</i> — Subsystem's stop.</li>
<li> <i>int loadLibS( );</i> — Loading the shared libraries and initialization of the modules. Return numbers loaded modules.</li>
<li> <i>SHD &amp;lib( const string &amp;name );</i> — Getting the shared library object <i>name</i>.</li>
<li> <i>void libList( vector&lt;string&gt; &amp;list );</i> — The list of shared libraries <i>list</i>.</li>
<li> <i>int libLoad( const string &amp;path, bool full );</i> — Loading the shared libraries from the specified path <i>path</i>. Return numbers loaded modules.</li>
<li> <i>void libAtt( const string &amp;name, bool full = false);</i> — Attaching of the specified shared library <i>name</i>.</li>
<li> <i>void libDet( const string &amp;name );</i> — Detaching of the specified shared library <i>name</i>.</li></ul>
<h2><span class="mw-headline" id="Components_of_the_object_model_of_OpenSCADA"><span class="mw-headline-number">12</span> Components of the object model of OpenSCADA</span></h2>
<p>Object model of OpenSCADA is based on the function object <i>TFunction</i>, on the parameters of the function <i>IO</i> and on the values' frame of the function <i>TValFunc</i>. Later the function's objects are included in the object tree, forming an object model of the system. Using the functions of the object model is made by linking the frame of values <i>TValFunc</i> with function.
</p><p>The idea in general is shown in Fig. 7.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:602px;"><a class="image" href="http://oscada.org/wiki/File:LogicLev_func_base.png"><img class="thumbimage" height="469" src="../en/files/LogicLev_func_base.png" width="600" /></a>  <div class="thumbcaption">Fig. 7. Basis of the programming area of OpenSCADA.</div></div></div></div>
<p>Object of the function (TFunction) provides an interface for the formation of function parameters and algorithm of the computing in the object which inherits it.
</p><p>Object of the function's parameter (IO) contains the configuration of the single parameter.
</p><p>Object of the values' frame (TValFunc) contains values in accordance with the structure of the linked function. While the execution of the algorithm by the associated function the values of this object are used.
</p>
<h3><span class="mw-headline" id="The_function_object_.28TFunction.29"><span class="mw-headline-number">12.1</span> <span id="TFunction" title="#TFunction">The function object (TFunction)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TCntrNode">TCntrNode</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td>By the modules and nodes of the systems, which contains the functions for publication in the object model of the system.
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TFunction( const string &amp;id, const char *grp = "root", const string &amp;istor = "" );</i> — Initializing constructor of the function with the identifier <i>id</i>, users group <i>grp</i> and storage <i>stor</i>.</li>
<li> <i>TFunction( const TFunction &amp;src );</i> — Copying constructor.</li>
<li> <i>TFunction &amp;operator=( const TFunction &amp;func );</i> — Copying of functions.</li>
<li> <i>string id( ) const;</i> — Function ID.</li>
<li> <i>virtual string name( );</i> — Localized name of the function.</li>
<li> <i>virtual string descr( );</i> — Description of the function.</li>
<li> <i>virtual string prog( );</i> — Program's text of the function, for no static ones.</li>
<li> <i>virtual string stor( );</i> — Storage DB, for table "Trs" mostly.</li>
<li> <i>bool startStat( ) const;</i> — Status - "Running".</li>
<li> <i>int use( );</i> — Counter of the function's using.</li>
<li> <i>ResRW &amp;fRes( );</i> — Link to the resource of the function.</li>
<li> <i>void setId( const string &amp;vl );</i> — Set the function identifier.</li>
<li> <i>virtual void setProg( const string &amp;prg );</i> — Set program's text of the function, for no static ones.</li>
<li> <i>void setStor( const string &amp;istor );</i> — Set storage DB to <i>stor</i>.</li>
<li> <i>virtual void setStart( bool val );</i> — Start/stop <i>val</i> of the function.</li>
<li> <i>void ioList( vector&lt;string&gt; &amp;list );</i> — The list of the function's parameters <i>list</i>.</li>
<li> <i>int ioId( const string &amp;id ) const;</i> — Getting the index of the function's parameter <i>id</i>.</li>
<li> <i>int ioSize( ) const;</i> — The quantity of the function's parameters.</li>
<li> <i>IO *io( int id ) const;</i> — Getting the function's parameter by the index <i>id</i>.</li>
<li> <i>int ioAdd( IO *io );</i> — Addition of the function's parameter <i>io</i>. Returns the actual position of the new IO.</li>
<li> <i>int ioIns( IO *io, int pos );</i> — Insert of the function's parameter <i>io</i> into the position <i>pos</i>. Returns the actual position of the new IO.</li>
<li> <i>void ioDel( int pos );</i> — Deleting the function's parameter in the position <i>pos</i>.</li>
<li> <i>void ioMove( int pos, int to );</i> — Moving the function's parameter from the position <i>pos</i> to the position <i>to</i>.</li>
<li> <i>virtual void calc( TValFunc *val );</i> — The calculation of the function's algorithm of the specified values <i>val</i>.</li>
<li> <i>virtual void valAtt( TValFunc *vfnc );</i> — Is called by the object of the values' frame <i>vfnc</i> in the case of attaching with the function.</li>
<li> <i>virtual void valDet( TValFunc *vfnc );</i> — Is called by the object of the values' frame <i>vfnc</i> in the case of detaching from the function.</li>
<li> <i>virtual void preIOCfgChange( );</i> — Is called before the changing of the configuration of the function.</li>
<li> <i>virtual void postIOCfgChange( );</i> — Is called after the changing of the configuration of the function.</li></ul>
<p><b>Protected attributes:</b>
</p>
<ul><li> <i>string mId;</i> — Function ID.</li>
<li> <i>bool runSt;</i> — Sign - "Running".</li>
<li> <i>bool beStart;</i> — Sign - "Start".</li>
<li> <i>TValFunc *mTVal;</i> — Reference to the values' object, used for testing the function. May be absent.</li></ul>
<h3><span class="mw-headline" id="The_object_of_the_function.27s_parameter_.28IO.29"><span class="mw-headline-number">12.2</span> <span id="IO" title="#IO">The object of the function's parameter (IO)</span></span></h3>
<p><b>Data:</b><br />
Parameter's type (enum — IO::Type):
</p>
<ul><li> <i>IO::String</i> (0) — string/text;</li>
<li> <i>IO::Integer</i> (1) — integer;</li>
<li> <i>IO::Real</i> (2) — real;</li>
<li> <i>IO::Boolean</i> (3) — boolean;</li>
<li> <i>IO::Object</i> (4) — object.</li></ul>
<p>Parameter's flags (enum — IO::IOFlgs):
</p>
<ul><li> <i>IO::Default</i> (0x00) — default mode (input);</li>
<li> <i>IO::Output</i> (0x01) — output;</li>
<li> <i>IO::Return</i> (0x02) — return;</li>
<li> <i>IO::FullText</i> (0x04) — full-text string;</li>
<li> <i>IO::Selectable</i> (0x08) — selectable;</li>
<li> <i>IO::TransltText</i> (0x1000) — being translated string, <a href="#TPrmTempl">TPrmTempl</a> reserves the flags range [0x10...0x0800].</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>IO( const char *id, const char *name, IO::Type type, unsigned flgs, const char *def = "", bool hide = false, const char *rez = "" );</i> — Initializing constructor.</li>
<li> <i>IO( const IO &amp;src );</i> — Copying constructor.</li>
<li> <i>IO &amp;operator=( const IO &amp;iio );</i> — Copying of the function parameters.</li>
<li> <i>const string &amp;id( ) const;</i> — ID of the function's parameter.</li>
<li> <i>string name( ) const;</i> — The localized name of the function's parameter.</li>
<li> <i>const Type &amp;type( ) const;</i> — The type of the function's parameter.</li>
<li> <i>unsigned flg( ) const;</i> — The flags of the function's parameter.</li>
<li> <i>const string &amp;def( ) const;</i> — Default value.</li>
<li> <i>bool hide( ) const;</i> — Sign - "Hide".</li>
<li> <i>const string &amp;rez( ) const;</i> — The reserve property of the function's parameter.</li>
<li> <i>void setId( const string &amp;val );</i> — Set the identifier to <i>val</i>.</li>
<li> <i>void setName( const string &amp;val );</i> — Set the name to <i>val</i>.</li>
<li> <i>void setType( Type val );</i> — Set the type to <i>val</i>.</li>
<li> <i>void setFlg( unsigned val );</i> — Set the flags to <i>val</i>.</li>
<li> <i>void setDef( const string &amp;val );</i> — Set the default value to <i>val</i>.</li>
<li> <i>void setHide( bool val );</i> — Set/unset the sign - "Hide".</li>
<li> <i>void setRez( const string &amp;val );</i> — Set the reserve property to <i>val</i>.</li></ul>
<h3><span class="mw-headline" id="The_object_of_the_function.27s_value_.28TValFunc.29"><span class="mw-headline-number">12.3</span> <span id="TValFunc" title="#TValFunc">The object of the function's value (TValFunc)</span></span></h3>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TValFunc( const string &amp;iname = "", TFunction *ifunc = NULL, bool iblk = true );</i> — Initializing constructor.</li>
<li> <i>bool blk( );</i> — The sign — "Blocking of the parameters' changes of the function".</li>
<li> <i>bool mdfChk( );</i> — The sign — "To check attributes to modify".</li>
<li> <i>bool isChangedProg( bool clear = false );</i> — The sign — "The program changing" with it clearing by <i>clear</i>.</li>
<li> <i>bool isCalc( );</i> — The sign — "The function calculation".</li>
<li> <i>string user( );</i> — User on whose behalf the function is executed.</li>
<li> <i>string lang( );</i> — Language on whose the function is executed.</li>
<li> <i>const string &amp;vfName( );</i> — Name of the values' object.</li>
<li> <i>void setUser( const string &amp;vl );</i> — Set the user on whose behalf the function will be executed.</li>
<li> <i>void setLang( const string &amp;vl );</i> — Set the language on whose the function will be executed.</li>
<li> <i>void setVfName( const string &amp;nm );</i> — Set the name of the values' object to <i>nm</i>.</li>
<li> <i>void setMdfChk( bool set );</i> — Set/unset <i>set</i> of the sign - "To check attributes to modify".</li>
<li> <i>void ioList( vector&lt;string&gt; &amp;list );</i> — The list of the function's parameters <i>list</i>.</li>
<li> <i>int ioId( const string &amp;id );</i> — Getting the parameter's index <i>id</i>.</li>
<li> <i>int ioSize( ) const;</i> — The whole quantity of the parameters.</li>
<li> <i>IO::Type ioType( unsigned id );</i> — Parameter's type <i>id</i>.</li>
<li> <i>unsigned ioFlg( unsigned id ) const;</i> — Parameter's flags <i>id</i>.</li>
<li> <i>bool ioHide( unsigned id );</i> — Parameter's sign <i>id</i> - "Hide".</li>
<li> <i>bool ioMdf( unsigned id );</i> — Parameter's sign <i>id</i> - "Modified".</li>
<li> <i>TVariant get( unsigned id );</i> — Get the value of the parameter <i>id</i>.</li>
<li> <i>string getS( unsigned id );</i> — Get the value (string) of the parameter <i>id</i>.</li>
<li> <i>int64_t getI( unsigned id );</i> — Get the value (integer) of the parameter <i>id</i>.</li>
<li> <i>double getR( unsigned id );</i> — Get the value (real) of the parameter <i>id</i>.</li>
<li> <i>bool getB( unsigned id );</i> — Get the value (boolean) of the parameter <i>id</i>.</li>
<li> <i>AutoHD&lt;TVarObj&gt;	getO( unsigned id );</i> — Get the value of the parameter's object <i>id</i>.</li>
<li> <i>void set( unsigned id, const TVariant &amp;val );</i> — Set the value <i>val</i> of the parameter <i>id</i>.</li>
<li> <i>void setS( unsigned id, const string &amp;val );</i> — Set the value <i>val</i> (string) of the parameter <i>id</i>.</li>
<li> <i>void setI( unsigned id, int64_t val );</i> — Set the value <i>val</i> (integer) of the parameter <i>id</i>.</li>
<li> <i>void setR( unsigned id, double val );</i> — Set the value <i>val</i> (real) of the parameter <i>id</i>.</li>
<li> <i>void setB( unsigned id, bool val );</i> — Set the value <i>val</i> (boolean) of the parameter <i>id</i>.</li>
<li> <i>void setO( unsigned id, AutoHD&lt;TVarObj&gt; val );</i> — Set the value <i>val</i> of the parameter's object <i>id</i>.</li>
<li> <i>virtual void calc( const string &amp;user = "" );</i> — To calculate on behalf of the user <i>user</i> or user, specified earlier.</li>
<li> <i>double calcTm( );</i> — Computation time.</li>
<li> <i>void setCalcTm( double vl );</i> — Initializing of the time of value's calculation <i>vl</i>.</li>
<li> <i>TFunction *func( );</i> — Attached function.</li>
<li> <i>void setFunc( TFunction *func, bool att_det = true );</i> — To attach with the specified function <i>func</i>.</li>
<li> <i>virtual void preIOCfgChange( );</i> — Is called before the configuration changes.</li>
<li> <i>virtual void postIOCfgChange( );</i> — Is called after the configuration changes.</li>
<li> <i>virtual void progChange( );</i> —  Is called at the program changing.</li>
<li> <i>TValFunc *ctxGet( int key );</i> — Get context for key <i>key</i>.</li>
<li> <i>void ctxSet( int key, TValFunc *val );</i> — Set context for key <i>key</i>.</li>
<li> <i>void ctxClear( );</i> — External functions call context clear.</li></ul>
<p><b>Public attributes:</b>
</p>
<ul><li> <i>void *exCtx;</i> — The function execution context.</li></ul>
<h2><span class="mw-headline" id="Data_in_OpenSCADA_and_their_storage"><span class="mw-headline-number">13</span> <span id="Data" title="#Data">Data in OpenSCADA and their storage</span></span></h2>
<p>Storing data in the program is based on the objects <i><a href="#TConfig">TConfig</a></i> and <i><a href="#TElem">TElem</a></i>. These objects store the structure and field values of the storage, allowing for direct loading and saving the configuration via the <a href="#TBDS">"DB" subsystem</a>. For the specialised different types of the data storage the <i><a href="#TVariant">TVariant</a></i> object is provided.
</p><p>The <i>TElem</i> object contains the structure of database record. Structure of the record contains extensive information about the elements, their types, sizes and other parameters. Information in that structure is enough to create, control and manage the real structure of the database. Elementary unit of the record is the cell <i><a href="#TFld">TFld</a></i>.
</p><p>The <i>TConfig</i> object is the heir of <i>TElem</i> and contains the actual values of elements. <i>TConfig</i> is used as the parameter in the functions of the manipulating with the table records in the "DB" subsystem. Elementary unit of the record is the cell <i><a href="#TCfg">TCfg</a></i>.
</p><p>To provide an opportunity to inform the data storehouse about the changes in the structure it is provides an object <i><a href="#TValElem">TValElem</a></i>, from which it is inherited the storehouse <i>TConfig</i> and the list of which is contained in the <i>TElem</i> structure.
</p>
<h3><span class="mw-headline" id="Data_storing_conception"><span class="mw-headline-number">13.1</span> <span id="DataConcept" title="#DataConcept">Data storing conception</span></span></h3>
<p>OpenSCADA commonly defines and uses as the storage only the Configuration File and the Data Bases of different types of the "DB" subsystem. Where the Configuration File has the highest priority as an obligatory and always present storage.
</p><p>The Generic Storage is a common system configuration field of selection a storage for common program data and as default storage value of OpenSCADA nodes to store. As the Generic Storage there can be selected whether the Configuration File "<b>&lt;cfg&gt;</b>" or a DB "<b>{DB module}.{DB name}</b>", and the same is pointed as "<b>*.*</b>" for enabling the implicit data accessing method in OpenSCADA nodes.
</p><p>There are provided two variants of the data accessing:
</p>
<ol><li> directly and exclusively at the specified storage name;</li>
<li> implicitly at specifying the Generic Storage name "<b>*.*</b>", what commonly means of accessing to the Configuration File firstly and the Generic Storage DB secondary, at the data missing in the Configuration File.</li></ol>
<p>The "DB" subsystem (the class <i>TBDS</i>) provides the functions <i>dataSeek()</i>, <i>dataGet()</i>, <i>dataSet()</i>, <i>dataDel()</i> of accessing the data which perform the data accessing variants in such ways:
</p>
<ul><li> <i>dataSeek()</i> — the data seeking function:</li></ul>
<dl><dd><ol><li> seeking data only the directly specified storage;</li>
<li> throughout seeking the Configuration File and the Generic Storage DB.</li></ol></dd></dl>
<ul><li> <i>dataGet()</i> — the data getting function:</li></ul>
<dl><dd><ol><li> getting data only the directly specified storage;</li>
<li> getting the present data in the Configuration File, next the Generic Storage DB data at missing in the Configuration File.</li></ol></dd></dl>
<ul><li> <i>dataSet()</i> — the data setting function:</li></ul>
<dl><dd><ol><li> setting data only to the directly specified storage;</li>
<li> setting the present data in the Configuration File, next the Generic Storage DB data at missing in the Configuration File; provides the flag <i>TBDS::OnlyCfg</i> support to force the new data creation in the Configuration File.</li></ol></dd></dl>
<ul><li> <i>dataDel()</i> — the data deleting function:</li></ul>
<dl><dd><ol><li> deleting data only in the directly specified storage;</li>
<li> deleting the data both in the Configuration File and the Generic Storage DB.</li></ol></dd></dl>
<p>The testing scenarios of the data accessing:
</p>
<ul><li> creating and loading to/from the work Data Base of the Generic Storage: DB, Security.{User,Group}, Transport.{Input,Output}, ExtTansp, DAQ.{Controller,TemplateLib}, Archives.{VArchive,VArchiver,MArchiver}, DAQ.JavaLikeCalc.Lib, Protocol.{ModBus,OPC_UA,UserProtocol}.*, UI.WebUser.Page, UI.VCAEngine.{WdgLib,Proj}.</li>
<li> saving and loading to/from the Configuration File of the Generic Storage (with presence in the work Data Base): DB, Security.{User,Group}, Transport.{Input,Output}, ExtTansp, DAQ.{Controller,TemplateLib}, Archives.{VArchive,VArchiver,MArchiver}, DAQ.JavaLikeCalc.Lib, Protocol.{ModBus,OPC_UA,UserProtocol}.*, UI.WebUser.Page, UI.VCAEngine.{WdgLib,Proj}.</li>
<li> complete removing from the Generic Storage (both the Configuration File and the work Data Base): DB, Security.{User,Group}, Transport.{Input,Output}, ExtTansp, DAQ.{Controller,TemplateLib}, Archives.{VArchive,VArchiver,MArchiver}, DAQ.JavaLikeCalc.Lib, Protocol.{ModBus,OPC_UA,UserProtocol}.*, UI.WebUser.Page, UI.VCAEngine.{WdgLib,Proj}.</li>
<li> creating and loading directly to/from the library Data Base: Security.{User,Group}, Transport.{Input,Output}, DAQ.{Controller,TemplateLib}, Archives.{VArchive,VArchiver,MArchiver}, DAQ.JavaLikeCalc.Lib, Protocol.{ModBus,OPC_UA,UserProtocol}.*, UI.WebUser.Page, UI.VCAEngine.{WdgLib,Proj}.</li>
<li> saving directly to the Configuration File, removing from the library Data Base and loading from the Configuration File: Security.{User,Group}, Transport.{Input,Output}, DAQ.{Controller,TemplateLib}, Archives.{VArchive,VArchiver,MArchiver}, DAQ.JavaLikeCalc.Lib, Protocol.{ModBus,OPC_UA,UserProtocol}.*, UI.WebUser.Page, UI.VCAEngine.{WdgLib,Proj}.</li>
<li> removing from the Configuration File as a main part of the Generic Storage: Security.{User,Group}, Transport.{Input,Output}, DAQ.{Controller,TemplateLib}, Archives.{VArchive,VArchiver,MArchiver}, DAQ.JavaLikeCalc.Lib, Protocol.{ModBus,OPC_UA,UserProtocol}.*, UI.WebUser.Page, UI.VCAEngine.{WdgLib,Proj}.</li></ul>
<h3><span class="mw-headline" id="Data_object_.28TConfig.29"><span class="mw-headline-number">13.2</span> <span id="TConfig" title="#TConfig">Data object (TConfig)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TValElem">TValElem</a></i>
</td></tr>
<tr>
<td><b>Inherited:</b></td>
<td><i><a href="#TParamContr">TParamContr</a>, <a href="#TController">TController</a>, <a href="#TMArchivator">TMArchivator</a>, <a href="#TPrmTempl">TPrmTempl</a>, <a href="#TPrmTmplLib">TPrmTmplLib</a>, <a href="#TUser">TUser</a>, <a href="#TGroup">TGroup</a>, <a href="#TTransportIn">TTransportIn</a>, <a href="#TTransportOut">TTransportOut</a>, <a href="#TBD">TBD</a>, <a href="#TVArchive">TVArchive</a>, <a href="#TVArchivator">TVArchivator</a>, as well as modular objects that store their data in the DB.</i>
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TConfig( TElem *Elements = NULL );</i> — Initializing constructor.</li>
<li> <i>TConfig( const TConfig &amp;src );</i> — Copying constructor.</li>
<li> <i>TConfig &amp;operator=( const TConfig &amp;cfg ); TConfig &amp;exclCopy( const TConfig &amp;cfg, const string &amp;passCpLs = "", bool cpElsToSingle = false );</i> — Copying from <i>cfg</i>, passing fields into <i>passCpLs</i> and creating same this fields <i>cpElsToSingle</i> for combined configurations.</li>
<li> <i>void cfgList( vector&lt;string&gt; &amp;list ) const;</i> — Elements' list <i>list</i>.</li>
<li> <i>bool cfgPresent( const string &amp;n_val ) const;</i> — Check for the element's presence <i>n_val</i>.</li>
<li> <i>TCfg &amp;cfg( const string &amp;n_val ) const;</i> — Getting of th element <i>n_val</i>.</li>
<li> <i>TCfg *at( const string &amp;n_val, bool noExpt = false ) const;</i> — Getting of the element's pointer <i>n_val</i>. If the element is absent an exception is generated or the null pointer is returned when setting <i>noExpt</i>.</li>
<li> <i>void cfgViewAll( bool val = true );</i> — Set/unset the sign of the visibility for all the elements.</li>
<li> <i>void cfgKeyUseAll( bool val );</i> — Set/unset the sign of the using the key for all the elements.</li>
<li> <i>void cfgToDefault( );</i> — Setting all not key and view fields to the default value.</li>
<li> <i>TElem &amp;elem( );</i> — The using structure.</li>
<li> <i>void setElem( TElem *Elements, bool first = false );</i> — Setting the structure in <i>Elements</i>.</li>
<li> <i>void cntrCmdMake( XMLNode *fld, const string &amp;path, int pos, const string &amp;user = "root", const string &amp;grp = "root", int perm = 0664 );</i> — Formation of the information description of elements of the configuration for the management interface of OpenSCADA.</li>
<li> <i>void cntrCmdProc( XMLNode *fld, const string &amp;elem, const string &amp;user = "root", const string &amp;grp = "root", int perm = 0664 );</i> — Requests' of the OpenSCADA management interface to the elements of the configuration processing.</li>
<li> <i>bool incomplTblStruct( );</i> — The DB struct incomplete flag.</li>
<li> <i>void setIncmplTblStrct( bool vl );</i> — Setting the DB struct incomplete flag to <i>vl</i>.</li>
<li> <i>bool reqKeys( );</i> — The sign "Requests key", mark for using the request keys by the group items.</li>
<li> <i>bool trcSet( ) const;</i> — The setting elements tracing.</li>
<li> <i>void setTrcSet( bool vl );</i> — Setting the setting elements tracing, at setting TRUE all marks of the items setting are cleared.</li>
<li> <i>bool noTransl( ) const;</i> — The sign "No translation" is provided to disable the translation of all text variables of the record by default.</li>
<li> <i>void setNoTransl( bool vl );</i> — Setting of the sign "No translation".</li>
<li> <i>TVariant objFunc( const string &amp;id, vector&lt;TVariant&gt; &amp;prms, const string &amp;user_lang, int perm, const string &amp;owner );</i> — User API object functions of accessing to the configuration with the permition control.</li></ul>
<p><b>Protected methods:</b>
</p>
<ul><li> <i>virtual bool cfgChange( TCfg &amp;co, const TVariant &amp;pc );</i> — Is called in the case of changing the contents of the configuration element.</li></ul>
<h3><span class="mw-headline" id="Data_cell_.28TCfg.29"><span class="mw-headline-number">13.3</span> <span id="TCfg" title="#TCfg">Data cell (TCfg)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherits:</b></td>
<td><i><a href="#TVariant">TVariant</a></i>
</td></tr></table>
<p><b>Data:</b><br />
Additional flags to <a href="#TFld">#TFld</a> (enum — TCfg::AttrFlg):
</p>
<ul><li> <i>TCfg::NoVal(0x100)</i> — Do not reflect an element on the value of the TValue object.</li>
<li> <i>TCfg::Key(0x200)</i> — key field.</li>
<li> <i>TCfg::Hide(0x400)</i> — attribute is hidden.</li></ul>
<p>Requests flags (enum — ReqFlg):
</p>
<ul><li> <i>TFld::ForceUse(0x01)</i> — Forcing the setting of the flag of the element's using during the setting of its value.</li>
<li> <i>TFld::ExtValOne (0x02)</i> — One/first (and default) value: set value for key.</li>
<li> <i>TFld::ExtValTwo (0x04)</i> — Two/second value: base value for the key request or set.</li>
<li> <i>TFld::ExtValThree (0x08)</i> — Three value: source address for translations.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TCfg( TFld &amp;fld, TConfig &amp;owner );</i> — Initializing constructor.</li>
<li> <i>TCfg( const TCfg &amp;cfg );</i> — Copy constructor.</li>
<li> <i>const string &amp;name( );</i> — Cell name.</li>
<li> <i>bool operator==( TCfg &amp;cfg );</i> — Comparison of the cells.</li>
<li> <i>TCfg &amp;operator=( const TCfg &amp;cfg );</i> — Copying of the cells.</li>
<li> <i>bool view( ) const;</i> — The sign - "Cell is visible".</li>
<li> <i>bool keyUse( ) const;</i> — The sign - "Use the key" for the dataSeek() and dataDel() requests.</li>
<li> <i>bool noTransl( ) const;</i> — The sign "No translation" is provided to disable the translation of text variables for the record.</li>
<li> <i>bool reqKey( ) const;</i> — The sign "Requests key", for group operations produce by the field as key.</li>
<li> <i>bool isKey( ) const;</i> — Common sign of the field as key, depends from mode "Requests key" for the group.</li>
<li> <i>bool extVal( ) const;</i> — The sign "Extended value", for mark the field to misc role for search and update the key value and translation.</li>
<li> <i>bool isSet( ) const;</i> — The setting element sign.</li>
<li> <i>void setView( bool vw );</i> — Setting of the sign "The cell is visible" в <i>vw</i>.</li>
<li> <i>void setKeyUse( bool vl );</i> — Setting of the sign "Use the key" in <i>vl</i>.</li>
<li> <i>void setNoTransl( bool vl );</i> — Setting of the sign "No translation".</li>
<li> <i>void setReqKey( bool vl, bool treatDep = true );</i> — Setting of the sign "Requests key", treating the dependencies by <i>treatDep</i>.</li>
<li> <i>void setExtVal( bool vw );</i> — Setting of the sign "Extended value".</li>
<li> <i>void setIsSet( bool vl );</i> — Setting the setting element sign.</li>
<li> <i>void toDefault( bool notSetType = false );</i> — Setting the field value to the default one, and without setting the field type at <i>notSetType</i>.</li>
<li> <i>TFld &amp;fld( ) const;</i> —  Configuration of the cell.</li>
<li> <i>string getSEL( );</i> — Get the value of the selectable type.</li>
<li> <i>string getS( ) const; string getS( uint8_t RqFlg );</i> — Get the value of the string type with the request flags <i>RqFlg</i>.</li>
<li> <i>const char *getSd( );</i> — Get the direct access to the string type value.</li>
<li> <i>double &amp;getRd( );</i> — Get the direct access to the real type value.</li>
<li> <i>int64_t &amp;getId( );</i> — Get the direct access to the integer type value.</li>
<li> <i>char &amp;getBd( );</i> — Get the direct access to the boolean type value.</li>
<li> <i>void setSEL( const string &amp;val, uint8_t RqFlg = 0 );</i> — Set the value of the selectable type to the <i>val</i> with the request flags <i>RqFlg</i>.</li>
<li> <i>void setS( const string &amp;val ); TCfg &amp;operator=( const string &amp;vl ); TCfg &amp;operator=( const char *vl ); void setS( const string &amp;val, uint8_t RqFlg );</i> — Set the value of the string type to the <i>val</i> with the request flags <i>RqFlg</i>.</li>
<li> <i>void setR( double val ); TCfg &amp;operator=( double vl ); void setR( double val, uint8_t RqFlg );</i> — Set the value of the real type to the <i>val</i> with the request flags <i>RqFlg</i>.</li>
<li> <i>void setI( int64_t val ); TCfg &amp;operator=( int64_t vl ); void setI( int64_t val, uint8_t RqFlg );</i> — Set the value of the integer type to the <i>val</i> with the request flags <i>RqFlg</i>.</li>
<li> <i>void setB( char val ); TCfg &amp;operator=( bool vl ); void setB( char val, uint8_t RqFlg );</i> — Set the value of the boolean type to the <i>val</i> with the request flags <i>RqFlg</i>.</li>
<li> <i>TConfig &amp;owner( ) const;</i> — The object of container-owner.</li></ul>
<h3><span class="mw-headline" id="Data_structure_object_.28TElem.29"><span class="mw-headline-number">13.4</span> <span id="TElem" title="#TElem">Data structure object (TElem)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherited:</b></td>
<td> By the <i><a href="#TTypeParam">TTypeParam</a>, <a href="#TControllerS">TControllerS</a>, <a href="#TTypeDAQ">TTypeDAQ</a></i>, as well as by the modular objects, combining the functions of the structure storage .
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TElem( const string &amp;name = "" );</i> — Initialization of the structure with the specified name <i>name</i>.</li>
<li> <i>TElem( const TElem &amp;src );</i> — Copying constructor.</li>
<li> <i>TElem &amp;operator=( const TElem &amp;src );</i> — Copying from <i>src</i>.</li>
<li> <i>string &amp;elName( );</i> — The name if the structure.</li>
<li> <i>void fldList( vector&lt;string&gt; &amp;list );</i> — The cell's list in the structure <i>list</i>.</li>
<li> <i>unsigned fldSize( ) const;</i> — The number of cells in the structure.</li>
<li> <i>unsigned fldId( const string &amp;name, bool noex = false );</i> — Getting the index of the cell from its identifier <i>name</i>. Set <i>noex</i> on no the cell present caused return overall cells number, without exception generation.</li>
<li> <i>bool fldPresent( const string &amp;name );</i> — Check for the presence of the specified cell <i>name</i>.</li>
<li> <i>int fldAdd( TFld *fld, int id = -1 );</i> — Addition/insert of the cell <i>fld</i> to the position <i>id</i> (-1 — insert to the end).</li>
<li> <i>void fldDel( unsigned int id );</i> — Deleting of the cell  <i>id</i>.</li>
<li> <i>TFld &amp;fldAt( unsigned int id ) const;</i> — Getting of the cell <i>id</i>.</li>
<li> <i>void fldClear( );</i> — Removing all cells.</li>
<li> <i>void valAtt( TValElem *cnt );</i> — Is called automatically when the structure is attached to the data storage <i>cnt</i>.</li>
<li> <i>void valDet( TValElem *cnt );</i> — Is called automatically when the structure is detached from the data storage <i>cnt</i>.</li>
<li> <i>ResMtx &amp;resEl( );</i> — Mutex for access to containers of the fields.</li></ul>
<h3><span class="mw-headline" id="Data_structure_cell_.28TFld.29"><span class="mw-headline-number">13.5</span> <span id="TFld" title="#TFld">Data structure cell (TFld)</span></span></h3>
<p><b>Data:</b><br />
Cell's type (enum – TFld::Type):
</p>
<ul><li> <i>TFld::Boolean</i>(0) — boolean type;</li>
<li> <i>TFld::Integer</i>(1) — integer type;</li>
<li> <i>TFld::Real</i>(4) — real type;</li>
<li> <i>TFld::String</i>(5) — string type;</li>
<li> <i>TFld::Object</i>(6) — object type.</li>
<li> <i>TFld::GenMask</i>(0x0F) — generic types mask;</li>
<li> <i>TFld::Int16</i>(0x11) — signed integer 16 bits;</li>
<li> <i>TFld::Int32</i>(0x01) — signed integer 32 bits;</li>
<li> <i>TFld::Int64</i>(0x21) — signed integer 64 bits;</li>
<li> <i>TFld::Float</i>(0x14) — float (4 bytes);</li>
<li> <i>TFld::Double</i>(0x04) — double (8 bytes).</li></ul>
<p>Cell's flags (enum — TFld::AttrFlg):
</p>
<ul><li> <i>TFld::NoFlag</i>(0x00) — No flags;</li>
<li> <i>TFld::Selectable</i>(0x01) — selection mode from the available values, the selectable type;</li>
<li> <i>TFld::SelfFld</i>(0x02) — To create the own copy of this cell;</li>
<li> <i>TFld::NoWrite</i>(0x04) — unwritable;</li>
<li> <i>TFld::HexDec</i>(0x08) — integer type: hexadecimal notation;</li>
<li> <i>TFld::OctDec</i>(0x10) —  integer type: octal notation;</li>
<li> <i>TFld::DateTimeDec</i>(0x20) — integer type: содержит дату в UTC;</li>
<li> <i>TFld::FullText</i>(0x08) — Full-text, multi-string mode of the text type;</li>
<li> <i>TFld::TransltText(0x10)</i> — Translate the text variables of the record.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TFld( );</i> — Initialization by default.</li>
<li> <i>TFld( const TFld &amp;ifld, const char *name = NULL );</i> — Copying constructor, with possibility for individual <i>name</i> set.</li>
<li> <i>TFld( const char *name, const string &amp;descr, Type type, unsigned char flg, const char *valLen = "", const char *valDef = "", const char *vals = "", const char *nSel = "", const char *res = "" );</i> —  Initialization with the specified configuration.</li>
<li> <i>TFld &amp;operator=( const TFld &amp;fld );</i> — Copy of the cell from <i>fld</i>.</li>
<li> <i>const string &amp;name( ) const;</i> — Cell's name.</li>
<li> <i>string descr( ) const;</i> — Cell's description.</li>
<li> <i>string lenS( ) const;</i> — Combined string variant of the length field in the form "{len}.{dec}".</li>
<li> <i>int len( ) const;</i> — Size of the cell's value (symbols in symbolic representation).</li>
<li> <i>int dec( ) const;</i> — Size of the fractional part of a real (symbols in symbolic representation).</li>
<li> <i>Type type( ) const;</i> — Cell's type.</li>
<li> <i>static Type type(IO::Type tp);</i> — Cell's type from IO::Type type.</li>
<li> <i>IO::Type typeIO( ) const;</i> — Cell's type in IO::Type.</li>
<li> <i>unsigned flg( ) const;</i> — Cell's flag.</li>
<li> <i>const string &amp;def( ) const;</i> — Default value.</li>
<li> <i>string values( ) const;</i> — Working range of the value or a list of possible values for the selectable type (as — "vl1;vl2;vl3").</li>
<li> <i>string selNames( ) const;</i> — List of names of values for the selectable type (as — "Value 1;Value 2;Value 3").</li>
<li> <i>const string &amp;reserve( ) const;</i> — Reserve parameter.</li>
<li> <i>void setDescr( const string &amp;dscr );</i> — Set the descrition to the <i>dscr</i>.</li>
<li> <i>void setLen( int vl );</i> — Set the cell's size to the <i>vl</i>.</li>
<li> <i>void setDec( int vl );</i> — Set the fraction part of the real to the <i>vl</i>.</li>
<li> <i>void setDef( const string &amp;def );</i> — Set the default value to the <i>def</i>.</li>
<li> <i>void setFlg( unsigned flg );</i> — Set the flags to <i>flg</i>.</li>
<li> <i>void setValues( const string &amp;vls );</i> — Set the working range of value or the list of possible values for the selectable type (as — "vl1;vl2;vl3") to the <i>vls</i>.</li>
<li> <i>void setSelNames( const string &amp;slnms );</i> — Set the list of values' names for the selectable type (as — "Value 1;Value 2;Value 3") to the <i>slnms</i>.</li>
<li> <i>void setReserve( const string &amp;ires );</i> — Set of the reserve parameter to <i>res</i>.</li>
<li> <i>const vector&lt;string&gt; &amp;selValS() const;</i> — List of values' variants for the string type.</li>
<li> <i>const vector&lt;int&gt;    &amp;selValI() const;</i> — List of values' variants for the integer type.</li>
<li> <i>const vector&lt;double&gt; &amp;selValR() const;</i> — List of values' variants for the real type</li>
<li> <i>const vector&lt;bool&gt;   &amp;selValB() const;</i> — List of values' variants for the boolean type</li>
<li> <i>const vector&lt;string&gt; &amp;selNm() const;</i> — List of the names of values' variants.</li>
<li> <i>string selVl2Nm( const string &amp;val );</i> — Get the selectable name from the value <i>val</i> of the string type.</li>
<li> <i>string selVl2Nm( int64_t val );</i> — Get the selectable name from the value <i>val</i> of the integer type.</li>
<li> <i>string selVl2Nm( double val );</i> — Get the selectable name from the value <i>val</i> of the real type.</li>
<li> <i>string selVl2Nm( bool val ); string selVl2Nm( char val );</i> — Get the selectable name from the value <i>val</i>of the Boolean type.</li>
<li> <i>string selNm2VlS( const string &amp;name );</i> — Get the value of string type from the selectable name <i>name</i>.</li>
<li> <i>int64_t selNm2VlI( const string &amp;name );</i> — Get the value of integer type from the selectable name <i>name</i>.</li>
<li> <i>double selNm2VlR( const string &amp;name );</i> — Get the value of real type from the selectable name <i>name</i>.</li>
<li> <i>bool selNm2VlB( const string &amp;name );</i> — Get the value of boolean type from the selectable name <i>name</i>.</li>
<li> <i>XMLNode *cntrCmdMake( XMLNode *opt, const string &amp;path, int pos, const string &amp;user = "root", const string &amp;grp = "root", int perm = 0664 );</i> — Create a form element in accordance with the parameters of the cell.</li></ul>
<h3><span class="mw-headline" id="The_object_which_preacts_about_changing_of_the_structure_.28TValElem.29"><span class="mw-headline-number">13.6</span> <span id="TValElem" title="#TValElem">The object which preacts about changing of the structure (TValElem)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherited:</b></td>
<td><i><a href="#TValue">TValue</a>, <a href="#TConfig">TConfig</a></i>
</td></tr></table>
<p><b>Protected methods:</b>
</p>
<ul><li> <i>virtual void detElem( TElem *el );</i> — Notification by the element <i>el</i> of the container about it's wish to detach.</li>
<li> <i>virtual void addFld( TElem *el, unsigned id ) = 0;</i> — Notification about the addition of the cell <i>id</i> of the element <i>el</i>.</li>
<li> <i>virtual void delFld( TElem *el, unsigned id ) = 0;</i> — Notification about the deleting of the cell <i>id</i> of the element <i>el</i>.</li></ul>
<h3><span class="mw-headline" id="Data_cell_.28TVariant.29"><span class="mw-headline-number">13.7</span> <span id="TVariant" title="#TVariant">Data cell (TVariant)</span></span></h3>
<p><b>Data:</b><br />
Error values for the different data types (definition):
</p>
<ul><li> <i>EVAL_BOOL</i> — Error value of the boolean type (2);</li>
<li> <i>EVAL_INT</i> — Error value of the integer type (-2147483647);</li>
<li> <i>EVAL_REAL</i> — Error value of the real type (-3.3E308);</li>
<li> <i>EVAL_STR</i> — Error value of the string type ("&lt;EVAL&gt;").</li>
<li> <i>EVAL_INT16</i> — Error value of the integer 16 type (-32767);</li>
<li> <i>EVAL_INT32</i> — Error value of the integer 32 type (-2147483647);</li>
<li> <i>EVAL_INT64</i> — Error value of the integer 64 type (-9223372036854775807ll);</li>
<li> <i>EVAL_RFlt</i> — Error value of the real type Float (-3.29E38f);</li>
<li> <i>EVAL_RDbl</i> — Error value of the real type Double (-1.79E308).</li></ul>
<p>Типы данных (enum — TVariant::Type):
</p>
<ul><li> <i>TVariant::Null</i> — data type and data is not set.</li>
<li> <i>TVariant::Boolean</i> — boolean type (boolean, 8бит).</li>
<li> <i>TVariant::Integer</i> — integer type (integer, 32бит).</li>
<li> <i>TVariant::Real</i> — real type (double).</li>
<li> <i>TVariant::String</i> — string.</li>
<li> <i>TVariant::Object</i> — object.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TVariant( );</i> — Default constructor.</li>
<li> <i>TVariant( char ivl ); TVariant( bool ivl );</i> — Boolean type constructor.</li>
<li> <i>TVariant( int64_t ivl ); TVariant( int ivl );</i> — Integer type constructor.</li>
<li> <i>TVariant( double ivl );</i> — Real type constructor.</li>
<li> <i>TVariant( string ivl );</i> — String type constructor.</li>
<li> <i>TVariant( const char *var );</i> — String type constructor.</li>
<li> <i>TVariant( AutoHD&lt;TVarObj&gt; ivl ); TVariant( TVarObj *ivl );</i> — Object constructor.</li>
<li> <i>TVariant( const TVariant &amp;var );</i> — Copying constructor.</li>
<li> <i>bool operator==( const TVariant &amp;vr ) const;</i> — Check the object for equality.</li>
<li> <i>bool operator!=( const TVariant &amp;vr ) const;</i> — Check the object for not equality.</li>
<li> <i>TVariant &amp;operator=( const TVariant &amp;vr );</i> — Copy of the object.</li>
<li> <i>bool isNull( ) const;</i> — Signs that the object is not initiated.</li>
<li> <i>bool isEVal( ) const;</i> — Value into the object is error.</li>
<li> <i>Type type( ) const;</i> — Value's type.</li>
<li> <i>void setType( Type tp, bool fix = false, bool stdStringOmit = false );</i> — Set type <i>tp</i> for fixing it <i>fix</i> and use as constant allow <i>stdStringOmit</i>.</li>
<li> <i>bool isModify( );</i> — Modification flag. It serves in the object functions to indicate the modification of variables.</li>
<li> <i>void setModify( bool vl = true );</i> — Set of the modification flag.</li>
<li> <i>virtual char getB( ) const; operator char( );</i> — Getting the value as the boolean one.</li>
<li> <i>virtual int64_t getI( ) const; operator int64_t( ); operator int( );</i> — Getting the value as the integer one.</li>
<li> <i>virtual double getR( ) const; operator double( );</i> — Getting the value as the real one.</li>
<li> <i>virtual string getS( ) const; operator string( );</i> — Getting the value as the string one.</li>
<li> <i>virtual AutoHD&lt;TVarObj&gt; getO( ) const; operator AutoHD&lt;TVarObj&gt;( );</i> — Getting the object.</li>
<li> <i>virtual void setB( char val );</i> — Set to the value the boolean one.</li>
<li> <i>virtual void setI( int64_t val );</i> — Set to the value the integer one.</li>
<li> <i>virtual void setR( double val );</i> — Set to the value the real one.</li>
<li> <i>virtual void setS( const string &amp;val );</i> — Set to the value the string one.</li>
<li> <i>virtual void setO( AutoHD&lt;TVarObj&gt; val );</i> — Set the object.</li></ul>
<h3><span class="mw-headline" id="User_object_.28TVarObj.29"><span class="mw-headline-number">13.8</span> <span id="TVarObj" title="#TVarObj">User object (TVarObj)</span></span></h3>
<table class="wikitable">

<tr>
<td><b>Inherited:</b></td>
<td><i><a href="#TArrayObj">TArrayObj</a></i>
</td></tr></table>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TVarObj( );</i> — Constructor.</li>
<li> <i>int connect( );</i> — Connection to the object.</li>
<li> <i>int disconnect( );</i> — Disconnection from the object.</li>
<li> <i>virtual void propList( vector&lt;string&gt; &amp;ls );</i> — Object's properties list <i>ls</i>.</li>
<li> <i>virtual TVariant propGet( const string &amp;id );</i> — Request of the object property with an ID <i>id</i>.</li>
<li> <i>TVariant propGet( const string &amp;ids, char sep );</i> — Request of the object hierarchical property with a path <i>ids</i> and separator <i>sep</i>.</li>
<li> <i>virtual void propSet( const string &amp;id, TVariant val );</i> — Set the object property with an ID <i>id</i> to the value <i>val</i>.</li>
<li> <i>void propSet( const string &amp;ids, char sep, TVariant val );</i> — Set the object hierarchical property with a path <i>ids</i> and separator <i>sep</i> to the value <i>val</i>.</li>
<li> <i>void propClear( const string &amp;ids = "" );</i> — Property <i>ids</i> clear or all properties clear for empty <i>ids</i>.</li>
<li> <i>virtual string getStrXML( const string &amp;oid = "" );</i> — Conversion of the contents of the object in the XML flow.</li>
<li> <i>static AutoHD&lt;TVarObj&gt; parseStrXML( const string &amp;str, XMLNode *nd = NULL, AutoHD&lt;TVarObj&gt; prev = NULL );</i> — Backward serialization for XML-stream to object.</li>
<li> <i>virtual TVariant funcCall( const string &amp;id, vector&lt;TVariant&gt; &amp;prms );</i> — Call of the object function with the ID <i>id</i> and with the parameters <i>prms</i>.</li></ul>
<h2><span class="mw-headline" id=".D0.86.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81_.D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D1.96.D0.BD.D0.BD.D1.8F_.D1.82.D0.B0_.D0.B4.D0.B8.D0.BD.D0.B0.D0.BC.D1.96.D1.87.D0.BD.D0.B5_.D0.B4.D0.B5.D1.80.D0.B5.D0.B2.D0.BE_.D0.BE.D0.B1.27.D1.94.D0.BA.D1.82.D1.96.D0.B2_.D0.BF.D1.80.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D0.B8_.28TCntrNode.29"><span class="mw-headline-number">14</span> <span id="CntrNode" title="#CntrNode">Інтерфейс Управління та динамічне дерево об'єктів програми (TCntrNode)</span></span></h2>
<p>Для повного покриття ключових компонентів програми мережею об'єктів єдиної структури призначено об'єкт вузла динамічного дерева <a href="#TCntrNode">#TCntrNode</a>. На цей об'єкт покладаються наступні функції:
</p>
<ul><li> одноманіття доступу до компонентів програми, включно блокування динамічного доступу;</li>
<li> побудова розподіленого інтерфейсу управління.</li></ul>
<p>Будь який об'єкт, що має необхідність у наданні динамічного доступу до себе або своїх компонентів, має успадковуватися від об'єкту вузла динамічного дерева <a href="#TCntrNode">#TCntrNode</a>. Така спорідненість автоматично включає вузол до динамічного дерева об'єктів, яке охоплене як прямим, так і зворотнім зв'язком, а також надає можливість створення контейнерів під власні дочірні вузли. На додаток до цього, вузол отримує можливість попередження про включення та виключення/видалення вузла із дерева з можливістю відхилення виключення/видалення.
</p><p>Інтерфейс Управління включено до складу об'єкту <a href="#TCntrNode">#TCntrNode</a> та він охоплює всі вузли динамічного дерева програми, дозволяючи одноманітно керувати програмою незалежно від використаного клієнтського інструменту. Інтерфейс Управління виконано на основі мови розмітки XML та до якого можна придумати багато способів щодо використання, наприклад, відзначимо наступні найбільш показові рішення:
</p>
<ul><li> Web Інтерфейс конфігурації;</li>
<li> GUI Інтерфейс конфігурації (Qt, WEB, ...);</li>
<li> віддзеркалення конфігурації об'єктів в мережу для розподіленого управління ієрархічною мережею вузлів OpenSCADA зі спільного середовища адміністрування;</li>
<li> використання у якості протоколу для доступу до даних об'єктів із мережі;</li>
<li> надання іншим додаткам та окремим компонентам OpenSCADA <a href="#ServFunc">сервісних функцій</a> доступу до внутрішніх даних.</li></ul>
<p>Інтерфейс Управління реалізовано посередництвом складових:
</p>
<ul><li> інформаційної структури конфігураційної користувацької сторінки;</li>
<li> динамічної частини у вигляді запитів на отримання, встановлення даних та сервісних запитів;</li>
<li> контейнеру-групи вищеперелічених елементів.</li></ul>
<p>Інформаційна ієрархічна структура містить інформацію з публічних елементів управління та вона може бути використана для побудови користувацьких діалогів управління вузлами програми.
</p><p>Динамічна частина містить сценарії обслуговування запитів до елементів управління, які описано в інформаційній структурі, та до прихованих елементів управління у вигляді сервісних функцій, що використовуються для уніфікованого доступу до вузлу.
</p><p>Контейнер дозволяє зібрати до одного запиту декілька інформаційних структур та динамічних частин, оптимізуючи таким чином час запиту, особливо на високолатентних мережевих інтерфейсах.
</p><p>Загальний Інтерфейс Управління будується із окремих вузлів динамічного дерева. Ієрархічне спадкування від об'єкту <a href="#TCntrNode">#TCntrNode</a> дозволяє реалізовувати багаторівневе доповнення конфігурації Інтерфейсу Управління. Вигляд динамічного дерева вузлів наведено на рисунку 8.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:802px;"><a class="image" href="http://oscada.org/wiki/File:Oscada_UserOM_uk.png"><img class="thumbimage" height="361" src="files/800px-Oscada_UserOM_uk.png" srcset="/wiki/images/3/39/Oscada_UserOM_uk.png 1.5x, /wiki/images/3/39/Oscada_UserOM_uk.png 2x" width="800" /></a>  <div class="thumbcaption"><div class="magnify"><a class="internal" href="http://oscada.org/wiki/File:Oscada_UserOM_uk.png" title="Enlarge" /></div>Fig.8. Приклад динамічного дерева вузлів в OpenSCADA.</div></div></div></div>
<p>Вузли, що містять дані для Інтерфейсу Управління, також мають підключатися у динамічне дерево об'єктів.
</p><p>Підключення вузла у динамічне дерево відбувається наступним чином:
</p>
<ul><li> спадкування об'єкту <a href="#TCntrNode">#TCntrNode</a> або його нащадка;</li>
<li> формування інформаційної структури;</li>
<li> обслуговування запитів до динамічних даних.</li></ul>
<h3><span class="mw-headline" id=".D0.A1.D0.B8.D0.BD.D1.82.D0.B0.D0.BA.D1.81.D0.B8.D1.81_.D0.B7.D0.B0.D0.BF.D0.B8.D1.82.D1.83_.D1.82.D0.B0_.D0.B2.D1.96.D0.B4.D0.BF.D0.BE.D0.B2.D1.96.D0.B4.D1.96_.D0.86.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D1.83_.D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D1.96.D0.BD.D0.BD.D1.8F"><span class="mw-headline-number">14.1</span> Синтаксис запиту та відповіді Інтерфейсу Управління</span></h3>
<p>Весь обмін із Інтерфейсом Управління відбувається посередництвом мови XML. При цьому, внутрішній обмін виконується розібраною структурою мови XML, а зовнішній — посередництвом перетворення у потік символів суцільного XML-файлу та назад.
</p><p>Запит виконується посередництвом надсилання тегу з параметрами в атрибутах. Результат поміщається до отриманого тегу зі зміною деяких атрибутів. У загальному випадку тег запиту можна записати <i>&lt;<b>{req}</b> path="<b>{path}</b>" user="<b>{user}</b>"&gt;<b>{text}</b>&lt;/<b>{req}</b>&gt;</i>. Де:
</p>
<ul><li> <i>req</i> — запит;</li>
<li> <i>path</i> — шлях, складається безпосередньо зі шляху до вузла та адреси конкретного елемента у інформаційній структурі вузла, де адреса конкретного елементу це теж шлях, що кодується для символу "/" у "%2f" та записується останнім елементом-файлом загального шляху, наприклад — "/sub_DAQ/mod_ModBus/cntr_testTCP/%2fcntr%2fcfg%2fNAME";</li>
<li> <i>user</i> — користувач програми від ім'я якого спрямовано запит, зазвичай ставиться автоматично;</li>
<li> <i>text</i> — текст або результат запиту.</li></ul>
<p>Результат запиту маркується у відповіді встановленням атрибуту <i>rez</i> в значення: 0-вдалий, 1-попередження, 2-помилка. У випадку помилки та попередження, повідомлення записується до тексту <i>text</i> тегу та атрибуту <i>mcat</i> (категорія повідомлення): <i>&lt;{req} path="{path}" user="{user}" rez="<b>2</b>" mcat="<b>/sub_DAQ/mod_BlockCalc</b>"&gt;<b>Неможливо видалити вузол</b>&lt;/{req}&gt;</i>
</p><p>Запит групування "CntrReqs" обробляється на рівні API вузла та не потребує окремої обробки у користувацькому коді. Фактично, до тегу "CntrReqs" можуть включатися будь які інші запити із можливістю ієрархічного групування шляхом включення внутрішніх тегів "CntrReqs". Єдиним атрибутом цього тегу є атрибут <i>path</i>, який вказує шлях до вузла та є основою для внутрішніх запитів.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nt">&lt;CntrReqs</span> <span class="na">path=</span><span class="s">"/sub_DAQ/cntr_gate"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/%2fprm%2fcfg%2fNAME"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/%2fprm%2fcfg%2fDESCR"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;list</span> <span class="na">path=</span><span class="s">"/%2fserv%2fattr"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/CntrReqs&gt;</span>
</pre></div>
<h3><span class="mw-headline" id=".D0.97.D0.B0.D0.BF.D0.B8.D1.82_.D1.96.D0.BD.D1.84.D0.BE.D1.80.D0.BC.D0.B0.D1.86.D1.96.D0.B9.D0.BD.D0.BE.D1.97_.D1.81.D1.82.D1.80.D1.83.D0.BA.D1.82.D1.83.D1.80.D0.B8_.D0.BA.D0.BE.D0.BD.D1.82.D1.80.D0.BE.D0.BB.D1.8E_.E2.80.94_.3Cinfo_user.3D.27.7Buser.7D.27_lang.3D.27.7Blang.7D.27_path.3D.27.7Bpath.7D.27_.2F.3E"><span class="mw-headline-number">14.2</span> Запит інформаційної структури контролю — &lt;info user='{user}' lang='{lang}' path='{path}' /&gt;</span></h3>
<p>Інформаційний запит повертає ієрархічну структуру конфігурації, що надає вузол. Запит зазвичай не містить атрибуту шляху "path" та розповсюджується на весь вузол, хоча у складних випадках запиту частини інформаційного дерева можна вказувати шлях елементу гілки від якої отримувати конфігурацію.
</p><p>У результаті запиту буде отримано інформаційну структуру сторінки відповідно до привілеїв користувача запиту — поля якої вважаються уніфікованими та описані нижче щодо специфіки інформації тут, а також доступних команд. Усе поза уніфікацією вважається сервісними запитами зі специфічною структурою, які відповідно описано у розділі <a href="#ServFunc">сервісних функцій</a>.
</p><p>Теги інформаційних елементів передбачають обов'язкові атрибути:
</p>
<ul><li> <i>id</i> — ідентифікатор, за ним здійснюється формування шляху до елементу у командних запитах;</li>
<li> <i>dscr</i> — локалізований опис згідно до мови <i>lang</i> та локалі користувача <i>user</i>, безпосередньо використовується у формуванні візуального представлення;</li>
<li> <i>acs</i> — визначення прав доступу до поля за динамічними командами, що записується:</li></ul>
<dl><dd><ul><li> 0 — доступ взагалі відсутній, поля видаляються з такими правами;</li>
<li> 4 (SEC_RD) — доступ на читання;</li>
<li> 2 (SEC_WR) — доступ на запис, зазвичай таке значення не має сенсу, оскільки доступ на запис передбачає і доступ на читання;</li>
<li> 6 (SEC_RD|SEC_WR) — доступ на читання та запис.</li></ul></dd>
<dd> <a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../en/files/At.png" width="22" /></a> Тобто, молодші три біти числа атрибуту "acs" містять актуальний доступ визначеного користувача, а наступні три біти (3..5) містять максимально можливі права, наприклад, 064(52) — максимальний повний доступ та актуальний лише на читання.</dd></dl>
<p><b>Таблиця.</b> Таблиця всіх можливих елементів у структурі.
</p>
<table class="wikitable">

<tr>
<th> Тег (вміст) </th>
<th> Опис
</th></tr>
<tr>
<td> <b>oscada_cntr</b>
<p>(img, branches, area)
</p>
</td>
<td> Представляє вузол в цілому, який, єдиний — є КОРЕНЕМ і включається безпосередньо у тег <b>info</b> та містить інформаційні теги елементів і полів. Атрибути:
<ul><li> <i>id</i> — НЕМАЄ;</li>
<li> <i>dscr</i> — визначає локалізований опис вузла;</li>
<li> <i>doc</i> — адреса сторінки документації цього вузла у вигляді "<b>{WikiPage}|{OffLinePage}</b>".</li></ul>
<p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../en/files/At.png" width="22" /></a> Тег <b>img</b> безпосередньо у цьому має бути одним, із ідентифікатором (id) "ico" та він представляє іконку сторінки.
</p>
</td></tr>
<tr>
<td> <b>branches</b>
<p>(grp)
</p>
</td>
<td> Контейнер груп дочірніх гілок вузла. Атрибути:
<ul><li> <i>id</i> — ідентифікатор контейнеру, ЗАВЖДИ "br";</li>
<li> <i>dscr</i> — НЕМАЄ.</li></ul>
</td></tr>
<tr>
<td> <b>grp</b> </td>
<td> Група дочірніх вузлів. Атрибути:
<ul><li> <i>id</i> — префікс групи дочірніх вузлів у програмі;</li>
<li> <i>dscr</i> — визначає локалізований опис групи вузлів;</li>
<li> <i>acs</i> — доступ: SEC_RD — видимість (<a href="#CntrListGet">get</a>), SEC_WR — додання (<a href="#CntrListAdd">add</a>) та видалення (<a href="#CntrListDel">del</a>) елементів групи.</li>
<li> <i>idm</i> — ознака наявності назви у елементів групи та дозволений розмір назви за значення &gt; 1;</li>
<li> <i>idSz</i> — дозволений розмір ідентифікаторів елементів.</li></ul>
</td></tr>
<tr>
<td> <b>area</b>
<p>(area, fld, list, table, comm, img)
</p>
</td>
<td> Візуальні області. Сторінка із кінцевими елементами-полями конфігурації має містити хоча-б одну область візуального відображення тегом, де перші за ієрархією у конфігураторах це вкладки, а решта то вкладені групи. Атрибути:
<ul><li> <i>acs</i> — доступ: SEC_RD — видимість.</li></ul>
</td></tr>
<tr>
<td> <b>comm</b>
<p>(fld)
</p>
</td>
<td> Команди до вузла. Надається для передавання команд та дій до вузла, а також може бути використане для створення посилань на інші сторінки. Команди можуть включати параметри-аргументи, які описано із "fld". Атрибути:
<ul><li> <i>acs</i> — доступ: SEC_RD — видимість, SEC_WR — виклик команд (<a href="#CntrCommSet">set</a>);</li>
<li> <i>help</i> — допомога команди;</li>
<li> <i>tp</i> — тип команди, відсутній для звичайних команд або "lnk" для посилань (<a href="#CntrCommGet">get</a> для SEC_RD).</li></ul>
</td></tr>
<tr>
<td> <b>fld</b> </td>
<td> Представлення та введення стандартних типів даних. Атрибути:
<ul><li> <i>acs</i> — доступ: SEC_RD — видимість (<a href="#CntrFldGet">get</a>), SEC_WR — модифікація (<a href="#CntrFldSet">set</a>);</li>
<li> <i>help</i> — допомога до поля;</li>
<li> <i>tp</i> — тип елементу:
<ul><li> "str" (len, dest, cols, rows) — елемент рядку;</li>
<li> "dec" (len, max, min, dest) — елемент десяткового цілого;</li>
<li> "oct" (len, max, min, dest) — елемент вісімкового цілого;</li>
<li> "hex" (len, max, min, dest) — елемент шістнадцяткового цілого;</li>
<li> "real" (len, max, min, dest) — реальне число;</li>
<li> "bool" — логічна-дискретна ознака [0|1];</li>
<li> "time" — час-дата в секундах, від 01/01/1970.</li></ul></li></ul>
<p><b><u>Пов'язане:</u></b><br />
</p>
<ul><li> <i>len</i> — довжина значення у символах;</li>
<li> <i>min</i> — мінімум значення;</li>
<li> <i>max</i> — максимум значення;</li>
<li> <i>cols</i> — обмеження кількості стовпчиків;</li>
<li> <i>rows</i> (SnthHgl) — мінімальна кількість рядків, &gt; 1 вказує текстові поля із правилами підсвітлення синтаксису за "SnthHgl";</li>
<li> <i>dest</i> — метод введення:
<ul><li> "select" (select або sel_list, sel_id) — вибірний тип;</li>
<li> "sel_ed" (select або sel_list, sel_id) — вибірний тип із можливістю редагування.</li></ul></li>
<li> <i>select</i> — шлях запиту динамічного переліку вибору (<a href="#CntrListGet">get</a>);</li>
<li> <i>sel_list</i> — статичний перелік імен, поділено ';';</li>
<li> <i>sel_id</i> — статичний перелік ідентифікаторів до імен у "sel_list", поділено ';';</li>
<li> <i>SnthHgl</i> — ознака наявності правил підсвітлення синтаксису для текстових полів, отримання правил командою <a href="#SnthHgl">SnthHgl</a>.</li></ul>
</td></tr>
<tr>
<td> <b>list</b> </td>
<td> Перелік стандартних типів даних. Атрибути:
<ul><li> <i>acs</i> — доступ: SEC_RD — видимість (<a href="#CntrListGet">get</a>), SEC_WR — виклик команд із "s_com" (<a href="#CntrListAdd">add</a>, <a href="#CntrListIns">ins</a>, <a href="#CntrListDel">del</a>, <a href="#CntrListEdit">edit</a>, <a href="#CntrListMove">move</a>);</li>
<li> <i>help</i> — допомога до переліку;</li>
<li> <i>tp</i> — так само як у <b>fld</b> окрім:
<ul><li> "br" (br_pref) — дочірні вузли.</li></ul></li>
<li> <i>idm</i> — ознака індексованого (із ідентифікаторами) переліку (0|1);</li>
<li> <i>idSz</i> — допустимий розмір ідентифікаторів елементів;</li>
<li> <i>s_com</i> — шляхи модифікації переліку зі списку "[add][,ins][,edit][,del][,move]":
<ul><li> "add" — додання рядків;</li>
<li> "ins" — вставка рядків;</li>
<li> "edit" — модифікація рядків;</li>
<li> "del" — видалення рядків;</li>
<li> "move" — пересування рядків.</li></ul></li></ul>
<p><b><u>Пов'язане:</u></b><br />
</p>
<ul><li> <i>br_pref</i> — префікс репрезентації дочірніх вузлів;</li>
<li> <i>dest</i> — так само як у <b>fld</b>.</li></ul>
</td></tr>
<tr>
<td> <b>table</b>
<p>(list)
</p>
</td>
<td> Таблиця стандартних типів даних. Атрибути:
<ul><li> <i>acs</i> — доступ: SEC_RD — видимість (<a href="#CntrTableGet">get</a>), SEC_WR — виклик команд із "s_com" (<a href="#CntrTableAdd">add</a>, <a href="#CntrTableIns">ins</a>, <a href="#CntrTableDel">del</a>, <a href="#CntrTableMove">move</a>, <a href="#CntrTableUser">{user}</a>) та дозвіл зміни вмісту клітинки (<a href="#CntrTableSet">set</a>);</li>
<li> <i>help</i> — допомога до таблиці;</li>
<li> <i>key</i> — перелік ключових стовпців, якщо атрибут визначено та він перелічує стовпці, то дії із таблицею переводяться у режим адресування за значеннями визначених стовпців як ключа.</li>
<li> <i>rows</i> — мінімальна висота таблиці у рядках;</li>
<li> <i>s_com</i> — шляхи модифікації переліку зі списку "[add][,ins][,del][,move][,{user}]":
<ul><li> "add[:{CustName}]" — додання рядків, із користувацькою назвою елементу меню "CustName";</li>
<li> "ins[:{CustName}]" — вставка рядка, із користувацькою назвою елементу меню "CustName";</li>
<li> "del[:{CustName}]" — видалення рядка, із користувацькою назвою елементу меню "CustName";</li>
<li> "move" — пересування рядка;</li>
<li> "{user}[:{name}]" — користувацька команда <i>user</i> до рядка або таблиці в цілому із назвою елементу меню "name".</li></ul></li></ul>
</td></tr>
<tr>
<td> <b>img</b> </td>
<td> Зображення. Надається для передавання зображень клієнтам Інтерфейсу Управління. У якості зображень можуть бути: іконки сторінок, діаграми та інші дані, що можуть бути представлені у графічній формі. Атрибути:
<ul><li> <i>acs</i> — доступ: SEC_RD — видимість (<a href="#CntrImgGet">get</a>), SEC_WR — доступний до завантаження та очищення (<a href="#CntrImgSet">set</a>);</li>
<li> <i>help</i> — допомога до зображення;</li>
<li> <i>h_sz</i> — обмеження горизонтального розміру;</li>
<li> <i>v_sz</i> — обмеження вертикального розміру.</li></ul>
</td></tr></table>
<p>Комплексний приклад інформаційної структури:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nt">&lt;info</span> <span class="na">lang=</span><span class="s">"uk"</span> <span class="na">user=</span><span class="s">"roman"</span> <span class="na">rez=</span><span class="s">"0"</span><span class="nt">&gt;&lt;oscada_cntr</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"OpenSCADA станція: &amp;quot;АГЛКС&amp;quot;"</span> <span class="na">doc=</span><span class="s">"Program_manual|Documents/Program_manual"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;branches</span> <span class="na">id=</span><span class="s">'br'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;grp</span> <span class="na">id=</span><span class="s">'in_'</span> <span class="na">descr=</span><span class="s">'Вхідний транспорт'</span> <span class="na">acs=</span><span class="s">'52'</span> <span class="na">idSz=</span><span class="s">'30'</span> <span class="na">idm=</span><span class="s">'50'</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;grp</span> <span class="na">id=</span><span class="s">'out_'</span> <span class="na">descr=</span><span class="s">'Вихідний транспорт'</span> <span class="na">acs=</span><span class="s">'52'</span> <span class="na">idSz=</span><span class="s">'30'</span> <span class="na">idm=</span><span class="s">'50'</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/branches&gt;</span>
  <span class="nt">&lt;img</span> <span class="na">id=</span><span class="s">"ico"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;area</span> <span class="na">id=</span><span class="s">"gen"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Станція"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"id"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Станція"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="na">help=</span><span class="s">"Ідентифікатор"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"stat"</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="na">help=</span><span class="s">"Ім'я"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"config"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Конфігураційний файл"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"workdir"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Робоча тека"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="na">dest=</span><span class="s">"sel_ed"</span> <span class="na">select=</span><span class="s">"/gen/workDirList"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"moddir"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Тека модулів"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="na">dest=</span><span class="s">"sel_ed"</span> <span class="na">select=</span><span class="s">"/gen/modDirList"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;area</span> <span class="na">id=</span><span class="s">"env"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Оточення"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"prog"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Програма"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"sys"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Система"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="na">len=</span><span class="s">"30"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"time"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Системний час"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"clk"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Системний годинник планування"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"user"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Системний користувач"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"in_charset"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Мова"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="na">help=</span><span class="s">"Системне кодування локалі."</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"lang"</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="na">dest=</span><span class="s">"sel_ed"</span> <span class="na">sel_list=</span><span class="s">"en_US.UTF-8;uk_UA.UTF-8;ru_RU.UTF-8"</span>
           <span class="na">help=</span><span class="s">"Повна інформація щодо локалі із мовою, країною та кодуванням у вигляді &amp;quot;uk_UA.UTF-8&amp;quot;."</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"host"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Ім'я хосту"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"CPU"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"ЦП"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"mainCPUs"</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">tp=</span><span class="s">"str"</span>
           <span class="na">help=</span><span class="s">"Основний набір процесорів.&amp;#010;Для встановлення використовуваних процесорів записуйте рядок номерів, поділених символом &amp;#039;:&amp;#039;.&amp;#010;</span>
<span class="s">Номера процесорів починаються з 0."</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"taskInvPhs"</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">dscr=</span><span class="s">"Кількість фаз виклику задач"</span> <span class="na">tp=</span><span class="s">"dec"</span>
           <span class="na">help=</span><span class="s">"Для встановлення фазування виклику завдань у визначену кількість фаз,&amp;#010; &amp;lt;= 0 для встановлення оптимально, 1 для вимкнення фазування задач."</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/area&gt;</span>
  <span class="nt">&lt;/area&gt;</span>
  <span class="nt">&lt;area</span> <span class="na">id=</span><span class="s">"subs"</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">dscr=</span><span class="s">"Підсистеми"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;list</span> <span class="na">id=</span><span class="s">"br"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Підсистеми"</span> <span class="na">idm=</span><span class="s">"1"</span> <span class="na">tp=</span><span class="s">"br"</span> <span class="na">br_pref=</span><span class="s">"sub_"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/area&gt;</span>
  <span class="nt">&lt;area</span> <span class="na">id=</span><span class="s">"arch"</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">dscr=</span><span class="s">"Архіви"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"arch"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Архіви"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;list</span> <span class="na">id=</span><span class="s">"0"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Архів"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;list</span> <span class="na">id=</span><span class="s">"1"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Період, секунд"</span> <span class="na">tp=</span><span class="s">"real"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;list</span> <span class="na">id=</span><span class="s">"2"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Розмір буферу"</span> <span class="na">tp=</span><span class="s">"dec"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;list</span> <span class="na">id=</span><span class="s">"3"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Останнє читання буферу"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;list</span> <span class="na">id=</span><span class="s">"4"</span> <span class="na">acs=</span><span class="s">"36"</span> <span class="na">dscr=</span><span class="s">"Розмір файлів"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/table&gt;</span>
    <span class="nt">&lt;comm</span> <span class="na">id=</span><span class="s">"exp"</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">dscr=</span><span class="s">"Експорт"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"arch"</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">dscr=</span><span class="s">"Архів"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="na">dest=</span><span class="s">"select"</span> <span class="na">select=</span><span class="s">"/arch/lst"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"beg"</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">dscr=</span><span class="s">"Початок"</span> <span class="na">tp=</span><span class="s">"time"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"end"</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">dscr=</span><span class="s">"Кінець"</span> <span class="na">tp=</span><span class="s">"time"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"tfl"</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">dscr=</span><span class="s">"Тип"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="na">dest=</span><span class="s">"select"</span> <span class="na">select=</span><span class="s">"/arch/tpflst"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"file"</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">dscr=</span><span class="s">"До файлу"</span> <span class="na">tp=</span><span class="s">"str"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/comm&gt;</span>
  <span class="nt">&lt;/area&gt;</span>
<span class="nt">&lt;/oscada_cntr&gt;&lt;/info&gt;</span>
</pre></div>
<h3><span class="mw-headline" id=".D0.9D.D0.B0.D0.B4.D1.81.D0.B8.D0.BB.D0.B0.D0.BD.D0.BD.D1.8F_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4_.D1.81.D1.82.D0.B0.D0.BD.D0.B4.D0.B0.D1.80.D1.82.D0.BD.D0.B8.D1.85_.D0.B5.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D1.96.D0.B2_.E2.80.94_.3C.7Bcmd.7D_path.3D.27.7Bpath.7D.27.3E.7Btext.7D.3C.2F.7Bcmd.7D.3E"><span class="mw-headline-number">14.3</span> Надсилання команд стандартних елементів — &lt;{cmd} path='{path}'&gt;{text}&lt;/{cmd}&gt;</span></h3>
<p>Кінцеві конфігураційні поля надають декілька команд, починаючи із запиту динамічної інформації та завершуючи командами контролю. Всі ці команди може бути використано у ваших внутрішніх процедурах незалежно від запиту інформаційної структури та для гнучкого керування OpenSCADA як локально, так і віддалено у будь ієрархії, за допомогою функції Користувацького API <a href="User_API.html#SYS" title="Special:MyLanguage/Documents/User API">SYS.cntrReq()</a>.
</p><p>Окрім опису уніфікованих команд, для стандартних елементів вам може знадобитися лише шлях цього елементу та який ви можете отримати у будь якому конфігураторі OpenSCADA, що відображає шлях у рядку статусу або контекстній допомозі. <a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../en/files/At.png" width="22" /></a> Будь яка неуніфікована поведінка окремих стандартних полів передбачає сервісні запити та про які ви можете дізнатися у <a href="#ServFunc">секції сервісних функцій</a>!
</p>
<h4><span class="mw-headline" id=".D0.9A.D0.BE.D0.BD.D1.84.D1.96.D0.B3.D1.83.D1.80.D0.B0.D1.86.D1.96.D0.B9.D0.BD.D0.B5_.D0.BF.D0.BE.D0.BB.D0.B5_.E2.80.94_.22fld.22"><span class="mw-headline-number">14.3.1</span> Конфігураційне поле — "fld"</span></h4>
<p><b><u> <span id="CntrFldGet" title="#CntrFldGet">Отримання</span> даних</u></b><br />
ЗАП: <i>&lt;get path="<b>{path}</b>" /&gt;</i><br />
ВІДП: <i>&lt;get path="{path}" rez="<b>0</b>"&gt;<b>{value}</b>&lt;/get&gt;</i>
</p>
<ul><li> <i>value</i> — значення поля у формі рядка.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/sub_Security/usr_user/%2fprm%2fDESCR"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"root"</span><span class="nt">&gt;</span>Простий користувач<span class="nt">&lt;/get&gt;</span>
</pre></div>
<p><b><u> <span id="CntrFldSet" title="#CntrFldSet">Встановлення</span> поля</u></b><br />
ЗАП: <i>&lt;set path="<b>{path}</b>"&gt;<b>{value}</b>&lt;/set&gt;</i>
</p>
<ul><li> <i>value</i> — значення встановлення у формі рядка.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;set</span> <span class="na">path=</span><span class="s">"/sub_Security/usr_user/%2fprm%2fDESCR"</span><span class="nt">&gt;</span>Перейменований користувач<span class="nt">&lt;/set&gt;</span>
</pre></div>
<p><b><u> <span id="SnthHgl" title="#SnthHgl">Отримання правил підсвітлення синтаксису</span> текстового поля</u></b><br />
Доступне за встановлення атрибуту "SnthHgl" у відповідному інформаційному полі.<br />
ЗАП: <i>&lt;SnthHgl path="<b>{path}</b>" /&gt;</i><br />
ВІДП: <i>&lt;SnthHgl path="{path}" rez="<b>0</b>"&gt;<b>{rules tree}</b>&lt;/get&gt;</i>
</p>
<ul><li> <i>rules tree</i> — дерево тегів "rule" та "blk", які описують підсвітлення синтаксису.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;SnthHgl</span> <span class="na">font=</span><span class="s">"monospace"</span> <span class="na">path=</span><span class="s">"/sub_DAQ/tmplb_base/tmpl_anUnif/%2fio%2fprog"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"root"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;rule</span> <span class="na">color=</span><span class="s">"darkgreen"</span> <span class="na">expr=</span><span class="s">"(&amp;quot;(|\\{2}|\\{4}|\\{6}|\\{8})&amp;quot;|&amp;quot;.*[^\\](|\\{2}|\\{4}|\\{6}|\\{8})&amp;quot;)"</span> <span class="na">min=</span><span class="s">"1"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;rule</span> <span class="na">color=</span><span class="s">"green"</span> <span class="na">expr=</span><span class="s">"\\([xX][a-zA-Z0-9]{2}|[0-7]{3}|.{1})"</span> <span class="na">font_weight=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/rule&gt;</span>
  <span class="nt">&lt;blk</span> <span class="na">beg=</span><span class="s">"/\*"</span> <span class="na">color=</span><span class="s">"gray"</span> <span class="na">end=</span><span class="s">"\*/"</span> <span class="na">font_italic=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;rule</span> <span class="na">color=</span><span class="s">"gray"</span> <span class="na">expr=</span><span class="s">"//.*$"</span> <span class="na">font_italic=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;rule</span> <span class="na">color=</span><span class="s">"darkblue"</span> <span class="na">expr=</span><span class="s">"\b(if|else|for|while|using|new|delete|break|continue|return|function|Array|Object|RegExp)\b"</span> <span class="na">font_weight=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;rule</span> <span class="na">color=</span><span class="s">"darkblue"</span> <span class="na">expr=</span><span class="s">"\b(var|in)(?=\s+\w)"</span> <span class="na">font_weight=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;rule</span> <span class="na">color=</span><span class="s">"darkblue"</span> <span class="na">expr=</span><span class="s">"(\?|\:)"</span> <span class="na">font_weight=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;rule</span> <span class="na">color=</span><span class="s">"darkorange"</span> <span class="na">expr=</span><span class="s">"\b(0[xX][0-9a-fA-F]*|[0-9]*\.?[0-9]+|[0-9]*\.?[0-9]+[eE][-+]?[0-9]*|true|false)\b"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;rule</span> <span class="na">color=</span><span class="s">"darkblue"</span> <span class="na">expr=</span><span class="s">"(\=|\!|\+|\-|\&amp;gt;|\&amp;lt;|\*|\/|\%|\||\&amp;amp;|\^|\~)"</span> <span class="na">font_weight=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;rule</span> <span class="na">color=</span><span class="s">"blue"</span> <span class="na">expr=</span><span class="s">"(\;|\,|\{|\}|\[|\]|\(|\))"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/SnthHgl&gt;</span>
</pre></div>
<h4><span class="mw-headline" id=".D0.9F.D0.BE.D0.BB.D0.B5_.D0.BF.D0.B5.D1.80.D0.B5.D0.BB.D1.96.D0.BA.D1.83_.E2.80.94_.22list.22"><span class="mw-headline-number">14.3.2</span> Поле переліку — "list"</span></h4>
<p><b><u> <span id="CntrListGet" title="#CntrListGet">Отримання</span> даних</u></b><br />
ЗАП: <i>&lt;get path="<b>{path}</b>" /&gt;</i><br />
ВІДП: <i>&lt;get path="{path}" rez="<b>0</b>"&gt;<b>{elements list}</b>&lt;/get&gt;</i>
</p>
<ul><li> <i>elements list</i> — перелік елементів у тегах "el", де ім'я елементу у тексті тегу, а ідентифікатор елементу у атрибуті "id" для переліків із ідентифікаторами.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/sub_BD/mod_SQLite/%2fdb%2fodb"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"root"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"GenDB"</span><span class="nt">&gt;</span>Основна БД<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"OscadaLibs"</span><span class="nt">&gt;</span>OscadaLibs<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"vcaBase"</span><span class="nt">&gt;</span>vcaBase<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"vcaElectroEls"</span><span class="nt">&gt;</span>vcaElectroEls<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"vcaTest"</span><span class="nt">&gt;</span>vcaTest<span class="nt">&lt;/el&gt;</span>
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<p><b><u> <span id="CntrListAdd" title="#CntrListAdd">Додання</span> елементу</u></b><br />
Дозволено за "add" у атрибуті "s_com" відповідного інформаційного поля.<br />
ЗАП: <i>&lt;add path="<b>{path}</b>" id="<b>{itId}</b>"&gt;<b>{itName}</b>&lt;/add&gt;</i>
</p>
<ul><li> <i>itName</i> — назва нового елементу;</li>
<li> <i>itId</i> — ідентифікатор нового елементу для переліків із ідентифікаторами.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre>  <span class="nt">&lt;add</span> <span class="na">path=</span><span class="s">"/sub_BD/mod_SQLite/%2fdb%2fodb"</span> <span class="na">id=</span><span class="s">"test"</span><span class="nt">&gt;</span>Тест<span class="nt">&lt;/add&gt;</span>
</pre></div>
<p><b><u> <span id="CntrListIns" title="#CntrListIns">Вставка</span> елементу</u></b><br />
Дозволено за "ins" у атрибуті "s_com" відповідного інформаційного поля.<br />
ЗАП: <i>&lt;ins path="<b>{path}</b>" pos="<b>{pos}</b>" p_id="<b>{posId}</b>" id="<b>{itId}</b>"&gt;<b>{itName}</b>&lt;/ins&gt;</i>
</p>
<ul><li> <i>itName</i> — назва нового елементу;</li>
<li> <i>itId</i> — ідентифікатор нового елементу для переліків із ідентифікаторами;</li>
<li> <i>pos</i> — абсолютний номер позиції обраного-вставленого елементу;</li>
<li> <i>posId</i> — назва обраного елементу, або ідентифікатор для переліків із ідентифікаторами, у позицію якого вставляти новий елемент.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre>  <span class="nt">&lt;ins</span> <span class="na">path=</span><span class="s">"/sub_BD/mod_SQLite/%2fdb%2fodb"</span> <span class="na">pos=</span><span class="s">"1"</span> <span class="na">p_id=</span><span class="s">"OscadaLibs"</span> <span class="na">id=</span><span class="s">"test"</span><span class="nt">&gt;</span>Test<span class="nt">&lt;/ins&gt;</span>
</pre></div>
<p><b><u> <span id="CntrListDel" title="#CntrListDel">Видалення</span> елементу</u></b><br />
Дозволено за "del" у атрибуті "s_com" відповідного інформаційного поля.<br />
ЗАП: <i>&lt;del path="<b>{path}</b>" pos="<b>{pos}</b>" id="<b>{itId}</b>"&gt;<b>{itName}</b>&lt;/del&gt;</i>
</p>
<ul><li> <i>itName</i> — ім'я елементу видалення;</li>
<li> <i>itId</i> — ідентифікатор елементу видалення для переліків із ідентифікаторами;</li>
<li> <i>pos</i> — абсолютний номер позиції обраного-видаленого елементу.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre>  <span class="nt">&lt;del</span> <span class="na">path=</span><span class="s">"/sub_BD/mod_SQLite/%2fdb%2fodb"</span> <span class="na">id=</span><span class="s">"test"</span> <span class="nt">/&gt;</span>
</pre></div>
<p><b><u> <span id="CntrListEdit" title="#CntrListEdit">Редагування</span> елементу</u></b><br />
Дозволено за "edit" у атрибуті "s_com" відповідного інформаційного поля.<br />
ЗАП: <i>&lt;edit path="<b>{path}</b>" pos="<b>{pos}</b>" p_id="<b>{posId}</b>" id="<b>{itId}</b>"&gt;<b>{itName}</b>&lt;/edit&gt;</i>
</p>
<ul><li> <i>itName</i> — нова назва редагованого елементу;</li>
<li> <i>itId</i> — новий ідентифікатор редагованого елементу для переліків із ідентифікаторами;</li>
<li> <i>pos</i> — абсолютний номер позиції обраного-редагованого елементу;</li>
<li> <i>posId</i> — ім'я, або ідентифікатор для переліків із ідентифікаторами, редагованого елементу.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre>  <span class="nt">&lt;edit</span> <span class="na">path=</span><span class="s">"/sub_BD/mod_SQLite/%2fdb%2fodb"</span> <span class="na">p_id=</span><span class="s">"test"</span> <span class="na">id=</span><span class="s">"test1"</span><span class="nt">&gt;</span>Тест 1<span class="nt">&lt;/edit&gt;</span>
</pre></div>
<p><b><u> <span id="CntrListMove" title="#CntrListMove">Переміщення</span> елементу</u></b><br />
Дозволено за "move" у атрибуті "s_com" відповідного інформаційного поля.<br />
ЗАП: <i>&lt;move path="<b>{path}</b>" pos="<b>{pos}</b>" to="<b>{toPos}</b>" /&gt;</i>
</p>
<ul><li> <i>pos</i> — абсолютний номер позиції переміщуваного елементу;</li>
<li> <i>toPos</i> — абсолютний номер позиції переміщення.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre>  <span class="nt">&lt;move</span> <span class="na">path=</span><span class="s">"/sub_BD/mod_SQLite/%2fdb%2fodb"</span> <span class="na">pos=</span><span class="s">"5"</span> <span class="na">to=</span><span class="s">"4"</span> <span class="nt">/&gt;</span>
</pre></div>
<h4><span class="mw-headline" id=".D0.9F.D0.BE.D0.BB.D0.B5_.D1.82.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D1.96_.E2.80.94_.22table.22"><span class="mw-headline-number">14.3.3</span> Поле таблиці — "table"</span></h4>
<p><b><u> <span id="CntrTableGet" title="#CntrTableGet">Отримання</span> даних</u></b><br />
ЗАП: <i>&lt;get path="<b>{path}</b>" /&gt;</i><br />
ВІДП: <i>&lt;get path="{path}" rez="<b>0</b>"&gt;<b>{elements lists}</b>&lt;/get&gt;</i>
</p>
<ul><li> <i>elements lists</i> — елементи у тегах "el" запаковані в тегах "list" на стовпчик; кожен тег стовпчику "list" має ідентифікатор та власні дозволи, тож деякі стовпчики можуть бути відсутні для деяких користувачів.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/sub_DAQ/tmplb_base/tmpl_digitBlockUnif/%2fio%2fio"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"root"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;list</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">id=</span><span class="s">"0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;el&gt;</span>com<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>close<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>stop<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>st_open<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>st_close<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>tCmd<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>last_cmd<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>w_tm<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;/list&gt;</span>
  <span class="nt">&lt;list</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">id=</span><span class="s">"1"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;el&gt;</span>Команда "Відкрити"<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>Команда "Закрити"<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>Команда "Стоп"<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>Стан "Відкрито"<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>Стан "Закрито"<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>Час утримання команди, секунди<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>Остання команда<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>Лічильник обробки команди<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;/list&gt;</span>
  <span class="nt">&lt;list</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">id=</span><span class="s">"2"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;el&gt;</span>3<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>3<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>3<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>3<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>3<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>1<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>1<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>2<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;/list&gt;</span>
  <span class="nt">&lt;list</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">id=</span><span class="s">"3"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;el&gt;</span>1<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>1<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>1<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>0<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>0<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>0<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>1<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>1<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;/list&gt;</span>
  <span class="nt">&lt;list</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">id=</span><span class="s">"4"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;el&gt;</span>32<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>32<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>32<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>16<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>16<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>0<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>0<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;/list&gt;</span>
  <span class="nt">&lt;list</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">id=</span><span class="s">"5"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;el&gt;</span>128<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>128<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>128<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>128<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>128<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>64<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>0<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;/list&gt;</span>
  <span class="nt">&lt;list</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">id=</span><span class="s">"6"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;el&gt;</span>Кран|com<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>Кран|close<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>Кран|stop<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>Кран|st_open<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>Кран|st_close<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>5<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>0<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;/list&gt;</span>
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<p><b><u> <span id="CntrTableSet" title="#CntrTableSet">Встановлення</span> значення клітинки визначеного рядка та стовпчика</u></b><br />
Дозволено за прав SEC_WR.<br />
ЗАП: <i>&lt;set path="<b>{path}</b>" row="<b>{row}</b>" key_<b>{keyId}</b>="<b>{keyVal}</b>" col="<b>{colId}</b>"&gt;<b>{value}</b>&lt;/set&gt;</i><br />
</p>
<ul><li> <i>row</i> — абсолютний номер позиції рядка операції у неключовому режимі;</li>
<li> <i>keyId</i> — ідентифікатор ключа, переліченого в атрибуті "key", відповідного інформаційного поля у ключовому режимі;</li>
<li> <i>keyVal</i> — значення ключа "keyId" для якого відбувається операція;</li>
<li> <i>colId</i> — ідентифікатор стовпчика операції;</li>
<li> <i>value</i> — значення встановлення у формі рядка.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;set</span> <span class="na">path=</span><span class="s">"/sub_DAQ/tmplb_base/tmpl_digitBlockUnif/%2fio%2fio"</span> <span class="na">row=</span><span class="s">"3"</span> <span class="na">col=</span><span class="s">"1"</span><span class="nt">&gt;</span>Стан "Відкрито" 1<span class="nt">&lt;/set&gt;</span>
</pre></div>
<p><b><u> <span id="CntrTableAdd" title="#CntrTableAdd">Додання</span> рядка</u></b><br />
Дозволено за "add" у атрибуті "s_com" відповідного інформаційного поля.<br />
ЗАП: <i>&lt;add path="<b>{path}</b>" /&gt;</i><br />
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;add</span> <span class="na">path=</span><span class="s">"/sub_DAQ/tmplb_base/tmpl_digitBlockUnif/%2fio%2fio"</span> <span class="nt">/&gt;</span>
</pre></div>
<p><b><u> <span id="CntrTableIns" title="#CntrTableIns">Вставка</span> рядка</u></b><br />
Дозволено за "ins" у атрибуті "s_com" відповідного інформаційного поля.<br />
ЗАП: <i>&lt;ins path="<b>{path}</b>" row="<b>{row}</b>" /&gt;</i>
</p>
<ul><li> <i>row</i> — абсолютний номер позиції нового вставленого рядка.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;ins</span> <span class="na">path=</span><span class="s">"/sub_DAQ/tmplb_base/tmpl_digitBlockUnif/%2fio%2fio"</span> <span class="na">row=</span><span class="s">"3"</span> <span class="nt">/&gt;</span>
</pre></div>
<p><b><u> <span id="CntrTableDel" title="#CntrTableDel">Видалення</span> рядка</u></b><br />
Дозволено за "del" у атрибуті "s_com" відповідного інформаційного поля.<br />
ЗАП: <i>&lt;del path="<b>{path}</b>" row="<b>{row}</b>" key_<b>{keyId}</b>="<b>{keyVal}</b>" /&gt;</i>
</p>
<ul><li> <i>row</i> — абсолютний номер позиції рядка видалення у неключовому режимі;</li>
<li> <i>keyId</i> — ідентифікатор ключа, переліченого в атрибуті "key", відповідного інформаційного поля у ключовому режимі;</li>
<li> <i>keyVal</i> — значення ключа "keyId" для якого відбувається операція.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;del</span> <span class="na">path=</span><span class="s">"/sub_DAQ/tmplb_base/tmpl_digitBlockUnif/%2fio%2fio"</span> <span class="na">row=</span><span class="s">"3"</span> <span class="nt">/&gt;</span>
</pre></div>
<p><b><u> <span id="CntrTableMove" title="#CntrTableMove">Переміщення</span> рядка</u></b><br />
Дозволено за "move" у атрибуті "s_com" відповідного інформаційного поля.<br />
ЗАП: <i>&lt;move path="<b>{path}</b>" row="<b>{row}</b>" to="<b>{toRow}</b>" /&gt;</i>
</p>
<ul><li> <i>row</i> — абсолютний номер позиції переміщуваного рядка;</li>
<li> <i>toPos</i> — абсолютний номер позиції переміщення.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;move</span> <span class="na">path=</span><span class="s">"/sub_DAQ/tmplb_base/tmpl_digitBlockUnif/%2fio%2fio"</span> <span class="na">row=</span><span class="s">"12"</span> <span class="na">to=</span><span class="s">"3"</span> <span class="nt">/&gt;</span>
</pre></div>
<p><b><u> <span id="CntrTableUser" title="#CntrTableUser">Користувацька</span> команда до рядка</u></b><br />
Дозволено за "{user}" у атрибуті "s_com" відповідного інформаційного поля.<br />
ЗАП: <i>&lt;<b>{user}</b> path="<b>{path}</b>" row="<b>{row}</b>" key_<b>{keyId}</b>="<b>{keyVal}</b>" /&gt;</i>
</p>
<ul><li> <i>user</i> — назва користувацької команди відповідно до вказаної у атрибуті "s_com";</li>
<li> <i>row</i> — абсолютний номер позиції рядка операції у неключовому режимі;</li>
<li> <i>keyId</i> — ідентифікатор ключа, переліченого в атрибуті "key", відповідного інформаційного поля у ключовому режимі;</li>
<li> <i>keyVal</i> — значення ключа "keyId" для якого відбувається операція.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;remTrs</span> <span class="na">path=</span><span class="s">"/%2ftr%2fmess"</span> <span class="na">key_base=</span><span class="s">"BaseMess"</span> <span class="nt">/&gt;</span>
</pre></div>
<h4><span class="mw-headline" id=".D0.9F.D0.BE.D0.BB.D0.B5_.D0.B7.D0.BE.D0.B1.D1.80.D0.B0.D0.B6.D0.B5.D0.BD.D0.BD.D1.8F_.E2.80.94_.22img.22"><span class="mw-headline-number">14.3.4</span> Поле зображення — "img"</span></h4>
<p><b><u> <span id="CntrImgGet" title="#CntrImgGet">Отримання</span> даних</u></b><br />
ЗАП: <i>&lt;get path="<b>{path}</b>" /&gt;</i><br />
ВІДП: <i>&lt;get path="{path}" rez="<b>0</b>" tp="<b>{dataType}</b>"&gt;<b>{Base64 data}</b>&lt;/get&gt;</i>
</p>
<ul><li> <i>dataType</i> — тип даних;</li>
<li> <i>Base64 data</i> — бінарні дані кодовані Base64.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/sub_DAQ/%2fico"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">tp=</span><span class="s">"png"</span> <span class="na">user=</span><span class="s">"root"</span><span class="nt">&gt;</span>iVBORw0KGgoAAAANSUhEUgAAA...AABJRU5ErkJggg==<span class="nt">&lt;/get&gt;</span>
</pre></div>
<p><b><u> <span id="CntrImgSet" title="#CntrImgSet">Встановлення</span> даних</u></b><br />
Дозволено за прав SEC_WR.<br />
ЗАП: <i>&lt;set path="<b>{path}</b>"&gt;<b>{Base64 data}</b>&lt;/set&gt;</i>
</p>
<ul><li> <i>Base64 data</i> — бінарні дані кодовані Base64.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;set</span> <span class="na">path=</span><span class="s">"/sub_DAQ/%2fico"</span><span class="nt">&gt;</span>iVBORw0KGgoAAAANSUhEUgAAA...AABJRU5ErkJggg==<span class="nt">&lt;/set&gt;</span>
</pre></div>
<h4><span class="mw-headline" id=".D0.9F.D0.BE.D0.BB.D0.B5_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D0.B8_.E2.80.94_.22comm.22"><span class="mw-headline-number">14.3.5</span> Поле команди — "comm"</span></h4>
<p><b><u> <span id="CntrCommGet" title="#CntrCommGet">Отримання</span> значення посилання</u></b><br />
Актуальне лише для посилань — атрибут "tp" це "lnk" відповідного інформаційного поля.<br />
ЗАП: <i>&lt;get path="<b>{path}</b>" /&gt;</i><br />
ВІДП: <i>&lt;get path="{path}" rez="<b>0</b>"&gt;<b>{lnkVal}</b>&lt;/get&gt;</i>
</p>
<ul><li> <i>lnkVal</i> — актуальне значення посилання, адреса до іншого вузла у дереві керування.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/sub_DAQ/mod_DAQGate/cntr_test/%2fcntr%2fcfg%2fhost_lnk"</span> <span class="na">lang=</span><span class="s">"uk"</span> <span class="na">user=</span><span class="s">"roman"</span> <span class="na">rez=</span><span class="s">"0"</span><span class="nt">&gt;</span>/Transport<span class="nt">&lt;/get&gt;</span>
</pre></div>
<p><b><u> <span id="CntrCommSet" title="#CntrCommSet">Виклик</span> команди</u></b><br />
Дозволено за прав SEC_WR.<br />
ЗАП: <i>&lt;set path="<b>{path}</b>"&gt;<b>{fields}</b>&lt;/set&gt;</i><br />
</p>
<ul><li> <i>fields</i> — поля-аргументи команди у тегах "fld".</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;set</span> <span class="na">path=</span><span class="s">"/sub_Archive/mod_FSArch/val_1s/%2farch%2fexp"</span> <span class="na">lang=</span><span class="s">"uk"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"arch"</span><span class="nt">&gt;</span>CPULoad_load<span class="nt">&lt;/fld&gt;</span>
  <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"beg"</span><span class="nt">&gt;</span>1673942400<span class="nt">&lt;/fld&gt;</span>
  <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"end"</span><span class="nt">&gt;</span>1673944800<span class="nt">&lt;/fld&gt;</span>
  <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"tfl"</span><span class="nt">&gt;</span>ascii<span class="nt">&lt;/fld&gt;</span>
  <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"file"</span><span class="nt">&gt;</span>testComm<span class="nt">&lt;/fld&gt;</span>
<span class="nt">&lt;/set&gt;</span>
</pre></div>
<h3><span class="mw-headline" id=".D0.A1.D0.B5.D1.80.D0.B2.D1.96.D1.81.D0.BD.D1.96_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D0.B8-.D1.84.D1.83.D0.BD.D0.BA.D1.86.D1.96.D1.97"><span class="mw-headline-number">14.4</span> <span id="ServFunc" title="#ServFunc">Сервісні команди-функції</span></span></h3>
<p>Сервісні функції — це інтерфейс доступу до OpenSCADA із зовнішніх систем посередництвом Інтерфейсу Управління. Цей механізм покладено в основу усього обміну всередині OpenSCADA, реалізованого шляхом слабких зв'язків та <a href="Modules/SelfSystem.html" title="Special:MyLanguage/Modules/SelfSystem">власного протоколу обміну OpenSCADA</a>. Основною його перевагою є пріоритетна обробка та можливість використання нестандартного пакування даних. Для доступу до звичайних даних можна використовувати стандартні команди Інтерфейсу Управління.
</p><p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../en/files/At.png" width="22" /></a> Не всі сервісні функції-запити тут описано, тож для ознайомлення з усіма наявними або деталізації, ви маєте поглянути в функцію <i>cntrCmdProc()</i> відповідних частин OpenSCADA у <a class="external text" href="http://oscada.org/svn/trunk/OpenSCADA/" rel="nofollow noreferrer noopener" target="_blank">вихідних кодах проєкту</a>.
</p>
<h4><span class="mw-headline" id=".D0.9A.D0.BE.D1.80.D0.B5.D0.BD.D0.B5.D0.B2.D0.B8.D0.B9_.D0.92.D1.83.D0.B7.D0.BE.D0.BB_.D1.82.D0.B0_.D0.B7.D0.B0.D0.B3.D0.B0.D0.BB.D1.8C.D0.BD.D0.B5_.D0.B4.D0.BB.D1.8F_.D0.B2.D1.81.D1.96.D1.85_.D0.B2.D1.83.D0.B7.D0.BB.D1.96.D0.B2"><span class="mw-headline-number">14.4.1</span> Кореневий Вузол та загальне для всіх вузлів</span></h4>
<p><b><u>Отримання загального статусу резервування станції</u></b><br />
ЗАП: <i>&lt;st path="/%2fserv%2fredundant" /&gt;</i><br />
ВІДП: <i>&lt;st path="/%2fserv%2fredundant" rez="<b>0</b>" StLevel="<b>{lev}</b>" /&gt;</i>
</p>
<ul><li> <i>lev</i> — рівень резервування станції.</li></ul>
<p><b><u>Сканування конфігураційного файлу</u></b><br />
ЗАП[<b>root-root</b>]: <i>&lt;scan path="/%2fgen%2fconfig" /&gt;</i>
</p><p><b><u>Запити вузла-об'єкту</u></b><br />
</p>
<dl><dd><b><u>Отримання прапорця модифікації вузла</u></b><br /></dd>
<dd>ЗАП: <i>&lt;modify path="/<b>{nPath}</b>/%2fobj" /&gt;</i>
<ul><li> <i>nPath</i> — шлях до потрібного вузла.</li></ul></dd>
<dd>ВІДП: <i>&lt;modify path="/{nPath}/%2fobj" rez="<b>0</b>"&gt;<b>{flag}</b>&lt;/modify&gt;</i>
<ul><li> <i>flag</i> — статус-прапорець модифікації вузла, для деталей дивіться перелічення <a href="#TCntrNode">TCntrNode::ModifFlag</a>.</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;modify</span> <span class="na">path=</span><span class="s">"/Security/user/%2fobj"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/modify&gt;</span>
</pre></div>
<dl><dd><b><u>Завантаження вузла</u></b><br /></dd>
<dd>ЗАП: <i>&lt;load path="/<b>{nPath}</b>/%2fobj" force="<b>{force}</b>"&gt;<b>{CfgCtx}</b>&lt;/load&gt;</i>
<ul><li> <i>nPath</i> — шлях до потрібного вузла;</li>
<li> <i>force</i> — прапорець примусового завантаження [0|1], вузол може бути не позначеним модифікованим;</li>
<li> <i>CfgCtx</i> — <a href="Program_manual.html#CfgFilePrm" title="Special:MyLanguage/Documents/Program manual">конфігураційний контекст</a> у тегах "fld" для завантаження із нього, використовується для віддаленого копіювання конфігурації вузла.</li></ul></dd></dl>
<dl><dd><b><u>Збереження вузла</u></b><br /></dd>
<dd>ЗАП: <i>&lt;save path="/<b>{nPath}</b>/%2fobj" force="<b>{force}</b>" ctx="<b>{toCfgCtx}</b>" /&gt;</i>
<ul><li> <i>nPath</i> — шлях до потрібного вузла;</li>
<li> <i>force</i> — прапорець примусового збереження [0|1], вузол може бути не позначеним модифікованим;</li>
<li> <i>toCfgCtx</i> — ознака [0|1] збереження конфігурації вузла до <a href="Program_manual.html#CfgFilePrm" title="Special:MyLanguage/Documents/Program manual">конфігураційного контексту</a>, використовується для віддаленого копіювання конфігурації вузла.</li></ul></dd>
<dd>ВІДП: <i>&lt;save path="/{nPath}/%2fobj" force="{force}" ctx="{toCfgCtx}" rez="<b>0</b>"&gt;<b>{CfgCtx}</b>&lt;/save&gt;</i>
<ul><li> <i>CfgCtx</i> — <a href="Program_manual.html#CfgFilePrm" title="Special:MyLanguage/Documents/Program manual">конфігураційний контекст</a> у тегах "fld" після збереження.</li></ul></dd></dl>
<dl><dd><b><u>Локальне копіювання визначеного вузла</u></b><br /></dd>
<dd>ЗАП: <i>&lt;copy path="/<b>{nPath}</b>/%2fobj" src="<b>{source}</b>" dst="<b>{destination}</b>" /&gt;</i>
<ul><li> <i>nPath</i> — шлях до потрібного вузла, у цій операції може бути будь яким вузлом;</li>
<li> <i>source</i> — шлях до вузла джерела;</li>
<li> <i>destination</i> — шлях до вузла призначення.</li></ul></dd></dl>
<dl><dd><b><u>Отримання дочірніх вузлів визначеного вузла, оптимізовано для мереж</u></b><br /></dd>
<dd>ЗАП: <i>&lt;chlds path="/<b>{nPath}</b>/%2fobj" grp="<b>{group}</b>" icoCheck="<b>{icoCheck}</b>" /&gt;</i>
<ul><li> <i>nPath</i> — шлях до потрібного вузла;</li>
<li> <i>group</i> — група-префікс дочірніх вузлів;</li>
<li> <i>icoCheck</i> — ознака [0|1] лише перевірки наявності піктограми встановленням атрибуту "icoSize".</li></ul></dd>
<dd>ВІДП: <i>&lt;chlds path="/{nPath}/%2fobj" grp="{group}" icoCheck="{icoCheck}" rez="<b>0</b>"&gt;<b>{nodes}</b>&lt;/chlds&gt;</i>
<ul><li> <i>nodes</i> — вузли у тегах "el", де ім'я у тексті тегу та ідентифікатор у атрибуті "id" для вузлів із ідентифікаторами; теги "el" містять додаткові теги і атрибути:
<ul><li> <i><b>ico</b></i> — тег із даними іконки при невстановленні "icoCheck";</li>
<li> <i>icoSize</i> — розмір піктограми вузла за її наявності та встановленні "icoCheck";</li>
<li> <i><b>grp</b></i> — теги груп дочірніх вузлів із додатковими атрибутами:
<ul><li> <i>chPresent</i> — ознака наявності дочірніх вузлів для групи.</li></ul></li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;chlds</span> <span class="na">grp=</span><span class="s">"mod_"</span> <span class="na">icoCheck=</span><span class="s">"1"</span> <span class="na">path=</span><span class="s">"/Transport/%2fobj"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">icoSize=</span><span class="s">"10348"</span> <span class="na">id=</span><span class="s">"Sockets"</span><span class="nt">&gt;</span>Сокети
    <span class="nt">&lt;grp</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">chPresent=</span><span class="s">"1"</span> <span class="na">dscr=</span><span class="s">"Вхідний транспорт"</span> <span class="na">id=</span><span class="s">"in_"</span> <span class="na">idSz=</span><span class="s">"20"</span> <span class="na">idm=</span><span class="s">"100"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;grp</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">chPresent=</span><span class="s">"1"</span> <span class="na">dscr=</span><span class="s">"Вихідний транспорт"</span> <span class="na">id=</span><span class="s">"out_"</span> <span class="na">idSz=</span><span class="s">"20"</span> <span class="na">idm=</span><span class="s">"100"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">icoSize=</span><span class="s">"7148"</span> <span class="na">id=</span><span class="s">"Serial"</span><span class="nt">&gt;</span>Послідовні інтерфейси
    <span class="nt">&lt;grp</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">chPresent=</span><span class="s">"1"</span> <span class="na">dscr=</span><span class="s">"Вхідний транспорт"</span> <span class="na">id=</span><span class="s">"in_"</span> <span class="na">idSz=</span><span class="s">"20"</span> <span class="na">idm=</span><span class="s">"100"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;grp</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">chPresent=</span><span class="s">"1"</span> <span class="na">dscr=</span><span class="s">"Вихідний транспорт"</span> <span class="na">id=</span><span class="s">"out_"</span> <span class="na">idSz=</span><span class="s">"20"</span> <span class="na">idm=</span><span class="s">"100"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">icoSize=</span><span class="s">"8944"</span> <span class="na">id=</span><span class="s">"SSL"</span><span class="nt">&gt;</span>SSL
    <span class="nt">&lt;grp</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">chPresent=</span><span class="s">"1"</span> <span class="na">dscr=</span><span class="s">"Вхідний транспорт"</span> <span class="na">id=</span><span class="s">"in_"</span> <span class="na">idSz=</span><span class="s">"20"</span> <span class="na">idm=</span><span class="s">"100"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;grp</span> <span class="na">acs=</span><span class="s">"54"</span> <span class="na">chPresent=</span><span class="s">"1"</span> <span class="na">dscr=</span><span class="s">"Вихідний транспорт"</span> <span class="na">id=</span><span class="s">"out_"</span> <span class="na">idSz=</span><span class="s">"20"</span> <span class="na">idm=</span><span class="s">"100"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/el&gt;</span>
<span class="nt">&lt;/chlds&gt;</span>
</pre></div>
<p><b><u>Загальні переліки</u></b><br />
</p>
<dl><dd><b><u>Отримання переліку БД або таблиць</u></b><br /></dd>
<dd>ЗАП: <i>&lt;get path="/<b>{nPath}</b>/%2fdb%2flist[:onlydb]" /&gt;</i>
<dl><dd> <i>&lt;get path="/<b>{nPath}</b>/%2fdb%2ftblList[:onlydb]" /&gt;</i></dd></dl>
<ul><li> <i>nPath</i> — шлях до потрібного вузла, у цій операції може бути будь яким вузлом;</li>
<li> "onlydb" — доповнення адреси для вказання на перелічення лише баз даних без групових маркувань.</li></ul></dd>
<dd>ВІДП: <i>&lt;get path="/{nPath}/%2fdb%2flist[:onlydb]" rez="<b>0</b>"&gt;<b>{list}</b>&lt;/get&gt;</i>
<dl><dd> <i>&lt;get path="/{nPath}/%2fdb%2ftblList[:onlydb]" rez="<b>0</b>"&gt;<b>{list}</b>&lt;/get&gt;</i></dd></dl>
<ul><li> <i>list</i> — елементи у тегах "el".</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/%2fdb%2flist:onlydb"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el&gt;</span>SQLite.vcaTest<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>SQLite.vcaBase<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>SQLite.vcaAGLKS<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>MySQL.vcaTest<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>MySQL.vcaBase<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>PostgreSQL.testRelease<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>PostgreSQL.test<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>FireBird.testRelease<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>FireBird.testFB<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>FireBird.arch<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>DBF.testRelease<span class="nt">&lt;/el&gt;</span>
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<dl><dd><b><u>Отримання переліку підтримуваних внутрішніх мов програмування</u></b><br /></dd>
<dd>ЗАП: <i>&lt;get path="/<b>{nPath}</b>/%2fplang%2flist" /&gt;</i>
<ul><li> <i>nPath</i> — шлях до потрібного вузла, у цій операції може бути будь яким вузлом.</li></ul></dd>
<dd>ВІДП: <i>&lt;get path="/{nPath}/%2fplang%2flist" rez="<b>0</b>"&gt;<b>{list}</b>&lt;/get&gt;</i>
<ul><li> <i>list</i> — елементи у тегах "el".</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/%2fplang%2flist"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el&gt;</span>JavaLikeCalc.JavaScript<span class="nt">&lt;/el&gt;</span>
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<h4><span class="mw-headline" id=".D0.9F.D1.96.D0.B4.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.B0_.22.D0.91.D0.B0.D0.B7.D0.B8_.D0.94.D0.B0.D0.BD.D0.B8.D1.85_.28DB.29.22"><span class="mw-headline-number">14.4.2</span> Підсистема "Бази Даних (DB)"</span></h4>
<p><b><u>Надсилання SQL запиту до БД</u></b><br />
ЗАП[<b>root-BD</b>]: <i>&lt;call path="/BD/<b>{MOD}</b>/<b>{DB}</b>/%2fserv%2fSQL" withRez="<b>{withResult}</b>" intoTrans="<b>{intoTrans}</b>"&gt;<b>{request}</b>&lt;/call&gt;</i>
</p>
<ul><li> <i>MOD</i>, <i>DB</i> — модуль БД та сама БД;</li>
<li> <i>withResult</i> — ознака повернення результату SQL запиту [0|1];</li>
<li> <i>intoTrans</i> — чи викликати запит у транзакції — TRUE(1), поза — FALSE(0) або байдуже — EVAL(2);</li>
<li> <i>request</i> — текст SQL запиту.</li></ul>
<p>ВІДП: <i>&lt;call path="/BD/{MOD}/{DB}/%2fserv%2fSQL" withRez="{withResult}" intoTrans="{intoTrans}" rez="<b>0</b>"&gt;<b>{result}</b>&lt;/call&gt;</i>
</p>
<ul><li> <i>result</i> — таблиця результату у тегах "el", упакованих в тегах "list" на стовпчик, та із заголовком стовпчика у першому елементі.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;call</span> <span class="na">path=</span><span class="s">"/BD/SQLite/GenDB/%2fserv%2fSQL"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span> <span class="na">withRez=</span><span class="s">"1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;list&gt;</span>
    <span class="nt">&lt;el&gt;</span>user<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>root<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>root<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>roman<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>roman<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>roman<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;/list&gt;</span>
  <span class="nt">&lt;list&gt;</span>
    <span class="nt">&lt;el&gt;</span>id<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>/sub_Protocol/mod_HTTP/AuthTime<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>/sub_Protocol/mod_HTTP/AutoLogin<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>/sub_UI/mod_QTCfg/st<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>/sub_UI/mod_VCAEngine/wdgAttr<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>/sub_BD/mod_SQLite/ReqTm<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;/list&gt;</span>
  <span class="nt">&lt;list&gt;</span>
    <span class="nt">&lt;el&gt;</span>val<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>10<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span><span class="ni">&amp;lt;</span>aLog<span class="ni">&amp;gt;&amp;lt;</span>it addrs="*" user="user" /<span class="ni">&amp;gt;&amp;lt;</span>/aLog<span class="ni">&amp;gt;</span><span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>1272:942:AAAA/wAAAAEAAAACAAABTwAABh8B/////wEAAAABAA==<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>doc<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el&gt;</span>204us<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;/list&gt;</span>
<span class="nt">&lt;/call&gt;</span>
</pre></div>
<p><b><u>Запит <span id="ServFuncDBStruct" title="#ServFuncDBStruct">структури поля</span> визначеної таблиці БД</u></b><br />
ЗАП: <i>&lt;call path="/BD/<b>{MOD}</b>/<b>{DB}</b>/%2fserv%2ffieldStruct" tbl="<b>{table}</b>" /&gt;</i>
</p>
<ul><li> <i>MOD</i>, <i>DB</i> — модуль БД та сама БД;</li>
<li> <i>table</i> — таблиця операції.</li></ul>
<p>ВІДП: <i>&lt;call path="/BD/{MOD}/{DB}/%2fserv%2ffieldStruct" tbl="{table}" rez="<b>0</b>"&gt;<b>{structure}</b>&lt;/call&gt;</i>
</p>
<ul><li> <i>structure</i> — структура таблиці у тегу "fld" із атрибутами репрезентації клітинок за назвою "<b>{ID}</b>_str" та вмістом "<b>{TP}</b>:<b>{FLAG}</b>:<b>{LEN}</b>:<b>{DEF}</b>:<b>{FView}</b>:<b>{FKeyUse}</b>:<b>{FNoTransl}</b>:<b>{FReqKey}</b>:<b>{FExtVal}</b>".</li></ul>
<dl><dd><ul><li> <i>TP</i> — тип клітинки, дивіться об'єкт <a href="#TFld">#TFld</a>;</li>
<li> <i>FLAG</i> — прапорці клітинки, дивіться об'єкт <a href="#TCfg">#TCfg</a>;</li>
<li> <i>LEN</i> — повний розмір клітинки, дивіться <i>lenS()</i> об'єкту <a href="#TFld">#TFld</a>;</li>
<li> <i>DEF</i> — типове значення клітинки, дивіться <i>def()</i> об'єкту <a href="#TFld">#TFld</a>;</li>
<li> <i>FView</i>, <i>FKeyUse</i>, <i>FNoTransl</i>, <i>FReqKey</i>, <i>FExtVal</i> — динамічні прапорці об'єкту <a href="#TCfg">#TCfg</a>: <i>view()</i>, <i>keyUse()</i>, <i>noTransl()</i>, <i>reqKey()</i>, <i>extVal()</i>.</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;call</span> <span class="na">path=</span><span class="s">"/BD/SQLite/GenDB/%2fserv%2ffieldStruct"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">tbl=</span><span class="s">"SYS"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;fld</span> <span class="na">id_str=</span><span class="s">"5:512:16777215.0::1:0:0:0:0"</span> <span class="err">uk#</span><span class="na">val_str=</span><span class="s">"5:0:16777215.0::1:0:0:0:0"</span> <span class="na">user_str=</span><span class="s">"5:512:16777215.0::1:0:0:0:0"</span> <span class="na">val_str=</span><span class="s">"5:0:16777215.0::1:0:0:0:0"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/call&gt;</span>
</pre></div>
<p><b><u>Перебір-сканування полів визначеної таблиці БД</u></b><br />
ЗАП: <i>&lt;call path="/BD/<b>{MOD}</b>/<b>{DB}</b>/%2fserv%2ffieldSeek" tbl="<b>{table}</b>" row="<b>{row}</b>" cacheKey="<b>{cacheKey}</b>"&gt;<b>{field}</b>&lt;/call&gt;</i>
</p>
<ul><li> <i>MOD</i>, <i>DB</i> — модуль БД та сама БД;</li>
<li> <i>table</i> — таблиця операції;</li>
<li> <i>row</i> — рядок перебору-сканування;</li>
<li> <i>cacheKey</i> — унікальний строковий ключ клієнту для створення сеансу предзавантаження даних за першого запиту та використання готових даних у решті;</li>
<li> <i>field</i> — клітинки у атрибутах запитуваного тегу поля "fld" із ключовими значеннями для звуження області запитуваних даних. Тег поля містить атрибути структури "<b>{ID}</b>_str" щонайменш для динамічних прапорців <i>view()</i> і <i>keyUse()</i>, дивіться <a href="#ServFuncDBStruct">запит структури</a> щодо структури атрибуту.</li></ul>
<p>ВІДП: <i>&lt;call path="/BD/{MOD}/{DB}/%2fserv%2ffieldSeek" tbl="{table}" row="{row}" cacheKey="{cacheKey}" rez="<b>0</b>" fRez="<b>{fRez}</b>"&gt;<b>{field}</b>&lt;/call&gt;</i>
</p>
<ul><li> <i>fRez</i> — результат запиту функції із індикацією наявності даних-рядка [0|1];</li>
<li> <i>field</i> — значення клітинок у атрибутах запитуваного тегу поля "fld".</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;call</span> <span class="na">path=</span><span class="s">"/BD/SQLite/GenDB/%2fserv%2ffieldSeek"</span> <span class="na">tbl=</span><span class="s">"SYS"</span> <span class="na">row=</span><span class="s">"5"</span> <span class="na">cacheKey=</span><span class="s">"0x7f17c8fcd5e0"</span> <span class="na">user=</span><span class="s">"roman"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">fRez=</span><span class="s">"1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;fld</span> <span class="na">user=</span><span class="s">"roman"</span> <span class="na">user_str=</span><span class="s">"5:512:16777215.0::1:0:0:0:0"</span> 
       <span class="na">id=</span><span class="s">"/sub_BD/mod_SQLite/ReqTm"</span> <span class="na">id_str=</span><span class="s">"5:512:16777215.0::1:0:0:0:0"</span> 
       <span class="na">val=</span><span class="s">"204us"</span> <span class="na">val_str=</span><span class="s">"5:0:16777215.0::1:0:0:0:0"</span> <span class="err">uk#</span><span class="na">val_str=</span><span class="s">"5:0:16777215.0::1:0:0:0:0"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/call&gt;</span>
</pre></div>
<p><b><u>Отримання поля визначеної таблиці БД</u></b><br />
ЗАП: <i>&lt;call path="/BD/<b>{MOD}</b>/<b>{DB}</b>/%2fserv%2ffieldGet" tbl="<b>{table}</b>"&gt;<b>{field}</b>&lt;/call&gt;</i>
</p>
<ul><li> <i>MOD</i>, <i>DB</i> — модуль БД та сама БД;</li>
<li> <i>table</i> — таблиця операції;</li>
<li> <i>field</i> — клітинки у атрибутах запитуваного тегу поля "fld" із ключовими значеннями. Тег поля містить атрибути структури "<b>{ID}</b>_str" щонайменш для динамічних прапорців <i>view()</i>, дивіться <a href="#ServFuncDBStruct">запит структури</a> щодо структури атрибуту.</li></ul>
<p>ВІДП: <i>&lt;call path="/BD/{MOD}/{DB}/%2fserv%2ffieldGet" tbl="{table}" rez="<b>0</b>"&gt;<b>{field}</b>&lt;/call&gt;</i>
</p>
<ul><li> <i>field</i> — значення клітинок у атрибутах запитуваного тегу поля "fld".</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;call</span> <span class="na">path=</span><span class="s">"/BD/SQLite/GenDB/%2fserv%2ffieldGet"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">tbl=</span><span class="s">"SYS"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;fld</span> <span class="na">id=</span><span class="s">"/sub_BD/mod_SQLite/ReqTm"</span> <span class="na">id_str=</span><span class="s">"5:512:16777215.0::1:0:0:0:0"</span>
       <span class="na">user=</span><span class="s">"roman"</span> <span class="na">user_str=</span><span class="s">"5:512:16777215.0::1:0:0:0:0"</span>
       <span class="na">val=</span><span class="s">"204us"</span> <span class="na">val_str=</span><span class="s">"5:0:16777215.0::1:0:0:0:0"</span> <span class="err">uk#</span><span class="na">val_str=</span><span class="s">"5:0:16777215.0::1:0:0:0:0"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/call&gt;</span>
</pre></div>
<p><b><u>Встановлення поля визначеної таблиці БД</u></b><br />
ЗАП[<b>root-BD</b>]: <i>&lt;call path="/BD/<b>{MOD}</b>/<b>{DB}</b>/%2fserv%2ffieldSet" tbl="<b>{table}</b>"&gt;<b>{field}</b>&lt;/call&gt;</i>
</p>
<ul><li> <i>MOD</i>, <i>DB</i> — модуль БД та сама БД;</li>
<li> <i>table</i> — таблиця операції;</li>
<li> <i>field</i> — клітинки у атрибутах запитуваного тегу поля "fld" зі всіма встановлюваними значеннями. Тег поля містить атрибути структури "<b>{ID}</b>_str" та яка буде застосована до створення нових клітинок або корекції параметрів наявних, дивіться <a href="#ServFuncDBStruct">запит структури</a> щодо структури атрибуту.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;call</span> <span class="na">path=</span><span class="s">"/BD/SQLite/GenDB//%2fserv%2ffieldSet"</span> <span class="na">tbl=</span><span class="s">"SYS"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;fld</span> <span class="na">user_ext=</span><span class="s">"roman"</span> <span class="na">user_str=</span><span class="s">"5:512:16777215.0::0:1:0:0:1"</span>
       <span class="na">id_ext=</span><span class="s">"/sub_BD/mod_SQLite/ReqTm"</span> <span class="na">id_str=</span><span class="s">"5:512:16777215.0::0:1:0:0:1"</span>
       <span class="na">val=</span><span class="s">"205us"</span> <span class="na">val_str=</span><span class="s">"5:0:16777215.0::1:0:0:0:0"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/call&gt;</span>
</pre></div>
<p><b><u>Видалення поля визначеної таблиці БД</u></b><br />
ЗАП[<b>root-BD</b>]: <i>&lt;call path="/BD/<b>{MOD}</b>/<b>{DB}</b>/%2fserv%2ffieldDel" tbl="<b>{table}</b>"&gt;<b>{field}</b>&lt;/call&gt;</i>
</p>
<ul><li> <i>MOD</i>, <i>DB</i> — модуль БД та сама БД;</li>
<li> <i>table</i> — таблиця операції;</li>
<li> <i>field</i> — значення ключових клітинок у атрибутах запитуваного тегу поля "fld". Тег поля містить атрибути структури "<b>{ID}</b>_str" щодо ключів, дивіться <a href="#ServFuncDBStruct">запит структури</a> щодо структури атрибуту.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;call</span> <span class="na">path=</span><span class="s">"/BD/SQLite/GenDB//%2fserv%2ffieldDel"</span> <span class="na">tbl=</span><span class="s">"SYS"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;fld</span> <span class="na">user=</span><span class="s">"roman"</span> <span class="na">user_str=</span><span class="s">"5:512:16777215.0::0:1:0:0:0"</span>
       <span class="na">id=</span><span class="s">"/sub_BD/mod_SQLite/ReqTm"</span> <span class="na">id_str=</span><span class="s">"5:512:16777215.0::0:1:0:0:0"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/call&gt;</span>
</pre></div>
<h4><span class="mw-headline" id=".D0.9F.D1.96.D0.B4.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.B0_.22.D0.97.D0.B1.D1.96.D1.80_.D0.94.D0.B0.D0.BD.D0.B8.D1.85_.28DAQ.29.22"><span class="mw-headline-number">14.4.3</span> Підсистема "Збір Даних (DAQ)"</span></h4>
<p><b><u>Отримання підсистемного статусу резервування станції</u></b><br />
ЗАП: <i>&lt;st path="/DAQ/%2fserv%2fredundant" /&gt;</i><br />
ВІДП: <i>&lt;st path="/DAQ/%2fserv%2fredundant" rez="<b>0</b>" inProc="<b>1</b>" StLevel="<b>{lev}</b>"&gt;<b>{status}</b>&lt;/st&gt;</i>
</p>
<ul><li> <i>lev</i> — рівень резервування станції;</li>
<li> <i>status</i> — актуальний статус резервування об'єктів контролерів Збору Даних у тегах "cntr": <i>&lt;cntr id="<b>{cntrId}</b>" run="<b>{runSt}</b>" /&gt;</i>
<ul><li> <i>cntrId</i> — повний ідентифікатор об'єкту контролеру;</li>
<li> <i>runSt</i> — статус виконання об'єкту контролеру [0|1] на цій станції.</li></ul></li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;st</span> <span class="na">StLevel=</span><span class="s">"10"</span> <span class="na">inProc=</span><span class="s">"1"</span> <span class="na">path=</span><span class="s">"/DAQ/%2fserv%2fredundant"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;cntr</span> <span class="na">id=</span><span class="s">"BlockCalc.CM101"</span> <span class="na">run=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;cntr</span> <span class="na">id=</span><span class="s">"BlockCalc.CM102"</span> <span class="na">run=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;cntr</span> <span class="na">id=</span><span class="s">"BlockCalc.CM102cntr"</span> <span class="na">run=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  ...
  <span class="nt">&lt;cntr</span> <span class="na">id=</span><span class="s">"ModBus.testTCP"</span> <span class="na">run=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;cntr</span> <span class="na">id=</span><span class="s">"OPC_UA.test"</span> <span class="na">run=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;cntr</span> <span class="na">id=</span><span class="s">"System.AutoDA"</span> <span class="na">run=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/st&gt;</span>
</pre></div>
<p><b><u>Отримання переліку параметрів та атрибутів Збору Даних для навігації</u></b><br />
Запит відзеркалює функцію <a href="#TDAQS">TDAQS::ctrListPrmAttr()</a> у мережу.<br />
ЗАП: <i>&lt;list path="/DAQ/%2fserv%2fPrmAttr" base="<b>{base}</b>" toPrm="<b>{forPrm}</b>" sep="<b>{sep}</b>" pref="<b>{pref}</b>" /&gt;</i>
</p>
<ul><li> <i>base</i> — шлях базового параметру у підсистемі Збір Даних на кшталт "BlockCalc.gen.F3";</li>
<li> <i>forPrm</i> — перелічувати лише параметри [0|1];</li>
<li> <i>sep</i> — символ розділювача шляху, порожній для природного шляху із '/';</li>
<li> <i>pref</i> — префікс перед шляхом на кшталт "prm:".</li></ul>
<p>ВІДП: <i>&lt;list path="/DAQ/%2fserv%2fPrmAttr" base="{base}" toPrm="{forPrm}" sep="{sep}" pref="{pref}" rez="<b>0</b>"&gt;<b>{prmAttrs}</b>&lt;/list&gt;</i>
</p>
<ul><li> <i>prmAttrs</i> — параметри і атрибути у тексті тегів "el".</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;list</span> <span class="na">base=</span><span class="s">"BlockCalc.gen.F3"</span> <span class="na">path=</span><span class="s">"/DAQ/%2fserv%2fPrmAttr"</span> <span class="na">pref=</span><span class="s">"prm:"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">sep=</span><span class="s">"."</span> <span class="na">toPrm=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el&gt;</span>prm:<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>prm:BlockCalc<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>prm:BlockCalc.gen<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>prm:BlockCalc.gen.F3<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>=== Attributes ===<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>prm:BlockCalc.gen.F3.SHIFR<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>prm:BlockCalc.gen.F3.NAME<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>prm:BlockCalc.gen.F3.DESCR<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>prm:BlockCalc.gen.F3.err<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el&gt;</span>prm:BlockCalc.gen.F3.var<span class="nt">&lt;/el&gt;</span>
<span class="nt">&lt;/list&gt;</span>
</pre></div>
<p><b><u>Об'єкти контролеру</u></b><br />
</p>
<dl><dd><b><u>Отримання повідомлень пов'язаних із об'єктом контролеру</u></b><br /></dd>
<dd>Це повідомлення, згенеровані джерелами даних та запитані <a href="#TArchiveS">TArchiveS::messGet()</a> із відповідними категоріями джерела даних.<br /></dd>
<dd>ЗАП: <i>&lt;get path="/DAQ/<b>{MOD}</b>/<b>{CNTR}</b>/%2fserv%2fmess" tm="<b>{TmUNIX}</b>" tm_grnd="<b>{TmGrndUNIX}</b>" lev="<b>{level}</b>" /&gt;</i>
<ul><li> <i>MOD</i>, <i>CNTR</i> — модуль Збору Даних та об'єкт контролеру;</li>
<li> <i>TmUNIX</i>, <i>TmGrndUNIX</i> — мітка часу UNIX від 01.01.1970 для кінця та початку повідомлень; за нульового "tm" використовується або поточний час системи або час останнього резервованого повідомлення для резервованих систем;</li>
<li> <i>level</i> — мінімальний рівень запитуваних повідомлень, від 0[X] до 7[X].</li></ul></dd>
<dd>ВІДП: <i>&lt;get path="/DAQ/{MOD}/{CNTR}/%2fserv%2fmess" tm="<b>{TmUNIX}</b>" tm_grnd="{TmGrnUNIX}" lev="{level}" rez="<b>0</b>"&gt;<b>{messages}</b>&lt;/get&gt;</i>
<ul><li> <i>TmUNIX</i> — встановлюється у час останнього резервованого повідомлення або системний - 1, за нуля у запиті;</li>
<li> <i>messages</i> — повідомлення у тегах "el": <i>&lt;el time="<b>{time}</b>" utime="<b>{utime}</b>" cat="<b>{cat}</b>" lev="<b>{lev}</b>"&gt;<b>{mess}</b>&lt;/el&gt;</i>
<ul><li> <i>time</i> — час повідомлення, як мітка часу UNIX від 01.01.1970;</li>
<li> <i>utime</i> — мікросекундна частина часу повідомлення;</li>
<li> <i>cat</i> — категорія повідомлення;</li>
<li> <i>lev</i> — рівень повідомлення;</li>
<li> <i>mess</i> — текст повідомлення.</li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;get</span> <span class="na">lev=</span><span class="s">"1"</span> <span class="na">path=</span><span class="s">"/DAQ/LogicLev/gen/%2fserv%2fmess"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">tm=</span><span class="s">"1674401446"</span> <span class="na">tm_grnd=</span><span class="s">"1674401300"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">cat=</span><span class="s">"alLogicLev:gen.F3"</span> <span class="na">lev=</span><span class="s">"-2"</span> <span class="na">time=</span><span class="s">"1674401357"</span> <span class="na">utime=</span><span class="s">"386070"</span><span class="nt">&gt;</span>
Загальностанційка <span class="ni">&amp;gt;</span> F3: Витрати газу через трубу на Глінськ: Помилка нижньої поперджув. границі
  <span class="nt">&lt;/el&gt;</span>
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<dl><dd><b><u>Встановлення повідомлення пов'язаного із об'єктом контролеру</u></b><br /></dd>
<dd>Генерація-встановлення повідомлення джерела даних <a href="Program_manual.html#ArchMess" title="Special:MyLanguage/Documents/Program manual">трансферного типу</a> із запитом <a href="#TController">TController::messSet()</a>.<br /></dd>
<dd>ЗАП: <i>&lt;set path="/DAQ/<b>{MOD}</b>/<b>{CNTR}</b>/%2fserv%2fmess" lev="<b>{level}</b>" type2Code="<b>{type2Code}</b>" prm="<b>{prm}</b>" cat="<b>{cat}</b>"&gt;<b>{mess}</b>&lt;/set&gt;</i>
<ul><li> <i>MOD</i>, <i>CNTR</i> — модуль Збору Даних та об'єкт контролеру;</li>
<li> <i>level</i> — рівень повідомлення;</li>
<li> <i>type2Code</i> — двосимвольний ІД трансферного повідомлення у категорії;</li>
<li> <i>prm</i> — ідентифікатор параметру джерела, який може бути доповнений відповідним ІД атрибуту у вигляді "{PrmID}.{AttrId}";</li>
<li> <i>cat</i> — доповнення до уніфікованої категорії із інформацією про користувача та подібне;</li>
<li> <i>mess</i> — текст повідомлення із адресою ім'ям перед ним.</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;set</span> <span class="na">path=</span><span class="s">"/DAQ/LogicLev/gen/%2fserv%2fmess"</span> <span class="na">lev=</span><span class="s">"1"</span> <span class="na">type2Code=</span><span class="s">"OP"</span> <span class="na">prm=</span><span class="s">"F3"</span> <span class="na">cat=</span><span class="s">"roman"</span><span class="nt">&gt;</span>Значення змінене : 0 : 1<span class="nt">&lt;/set&gt;</span>
</pre></div>
<p><b><u>Параметри Збору Даних (DAQ)</u></b><br />
</p>
<dl><dd><b><u>Отримання переліку атрибутів параметру Збору Даних (<a href="#TValue">#TValue</a>) із детальною інформацією</u></b><br /></dd>
<dd>ЗАП: <i>&lt;list path="/DAQ/<b>{MOD}</b>/<b>{CNTR}</b>/prm_<b>{PRM}</b>[/prm_<b>{PRM}</b>]/%2fserv%2fattr" /&gt;</i>
<ul><li> <i>MOD</i>, <i>CNTR</i>, <i>PRM</i> — модуль Збору Даних, об'єкт контролеру та параметри.</li></ul></dd>
<dd>ВІДП: <i>&lt;list path="/DAQ/{MOD}/{CNTR}/prm_{PRM}[/prm_{PRM}]/%2fserv%2fattr" rez="<b>0</b>"&gt;<b>{attributes}</b>&lt;/list&gt;</i>
<ul><li> <i>attributes</i> — атрибути у тегах "el" із детальною інформацією: <i>&lt;el id="<b>{id}</b>" nm="<b>{name}</b>" tp="<b>{type}</b>" flg="<b>{flags}</b>" vals="<b>{values}</b>" names="<b>{names}</b>" /&gt;</i>
<ul><li> <i>id</i> — ідентифікатор атрибуту;</li>
<li> <i>name</i> — назва атрибуту;</li>
<li> <i>type</i> — тип атрибуту, дивіться типи в об'єкті <a href="#TFld">#TFld</a>;</li>
<li> <i>flags</i> — прапорці атрибуту, дивіться прапорці в об'єкті <a href="#TVal">#TVal</a>;</li>
<li> <i>values</i> — значення атрибуту для вибірних типів;</li>
<li> <i>names</i> — назви значень для вибірних типів.</li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;list</span> <span class="na">path=</span><span class="s">"/DAQ/LogicLev/gen/prm_F3/%2fserv%2fattr"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"516"</span> <span class="na">id=</span><span class="s">"SHIFR"</span> <span class="na">nm=</span><span class="s">"Ідентифікатор"</span> <span class="na">tp=</span><span class="s">"5"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"16"</span> <span class="na">id=</span><span class="s">"NAME"</span> <span class="na">nm=</span><span class="s">"Ім&amp;#039;я"</span> <span class="na">tp=</span><span class="s">"5"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"24"</span> <span class="na">id=</span><span class="s">"DESCR"</span> <span class="na">nm=</span><span class="s">"Опис"</span> <span class="na">tp=</span><span class="s">"5"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"260"</span> <span class="na">id=</span><span class="s">"err"</span> <span class="na">nm=</span><span class="s">"Помилка"</span> <span class="na">tp=</span><span class="s">"5"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"772"</span> <span class="na">id=</span><span class="s">"var"</span> <span class="na">nm=</span><span class="s">"Змінна"</span> <span class="na">tp=</span><span class="s">"4"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"784"</span> <span class="na">id=</span><span class="s">"ed"</span> <span class="na">nm=</span><span class="s">"Одиниця виміру"</span> <span class="na">tp=</span><span class="s">"5"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"768"</span> <span class="na">id=</span><span class="s">"min"</span> <span class="na">nm=</span><span class="s">"Шкала: мінімум"</span> <span class="na">tp=</span><span class="s">"4"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"768"</span> <span class="na">id=</span><span class="s">"max"</span> <span class="na">nm=</span><span class="s">"Шкала: максимум"</span> <span class="na">tp=</span><span class="s">"4"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"768"</span> <span class="na">id=</span><span class="s">"scSqr"</span> <span class="na">nm=</span><span class="s">"Шкала: квадратична"</span> <span class="na">tp=</span><span class="s">"0"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"769"</span> <span class="na">id=</span><span class="s">"subMode"</span> <span class="na">names=</span><span class="s">"немає;останнє;підстановка"</span> <span class="na">nm=</span><span class="s">"Заміна: режим"</span> <span class="na">tp=</span><span class="s">"1"</span> <span class="na">vals=</span><span class="s">"0;1;2"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"768"</span> <span class="na">id=</span><span class="s">"subVar"</span> <span class="na">nm=</span><span class="s">"Заміна: змінна"</span> <span class="na">tp=</span><span class="s">"4"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"768"</span> <span class="na">id=</span><span class="s">"alSup"</span> <span class="na">nm=</span><span class="s">"Придушення порушень"</span> <span class="na">tp=</span><span class="s">"0"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"768"</span> <span class="na">id=</span><span class="s">"alDelay"</span> <span class="na">nm=</span><span class="s">"Затримка порушень, секунди"</span> <span class="na">tp=</span><span class="s">"4"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"768"</span> <span class="na">id=</span><span class="s">"alNormForceStart"</span> <span class="na">nm=</span><span class="s">"Примусове порушення НОРМА при запуску"</span> <span class="na">tp=</span><span class="s">"0"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"768"</span> <span class="na">id=</span><span class="s">"aMin"</span> <span class="na">nm=</span><span class="s">"Границя нижня аварійна"</span> <span class="na">tp=</span><span class="s">"4"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"768"</span> <span class="na">id=</span><span class="s">"aMax"</span> <span class="na">nm=</span><span class="s">"Границя верхня аварійна"</span> <span class="na">tp=</span><span class="s">"4"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"768"</span> <span class="na">id=</span><span class="s">"wMin"</span> <span class="na">nm=</span><span class="s">"Границя нижня попереджув."</span> <span class="na">tp=</span><span class="s">"4"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"768"</span> <span class="na">id=</span><span class="s">"wMax"</span> <span class="na">nm=</span><span class="s">"Границя верхня попереджув."</span> <span class="na">tp=</span><span class="s">"4"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"768"</span> <span class="na">id=</span><span class="s">"HystBnd"</span> <span class="na">nm=</span><span class="s">"Гистерезис порушення границь"</span> <span class="na">tp=</span><span class="s">"4"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"768"</span> <span class="na">id=</span><span class="s">"speed"</span> <span class="na">nm=</span><span class="s">"Швидкість зміни, %/цикл"</span> <span class="na">tp=</span><span class="s">"4"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"768"</span> <span class="na">id=</span><span class="s">"prec"</span> <span class="na">nm=</span><span class="s">"Точність, знаків"</span> <span class="na">tp=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"768"</span> <span class="na">id=</span><span class="s">"log"</span> <span class="na">nm=</span><span class="s">"Логарифмічна шкала"</span> <span class="na">tp=</span><span class="s">"0"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">flg=</span><span class="s">"768"</span> <span class="na">id=</span><span class="s">"Tf"</span> <span class="na">nm=</span><span class="s">"Час фільтру, секунд"</span> <span class="na">tp=</span><span class="s">"4"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/list&gt;</span>
</pre></div>
<dl><dd><b><u>Запит значень атрибутів параметру Збору Даних (<a href="#TValue">#TValue</a>)</u></b><br /></dd>
<dd>Дуже загальний запит значень атрибутів із поточними значеннями та архівом-історією.<br /></dd>
<dd>ЗАП: <i>&lt;get path="/DAQ/<b>{MOD}</b>/<b>{CNTR}</b>/prm_<b>{PRM}</b>[/prm_<b>{PRM}</b>]/%2fserv%2fattr" sepReq="<b>{sepReq}</b>" hostTm="<b>{hostTm}</b>" prcTm="<b>{prcTm}</b>"&gt;<b>{attributes}</b>&lt;/get&gt;</i>
<ul><li> <i>MOD</i>, <i>CNTR</i>, <i>PRM</i> — модуль Збору Даних, об'єкт контролеру та параметри;</li>
<li> <i>sepReq</i> — ознака запиту атрибутів окремо [0|1];</li>
<li> <i>hostTm</i> — використовувати час хосту для поточних значень, тож не додавати атрибут "tm", [0|1];</li>
<li> <i>prcTm</i> — час опрацювання попереднього виклику, переважно використовується у резервуванні;</li>
<li> <i>attributes</i> — безпосередньо запитані атрибути у тегах:
<ul><li> "el": <i>&lt;el id="<b>{id}</b>" /&gt;</i>
<ul><li> <i>id</i> — ідентифікатор атрибуту.</li></ul></li>
<li> "ael" (для архіву-історії): <i>&lt;ael id="<b>{id}</b>" tm="<b>{time}</b>" /&gt;</i>
<ul><li> <i>time</i> — час початку запиту архіву-історій у мікросекундах та частина секунд як мітка часу UNIX від 01.01.1970, тобто це час останнього значення від попереднього запиту.</li></ul></li></ul></li></ul></dd>
<dd>ВІДП: <i>&lt;get path="/DAQ/{MOD}/{CNTR}/prm_{PRM}[/prm_{PRM}]/%2fserv%2fattr" sepReq="{sepReq}" hostTm="{hostTm}" rez="<b>0</b>" prcTm="<b>{prcTm}</b>"&gt;<b>{attributes}</b>&lt;/get&gt;</i>
<ul><li> <i>prcTm</i> — системний час хосту, як мітка часу UNIX від 01.01.1970;</li>
<li> <i>attributes</i> — атрибути у тегах:
<ul><li> "el": <i>&lt;el id="{id}" tm="<b>{time}</b>"&gt;<b>{value}</b>&lt;/el&gt;</i>
<ul><li> <i>time</i> — час значення у мікросекундах та частина секунд як мітка часу UNIX від 01.01.1970;</li>
<li> <i>value</i> — поточне значення або на визначений час архіву у формі рядка.</li></ul></li>
<li> "ael": <i>&lt;ael id="{id}" tm="<b>{time}</b>" per="<b>{period}</b>"&gt;<b>{values}</b>&lt;/ael&gt;</i>
<ul><li> <i>period</i> — періодичність архіву у мікросекундах;</li>
<li> <i>values</i> — значення архівної частини у тегах "v": <i>&lt;v&gt;<b>{value}</b>&lt;/v&gt;</i></li></ul></li>
<li> "del" (лише для конфігурації нових динамічних): <i>&lt;del id="<b>{id}</b>" name="<b>{name}</b>" type="<b>{type}</b>" flg="<b>{flags}</b>" values="<b>{values}</b>" selNames="<b>{names}</b>" /&gt;</i>
<ul><li> <i>type</i> — тип динамічного атрибуту, дивіться типи в об'єкті <a href="#TFld">#TFld</a>;</li>
<li> <i>flags</i> — прапорці динамічного атрибуту, дивіться прапорці в об'єкті <a href="#TVal">#TVal</a>;</li>
<li> <i>values</i> — значення динамічного атрибуту вибіркових типів;</li>
<li> <i>names</i> — назви значень для вибіркових типів динамічного атрибуту.</li></ul></li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;get</span> <span class="na">hostTm=</span><span class="s">"1"</span> <span class="na">path=</span><span class="s">"/DAQ/LogicLev/gen/prm_F3/%2fserv%2fattr"</span> <span class="na">prcTm=</span><span class="s">"1674546677"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ael</span> <span class="na">id=</span><span class="s">"var"</span> <span class="na">per=</span><span class="s">"1000000"</span> <span class="na">tm=</span><span class="s">"1674546650000000"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;v&gt;</span>45.1063015741995<span class="nt">&lt;/v&gt;</span>
    <span class="nt">&lt;v&gt;</span>45.1021080127945<span class="nt">&lt;/v&gt;</span>
    <span class="nt">&lt;v&gt;</span>45.0979561451232<span class="nt">&lt;/v&gt;</span>
    <span class="nt">&lt;v&gt;</span>45.0938498037577<span class="nt">&lt;/v&gt;</span>
  <span class="nt">&lt;/ael&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"SHIFR"</span><span class="nt">&gt;</span>F3<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"NAME"</span><span class="nt">&gt;</span>F3<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"DESCR"</span><span class="nt">&gt;</span>Витрати газу через трубу на Глінськ<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"err"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"var"</span><span class="nt">&gt;</span>45.0139468054579<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"ed"</span><span class="nt">&gt;</span>т/год<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"min"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"max"</span><span class="nt">&gt;</span>100<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"scSqr"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"subMode"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"subVar"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"alSup"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"alDelay"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"alNormForceStart"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"aMin"</span><span class="nt">&gt;</span>10<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"aMax"</span><span class="nt">&gt;</span>90<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"wMin"</span><span class="nt">&gt;</span>35<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"wMax"</span><span class="nt">&gt;</span>80<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"HystBnd"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"speed"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"prec"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"log"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"Tf"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/el&gt;</span>
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<dl><dd><b><u>Встановлення значень багатьох атрибутів параметру Збору Даних (<a href="#TValue">#TValue</a>)</u></b><br /></dd>
<dd>ЗАП[<b>root-DAQ</b>]: <i>&lt;set path="/DAQ/<b>{MOD}</b>/<b>{CNTR}</b>/prm_<b>{PRM}</b>[/prm_<b>{PRM}</b>]/%2fserv%2fattr"&gt;<b>{attributes}</b>&lt;/set&gt;</i>
<ul><li> <i>MOD</i>, <i>CNTR</i>, <i>PRM</i> — модуль Збору Даних, об'єкт контролеру та параметри;</li>
<li> <i>attributes</i> — атрибути в тегах "el": <i>&lt;el id="<b>{id}</b>"&gt;<b>{value}</b>&lt;/el&gt;</i>
<ul><li> <i>id</i> — ідентифікатор атрибуту;</li>
<li> <i>value</i> — встановлюване значення у формі рядка.</li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;set</span> <span class="na">path=</span><span class="s">"/DAQ/LogicLev/gen/prm_F3/%2fserv%2fattr"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"ed"</span><span class="nt">&gt;</span>т/год<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"alDelay"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/el&gt;</span>
<span class="nt">&lt;/set&gt;</span>
</pre></div>
<p><b><u>Атрибути параметру Збору Даних</u></b><br />
</p>
<dl><dd><b><u>Запит інформації атрибуту параметру Збору Даних (<a href="#TVal">#TVal</a>)</u></b><br /></dd>
<dd>Переспрямування до запиту архіву "<i>&lt;info path='/Archive/va_{ARCH}/%2fserv%2fval' /&gt;</i>" при зв'язувані із архівом, тож щодо додаткових атрибутів та результату дивіться там.<br /></dd>
<dd>ЗАП: <i>&lt;info path="/DAQ/<b>{MOD}</b>/<b>{CNTR}</b>/prm_<b>{PRM}</b>[/prm_<b>{PRM}</b>]/a_<b>{ATTR}</b>/%2fserv%2fval" /&gt;</i>
<ul><li> <i>MOD</i>, <i>CNTR</i>, <i>PRM</i>, <i>ATTR</i> — модуль Збору Даних, об'єкт контролеру, параметри та атрибут.</li></ul></dd>
<dd>ВІДП: <i>&lt;info path="/DAQ/{MOD}/{CNTR}/prm_{PRM}[/prm_{PRM}]/a_{ATTR}/%2fserv%2fval" rez="<b>0</b>" end="<b>0</b>" beg="<b>0</b>" per="<b>0</b>" vtp="<b>{valTp}</b>" /&gt;</i>
<ul><li> "0" — архівні параметри за відсутності архіву встановлюються у 0;</li>
<li> <i>valTp</i> — тип значення, дивіться до об'єкту <a href="#TFld">#TFld</a>.</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;info</span> <span class="na">beg=</span><span class="s">"0"</span> <span class="na">end=</span><span class="s">"0"</span> <span class="na">path=</span><span class="s">"/DAQ/LogicLev/gen/prm_F3/a_ed/%2fserv%2fval"</span> <span class="na">per=</span><span class="s">"0"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span> <span class="na">vtp=</span><span class="s">"5"</span> <span class="nt">/&gt;</span>
</pre></div>
<dl><dd><b><u>Запит значення атрибуту параметру Збору Даних (<a href="#TVal">#TVal</a>)</u></b><br /></dd>
<dd>Переспрямування до запиту архіву "<i>&lt;get path='/Archive/va_{ARCH}/%2fserv%2fval' /&gt;</i>" при зв'язувані із архівом, тож щодо додаткових атрибутів та результату дивіться там.<br /></dd>
<dd>ЗАП: <i>&lt;get path="/DAQ/<b>{MOD}</b>/<b>{CNTR}</b>/prm_<b>{PRM}</b>[/prm_<b>{PRM}</b>]/a_<b>{ATTR}</b>/%2fserv%2fval" tm="<b>{time}</b>" /&gt;</i>
<ul><li> <i>MOD</i>, <i>CNTR</i>, <i>PRM</i>, <i>ATTR</i> — модуль Збору Даних, об'єкт контролеру, параметри та атрибут;</li>
<li> <i>time</i> — час запитаного значення у мікросекундах та частина секунд як мітка часу UNIX від 01.01.1970; для нульового значення використовується системний поточний час та ви отримаєте поточне значення за відсутності архіву.</li></ul></dd>
<dd>ВІДП: <i>&lt;get path="/DAQ/{MOD}/{CNTR}/prm_{PRM}[/prm_{PRM}]/a_{ATTR}/%2fserv%2fval" tm="<b>{time}</b>" rez="<b>0</b>"&gt;<b>{value}</b>&lt;/get&gt;</i>
<ul><li> <i>time</i> — встановлюється у час реально запитаного значення;</li>
<li> <i>value</i> — значення атрибуту.</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/DAQ/LogicLev/gen/prm_F3/a_var/%2fserv%2fval"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">tm=</span><span class="s">"1675449270029270"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>45.141100502986<span class="nt">&lt;/get&gt;</span>
</pre></div>
<dl><dd><b><u>Запит назви атрибуту для архіву зв'язаного із ним</u></b><br /></dd>
<dd>ЗАП: <i>&lt;name path="/DAQ/<b>{MOD}</b>/<b>{CNTR}</b>/prm_<b>{PRM}</b>[/prm_<b>{PRM}</b>]/a_<b>{ATTR}</b>/%2fserv%2fval" /&gt;</i>
<ul><li> <i>MOD</i>, <i>CNTR</i>, <i>PRM</i>, <i>ATTR</i> — модуль Збору Даних, об'єкт контролеру, параметри та атрибут.</li></ul></dd>
<dd>ВІДП: <i>&lt;name path="/DAQ/{MOD}/{CNTR}/prm_{PRM}[/prm_{PRM}]/a_{ATTR}/%2fserv%2fval" rez="<b>0</b>"&gt;<b>{name}</b>&lt;/get&gt;</i>
<ul><li> <i>name</i> — назва архіву.</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;name</span> <span class="na">path=</span><span class="s">"/DAQ/LogicLev/gen/prm_F3/a_var/%2fserv%2fval"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>F3.Змінна<span class="nt">&lt;/name&gt;</span>
</pre></div>
<h5><span class="mw-headline" id=".D0.9C.D0.BE.D0.B4.D1.83.D0.BB.D1.8C_JavaLikeCalc"><span class="mw-headline-number">14.4.3.1</span> Модуль <a href="Modules/JavaLikeCalc.html" title="Special:MyLanguage/Modules/JavaLikeCalc">JavaLikeCalc</a></span></h5>
<p><b><u>Отримання значень ВВ функції об'єкту контролеру</u></b><br />
ЗАП: <i>&lt;get path="/DAQ/JavaLikeCalc/<b>{CNTR}</b>/%2fserv%2ffncAttr" /&gt;</i>
</p>
<ul><li> <i>CNTR</i> — об'єкт контролеру.</li></ul>
<p>ВІДП: <i>&lt;get path="/DAQ/JavaLikeCalc/{CNTR}/%2fserv%2ffncAttr" rez="<b>0</b>"&gt;<b>{IOs}</b>&lt;/get&gt;</i>
</p>
<ul><li> <i>IOs</i> — ВВ контексту виконання функції у тегах "a": <i>&lt;a id="<b>{ID}</b>"&gt;<b>{value}</b>&lt;/a&gt;</i>
<ul><li> <i>ID</i> — ідентифікатор ВВ;</li>
<li> <i>value</i> — значення ВВ.</li></ul></li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/DAQ/JavaLikeCalc/testCalc/%2fserv%2ffncAttr"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"f_frq"</span><span class="nt">&gt;</span>0.1<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"f_start"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"f_stop"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"this"</span><span class="nt">&gt;</span><span class="ni">&amp;lt;</span>TCntrNodeObj path="/sub_DAQ/mod_JavaLikeCalc/cntr_testCalc/"/<span class="ni">&amp;gt;</span><span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"offset"</span><span class="nt">&gt;</span>100<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"out"</span><span class="nt">&gt;</span>50<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"test"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"rez"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"inFarg"</span><span class="nt">&gt;</span>3<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<p><b><u>Встановлення значень ВВ функції об'єкту контролеру</u></b><br />
ЗАП[<b>root-DAQ</b>]: <i>&lt;set path="/DAQ/JavaLikeCalc/<b>{CNTR}</b>/%2fserv%2ffncAttr"&gt;<b>{IOs}</b>&lt;/set&gt;</i>
</p>
<ul><li> <i>CNTR</i> — об'єкт контролеру;</li>
<li> <i>IOs</i> — ВВ контексту виконання функції у тегах "a": <i>&lt;a id="<b>{ID}</b>"&gt;<b>{value}</b>&lt;/a&gt;</i>
<ul><li> <i>ID</i> — ідентифікатор ВВ;</li>
<li> <i>value</i> — значення ВВ.</li></ul></li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;set</span> <span class="na">path=</span><span class="s">"/DAQ/JavaLikeCalc/testCalc/%2fserv%2ffncAttr"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"out"</span><span class="nt">&gt;</span>50<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"test"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/set&gt;</span>
</pre></div>
<p><br />
</p>
<h5><span class="mw-headline" id=".D0.9C.D0.BE.D0.B4.D1.83.D0.BB.D1.8C_LogicLev"><span class="mw-headline-number">14.4.3.2</span> Модуль <a href="Modules/LogicLev.html" title="Special:MyLanguage/Modules/LogicLev">LogicLev</a></span></h5>
<p><b><u>Отримання значень ВВ шаблону параметру Логічного Рівня об'єкту контролеру</u></b><br />
ЗАП: <i>&lt;get path="/DAQ/LogicLev/<b>{CNTR}</b>/prm_<b>{PRM}</b>[/prm_<b>{PRM}</b>]/%2fserv%2ftmplAttr" /&gt;</i>
</p>
<ul><li> <i>CNTR</i>, <i>PRM</i> — об'єкт контролеру та параметри.</li></ul>
<p>ВІДП: <i>&lt;get path="/DAQ/LogicLev/{CNTR}/prm_{PRM}[/prm_{PRM}]/%2fserv%2ftmplAttr" rez="<b>0</b>"&gt;<b>{IOs}</b>&lt;/get&gt;</i>
</p>
<ul><li> <i>IOs</i> — ВВ контексту виконання шаблону параметрів Логічного Рівня у тегах "ta": <i>&lt;ta id="<b>{ID}</b>"&gt;<b>{value}</b>&lt;/ta&gt;</i>
<ul><li> <i>ID</i> — ідентифікатор ВВ;</li>
<li> <i>value</i> — значення ВВ.</li></ul></li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/DAQ/LogicLev/gen/prm_F3/%2fserv%2ftmplAttr"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ta</span> <span class="na">id=</span><span class="s">"in"</span><span class="nt">&gt;</span>44.9998202036118<span class="nt">&lt;/ta&gt;</span>
  <span class="nt">&lt;ta</span> <span class="na">id=</span><span class="s">"inProc"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;ta</span> <span class="na">id=</span><span class="s">"var"</span><span class="nt">&gt;</span>44.9999585116556<span class="nt">&lt;/ta&gt;</span>
  <span class="nt">&lt;ta</span> <span class="na">id=</span><span class="s">"ed"</span><span class="nt">&gt;</span>ton/h<span class="nt">&lt;/ta&gt;</span>
  <span class="nt">&lt;ta</span> <span class="na">id=</span><span class="s">"min"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/ta&gt;</span>
  <span class="nt">&lt;ta</span> <span class="na">id=</span><span class="s">"max"</span><span class="nt">&gt;</span>100<span class="nt">&lt;/ta&gt;</span>
  <span class="nt">&lt;ta</span> <span class="na">id=</span><span class="s">"scSqr"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/ta&gt;</span>
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<p><b><u>Встановлення значень ВВ шаблону параметру Логічного Рівня об'єкту контролеру</u></b><br />
ЗАП[<b>root-DAQ</b>]: <i>&lt;set path="/DAQ/LogicLev/<b>{CNTR}</b>/prm_<b>{PRM}</b>[/prm_<b>{PRM}</b>]/%2fserv%2ftmplAttr"&gt;<b>{IOs}</b>&lt;/set&gt;</i>
</p>
<ul><li> <i>CNTR</i>, <i>PRM</i> — об'єкт контролеру та параметри;</li>
<li> <i>IOs</i> — ВВ контексту виконання шаблону параметрів Логічного Рівня у тегах "ta": <i>&lt;ta id="<b>{ID}</b>"&gt;<b>{value}</b>&lt;/ta&gt;</i>
<ul><li> <i>ID</i> — ідентифікатор ВВ;</li>
<li> <i>value</i> — значення ВВ.</li></ul></li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;set</span> <span class="na">path=</span><span class="s">"/DAQ/LogicLev/gen/prm_F3/%2fserv%2ftmplAttr"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ta</span> <span class="na">id=</span><span class="s">"in"</span><span class="nt">&gt;</span>44.9998202036118<span class="nt">&lt;/ta&gt;</span>
  <span class="nt">&lt;ta</span> <span class="na">id=</span><span class="s">"var"</span><span class="nt">&gt;</span>44.9999585116556<span class="nt">&lt;/ta&gt;</span>
<span class="nt">&lt;/set&gt;</span>
</pre></div>
<p><br />
</p>
<h5><span class="mw-headline" id=".D0.9C.D0.BE.D0.B4.D1.83.D0.BB.D1.8C_BlockCalc"><span class="mw-headline-number">14.4.3.3</span> Модуль <a href="Modules/BlockCalc.html" title="Special:MyLanguage/Modules/BlockCalc">BlockCalc</a></span></h5>
<p><b><u>Отримання значень всіх атрибутів блоку об'єкту контролеру</u></b><br />
ЗАП: <i>&lt;get path="/DAQ/BlockCalc/<b>{CNTR}</b>/blk_<b>{BLK}</b>/%2fserv%2fattr" /&gt;</i>
</p>
<ul><li> <i>CNTR</i>, <i>BLK</i> — об'єкт контролеру та блок у блоковій схемі.</li></ul>
<p>ВІДП: <i>&lt;get path="/DAQ/BlockCalc/{CNTR}/blk_{BLK}/%2fserv%2fattr" rez="<b>0</b>"&gt;<b>{attributes}</b>&lt;/get&gt;</i>
</p>
<ul><li> <i>attributes</i> — атрибути блоку в тегах "a": <i>&lt;a id="<b>{ID}</b>"&gt;<b>{value}</b>&lt;/a&gt;</i>
<ul><li> <i>ID</i> — ідентифікатор атрибуту;</li>
<li> <i>value</i> — значення атрибуту.</li></ul></li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/DAQ/BlockCalc/CM101/blk_AT101_1/%2fserv%2fattr"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"Fi"</span><span class="nt">&gt;</span>50.3839725707191<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"Pi"</span><span class="nt">&gt;</span>10.2588208891757<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"Ti"</span><span class="nt">&gt;</span>331.149550201738<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"Si"</span><span class="nt">&gt;</span>0.071<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"li"</span><span class="nt">&gt;</span>10<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<p><b><u>Встановлення значень переліку атрибутів блоку об'єкту контролеру</u></b><br />
ЗАП[<b>root-DAQ</b>]: <i>&lt;set path="/DAQ/BlockCalc/<b>{CNTR}</b>/blk_<b>{BLK}</b>/%2fserv%2fattr"&gt;<b>{attributes}</b>&lt;/set&gt;</i>
</p>
<ul><li> <i>CNTR</i>, <i>BLK</i> — об'єкт контролеру та блок у блоковій схемі;</li>
<li> <i>attributes</i> — атрибути блоку в тегах "a": <i>&lt;a id="<b>{ID}</b>"&gt;<b>{value}</b>&lt;/a&gt;</i>
<ul><li> <i>ID</i> — ідентифікатор атрибуту;</li>
<li> <i>value</i> — значення атрибуту.</li></ul></li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;set</span> <span class="na">path=</span><span class="s">"/DAQ/BlockCalc/CM101/blk_AT101_1/%2fserv%2fattr"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"Fi"</span><span class="nt">&gt;</span>50.3839725707191<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"Pi"</span><span class="nt">&gt;</span>10.2588208891757<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/set&gt;</span>
</pre></div>
<p><br />
</p>
<h4><span class="mw-headline" id=".D0.9F.D1.96.D0.B4.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.B0_.22.D0.90.D1.80.D1.85.D1.96.D0.B2.D0.B8-.D1.96.D1.81.D1.82.D0.BE.D1.80.D1.96.D1.8F.22"><span class="mw-headline-number">14.4.4</span> Підсистема "Архіви-історія"</span></h4>
<p><b><u>Отримання підсистемного статусу резервування станції</u></b><br />
ЗАП: <i>&lt;st path="/Archive/%2fserv%2fredundant" /&gt;</i><br />
ВІДП: <i>&lt;st path="/Archive/%2fserv%2fredundant" rez="<b>0</b>" inProc="<b>1</b>" StLevel="<b>{lev}</b>"&gt;<b>{status}</b>&lt;/st&gt;</i>
</p>
<ul><li> <i>lev</i> — рівень резервування станції;</li>
<li> <i>status</i> — актуальний статус резервування архіваторів повідомлень у тегах "archM": <i>&lt;archM id="<b>{aMessId}</b>" run="<b>{runSt}</b>" /&gt;</i>
<ul><li> <i>aMessId</i> — повний ідентифікатор архіватору повідомлень;</li>
<li> <i>runSt</i> — статус виконання архіватору повідомлень [0|1] на цій станції.</li></ul></li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 10pt"><pre><span class="nt">&lt;st</span> <span class="na">StLevel=</span><span class="s">"10"</span> <span class="na">inProc=</span><span class="s">"1"</span> <span class="na">path=</span><span class="s">"/Archive/%2fserv%2fredundant"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;archM</span> <span class="na">id=</span><span class="s">"DBArch.test"</span> <span class="na">run=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;archM</span> <span class="na">id=</span><span class="s">"FSArch.NetRequsts"</span> <span class="na">run=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;archM</span> <span class="na">id=</span><span class="s">"FSArch.StatErrors"</span> <span class="na">run=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;archM</span> <span class="na">id=</span><span class="s">"FSArch.test"</span> <span class="na">run=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/st&gt;</span>
</pre></div>
<p><b><u>Архів повідомлень</u></b><br />
</p>
<dl><dd><b><u>Отримання інформації архівування повідомлень</u></b><br /></dd>
<dd>ЗАП: <i>&lt;info path="/Archive/%2fserv%2fmess" arch="<b>{archiver}</b>" /&gt;</i>
<ul><li> <i>archiver</i> — повний ідентифікатор архіватору повідомлень для запиту цієї інформації або порожньо для архіву повідомлень загалом.</li></ul></dd>
<dd>ВІДП: <i>&lt;info path="/Archive/%2fserv%2fmess" arch="{archiver}" rez="<b>0</b>" end="<b>{end}</b>" beg="<b>{begin}</b>" /&gt;</i>
<ul><li> <i>end</i> — час останнього повідомлення в архіві, як мітка часу UNIX від 01.01.1970;</li>
<li> <i>begin</i> — час першого повідомлення в архіві, як мітка часу UNIX від 01.01.1970.</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;info</span> <span class="na">beg=</span><span class="s">"1639859386"</span> <span class="na">end=</span><span class="s">"1674549889"</span> <span class="na">path=</span><span class="s">"/Archive/%2fserv%2fmess"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span> <span class="nt">/&gt;</span>
</pre></div>
<dl><dd><b><u>Запит повідомлень архіву повідомлень</u></b><br /></dd>
<dd>Дуже загальний запит повідомлень архіву.<br /></dd>
<dd>ЗАП: <i>&lt;get path="/Archive/%2fserv%2fmess" tm="<b>{time}</b>" tm_grnd="<b>{tmGrnd}</b>" arch="<b>{archiver}</b>" cat="<b>{catTmpl}</b>" lev="<b>level</b>" /&gt;</i>
<ul><li> <i>time</i> — час останнього запитаного повідомлення, як мітка часу UNIX від 01.01.1970; за нульового значення використовується системний поточний час - 1;</li>
<li> <i>tmGrnd</i> — час першого запитаного повідомлення, як мітка часу UNIX від 01.01.1970;</li>
<li> <i>archiver</i> — повний ідентифікатор архіватору повідомлень для запиту або порожньо для архіву повідомлень загалом;</li>
<li> <i>catTmpl</i> — шаблон запитуваних повідомлень;</li>
<li> <i>level</i> — мінімальний рівень запитуваних повідомлень.</li></ul></dd>
<dd>ВІДП: <i>&lt;get path="/Archive/%2fserv%2fmess" tm="<b>{time}</b>" tm_grnd="{tmGrnd}" arch="{archiver}" cat="{catTmpl}" lev="level" rez="<b>0</b>" &gt;<b>{messages}</b>&lt;/get&gt;</i>
<ul><li> <i>time</i> — тут розташовується час останнього опрацьованого повідомлення (найбільше), як мітка часу UNIX від 01.01.1970;</li>
<li> <i>messages</i> — запитані повідомлення у тегах "el": <i>&lt;el time="<b>{time}</b>" utime="<b>{utime}</b>" cat="<b>{category}</b>" lev="<b>{level}</b>"&gt;<b>{mess}</b>&lt;/el&gt;</i>
<ul><li> <i>time</i> — час повідомлення, як мітка часу UNIX від 01.01.1970;</li>
<li> <i>utime</i> — мікросекундна частина часу повідомлення;</li>
<li> <i>cat</i> — категорія повідомлення;</li>
<li> <i>lev</i> — рівень повідомлення;</li>
<li> <i>mess</i> — текст повідомлення.</li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;get</span> <span class="na">cat=</span><span class="s">"/*"</span> <span class="na">lev=</span><span class="s">"1"</span> <span class="na">path=</span><span class="s">"/Archive/%2fserv%2fmess"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">tm=</span><span class="s">"0"</span> <span class="na">tm_grnd=</span><span class="s">"1674549800"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">cat=</span><span class="s">"/sub_UI/mod_QTCfg/"</span> <span class="na">lev=</span><span class="s">"1"</span> <span class="na">time=</span><span class="s">"1674549865"</span> <span class="na">utime=</span><span class="s">"856668"</span><span class="nt">&gt;</span>
roman| '/SimulatorStation/sub_DAQ/mod_JavaLikeCalc/lib_Controller/fnc_test1/%2fexec%2fio%2fin' змінено у: '<span class="ni">&amp;lt;</span>info path="/Archive" /<span class="ni">&amp;gt;</span>'!
  <span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">cat=</span><span class="s">"/sub_UI/mod_QTCfg/"</span> <span class="na">lev=</span><span class="s">"1"</span> <span class="na">time=</span><span class="s">"1674549867"</span> <span class="na">utime=</span><span class="s">"640815"</span><span class="nt">&gt;</span>
roman| Натиснуто '/SimulatorStation/sub_DAQ/mod_JavaLikeCalc/lib_Controller/fnc_test1/%2fexec%2fcalc'!
  <span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">cat=</span><span class="s">"/sub_UI/mod_QTCfg/"</span> <span class="na">lev=</span><span class="s">"1"</span> <span class="na">time=</span><span class="s">"1674549888"</span> <span class="na">utime=</span><span class="s">"266062"</span><span class="nt">&gt;</span>
roman| '/SimulatorStation/sub_DAQ/mod_JavaLikeCalc/lib_Controller/fnc_test1/%2fexec%2fio%2fin' змінено у: '<span class="ni">&amp;lt;</span>info path="/Archive/%2fserv%2fmess" /<span class="ni">&amp;gt;</span>'!
  <span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">cat=</span><span class="s">"/sub_UI/mod_QTCfg/"</span> <span class="na">lev=</span><span class="s">"1"</span> <span class="na">time=</span><span class="s">"1674549889"</span> <span class="na">utime=</span><span class="s">"843894"</span><span class="nt">&gt;</span>
roman| Натиснуто '/SimulatorStation/sub_DAQ/mod_JavaLikeCalc/lib_Controller/fnc_test1/%2fexec%2fcalc'!
  <span class="nt">&lt;/el&gt;</span>
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<dl><dd><b><u>Встановлення групи повідомлень до архіву повідомлень</u></b><br /></dd>
<dd>ЗАП[<b>root-Archive</b>]: <i>&lt;set path="/Archive/%2fserv%2fmess"&gt;<b>{messages}</b>&lt;/set&gt;</i>
<ul><li> <i>messages</i> — повідомлення у тегах "el": <i>&lt;el time="<b>{time}</b>" utime="<b>{utime}</b>" cat="<b>{category}</b>" lev="<b>{level}</b>"&gt;<b>{mess}</b>&lt;/el&gt;</i>
<ul><li> <i>time</i> — час повідомлення, як мітка часу UNIX від 01.01.1970;</li>
<li> <i>utime</i> — мікросекундна частина часу повідомлення;</li>
<li> <i>cat</i> — категорія повідомлення;</li>
<li> <i>lev</i> — рівень повідомлення;</li>
<li> <i>mess</i> — текст повідомлення.</li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;set</span> <span class="na">path=</span><span class="s">"/Archive/%2fserv%2fmess"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">cat=</span><span class="s">"/sub_UI/mod_QTCfg/"</span> <span class="na">lev=</span><span class="s">"1"</span> <span class="na">time=</span><span class="s">"1674549865"</span> <span class="na">utime=</span><span class="s">"856668"</span><span class="nt">&gt;</span>
roman| '/SimulatorStation/sub_DAQ/mod_JavaLikeCalc/lib_Controller/fnc_test1/%2fexec%2fio%2fin' змінено у: '<span class="ni">&amp;lt;</span>info path="/Archive" /<span class="ni">&amp;gt;</span>'!
  <span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">cat=</span><span class="s">"/sub_UI/mod_QTCfg/"</span> <span class="na">lev=</span><span class="s">"1"</span> <span class="na">time=</span><span class="s">"1674549867"</span> <span class="na">utime=</span><span class="s">"640815"</span><span class="nt">&gt;</span>
roman| Натиснуто '/SimulatorStation/sub_DAQ/mod_JavaLikeCalc/lib_Controller/fnc_test1/%2fexec%2fcalc'!
  <span class="nt">&lt;/el&gt;</span>
<span class="nt">&lt;/set&gt;</span>
</pre></div>
<p><b><u>Архіватори повідомлень</u></b><br />
</p>
<dl><dd><b><u>Запит повідомлень архіватору повідомлень</u></b><br /></dd>
<dd>ЗАП: <i>&lt;get path="/Archive/<b>{MOD}</b>/mess_<b>{ARCHR}</b>/%2fserv%2fmess" eTm="<b>{endTime}</b>" bTm="<b>{begTime}</b>" cat="<b>{catTmpl}</b>" lev="<b>level</b>" /&gt;</i>
<ul><li> <i>MOD</i>, <i>ARCHR</i> — модуль архівації повідомлень та ідентифікатор архіватору;</li>
<li> <i>endTime</i> — час останнього запитаного повідомлення, як мітка часу UNIX від 01.01.1970; за нульового значення використовується системний поточний час;</li>
<li> <i>begTime</i> — час першого запитаного повідомлення, як мітка часу UNIX від 01.01.1970;</li>
<li> <i>catTmpl</i> — шаблон запитуваних повідомлень;</li>
<li> <i>level</i> — мінімальний рівень запитуваних повідомлень.</li></ul></dd>
<dd>ВІДП: <i>&lt;get path="/Archive/{MOD}/{ARCHR}/%2fserv%2fmess" eTm="{endTime}" bTm="{begTime}" cat="{catTmpl}" lev="level" rez="<b>0</b>" tm="<b>{time}</b>" &gt;<b>{messages}</b>&lt;/get&gt;</i>
<ul><li> <i>time</i> — тут розташовується час останнього опрацьованого повідомлення (найбільше), як мітка часу UNIX від 01.01.1970;</li>
<li> <i>messages</i> — запитані повідомлення у тегах "it": <i>&lt;it tm="<b>{time}</b>" tmu="<b>{utime}</b>" cat="<b>{category}</b>" lev="<b>{level}</b>"&gt;<b>{mess}</b>&lt;/it&gt;</i>
<ul><li> <i>time</i> — час повідомлення, як мітка часу UNIX від 01.01.1970;</li>
<li> <i>utime</i> — мікросекундна частина часу повідомлення;</li>
<li> <i>cat</i> — категорія повідомлення;</li>
<li> <i>lev</i> — рівень повідомлення;</li>
<li> <i>mess</i> — текст повідомлення.</li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;get</span> <span class="na">bTm=</span><span class="s">"1674549800"</span> <span class="na">cat=</span><span class="s">"/*"</span> <span class="na">eTm=</span><span class="s">"1674549889"</span> <span class="na">lev=</span><span class="s">"1"</span> <span class="na">path=</span><span class="s">"/Archive/FSArch/mess_SYS/%2fserv%2fmess"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">tm=</span><span class="s">"1674549889"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;it</span> <span class="na">cat=</span><span class="s">"/sub_UI/mod_QTCfg/"</span> <span class="na">lev=</span><span class="s">"1"</span> <span class="na">tm=</span><span class="s">"1674549865"</span> <span class="na">tmu=</span><span class="s">"856668"</span><span class="nt">&gt;</span>
roman| '/SimulatorStation/sub_DAQ/mod_JavaLikeCalc/lib_Controller/fnc_test1/%2fexec%2fio%2fin' змінено у: '<span class="ni">&amp;lt;</span>info path="/Archive" /<span class="ni">&amp;gt;</span>'!
  <span class="nt">&lt;/it&gt;</span>
  <span class="nt">&lt;it</span> <span class="na">cat=</span><span class="s">"/sub_UI/mod_QTCfg/"</span> <span class="na">lev=</span><span class="s">"1"</span> <span class="na">tm=</span><span class="s">"1674549867"</span> <span class="na">tmu=</span><span class="s">"640815"</span><span class="nt">&gt;</span>
roman| Натиснуто '/SimulatorStation/sub_DAQ/mod_JavaLikeCalc/lib_Controller/fnc_test1/%2fexec%2fcalc'!
  <span class="nt">&lt;/it&gt;</span>
  <span class="nt">&lt;it</span> <span class="na">cat=</span><span class="s">"/sub_UI/mod_QTCfg/"</span> <span class="na">lev=</span><span class="s">"1"</span> <span class="na">tm=</span><span class="s">"1674549888"</span> <span class="na">tmu=</span><span class="s">"266062"</span><span class="nt">&gt;</span>
roman| '/SimulatorStation/sub_DAQ/mod_JavaLikeCalc/lib_Controller/fnc_test1/%2fexec%2fio%2fin' змінено у: '<span class="ni">&amp;lt;</span>info path="/Archive/%2fserv%2fmess" /<span class="ni">&amp;gt;</span>'!
  <span class="nt">&lt;/it&gt;</span>
  <span class="nt">&lt;it</span> <span class="na">cat=</span><span class="s">"/sub_UI/mod_QTCfg/"</span> <span class="na">lev=</span><span class="s">"1"</span> <span class="na">tm=</span><span class="s">"1674549889"</span> <span class="na">tmu=</span><span class="s">"843894"</span><span class="nt">&gt;</span>
roman| Натиснуто '/SimulatorStation/sub_DAQ/mod_JavaLikeCalc/lib_Controller/fnc_test1/%2fexec%2fcalc'!
  <span class="nt">&lt;/it&gt;</span>
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<dl><dd><b><u>Встановлення групи повідомлень до архіватору повідомлень</u></b><br /></dd>
<dd>ЗАП[<b>root-Archive</b>]: <i>&lt;put path="/Archive/<b>{MOD}</b>/mess_<b>{ARCHR}</b>/%2fserv%2fmess" redundancy="<b>{redundancy}</b>"&gt;<b>{messages}</b>&lt;/put&gt;</i>
<ul><li> <i>MOD</i>, <i>ARCHR</i> — модуль архівації повідомлень та ідентифікатор архіватору;</li>
<li> <i>redundancy</i> — ознака надсилання повідомлень до резервних станцій [0|1];</li>
<li> <i>messages</i> — встановлювані повідомлення у тегах "it": <i>&lt;it tm="<b>{time}</b>" tmu="<b>{utime}</b>" cat="<b>{category}</b>" lev="<b>{level}</b>"&gt;<b>{mess}</b>&lt;/it&gt;</i>
<ul><li> <i>time</i> — час повідомлення, як мітка часу UNIX від 01.01.1970;</li>
<li> <i>utime</i> — мікросекундна частина часу повідомлення;</li>
<li> <i>cat</i> — категорія повідомлення;</li>
<li> <i>lev</i> — рівень повідомлення;</li>
<li> <i>mess</i> — текст повідомлення.</li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;put</span> <span class="na">path=</span><span class="s">"/Archive/FSArch/mess_SYS/%2fserv%2fmess"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;it</span> <span class="na">cat=</span><span class="s">"/sub_UI/mod_QTCfg/"</span> <span class="na">lev=</span><span class="s">"1"</span> <span class="na">tm=</span><span class="s">"1674549865"</span> <span class="na">tmu=</span><span class="s">"856668"</span><span class="nt">&gt;</span>
roman| '/SimulatorStation/sub_DAQ/mod_JavaLikeCalc/lib_Controller/fnc_test1/%2fexec%2fio%2fin' змінено у: '<span class="ni">&amp;lt;</span>info path="/Archive" /<span class="ni">&amp;gt;</span>'!
  <span class="nt">&lt;/it&gt;</span>
  <span class="nt">&lt;it</span> <span class="na">cat=</span><span class="s">"/sub_UI/mod_QTCfg/"</span> <span class="na">lev=</span><span class="s">"1"</span> <span class="na">tm=</span><span class="s">"1674549867"</span> <span class="na">tmu=</span><span class="s">"640815"</span><span class="nt">&gt;</span>
roman| Натиснуто '/SimulatorStation/sub_DAQ/mod_JavaLikeCalc/lib_Controller/fnc_test1/%2fexec%2fcalc'!
  <span class="nt">&lt;/it&gt;</span>
<span class="nt">&lt;/put&gt;</span>
</pre></div>
<p><b><u>Архіви значень</u></b><br />
</p>
<dl><dd><b><u>Отримання інформації архіву значень</u></b><br /></dd>
<dd>ЗАП: <i>&lt;info path="/Archive/va_<b>{ARCH}</b>/%2fserv%2fval" arch="<b>{archiver}</b>" /&gt;</i>
<ul><li> <i>ARCH</i> — ідентифікатор архіву значень;</li>
<li> <i>archiver</i> — повний ідентифікатор архіватору значень або порожньо для буферу значень.</li></ul></dd>
<dd>ВІДП: <i>&lt;info path="/Archive/va_{ARCH}/%2fserv%2fval" arch="{archiver}" rez="<b>0</b>" end="<b>{end}</b>" beg="<b>{begin}</b>" per="<b>{period}</b>" vtp="<b>{valTp}</b>" /&gt;</i>
<ul><li> <i>end</i> — час останнього значення у архіві в мікросекундах та частина секунд як мітка часу UNIX від 01.01.1970;</li>
<li> <i>begin</i> — час першого значення у архіві в мікросекундах та частина секунд як мітка часу UNIX від 01.01.1970;</li>
<li> <i>period</i> — періодичність архіватору або буферу значень за відсутності архіватору, у мікросекундах;</li>
<li> <i>valTp</i> — тип значення, дивіться до об'єкту <a href="#TFld">#TFld</a>.</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;info</span> <span class="na">arch=</span><span class="s">"FSArch.1s"</span> <span class="na">beg=</span><span class="s">"1665239503000000"</span> <span class="na">end=</span><span class="s">"1674581638000000"</span> <span class="na">path=</span><span class="s">"/Archive/va_F3_var/%2fserv%2fval"</span> <span class="na">per=</span><span class="s">"1000000"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span> <span class="na">vtp=</span><span class="s">"4"</span> <span class="nt">/&gt;</span>
</pre></div>
<dl><dd><b><u>Запит значень архіву значень</u></b><br /></dd>
<dd>Дуже загальний запит значень архівів значень.<br /></dd>
<dd>ЗАП: <i>&lt;get path="/Archive/va_<b>{ARCH}</b>/%2fserv%2fval" tm="<b>{time}</b>" tm_grnd="<b>{tmGrnd}</b>" arch="<b>{archiver}</b>" local="<b>{localReq}</b>" per="<b>{period}</b>" mode="<b>{mode}</b>" round_perc="<b>{rndPerc}</b>" real_prec="<b>{realPrec}</b>" /&gt;</i>
<ul><li> <i>ARCH</i> — ідентифікатор архіву значень;</li>
<li> <i>time</i> — час останнього запитуваного значення в мікросекундах та частина секунд як мітка часу UNIX від 01.01.1970; для нульового значення використовується поточний системний час;</li>
<li> <i>tmGrnd</i> — час першого запитуваного значення в мікросекундах та частина секунд як мітка часу UNIX від 01.01.1970; для нульового значення здійснюється лише запит поточного;</li>
<li> <i>archiver</i> — повний ідентифікатор архіватору значень або порожньо для пріоритетного запиту за пріоритетом обрання від кращого до гіршого;</li>
<li> <i>localReq</i> — ознака [0|1] локального запиту без запиту резервної станції щодо відсутніх даних;</li>
<li> <i>period</i> — період у якому запитувати значення, у мікросекундах; використовується максимальний із архівом період;</li>
<li> <i>mode</i> — режим запиту значень архіву, дивіться перелічення ServReqDtMode об'єкту <a href="#TVArchive">#TVArchive</a>;</li></ul>
<dl><dd><ul><li> DMSimple(0) — простий запис, один елемент на рядок; значення у випадку строкового типу архіву кодуються щодо виключення символів нового рядка;</li></ul></dd></dl></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 40px">
34.5678
23.6543
65.8754
34.6523</pre>
<dl><dd><dl><dd><ul><li> DMPack(1) — упакований запис, одне суміжне рівне (округлене) значення на рядок; перед кожним значенням вказується його позиційний номер відокремлений пробілом від значення;</li></ul></dd></dl></dd></dl>
<pre style="white-space: pre-wrap; margin-left: 40px">
0 34.5678
1 23.6543
4 65.8754
6 34.6523</pre>
<dl><dd><dl><dd><ul><li> DMBin(2) — масив неупакованих бінарних значень, закодований Base64; не може бути використано для строкових архівів.</li></ul></dd></dl>
<ul><li> <i>rndPerc</i> — відсоток округлення реальних значень, тобто які вважаються однаковими;</li>
<li> <i>realPrec</i> — точність реальних значень при перетворені у рядок, типово 15.</li></ul></dd>
<dd>ВІДП: <i>&lt;get path="/Archive/va_{ARCH}/%2fserv%2fval" tm="<b>{time}</b>" tm_grnd="<b>{tmGrnd}</b>" arch="<b>{archiver}</b>" local="{localReq}" per="<b>{period}</b>" mode="{mode}" round_perc="{rndPerc}" real_prec="{realPrec}" rez="0" vtp="<b>{valType}</b>"&gt;<b>{values}</b>&lt;/get&gt;</i>
<ul><li> <i>archiver</i> — встановлюється в обраний архіватор за порожнього значення тут у запиті;</li>
<li> <i>time</i> — встановлюється у час реально запитаного значення при одиничному запиті або у час останнього-кінцевого значення блоку значень;</li>
<li> <i>tmGrnd</i> — встановлюється у час першого-базового значення блоку значень;</li>
<li> <i>period</i> — встановлюється у реальний період даних у блоку значень;</li>
<li> <i>valType</i> — встановлюється у тип даних у блоку значень;</li>
<li> <i>values</i> — одне значення для одиничного запиту або блок значень, відформатований відповідно до "mode".</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;get</span> <span class="na">arch=</span><span class="s">"FSArch.1s"</span> <span class="na">mode=</span><span class="s">"1"</span> <span class="na">path=</span><span class="s">"/Archive/va_F3_var/%2fserv%2fval"</span> <span class="na">per=</span><span class="s">"10000000"</span> <span class="na">real_prec=</span><span class="s">"7"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">round_perc=</span><span class="s">"0.1"</span>
     <span class="na">tm=</span><span class="s">"1674581630000000"</span> <span class="na">tm_grnd=</span><span class="s">"1674581500000000"</span> <span class="na">user=</span><span class="s">"roman"</span> <span class="na">vtp=</span><span class="s">"4"</span><span class="nt">&gt;</span>
0 <span class="ni">&amp;lt;</span>EVAL<span class="ni">&amp;gt;</span>
7 45.23046
11 45.16198
13 45.08281
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<dl><dd><b><u>Запит назви архіву залежно від зв'язування із атрибутом Збору Даних</u></b><br /></dd>
<dd>ЗАП: <i>&lt;name path="/Archive/va_<b>{ARCH}</b>/%2fserv%2fval" /&gt;</i><br />
<ul><li> <i>ARCH</i> — ідентифікатор архіву значень.</li></ul></dd>
<dd>ВІДП: <i>&lt;name path="/Archive/va_{ARCH}/%2fserv%2fval" rez="<b>0</b>"&gt;<b>{name}</b>&lt;/name&gt;</i>
<ul><li> <i>name</i> — назва запитуваного архіву.</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;name</span> <span class="na">path=</span><span class="s">"/Archive/va_F3_var/%2fserv%2fval"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>F3.var<span class="nt">&lt;/name&gt;</span>
</pre></div>
<h4><span class="mw-headline" id=".D0.9F.D1.96.D0.B4.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.B0_.22.D0.9A.D0.BE.D1.80.D0.B8.D1.81.D1.82.D1.83.D0.B2.D0.B0.D1.86.D1.8C.D0.BA.D1.96_.D0.86.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D0.B8_.28UI.29.22"><span class="mw-headline-number">14.4.5</span> Підсистема "Користувацькі Інтерфейси (UI)"</span></h4>
<h5><span class="mw-headline" id=".D0.9C.D0.BE.D0.B4.D1.83.D0.BB.D1.8C_VCAEngine"><span class="mw-headline-number">14.4.5.1</span> Модуль <a href="Modules/VCAEngine.html" title="Special:MyLanguage/Modules/VCAEngine">VCAEngine</a></span></h5>
<p>Сервісні функції — це інтерфейс доступу до OpenSCADA із зовнішніх систем посередництвом <a href="API.html#CntrNode" title="Special:MyLanguage/Documents/API">Інтерфейсу Управління</a>. Цей механізм покладено в основу усього обміну всередині OpenSCADA, реалізованого шляхом слабких зв'язків та <a href="Modules/SelfSystem.html" title="Special:MyLanguage/Modules/SelfSystem">власного протоколу обміну OpenSCADA</a>.
</p><p><b><u>Загальні віджети</u></b><br />
</p>
<dl><dd><b><u>Отримання значень визначених або всіх візуальних атрибутів віджету</u></b><br /></dd>
<dd>ЗАП: <i>&lt;get path="/UI/VCAEngine/<b>{wAddr}</b>/%2fserv%2fattr"&gt;<b>{attributes}</b>&lt;/get&gt;</i>
<ul><li> <i>wAddr</i> — локальна адреса віджету, на кшталт "/wlb_AGLKS/wdg_CM101/wdg_ElFigure1";</li>
<li> <i>attributes</i> — лише запитані атрибути у тегах "el" із тільки одним атрибутом ідентифікатору "id"; можлива цілковита відсутність тегів атрибутів для запиту усіх наявних.</li></ul></dd>
<dd>ВІДП: <i>&lt;get path="/UI/VCAEngine/{wAddr}/%2fserv%2fattr" rez="<b>0</b>"&gt;<b>{attributes}</b>&lt;/get&gt;</i>
<ul><li> <i>attributes</i> — опрацьовувані атрибути у тегах "el": <i>&lt;el id="<b>{ID}</b>" p="<b>{pos}</b>" act="<b>{active}</b>"&gt;<b>{value}</b>&lt;/el&gt;</i>
<ul><li> <i>ID</i> — ідентифікатор атрибуту;</li>
<li> <i>pos</i> — позиція-індекс атрибуту для стандартних;</li>
<li> <i>active</i> — стан активності атрибуту, лише для прямого запиту;</li>
<li> <i>value</i> — значення атрибуту.</li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/wlb_AGLKS/wdg_CM101/wdg_ElFigure1/%2fserv%2fattr"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"id"</span><span class="nt">&gt;</span>ElFigure1<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"path"</span><span class="nt">&gt;</span>/wlb_AGLKS/wdg_CM101/wdg_ElFigure1<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"parent"</span><span class="nt">&gt;</span>/wlb_originals/wdg_ElFigure<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"owner"</span><span class="nt">&gt;</span>root:UI<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"perm"</span><span class="nt">&gt;</span>948<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"root"</span> <span class="na">p=</span><span class="s">"1"</span><span class="nt">&gt;</span>ElFigure<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"name"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"dscr"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<dl><dd><b><u>Встановлення групи значень визначених атрибутів віджетів</u></b><br /></dd>
<dd>ЗАП[<b>root-UI</b>]: <i>&lt;set path="/UI/VCAEngine/<b>{wAddr}</b>/%2fserv%2fattr"&gt;<b>{attributes}</b>&lt;/set&gt;</i>
<ul><li> <i>wAddr</i> — локальна адреса віджету у модулі, на кшталт "/wlb_AGLKS/wdg_CM101/wdg_ElFigure1";</li>
<li> <i>attributes</i> — атрибути зі значеннями у тегах "el": <i>&lt;el id="<b>{ID}</b>"&gt;<b>{value}</b>&lt;/el&gt;</i>
<ul><li> <i>ID</i> — ідентифікатор атрибуту;</li>
<li> <i>value</i> — встановлюване значення атрибуту.</li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;set</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/wlb_AGLKS/wdg_CM101/wdg_ElFigure1/%2fserv%2fattr"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"name"</span><span class="nt">&gt;</span>Нова назва<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"dscr"</span><span class="nt">&gt;</span>Новий опис<span class="nt">&lt;/el&gt;</span>
<span class="nt">&lt;/set&gt;</span>
</pre></div>
<dl><dd><b><u>Отримання значень візуальних атрибутів гілки віджетів, оптимізовано для мереж</u></b><br /></dd>
<dd>ЗАП: <i>&lt;get path="/UI/VCAEngine/<b>{wAddr}</b>/%2fserv%2fattrBr" /&gt;</i>
<ul><li> <i>wAddr</i> — локальна адреса віджету у модулі, на кшталт "/wlb_AGLKS/wdg_CM101/wdg_ElFigure1".</li></ul></dd>
<dd>ВІДП: <i>&lt;get path="/UI/VCAEngine/{wAddr}/%2fserv%2fattrBr" rez="<b>0</b>"&gt;<b>{attributes}</b> <b>{widgets}</b>&lt;/get&gt;</i>
<ul><li> <i>attributes</i> — опрацьовані атрибути у тегах "el": <i>&lt;el id="<b>{ID}</b>" p="<b>{pos}</b>"&gt;<b>{value}</b>&lt;/el&gt;</i>
<ul><li> <i>ID</i> — ідентифікатор атрибуту;</li>
<li> <i>pos</i> — позиція-індекс атрибуту для стандартних;</li>
<li> <i>value</i> — значення атрибуту.</li></ul></li>
<li> <i>widgets</i> — дочірні віджети у тегах "w": <i>&lt;w id="<b>{ID}</b>" lnkPath="<b>{lnkPath}</b>"&gt;<b>{attributes}</b> <b>{widgets}</b>&lt;/w&gt;</i>
<ul><li> <i>ID</i> — ідентифікатор віджету;</li>
<li> <i>lnkPath</i> — шлях до пов'язаного віджету для дочірніх віджетів бібліотек віджетів.</li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/wlb_AGLKS/wdg_CM101/%2fserv%2fattrBr"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"id"</span><span class="nt">&gt;</span>CM101<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"path"</span><span class="nt">&gt;</span>/wlb_AGLKS/wdg_CM101<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"parent"</span><span class="nt">&gt;</span>/wlb_originals/wdg_Box<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"owner"</span><span class="nt">&gt;</span>root:UI<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"perm"</span><span class="nt">&gt;</span>948<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"root"</span> <span class="na">p=</span><span class="s">"1"</span><span class="nt">&gt;</span>Box<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"name"</span><span class="nt">&gt;</span>КМ101<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;w</span> <span class="na">id=</span><span class="s">"AT101_1"</span> <span class="na">lnkPath=</span><span class="s">"/wlb_mnEls/wdg_cooler"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"id"</span><span class="nt">&gt;</span>AT101_1<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"path"</span><span class="nt">&gt;</span>/wlb_AGLKS/wdg_CM101/wdg_AT101_1<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"parent"</span><span class="nt">&gt;</span>/wlb_mnEls/wdg_cooler<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"owner"</span><span class="nt">&gt;</span>root:UI<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"perm"</span><span class="nt">&gt;</span>948<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"root"</span> <span class="na">p=</span><span class="s">"1"</span><span class="nt">&gt;</span>ElFigure<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"name"</span><span class="nt">&gt;</span>АТ101 1<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;/w&gt;</span>
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<p><b><u>Бібліотеки віджетів</u></b><br />
</p>
<dl><dd><b><u>Отримання дерева віджетів бібліотек, оптимізовано для мереж</u></b><br /></dd>
<dd>ЗАП: <i>&lt;get path="/UI/VCAEngine/%2fserv%2fwlbBr" item="<b>{item}</b>" disIconsW="<b>{disIconsW}</b>" disIconsCW="<b>{disIconsCW}</b>" /&gt;</i>
<ul><li> <i>item</i> — елемент бібліотеки отримання, як шлях "wlb_<b>{WLib}</b>[/wdg_<b>{Wdg}</b>[/wdg_<b>{ChildWdg}</b>]]", для порожнього отримуватиметься все дерево;</li>
<li> <i>disIconsW</i> — вимкнути отримання даних іконки для віджетів [0|1];</li>
<li> <i>disIconsCW</i> — вимкнути отримання даних іконки для дочірніх віджетів [0|1].</li></ul></dd>
<dd>ВІДП: <i>&lt;get path="/UI/VCAEngine/%2fserv%2fwlbBr" item="{item}" disIconsW="{disIconsW}" disIconsCW="{disIconsCW}" rez="<b>0</b>"&gt;<b>{wlibs}</b>&lt;/get&gt;</i>
<ul><li> <i>wlibs</i> — бібліотеки віджетів у тегах "wlb": <i>&lt;wlb id="{ID}" doc="{doc}"&gt;{name} <b>{icon}</b> <b>{widgets}</b>&lt;/wlb&gt;</i>
<ul><li> <i>icon</i> — тег "icon" із даними цієї іконки кодоване Base64;</li>
<li> <i>widgets</i> — теги "w" із описом бібліотек віджетів: <i>&lt;w id="{ID}" doc="{doc}" parent="<b>{parent}</b>"&gt;{name} {icon} <b>{widgets}</b>&lt;/w&gt;</i>
<ul><li> <i>parent</i> — адреса батька віджету;</li>
<li> <i>widgets</i> — теги "сw" із описом дочірніх віджетів: <i>&lt;cw id="{ID}" doc="{doc}"&gt;{name} {icon}&lt;/cw&gt;</i></li></ul></li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;get</span> <span class="na">disIconsCW=</span><span class="s">"1"</span> <span class="na">disIconsW=</span><span class="s">"1"</span> <span class="na">item=</span><span class="s">"/wlb_AGLKS"</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/%2fserv%2fwlbBr"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;wlb</span> <span class="na">id=</span><span class="s">"AGLKS"</span><span class="nt">&gt;</span>АГЛКС
    <span class="nt">&lt;ico&gt;</span>iVBORw0KGgoAA...AAAElFTkSuQmCC<span class="nt">&lt;/ico&gt;</span>
    <span class="nt">&lt;w</span> <span class="na">id=</span><span class="s">"CM101"</span> <span class="na">parent=</span><span class="s">"/wlb_originals/wdg_Box"</span><span class="nt">&gt;</span>КМ101
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"AT101_1"</span><span class="nt">&gt;</span>АТ101 1<span class="nt">&lt;/cw&gt;</span>
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"AT101_2"</span><span class="nt">&gt;</span>АТ101 1<span class="nt">&lt;/cw&gt;</span>
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"C101_1"</span><span class="nt">&gt;</span>C101/1<span class="nt">&lt;/cw&gt;</span>
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"C101_2"</span><span class="nt">&gt;</span>C101/1<span class="nt">&lt;/cw&gt;</span>
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"C101_3"</span><span class="nt">&gt;</span>C101/1<span class="nt">&lt;/cw&gt;</span>
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"CM101"</span><span class="nt">&gt;</span>CM101<span class="nt">&lt;/cw&gt;</span>
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"CM101_1"</span><span class="nt">&gt;</span>CM101_1<span class="nt">&lt;/cw&gt;</span>
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"CM101_2"</span><span class="nt">&gt;</span>CM101_2<span class="nt">&lt;/cw&gt;</span>
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"ElFigure1"</span><span class="nt">&gt;</span>ElFigure1<span class="nt">&lt;/cw&gt;</span>
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"ElFigure2"</span><span class="nt">&gt;</span>ElFigure2<span class="nt">&lt;/cw&gt;</span>
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"ElFigure3"</span><span class="nt">&gt;</span>ElFigure3<span class="nt">&lt;/cw&gt;</span>
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"ElFigure4"</span><span class="nt">&gt;</span>ElFigure4<span class="nt">&lt;/cw&gt;</span>
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"ElFigure5"</span><span class="nt">&gt;</span>ElFigure5<span class="nt">&lt;/cw&gt;</span>
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"ElFigure6"</span><span class="nt">&gt;</span>ElFigure6<span class="nt">&lt;/cw&gt;</span>
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"ElFigure7"</span><span class="nt">&gt;</span>ElFigure7<span class="nt">&lt;/cw&gt;</span>
    <span class="nt">&lt;/w&gt;</span>
    <span class="nt">&lt;w</span> <span class="na">id=</span><span class="s">"KCH_MN1"</span> <span class="na">parent=</span><span class="s">"/wlb_originals/wdg_Box"</span><span class="nt">&gt;</span>KCH_MN1
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"BC1"</span><span class="nt">&gt;</span>Кульовий кран<span class="nt">&lt;/cw&gt;</span>
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"BC2"</span><span class="nt">&gt;</span>Кульовий кран<span class="nt">&lt;/cw&gt;</span>
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"BC21"</span><span class="nt">&gt;</span>Кульовий кран<span class="nt">&lt;/cw&gt;</span>
      <span class="nt">&lt;cw</span> <span class="na">id=</span><span class="s">"BC22"</span><span class="nt">&gt;</span>Кульовий кран<span class="nt">&lt;/cw&gt;</span>
    <span class="nt">&lt;/w&gt;</span>
    <span class="nt">&lt;w</span> <span class="na">id=</span><span class="s">"comprEn"</span> <span class="na">parent=</span><span class="s">"/wlb_originals/wdg_ElFigure"</span><span class="nt">&gt;</span>Робота компресора<span class="nt">&lt;/w&gt;</span>
  <span class="nt">&lt;/wlb&gt;</span>
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<p><b><u>Проєкти СВУ</u></b><br />
</p>
<dl><dd><b><u>Отримання переліку проєктів розширене деякими опціями</u></b><br /></dd>
<dd>ЗАП: <i>&lt;get path="/UI/VCAEngine/[%2fbr%2fprj_|%2fprm%2fcfg%2fprj]" chkUserPerm="<b>{chkUserPerm}</b>" getChPgN="<b>{getChPgN}</b>" noName="<b>{noName}</b>" /&gt;</i>
<ul><li> <i>chkUserPerm</i> — перевірка прав користувача перед включенням до переліку [0|1];</li>
<li> <i>getChPgN</i> — запит кількості дочірніх сторінок у проєктах [0|1];</li>
<li> <i>noName</i> — не повертати назви сторінок [0|1].</li></ul></dd>
<dd>ВІДП: <i>&lt;get path="/UI/VCAEngine/[%2fbr%2fprj_|%2fprm%2fcfg%2fprj]" chkUserPerm="{chkUserPerm}" getChPgN="{getChPgN}" noName="{noName}" rez="<b>0</b>"&gt;<b>{projects}</b>&lt;/get&gt;</i>
<ul><li> <i>projects</i> — перелік проєктів у тегах "el", де назва у тексті тегу та ідентифікатор у атрибуті "id". Розширено додатковими атрибутами:
<ul><li> "chPgN" — кількість дочірніх сторінок у проєкті за встановлення "getChPgN".</li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;get</span> <span class="na">getChPgN=</span><span class="s">"1"</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/%2fbr%2fprj_"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">chPgN=</span><span class="s">"2"</span> <span class="na">id=</span><span class="s">"AGLKS"</span><span class="nt">&gt;</span>АГЛКС<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">chPgN=</span><span class="s">"2"</span> <span class="na">id=</span><span class="s">"archBrowser"</span><span class="nt">&gt;</span>Огляд архівів<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">chPgN=</span><span class="s">"2"</span> <span class="na">id=</span><span class="s">"tmplSO"</span><span class="nt">&gt;</span>Групи сигналізації (шаблон)<span class="nt">&lt;/el&gt;</span>
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<dl><dd><b><u>Перевірка доступу на читання проєкту від користувача запиту</u></b><br /></dd>
<dd>ЗАП: <i>&lt;read path="/UI/VCAEngine/prj_<b>{proj}</b>/%2fserv%2faccess" /&gt;</i>
<ul><li> <i>proj</i> — ідентифікатор проєкту.</li></ul></dd>
<dd>ВІДП: <i>&lt;read path="/UI/VCAEngine/prj_{proj}/%2fserv%2faccess" rez="<b>0</b>"&gt;<b>{access}</b>&lt;/get&gt;</i>
<ul><li> <i>access</i> — статус наявності доступу [0|1].</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;read</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/prj_AGLKS/%2fserv%2faccess"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/read&gt;</span>
</pre></div>
<p><b><u>Сеанси проєктів</u></b><br />
</p>
<dl><dd><b><u>Отримання переліку сеансів визначеного проєкту СВУ</u></b><br /></dd>
<dd>ЗАП: <i>&lt;list path="/UI/VCAEngine/%2fserv%2fsess" prj="<b>{project}</b>" /&gt;</i>
<ul><li> <i>project</i> — ідентифікатор запитаного проєкту.</li></ul></dd>
<dd>ВІДП: <i>&lt;list path="/UI/VCAEngine/%2fserv%2fsess" prj="{project}" rez="<b>0</b>"&gt;<b>{sessions}</b>&lt;/list&gt;</i>
<ul><li> <i>sessions</i> — сеанси у тегах "el".</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;list</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/%2fserv%2fsess"</span> <span class="na">prj=</span><span class="s">"AGLKS"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el&gt;</span>AGLKS<span class="nt">&lt;/el&gt;</span>
<span class="nt">&lt;/list&gt;</span>
</pre></div>
<dl><dd><b><u>Підключення до визначеного проєкту СВУ або сеансу проєкту</u></b><br /></dd>
<dd>ЗАП: <i>&lt;connect path="/UI/VCAEngine/%2fserv%2fsess" prj="<b>{project}</b>" sess="<b>{session}</b>" userChange="<b>{userChange}</b>" /&gt;</i>
<ul><li> <i>project</i> — ідентифікатор запитаного проєкту, порожнє при підключені до наявного сеансу;</li>
<li> <i>session</i> — ідентифікатор вже наявного сеансу, порожнє для створення нового сеансу;</li>
<li> <i>userChange</i> — ознака зміни користувача [0|1], тобто для оновлення інформації користувача.</li></ul></dd>
<dd>ВІДП: <i>&lt;connect path="/UI/VCAEngine/%2fserv%2fsess" prj="<b>{project}</b>" sess="<b>{session}</b>" userChange="{userChange}" rez="<b>0</b>" conId="<b>{conId}</b>" userIsRoot="<b>{userIsRoot}</b>" /&gt;</i>
<ul><li> <i>conId</i> — ідентифікатор підключення сеансу, використовується у подальших запитах;</li>
<li> <i>project</i> — ідентифікатор проєкту успішно підключеного сеансу;</li>
<li> <i>session</i> — ідентифікатор новоствореного сеансу успішно підключеного проєкту;</li>
<li> <i>userIsRoot</i> — користувач має права суперкористувача [0|1].</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;connect</span> <span class="na">conId=</span><span class="s">"50860885"</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/%2fserv%2fsess"</span> <span class="na">prj=</span><span class="s">"AGLKS"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">sess=</span><span class="s">"AGLKS"</span> <span class="na">user=</span><span class="s">"roman"</span> <span class="na">userIsRoot=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
</pre></div>
<dl><dd><b><u>Відключення від визначеного сеансу проєкту СВУ</u></b><br /></dd>
<dd>Сеанси із нульовою кількістю підключень тут також закриваються.<br /></dd>
<dd>ЗАП: <i>&lt;disconnect path="/UI/VCAEngine/%2fserv%2fsess" sess="<b>{session}</b>" conId="<b>{conId}</b>" /&gt;</i>
<ul><li> <i>session</i> — ідентифікатор наявного сеансу;</li>
<li> <i>conId</i> — ідентифікатор підключення сеансу.</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;disconnect</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/%2fserv%2fsess"</span> <span class="na">sess=</span><span class="s">"AGLKS"</span> <span class="na">conId=</span><span class="s">"50860885"</span> <span class="nt">/&gt;</span>
</pre></div>
<dl><dd><b><u>Отримання переліку відкритих сторінок сеансу проєкту</u></b><br /></dd>
<dd>ЗАП[<b>{owner}-{grp}</b>]: <i>&lt;openlist path="/UI/VCAEngine/ses_<b>{session}</b>/%2fserv%2fpg" conId="<b>{conId}</b>" tm="<b>{clock}</b>" /&gt;</i>
<ul><li> <i>owner</i>, <i>grp</i> — доступ на читання для власника проєкту або користувача у групі та відповідно до прав проєкту;</li>
<li> <i>session</i> — ідентифікатор сеансу;</li>
<li> <i>conId</i> — ідентифікатор підключення сеансу;</li>
<li> <i>clock</i> — значення внутрішнього лічильника (цикл життя) від попереднього опрацьованого запиту, для перевірки змінених.</li></ul></dd>
<dd>ВІДП: <i>&lt;openlist path="/UI/VCAEngine/ses_{session}/%2fserv%2fpg" conId="{conId}" tm="<b>{clock}</b>" rez="<b>0</b>"&gt;<b>{pages}</b>&lt;/openlist&gt;</i>
<ul><li> <i>clock</i> — значення внутрішнього лічильника (цикл життя) - 1 на час запиту;</li>
<li> <i>pages</i> — сторінки у тегах "pg": <i>&lt;pg pgGrp="<b>{pgGrp}</b>" updWdg="<b>{nUpdWdgs}</b>"&gt;<b>{ID}</b>&lt;/pg&gt;</i>
<ul><li> <i>ID</i> — ідентифікатор сторінки;</li>
<li> <i>pgGrp</i> — група сторінок для раннього обчислення включення сторінок;</li>
<li> <i>nUpdWdgs</i> — кількість оновлених віджетів після останнього запиту та для непорожнього "clock".</li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;openlist</span> <span class="na">conId=</span><span class="s">"52760577"</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/ses_AGLKS/%2fserv%2fpg"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">tm=</span><span class="s">"1403"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;pg&gt;</span>/ses_AGLKS/pg_so<span class="nt">&lt;/pg&gt;</span>
  <span class="nt">&lt;pg</span> <span class="na">pgGrp=</span><span class="s">"so"</span><span class="nt">&gt;</span>/ses_AGLKS/pg_so/pg_1/pg_mn/pg_1<span class="nt">&lt;/pg&gt;</span>
  <span class="nt">&lt;pg</span> <span class="na">pgGrp=</span><span class="s">"cntr"</span><span class="nt">&gt;</span>/ses_AGLKS/pg_control/pg_ElCadr<span class="nt">&lt;/pg&gt;</span>
<span class="nt">&lt;/openlist&gt;</span>
</pre></div>
<dl><dd><b><u>Відкриття або закриття визначеної сторінки сеансу проєкту</u></b><br /></dd>
<dd>ЗАП[<b>{owner}-{grp}</b>]: <i>&lt;[open|close] path="/UI/VCAEngine/ses_<b>{session}</b>/%2fserv%2fpg" pg="<b>{page}</b>" /&gt;</i>
<ul><li> <i>owner</i>, <i>grp</i> — доступ на запис для власника проєкту або користувача у групі та відповідно до прав проєкту;</li>
<li> <i>session</i> — ідентифікатор сеансу;</li>
<li> <i>page</i> — адреса сторінки у контексті сеансу, на кшталт "/ses_AGLKS/pg_so/pg_1/pg_mn/pg_1".</li></ul></dd></dl>
<dl><dd><b><u>Отримання статусу сигналізації та ресурсу сповіщення для сеансу проєкту</u></b><br /></dd>
<dd>ЗАП[<b>{owner}-{grp}</b>]: <i>&lt;get path="/UI/VCAEngine/ses_<b>{session}</b>/%2fserv%2falarm" mode="<b>{mode}</b>" tp="<b>{typeNtf}</b>" wdg="<b>{widget}</b>" /&gt;</i>
<ul><li> <i>owner</i>, <i>grp</i> — доступ на читання для власника проєкту або користувача у групі та відповідно до прав проєкту;</li>
<li> <i>session</i> — ідентифікатор сеансу;</li>
<li> <i>mode</i> — режим запиту, лише "resource" для отримання ресурсів сповіщення та пусто тільки статус;</li>
<li> <i>typeNtf</i> — тип сповіщення для отримання ресурсу, дивіться <a href="#Alarms">секцію сигналізації</a>;</li>
<li> <i>widget</i> — адреса віджету для формування ресурсу сповіщення, порожньо для глобального.</li></ul></dd>
<dd>ВІДП: <i>&lt;get path="/UI/VCAEngine/ses_{session}/%2fserv%2falarm" mode="{mode}" tp="{typeNtf}" rez="<b>0</b>" alarmSt="<b>{alarmSt}</b>" tm="<b>{clock}</b>" wdg="<b>{widget}</b>" resTp="<b>{resTp}</b>" mess="<b>{message}</b>" lang="<b>{language}</b>"&gt;<b>{resource}</b>&lt;/get&gt;</i>
<ul><li> <i>alarmSt</i> — статус сигналізації як описано у <a href="#Alarms">секції сигналізації</a>;</li>
<li> <i>clock</i> — значення внутрішнього лічильника (цикл життя) при формуванні ресурсу сповіщення;</li>
<li> <i>widget</i> — адреса віджету джерела при формуванні ресурсу сповіщення;</li>
<li> <i>message</i> — повідомлення сповіщення із тексту;</li>
<li> <i>language</i> — мова сповіщення, переважно для "message";</li>
<li> <i>resTp</i> — тип ресурсу сповіщення;</li>
<li> <i>resource</i> — ресурс сповіщення кодований Base64 для бінарних даних.</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/ses_AGLKS/%2fserv%2falarm"</span> <span class="na">mode=</span><span class="s">"resource"</span> <span class="na">tp=</span><span class="s">"1"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span>
     <span class="na">alarmSt=</span><span class="s">"460554"</span> <span class="na">tm=</span><span class="s">"0"</span> <span class="na">resTp=</span><span class="s">"audio/ogg;73.3428"</span> <span class="na">lang=</span><span class="s">"en_US.UTF-8"</span><span class="nt">&gt;</span>
T2dnUwACA...Dg6gwAjo+PAQ==
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<dl><dd><b><u>Стишення-квітація сповіщення сигналізації сеансу проєкту</u></b><br /></dd>
<dd>ЗАП[<b>{owner}-{grp}</b>]: <i>&lt;quietance path="/UI/VCAEngine/ses_<b>{session}</b>/%2fserv%2falarm" wdg="<b>{widget}</b>" tmpl="<b>{template}</b>" ret="<b>{return}</b>" /&gt;</i>
<ul><li> <i>owner</i>, <i>grp</i> — доступ на читання для власника проєкту або користувача у групі та відповідно до прав проєкту;</li>
<li> <i>session</i> — ідентифікатор сеансу;</li>
<li> <i>widget</i> — адреса віджету для стишення сповіщення, пусто для глобального;</li>
<li> <i>template</i> — шаблон сповіщення, тобто бітова збірка відповідно до типів стишуваних сповіщень;</li>
<li> <i>return</i> — ознака повернення сповіщення, тобто стишення вимикається.</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;quietance</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/ses_AGLKS/%2fserv%2falarm"</span> <span class="na">tmpl=</span><span class="s">"7"</span> <span class="nt">/&gt;</span>
</pre></div>
<dl><dd><b><u>Отримання значень модифікованих візуальних атрибутів віджету сеансу</u></b><br /></dd>
<dd>Перевизначає загальний сервісний запит віджетів "<i>&lt;get path='/UI/VCAEngine/{wAddr}/%2fserv%2fattr' /&gt;</i>" щодо специфіки сеансу.<br /></dd>
<dd>ЗАП: <i>&lt;get path="/UI/VCAEngine/ses_<b>{wAddr}</b>/%2fserv%2fattr" tm="<b>{clock}</b>" /&gt;</i>
<ul><li> <i>wAddr</i> — локальна адреса віджету сеансу, на кшталт "/ses_AGLKS/pg_so/pg_2/pg_mn/pg_CM101/wdg_ElFigure1";</li>
<li> <i>clock</i> — значення внутрішнього лічильника (цикл життя) від попереднього опрацьованого запиту, для перевірки змінених; за нульового значення примусово додаються сервісні-віртуальні атрибути: "perm", "name".</li></ul></dd>
<dd>ВІДП: <i>&lt;get path="/UI/VCAEngine/ses_{wAddr}/%2fserv%2fattr" tm="{clock}" rez="<b>0</b>"&gt;<b>{attributes}</b>&lt;/get&gt;</i>
<ul><li> <i>attributes</i> — модифіковані від "clock" атрибути у тегах "el": <i>&lt;el id="<b>{ID}</b>" p="<b>{pos}</b>"&gt;<b>{value}</b>&lt;/el&gt;</i>
<ul><li> <i>ID</i> — ідентифікатор атрибуту;</li>
<li> <i>pos</i> — позиція-індекс атрибуту для стандартних;</li>
<li> <i>value</i> — значення атрибуту.</li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/ses_AGLKS/pg_so/pg_2/pg_mn/pg_CM101/wdg_ElFigure1/%2fserv%2fattr"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">tm=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"perm"</span> <span class="na">p=</span><span class="s">"-3"</span><span class="nt">&gt;</span>6<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"root"</span> <span class="na">p=</span><span class="s">"1"</span><span class="nt">&gt;</span>ElFigure<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"en"</span> <span class="na">p=</span><span class="s">"5"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"active"</span> <span class="na">p=</span><span class="s">"6"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"geomX"</span> <span class="na">p=</span><span class="s">"7"</span><span class="nt">&gt;</span>488<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"geomY"</span> <span class="na">p=</span><span class="s">"8"</span><span class="nt">&gt;</span>250<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"geomW"</span> <span class="na">p=</span><span class="s">"9"</span><span class="nt">&gt;</span>16<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"geomH"</span> <span class="na">p=</span><span class="s">"10"</span><span class="nt">&gt;</span>100<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"geomXsc"</span> <span class="na">p=</span><span class="s">"13"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"geomYsc"</span> <span class="na">p=</span><span class="s">"14"</span><span class="nt">&gt;</span>0.75<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"geomZ"</span> <span class="na">p=</span><span class="s">"11"</span><span class="nt">&gt;</span>-9<span class="nt">&lt;/el&gt;</span>
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<dl><dd><b><u>Встановлення групи значень визначених атрибутів віджету сеансу</u></b><br /></dd>
<dd>Перевизначає загальний сервісний запит віджетів "<i>&lt;set path='/UI/VCAEngine/{wAddr}/%2fserv%2fattr' /&gt;</i>"  щодо специфіки сеансу на кшталт опрацювання атрибуту "event" та виявлення активності-неактивності користувача.<br /></dd>
<dd>ЗАП[<b>{owner}-{grp}</b>]: <i>&lt;set path="/UI/VCAEngine/ses_<b>{wAddr}</b>/%2fserv%2fattr" noUser="<b>{noUser}</b>"&gt;<b>{attributes}</b>&lt;/set&gt;</i>
<ul><li> <i>owner</i>, <i>grp</i> — доступ на запис для власника проєкту або користувача у групі та відповідно до прав проєкту;</li>
<li> <i>wAddr</i> — локальна адреса віджету сеансу, на кшталт "/ses_AGLKS/pg_so/pg_2/pg_mn/pg_CM101/wdg_ElFigure1";</li>
<li> <i>noUser</i> — не маркувати це як активність користувача;</li>
<li> <i>attributes</i> —  атрибути зі значеннями у тегах "el": <i>&lt;el id="<b>{ID}</b>"&gt;<b>{value}</b>&lt;/el&gt;</i>
<ul><li> <i>ID</i> — ідентифікатор атрибуту;</li>
<li> <i>value</i> — встановлюване значення атрибуту.</li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;set</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/ses_AGLKS/pg_so/pg_2/pg_mn/pg_CM101/wdg_ElFigure1/%2fserv%2fattr"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"name"</span><span class="nt">&gt;</span>Нова назва<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"dscr"</span><span class="nt">&gt;</span>Новий опис<span class="nt">&lt;/el&gt;</span>
<span class="nt">&lt;/set&gt;</span>
</pre></div>
<dl><dd><b><u>Активація атрибуту для використання у якості візуального та його створення за відсутності</u></b><br /></dd>
<dd>ЗАП: <i>&lt;activate path="/UI/VCAEngine/ses_<b>{wAddr}</b>/%2fserv%2fattr%2f<b>{aID}</b>" aNm="<b>{aName}</b>" aTp="<b>{aType}</b>" aFlg="<b>{aFlags}</b>" aVls="<b>{aValues}</b>" aNms="<b>{aNames}</b>"&gt;<b>{aDef}</b>&lt;/activate&gt;</i>
<ul><li> <i>wAddr</i> — локальна адреса віджету сеансу, на кшталт "/ses_AGLKS/pg_so/pg_2/pg_mn/pg_CM101/wdg_ElFigure1";</li>
<li> <i>aID</i> — ідентифікатор атрибуту сеансу;</li>
<li> <i>aName</i> — ім'я атрибуту при його створені;</li>
<li> <i>aType</i> — тип атрибуту при його створені, дивіться <a href="API.html#TFld" title="Special:MyLanguage/Documents/API">об'єкт TFld</a>;</li>
<li> <i>aFlags</i> — прапорці атрибуту при його створені, дивіться <a href="API.html#TFld" title="Special:MyLanguage/Documents/API">об'єкт TFld</a>;</li>
<li> <i>aDef</i> — типове значення атрибуту при його створені;</li>
<li> <i>aValues</i> — значення атрибуту для вибіркових типів при його створені;</li>
<li> <i>aNames</i> — назви значень атрибуту для вибіркових типів при його створені.</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;activate</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/ses_AGLKS/pg_so/%2fserv%2fattr%2frunWin"</span> <span class="na">aNm=</span><span class="s">"Вікно виконання"</span> <span class="na">aTp=</span><span class="s">"1"</span> <span class="na">aFlg=</span><span class="s">"1"</span> <span class="na">aVls=</span><span class="s">"0;1;2"</span> <span class="na">aNms=</span><span class="s">"Original size;Maximize;Full screen"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/activate&gt;</span>
</pre></div>
<dl><dd><b><u>Отримання значень візуальних атрибутів гілки віджету сеансу, оптимізовано для мереж</u></b><br /></dd>
<dd>Перевизначає загальний сервісний запит віджетів "<i>&lt;get path='/UI/VCAEngine/{wAddr}/%2fserv%2fattrBr' /&gt;</i>"  щодо специфіки сеансу.<br /></dd>
<dd>ЗАП: <i>&lt;get path="/UI/VCAEngine/ses_<b>{wAddr}</b>/%2fserv%2fattrBr" tm="<b>{clock}</b>" FullTree="<b>{FullTree}</b>" /&gt;</i>
<ul><li> <i>wAddr</i> — локальна адреса віджету сеансу, на кшталт "/ses_AGLKS/pg_so/pg_2/pg_mn/pg_CM101/wdg_ElFigure1";</li>
<li> <i>clock</i> — значення внутрішнього лічильника (цикл життя) від попереднього опрацьованого запиту, для перевірки змінених; за нульового значення примусово додаються сервісні-віртуальні атрибути: "perm", "name".</li>
<li> <i>fullTree</i> — отримання повного дерева віджетів незалежно від наявності змін, без атрибутів.</li></ul></dd>
<dd>ВІДП: <i>&lt;get path="/UI/VCAEngine/ses_{wAddr}/%2fserv%2fattrBr" tm="{clock}" FullTree="{FullTree}" rez="<b>0</b>"&gt;<b>{attributes}</b> <b>{widgets}</b>&lt;/get&gt;</i>
<ul><li> <i>attributes</i> — опрацьовані атрибути у тегах "el": <i>&lt;el id="<b>{ID}</b>" p="<b>{pos}</b>"&gt;<b>{value}</b>&lt;/el&gt;</i>
<ul><li> <i>ID</i> — ідентифікатор атрибуту;</li>
<li> <i>pos</i> — позиція-індекс атрибуту для стандартних;</li>
<li> <i>value</i> — значення атрибуту.</li></ul></li>
<li> <i>widgets</i> — дочірні віджети у тегах "w": <i>&lt;w id="<b>{ID}</b>"&gt;<b>{attributes}</b> <b>{widgets}</b>&lt;/w&gt;</i>
<ul><li> <i>ID</i> — ідентифікатор віджету.</li></ul></li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/ses_AGLKS/pg_so/pg_2/pg_mn/pg_CM101/%2fserv%2fattrBr"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">tm=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"name"</span> <span class="na">p=</span><span class="s">"-4"</span><span class="nt">&gt;</span>CM101<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"perm"</span> <span class="na">p=</span><span class="s">"-3"</span><span class="nt">&gt;</span>6<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"root"</span> <span class="na">p=</span><span class="s">"1"</span><span class="nt">&gt;</span>Box<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"en"</span> <span class="na">p=</span><span class="s">"5"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"active"</span> <span class="na">p=</span><span class="s">"6"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"geomX"</span> <span class="na">p=</span><span class="s">"7"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"geomY"</span> <span class="na">p=</span><span class="s">"8"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"geomW"</span> <span class="na">p=</span><span class="s">"9"</span><span class="nt">&gt;</span>900<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"geomH"</span> <span class="na">p=</span><span class="s">"10"</span><span class="nt">&gt;</span>580<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;w</span> <span class="na">id=</span><span class="s">"AT101_1"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"perm"</span> <span class="na">p=</span><span class="s">"-3"</span><span class="nt">&gt;</span>6<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"root"</span> <span class="na">p=</span><span class="s">"1"</span><span class="nt">&gt;</span>ElFigure<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"en"</span> <span class="na">p=</span><span class="s">"5"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"active"</span> <span class="na">p=</span><span class="s">"6"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"geomX"</span> <span class="na">p=</span><span class="s">"7"</span><span class="nt">&gt;</span>338<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"geomY"</span> <span class="na">p=</span><span class="s">"8"</span><span class="nt">&gt;</span>320<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"geomW"</span> <span class="na">p=</span><span class="s">"9"</span><span class="nt">&gt;</span>80<span class="nt">&lt;/el&gt;</span>
    <span class="nt">&lt;el</span> <span class="na">id=</span><span class="s">"geomH"</span> <span class="na">p=</span><span class="s">"10"</span><span class="nt">&gt;</span>100<span class="nt">&lt;/el&gt;</span>
  <span class="nt">&lt;/w&gt;</span>
<span class="nt">&lt;/get&gt;</span>
</pre></div>
<dl><dd><b><u>Отримання значення специфічного до сеансу атрибуту віджету сеансу</u></b><br /></dd>
<dd>ЗАП: <i>&lt;get path="/UI/VCAEngine/ses_<b>{wAddr}</b>/%2fserv%2fattrSess%2f<b>{aID}</b>" /&gt;</i>
<ul><li> <i>wAddr</i> — локальна адреса віджету сеансу, на кшталт "/ses_AGLKS/pg_so/pg_2/pg_mn/pg_CM101/wdg_ElFigure1";</li>
<li> <i>aID</i> — ідентифікатор специфічного до сеансу атрибуту.</li></ul></dd>
<dd>ВІДП: <i>&lt;get path="/UI/VCAEngine/ses_{wAddr}/%2fserv%2fattrSess%2f{aID}" rez="<b>0</b>"&gt;<b>{value}</b>&lt;/get&gt;</i>
<ul><li> <i>value</i> — значення атрибуту.</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;get</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/ses_AGLKS/pg_so/pg_2/pg_mn/pg_CM101/%2fserv%2fattrSess%2ftestA"</span> <span class="na">rez=</span><span class="s">"0"</span> <span class="na">user=</span><span class="s">"roman"</span><span class="nt">&gt;</span>тестове значення<span class="nt">&lt;/get&gt;</span>
</pre></div>
<dl><dd><b><u>Встановлення значення специфічного до сеансу атрибуту віджету сеансу</u></b><br /></dd>
<dd>ЗАП[<b>{owner}-{grp}</b>]: <i>&lt;set path="/UI/VCAEngine/ses_<b>{wAddr}</b>/%2fserv%2fattrSess%2f<b>{aID}</b>"&gt;<b>{value}</b>&lt;/get&gt;</i>
<ul><li> <i>owner</i>, <i>grp</i> — доступ на запис для власника проєкту або користувача у групі та відповідно до прав проєкту;</li>
<li> <i>wAddr</i> — локальна адреса віджету сеансу, на кшталт "/ses_AGLKS/pg_so/pg_2/pg_mn/pg_CM101/wdg_ElFigure1";</li>
<li> <i>aID</i> — ідентифікатор специфічного до сеансу атрибуту;</li>
<li> <i>value</i> — значення атрибуту.</li></ul></dd></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 20pt"><pre><span class="nt">&lt;set</span> <span class="na">path=</span><span class="s">"/UI/VCAEngine/ses_AGLKS/pg_so/pg_2/pg_mn/pg_CM101/%2fserv%2fattrSess%2ftestA"</span><span class="nt">&gt;</span>тестове значення<span class="nt">&lt;/set&gt;</span>
</pre></div>
<p><br />
</p>
<h3><span class="mw-headline" id="Object_of_the_dynamic_tree_node_.28TCntrNode.29"><span class="mw-headline-number">14.5</span> <span id="TCntrNode" title="#TCntrNode">Object of the dynamic tree node (TCntrNode)</span></span></h3>
<table class="wikitable">

<tr>
<td> <b>Inherited:</b> </td>
<td> By all the dynamic and controlled objects directly or through children.
</td></tr></table>
<p><b>Data:</b><br />
</p>
<dl><dd> Masks of the security access (definition):</dd></dl>
<ul><li> <i>SEC_XT</i> — Execution (0x01);</li>
<li> <i>SEC_WR</i> — Writing (0x02);</li>
<li> <i>SEC_RD</i> — Reading (0x04).</li></ul>
<dl><dd> Named rights of access to control elements (definition):</dd></dl>
<ul><li> <i>R_R_R_</i> (0444) — access to all read-only;</li>
<li> <i>R_R___</i> (0440) — read access only to the owner and group;</li>
<li> <i>R_____</i> (0400) — read access only to the owner;</li>
<li> <i>_W_W_W</i> (0222) — access to all write-only;</li>
<li> <i>RWRWRW</i> (0666) — full access to all;</li>
<li> <i>RWRWR_</i> (0664) — full access to the owner and group, and for the rest — the read-only;</li>
<li> <i>RWR_R_</i> (0644) — full access to the owner and for the group and the rest — the read-only;</li>
<li> <i>RWR___</i> (0640) — full access to the owner, read-only — to the group and closed for the rest;</li>
<li> <i>RW____</i> (0600) — full access to the owner, but for the group and everyone else is closed.</li></ul>
<p>Dynamic node's flags (enum TCntrNode::Flag):
</p>
<ul><li> <i>TCntrNode::DoDisable</i> — switching-off (0);</li>
<li> <i>TCntrNode::Disabled</i> — disabled (1);</li>
<li> <i>TCntrNode::DoEnable</i> — switching-on (2);</li>
<li> <i>TCntrNode::Enabled</i> — enabled (3);</li>
<li> <i>TCntrNode::Modified</i> — sign of the Modified state (0x04);</li>
<li> <i>TCntrNode::ModifiedS</i> — sign of saving the Modified state at it setting just in the loading (0x08);</li>
<li> <i>TCntrNode::SaveForceOnChild</i> — sign of saving forcibly on children Modified flag set (0x10)</li>
<li> <i>TCntrNode::LoadForcibly</i> — sign of the node forcibly loading, then the errors suppression for not modified nodes before that operation (0x20).</li></ul>
<p>Flags of the enabling/disabling modes of the node (enum TCntrNode::EnDisFlag):
</p>
<ul><li> <i>TCntrNode::NodeNoFlg</i> (0) — no node flag;</li></ul>
<dl><dd> <i>Enable flags</i></dd></dl>
<ul><li> <i>TCntrNode::NodeConnect</i> (0x01) — connection of the node;</li>
<li> <i>TCntrNode::NodeRestore</i> (0x02) — restoration of the connection of the node;</li></ul>
<dl><dd> <i>Disable flags</i></dd></dl>
<ul><li> <i>TCntrNode::NodeRemove</i> (0x01) — node complete removing also from the storage;</li>
<li> <i>TCntrNode::NodeRemoveOnlyStor</i> (0x02) — node removing only from the storage;</li>
<li> <i>TCntrNode::NodeSpecific</i> (0x100) — reserved for the node specific &gt; 0x100.</li></ul>
<p>Modification of the node flags (enum TCntrNode::ModifFlag):
</p>
<ul><li> <i>TCntrNode::Self</i> — the given node is modified;</li>
<li> <i>TCntrNode::Child</i> — the child nodes are modified;</li>
<li> <i>TCntrNode::All</i> — the given node and the child ones are modified.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TCntrNode( TCntrNode *prev = NULL );</i> — Initialization with an indication of the parent node <i>prev</i>.</li>
<li> <i>virtual string objName( );</i> — Object name. Object-heir should extend the definition of aggregate object name.</li>
<li> <i>virtual TCntrNode &amp;operator=( const TCntrNode &amp;node );</i> — Virtual copy function of the dynamic tree nodes.</li>
<li> <i>void cntrCmd( XMLNode *opt, int lev = 0, const string &amp;path = "", int off = 0 );</i> — Command of work with the control interface of the system. The transport transitions to the full path of the following form are supported: "**/sub_Security/usr_root/%2fgen**" где <i>%2fgen</i> — encoded sub-path to a particular field of the page (/gen).</li>
<li> <i>static XMLNode *ctrId( XMLNode *inf, const string &amp;n_id, bool noex = false );</i> — Getting the XML node by the attribute's value "id" <i>n_id</i>. XML requests of the node by the full path to it are supported (node1/node2/node3).</li>
<li> <i>static XMLNode *_ctrMkNode( const char *n_nd, XMLNode *nd, int pos, const char *req, const string &amp;dscr, int perm = RWRWRW, const char *user = "root", const char *grp = "root" );</i></li></ul>
<dl><dd><i>static XMLNode *ctrMkNode( const char *n_nd, XMLNode *nd, int pos, const char *req, const string &amp;dscr int perm = RWRWRW, const char *user = "root", const char *grp = "root", int n_attr = 0, ... );</i></dd>
<dd><i>static XMLNode *ctrMkNode2( const char *n_nd, XMLNode *nd, int pos, const char *req, const string &amp;dscr, int perm = RWRWRW, const char *user = "root", const char *grp = "root", ... );</i> — Adding the control element to the page. It is possible to specify the set of additional attributes in the number of  <i>n_attr</i> as follows: "<b>{attribute1},{values1},{attribute2},{values2},...</b>" or by zero pointer at the end of the pair sequence.</dd></dl>
<ul><li> <i>bool ctrRemoveNode( XMLNode *nd, const char *path );</i> — Removing the control element <i>path</i> from the page <i>nd</i>.</li>
<li> <i>static bool ctrChkNode( XMLNode *nd, const char *cmd = "get", int perm = R_R_R_, const char *user = "root", const char *grp = "root", char mode = SEC_RD );</i> — Checking for the dynamic command getting <i>cmd</i> and for the existence of rights to its execution.</li>
<li> <i>ResMtx &amp;dataRes( );</i> — Mutex for using resources of the node in common purpose.</li>
<li> <i>virtual const char *nodeName( ) const;</i> — Node's name.</li>
<li> <i>virtual const char *nodeNameSYSM( ) const;</i> — System message's location entry name, to place it to the system's message text by function "mess_sys" and "err_sys". Empty value, by default, to pass the node.</li>
<li> <i>string nodePath( char sep = 0, bool from_root = true ) const;</i> — Getting the full path to the node, beginning from the root <i>from_root</i>, and using the separator <i>sep</i> or standard path recording.</li>
<li> <i>void nodeList( vector&lt;string&gt; &amp;list, const string&amp; gid = "" );</i> — Child nodes list <i>list</i> in the specified group <i>gid</i>.</li>
<li> <i>AutoHD&lt;TCntrNode&gt; nodeAt( const string &amp;path, int lev = 0, char sep = 0, int off = 0, bool noex = false );</i> — Attachment to the child node.</li>
<li> <i>void nodeDel( const string &amp;path, char sep = 0, int flag = NodeNoFlg );</i> — Deleting the node using its path.</li>
<li> <i>static void nodeCopy( const string &amp;src, const string &amp;dst, const string &amp;user = "root" );</i> — Copying the nodes of the dynamic tree.</li>
<li> <i>TCntrNode *nodePrev( bool noex = false ) const;</i> — Address of the parent node.</li>
<li> <i>char nodeFlg( );</i> — Node's flag.</li>
<li> <i>void setNodeFlg( char flg );</i> — Set flags <i>TCntrNode::SelfModify</i>, <i>TCntrNode::SelfModifyS</i> and <i>TCntrNode::SelfSaveForceOnChild</i>.</li>
<li> <i>char nodeMode( ) const;</i> — Node's status.</li>
<li> <i>unsigned nodeUse( bool selfOnly );</i> — Number of the connections to the node. <i>selfOnly</i> — only self connections, without childs.</li>
<li> <i>unsigned nodePos( );</i> — The position of the node in the parent-node's container. It is valid only for ordered containers.</li>
<li> <i>int isModify( int mflg = TCntrNode::All );</i> — Checking for the modification of the node or nodes' branch.</li>
<li> <i>void modif( bool save = false, bool forceLoad = false );</i> — Setting the modification sign of the node, with saving <i>save</i> the sign at the loading and marking for the force loading <i>forceLoad</i>.</li>
<li> <i>void modifG( bool forceLoad = false );</i> — Setting the modification sign of the node branch, with marking for the force loading <i>forceLoad</i>.</li>
<li> <i>void modifClr( bool save = false );</i> — Clearing the modification sign or the saving sign <i>save</i> of the node.</li>
<li> <i>void modifGClr( );</i> — Clearing the modification sign of the node branch.</li>
<li> <i>void load( TConfig *cfg = NULL, string *errs = NULL );</i> — Load the dynamic tree node for ready configuration <i>cfg</i>. The loading errors place to <i>errs</i> by lines.</li>
<li> <i>void save( unsigned lev = 0, string *errs = NULL );</i> — Saving the dynamic tree node, on nesting level <i>lev</i> (service). The saving errors place to <i>errs</i> by lines.</li>
<li> <i>virtual void AHDConnect( );</i> — Connection to the node (capture of the resource).</li>
<li> <i>virtual bool AHDDisConnect( );</i> — Disсonnection from the node (release of the resource). Resource will remove on zero result.</li>
<li> <i>void mess_sys( int8_t level, const char *fmt,  ... );</i> — The system message forms for the node path as the category, the <i>level</i>, the formatted message <i>fmt</i> appended by the node location and followed arguments.</li>
<li> <i>TError err_sys( const char *fmt,  ... ) const; TError err_sys( int cod, const char *fmt,  ... ) const;</i> — The error object forms for the node path as the category, the code <i>cod</i>, the formatted message <i>fmt</i> appended by the node location and followed arguments.</li>
<li> <i>virtual TVariant objPropGet( const string &amp;id );</i> — Request of the node's property as the user's object.</li>
<li> <i>virtual void objPropSet( const string &amp;id, TVariant val );</i> — Setting the node's property as the user's object.</li>
<li> <i>virtual TVariant objFuncCall( const string &amp;id, vector&lt;TVariant&gt; &amp;prms, const string &amp;user_lang );</i> — Node function <i>id</i> call with the parameters <i>prms</i> and for user/language <i>user_lang</i> ("{user}\n{lang}").</li>
<li> <i>int8_t grpSize( );</i> — Number of the containers with the child nodes.</li>
<li> <i>int8_t grpId( const string &amp;sid );</i> — Getting the index of the group by its ID.</li>
<li> <i>virtual AutoHD&lt;TCntrNode&gt; chldAt( int8_t igr, const string &amp;name, const string &amp;user = "" ) const;</i> — Attachment to the child node <i>name</i> of the container <i>gr</i> of the user <i>user</i>.</li>
<li> <i>virtual void chldList( int8_t igr, vector&lt;string&gt; &amp;list, bool noex = false ) const;</i> — The list of the child nodes <i>list</i> in the specified container <i>gr</i>.</li>
<li> <i>virtual bool chldPresent( int8_t igr, const string &amp;name ) const;</i> — Check for the presence of the specified child node <i>name</i> in the container <i>gr</i>.</li></ul>
<p><b>Protected methods:</b>
</p>
<ul><li> <i>virtual void cntrCmdProc( XMLNode *req );</i> — Function of requests' processing of the control interface. It must be redefined by the child.</li>
<li> <i>void nodeEn( int flag = NodeNoFlg );</i> — Node's enabling.</li>
<li> <i>void nodeDis( long tm = 0, int flag = NodeNoFlg );</i> — Disabling of the node with the flag transfer.</li>
<li> <i>void nodeDelAll( );</i> — Clear all containers with child nodes.</li>
<li> <i>void setNodePrev( TCntrNode *node );</i> — Setting the parent node to <i>node</i>.</li>
<li> <i>void setNodeMode( char mode );</i> — Setting the node's status.</li>
<li> <i>GrpEl	&amp;grpAt( int8_t id );</i> — Access to the structure of the group.</li>
<li> <i>unsigned grpAdd( const string &amp;id, bool ordered = false );</i> — Adding the container of the child nodes with the prefix <i>id</i> and the possibility of an orderly storage <i>ordered</i>. Returns the ID of the new container.</li>
<li> <i>void grpDel( int8_t id );</i> — Deleting the container of the child nodes <i>id</i>.</li>
<li> <i>virtual string chldAdd( int8_t igr, TCntrNode *node, int pos = -1 );</i> — Adds the child node <i>node</i> to the container <i>gr</i> and position <i>pos</i>. Returns the actual node identifier or name, after it cleaning and shrinking.</li>
<li> <i>void chldDel( int8_t gr, const string &amp;name, long tm = -1, int flags = NodeNoFlg );</i> — Deleting the child node <i>name</i> from the container <i>gr</i> according the EnDisFlag <i>flags</i>.</li>
<li> <i>virtual void preEnable( int flag );</i> — The connection preact. It is called before the actual connection.</li>
<li> <i>virtual void postEnable( int flag );</i> — The connection preact. It is called after the actual connection.</li>
<li> <i>virtual void preDisable( int flag );</i> — The disconnection preact. It is called before the actual disconnection.</li>
<li> <i>virtual void postDisable( int flag );</i> — The disconnection preact. It is called before the actual disconnection (before deleting).</li>
<li> <i>virtual void load_( ); virtual void load_( TConfig *cfg );</i> — The function of the node specific loading, for ready configuration <i>cfg</i> also.</li>
<li> <i>virtual void load__( );</i> — The function of the node specific loading in the loading end.</li>
<li> <i>virtual void save_( );</i> — The function of the saving child node calling.</li>
<li> <i>string storage( const string &amp;cnt, bool forQueueOfData = false ) const;</i> — getting the work or the queued latest storage at <i>forQueueOfData</i> for the storage container <i>cnt</i>.</li>
<li> <i>void setStorage( string &amp;cnt, const string &amp;vl, bool forQueueOfData = false );</i> — setting the work or the queued latest storage at <i>forQueueOfData</i> for the storage container <i>cnt</i>. Empty <i>vl</i> and <i>forQueueOfData</i> removes the first storage from the queue.</li></ul>
<h2><span class="mw-headline" id="Resources_locking"><span class="mw-headline-number">15</span> Resources locking</span></h2>
<p>Most of the units and subsystems of OpenSCADA are dynamic, ie they allow the creation/deletion/configuration while the system is working. Taking into account the multi-threading of the system, this functionality imposes stringent requirements for synchronization of threads. For synchronization in the system the resources are used, functions of which are localized in the objects "Res" and "ResAlloc". Object "Res" provides storage of the resource, providing the functions of capture/release for the read and write. In object "ResAlloc" the automatic release of the resource functions are implemented. Automatic resource involves the creation of a local resource object with its automatic release at fracture (in the destructor). Using of automatic resource makes the work with resources when using the exceptions much easier.
</p><p>Any dynamic system object is inherited from "TCntrNode" object, which contains a mechanism to connect via the "AutoHD" template. The main function of the template is to store the link to the object and the capture of the resource, excluding the deleting of the object at the time of use. Template supports copying the resource and its release in case of destruction of the template object. For clarity of the access to the objects generated by "TCntrNode" the "AutoHD" template supports casting, based on the dynamic cast.
</p>
<h3><span class="mw-headline" id="Resource_R.2FW_lock_object_.28ResRW.29"><span class="mw-headline-number">15.1</span> <span id="ResRW" title="#ResRW">Resource R/W lock object (ResRW)</span></span></h3>
<p><b>Public methods:</b>
</p>
<ul><li> <i>ResRW( );</i> — Initialization of the resource.</li>
<li> <i>static void resRequestW( long tm = 0 );</i> — Request the resource for writing/modification with wait timeout <i>tm</i> (in milliseconds).</li>
<li> <i>bool resTryW( );</i> — Request try the resource for writing/modification. On success return TRUE else FALSE.</li>
<li> <i>static void resRequestR( long tm = 0 );</i> — Request the resource for reading with wait timeout <i>tm</i> (in milliseconds).</li>
<li> <i>bool resTryR( );</i> — Request try the resource for reading. On success return TRUE else FALSE.</li>
<li> <i>static void resRelease( );</i> — Release of the resource.</li></ul>
<h3><span class="mw-headline" id="Automatic_resource_RW_unlock_object_.28ResAlloc.29"><span class="mw-headline-number">15.2</span> <span id="ResAlloc" title="#ResAlloc">Automatic resource RW unlock object (ResAlloc)</span></span></h3>
<p><b>Public methods:</b>
</p>
<ul><li> <i>ResAlloc( ResRW &amp;rid );</i> — Initialization of the automatically released resource for the previously selected identifier  <i>rid</i>.</li>
<li> <i>ResAlloc( ResRW &amp;rid, bool write, long tm = 0 );</i> — Initialization of the automatically released resource for the previously selected identifier <i>rid</i>. With the specification of the resource type <i>write</i> (read/write).</li>
<li> <i>void request( bool write = false, long tm = 0 ); void lock( bool write = false, unsigned short tm = 0 );</i> — Request of the resource in the specified mode <i>write</i> (read/write).</li>
<li> <i>void release( ); void unlock( );</i> — Release of the resource.</li></ul>
<h3><span class="mw-headline" id="Template_.28AutoHD.29"><span class="mw-headline-number">15.3</span> <span id="AutoHD" title="#AutoHD">Template (AutoHD)</span></span></h3>
<p><b>Public methods:</b>
</p>
<ul><li> <i>AutoHD( );</i> — Initializing without linkage to the object.</li>
<li> <i>AutoHD( ORes *node, const string &amp;who = "" );</i> — Initialization with the linkage to the object <i>node</i>. The object must contain the function AHDConnect() and AHDDisConnect().</li>
<li> <i>AutoHD( const AutoHD &amp;hd );</i> — Copyng constructor.</li>
<li> <i>template &lt;class ORes1&gt; AutoHD( const AutoHD&lt;ORes1&gt; &amp;hd_s, bool nosafe = false );</i> — Сast constructor in safe mode casting (by help dynamic_cast). Return free resource on impossible cast.</li>
<li> <i>ORes &amp;at( ) const;</i> — Getting the object by the resource. </li>
<li> <i>AutoHD &amp;operator=(const AutoHD &amp;hd);</i> — Copying of the resources.</li>
<li> <i>bool operator==(const AutoHD &amp;hd);</i> — Compare objects into resource by pointer.</li>
<li> <i>void free( );</i> — Release of the resource.</li>
<li> <i>bool freeStat( ) const;</i> — The sign "The resource is free".</li></ul>
<h3><span class="mw-headline" id="Resources_allocation_object.2C_by_mutex_.28ResMtx.29"><span class="mw-headline-number">15.4</span> <span id="ResMtx" title="#ResMtx">Resources allocation object, by mutex (ResMtx)</span></span></h3>
<p><b>Public methods:</b>
</p>
<ul><li> <i>ResMtx( bool isRecurs = true );</i> — Initialization of a mutex object with recursion <i>isRecurs</i>.</li>
<li> <i>void lock( );</i> — Mutex lock. Return zero at the success.</li>
<li> <i>void unlock( );</i> — Mutex unlock. Return zero at the success.</li>
<li> <i>int tryLock( );</i> — Mutex try lock, without wait for free. Return zero at success.</li>
<li> <i>pthread_mutex_t &amp;mtx( );</i> — Direct link to the mutex structure.</li></ul>
<h3><span class="mw-headline" id="Object_of_the_string_with_the_access_shared_by_the_resource_.28ResString.29"><span class="mw-headline-number">15.5</span> <span id="ResString" title="#ResString">Object of the string with the access shared by the resource (ResString)</span></span></h3>
<p><b>Public methods:</b>
</p>
<ul><li> <i>explicit ResString( const string &amp;vl = "" );</i> — Initialization of the string with the specified value <i>vl</i>.</li>
<li> <i>ResString &amp;operator=( const string &amp;val );</i> — Function for implicit conversion from <i>std::string</i>.</li>
<li> <i>operator string( );</i> — Function for implicit conversion to <i>std::string</i>.</li>
<li> <i>size_t size( );</i> — The string size.</li>
<li> <i>bool empty( );</i> — The string empty.</li>
<li> <i>void setVal( const string &amp;vl );</i> — Setting the string's value to <i>vl</i>.</li>
<li> <i>const string &amp;getVal( );</i> — Getting the string's value.</li>
<li> <i>const string &amp;getValRef( );</i> — Getting a direct reference to the string <i>std::string</i>. The resource is ignored when you use this function!</li></ul>
<h3><span class="mw-headline" id="Conditional_variable_object.2C_by_mutex_.28CondVar.29"><span class="mw-headline-number">15.6</span> <span id="CondVar" title="#CondVar">Conditional variable object, by mutex (CondVar)</span></span></h3>
<p><b>Public methods:</b>
</p>
<ul><li> <i>CondVar( );</i> — Initialization of the conditional variable.</li>
<li> <i>int wait( ResMtx &amp;mtx, unsigned short tm = 0 );</i> — wait for the conditional variable wake up for the timeout <i>tm</i> with the mutex <i>mtx</i>.</li>
<li> <i>int wakeOne( );</i> — wake up one thread.</li>
<li> <i>int wakeAll( );</i> — wake up all threads.</li></ul>
<h3><span class="mw-headline" id="Object_of_automatic_unlock_POSIX_mutex_.28MtxAlloc.29"><span class="mw-headline-number">15.7</span> <span id="MtxAlloc" title="#MtxAlloc">Object of automatic unlock POSIX mutex (MtxAlloc)</span></span></h3>
<p><b>Public methods:</b>
</p>
<ul><li> <i>MtxAlloc( ResMtx &amp;iM, bool lock = false );</i> — Initialization of automatic unlock mutex for early allocated identifier <i>iM</i>. With the <i>lock</i> set at a creation.</li>
<li> <i>int lock( );</i> — The resource lock. Return zero at the success.</li>
<li> <i>int unlock( );</i> — The resource unlock. Return zero at the success.</li>
<li> <i>int tryLock( );</i> — The resource try lock, without wait for free. Return zero at the success.</li></ul>
<h3><span class="mw-headline" id="Object_of_the_string_with_the_access_shared_by_the_global_the_data_resource_.28mutex.29_.28MtxString.29"><span class="mw-headline-number">15.8</span> <span id="MtxString" title="#MtxString">Object of the string with the access shared by the global the data resource (mutex) (MtxString)</span></span></h3>
<p><b>Public methods:</b>
</p>
<ul><li> <i>MtxString( ResMtx &amp;iM );</i> — The string initialization with the access sharing by resource <i>iM</i>.</li>
<li> <i>MtxString &amp;operator=( const string &amp;val );</i> — Function for implicit conversion from <i>std::string</i>.</li>
<li> <i>operator string( );</i> — Function for implicit conversion to <i>std::string</i>.</li>
<li> <i>size_t size( );</i> — The string size.</li>
<li> <i>bool empty( );</i> — The string empty.</li>
<li> <i>void setVal( const string &amp;vl );</i> — Setting the string's value to <i>vl</i>.</li>
<li> <i>const string &amp;getVal( );</i> — Getting the string's value.</li>
<li> <i>const string &amp;getValRef( );</i> — Getting a direct reference to the string <i>std::string</i>. The resource is ignored when you use this function!</li></ul>
<h2><span class="mw-headline" id="Other_generic_objects"><span class="mw-headline-number">16</span> Other generic objects</span></h2>
<p>XML in OpenSACDA is represented by the object of the XML-tag — XMLNode.
</p><p>Errors of the exceptions are handled by the error object "TError".
</p>
<h3><span class="mw-headline" id="XML-tag_.28XMLNode.29"><span class="mw-headline-number">16.1</span> <span id="XMLNode" title="#XMLNode">XML-tag (XMLNode)</span></span></h3>
<p><b>Data:</b><br />
Options for XML-file loading (enum — XMLNode::LoadFlgs):
</p>
<ul><li> <i>XMLNode::LD_NO</i> (0x00) — no the loading flag;</li>
<li> <i>XMLNode::LD_Full</i> (0x01) — load XML full;</li>
<li> <i>XMLNode::LD_NoTxtSpcRemEnBeg</i> (0x02) — no remove spaces for begin and end tag's text, for not full mode.</li></ul>
<p>Options of the function of XML-file generation (enum - XMLNode::SaveView):
</p>
<ul><li> <i>XMLNode::BrOpenPrev</i> (0x01) — insert the end of the line before the opening tag;</li>
<li> <i>XMLNode::BrOpenPast</i> (0x02) — insert the end of the line after the opening tag;</li>
<li> <i>XMLNode::BrClosePast</i> (0x04) — insert the end of the line after the closing tag;</li>
<li> <i>XMLNode::BrTextPast</i> (0x08) — insert the end of the line after the tag text;</li>
<li> <i>XMLNode::BrSpecBlkPast</i> (0x10) — insert the end of the line after the computed instruction;</li>
<li> <i>XMLNode::BrAllPast</i> (0x1E) — insert the end of the line after the all elements;</li>
<li> <i>XMLNode::XMLHeader</i> (0x20) — insert the standard xml-header;</li>
<li> <i>XMLNode::XHTMLHeader</i> (0x40) — insert the standard XHTML-header;</li>
<li> <i>XMLNode::Clean</i> (0x80) — result clean from comments and procedure insertions;</li>
<li> <i>XMLNode::MissTagEnc</i> (0x100) — to miss for tags name encoding;</li>
<li> <i>XMLNode::MissAttrEnc</i> (0x200) — to miss for attributes name encoding;</li>
<li> <i>XMLNode::BinShield</i> (0x400) — shield the binary symbols [\x0-\x8\xB-\xC\x0E-\x1F] and wrong UTF-8.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>XMLNode( const string &amp;name = "" );</i> — Initialization of the tag with the <i>name</i>.</li>
<li> <i>XMLNode( const XMLNode &amp;nd );</i> — Copy constructor.</li>
<li> <i>XMLNode &amp;operator=( const XMLNode &amp;prm );</i> — Copying a branch of the XML-tree from <i>prm</i>.</li>
<li> <i>string name( ) const;</i> — Tag's name.</li>
<li> <i>XMLNode* setName( const string &amp;s );</i> — Setting the tag's name to <i>s</i>.</li>
<li> <i>string text( bool childs = false, bool recursive = false ) const;</i> — Tag's text. <i>childs</i> — for text getting from special text nodes.</li>
<li> <i>XMLNode* setText( const string &amp;s, bool childs = false );</i> — Setting the tag's text to <i>s</i>. <i>childs</i> — for set text to special text node.</li>
<li> <i>void attrList( vector&lt;string&gt; &amp; list ) const;</i> — <i>List</i> of attributes in the tag.</li>
<li> <i>XMLNode* attrDel( const string &amp;name );</i> — Deleting of the attribute <i>name</i>.</li>
<li> <i>void attrClear( );</i> — Clean up the tag's attributes.</li>
<li> <i>string attr( const string &amp;name, bool caseSens = true, bool *presence = NULL ) const;</i> — Getting the attribute <i>name</i> for the case-sensitivity <i>caseSens</i> and with the <i>presence</i> sign.</li>
<li> <i>XMLNode* setAttr( const string &amp;name, const string &amp;val );</i> — Setting/creation of the attribute <i>name</i> with the value <i>val</i>.</li>
<li> <i>void load( const string &amp;vl, unsigned flg = 0, const string &amp;cp = "UTF-8" );</i> — Load/parsing of the XML-file, with source encoding <i>cp</i> and flags <i>flg</i>.</li>
<li> <i>string save( unsigned flg = 0, const string &amp;cp = "UTF-8" ) const;</i> — Saving/creation of the XML-file with the formatting parameter <i>flg</i> and encoding to <i>cp</i>.</li>
<li> <i>XMLNode* clear( );</i> — Clear the tag (recursively, including all childs).</li>
<li> <i>bool childEmpty( ) const;</i> — Check for empty included tags.</li>
<li> <i>unsigned childSize( ) const;</i> — Number of included tags.</li>
<li> <i>void childAdd( XMLNode *nd ); XMLNode* childAdd( const string &amp;name = "" );</i> — Adding the included tag.</li>
<li> <i>int childIns( int id, XMLNode *nd );</i> — Insert of the included tag <i>nd</i> to the position <i>id</i>. Negative <i>id</i> counts from end.</li>
<li> <i>XMLNode* childIns( int id, const string &amp;name = "" );</i> — Insert of the included tag with the name <i>name</i> to the position <i>id</i>. Negative <i>id</i> counts from end.</li>
<li> <i>void childDel( const int id );</i> — Deleting of the included tag <i>id</i>. Negative <i>id</i> counts from end.</li>
<li> <i>void childDel( XMLNode *nd );</i> — Deleting of the included tag using its address <i>nd</i>.</li>
<li> <i>void childClear( const string &amp;name = "" );</i> — Clean up of the included tag <i>name</i>.</li>
<li> <i>XMLNode* childGet( const int, bool noex = false ) const;</i> — Getting the included tag by its index number.</li>
<li> <i>XMLNode* childGet( const string &amp;name, const int numb = 0, bool noex = false ) const;</i> — Getting of the included <i>numb</i> indexed tag by the tag's name <i>name</i>. <i>noex</i> indicates the prohibition of the generation of exception in the case of absence of the tag.</li>
<li> <i>XMLNode* childGet( const string &amp;attr, const string &amp;vl, bool noex = false ) const;</i> — Getting the included <i>numb</i> indexed tag by its value <i>vl</i> of the attribute <i>attr</i>. <i>noex</i> indicates the prohibition of the generation of exception in the case of absence of the tag.</li>
<li> <i>XMLNode* getElementBy( const string &amp;attr, const string &amp;val );</i> — Included node search by the value <i>val</i> of the attribute <i>attr</i>.</li>
<li> <i>void getElementsBy( const string &amp;tag, const string &amp;attr, const string &amp;val, TArrayObj *rez );</i> — get elements array <i>rez</i> from the tree by <i>tag</i> (empty for all) and attribute <i>attr</i> value <i>val</i> (empty for pass).</li>
<li> <i>XMLNode* parent( );</i> — Parent tag of the tag.</li>
<li> <i>XMLNode* root( );</i> — Root tag of the tag.</li></ul>
<h3><span class="mw-headline" id="Error_exception_.28TError.29"><span class="mw-headline-number">16.2</span> <span id="TError" title="#TError">Error exception (TError)</span></span></h3>
<p><b>Data:</b><br />
Error codes (enum — TError::Codes):
</p>
<ul><li> <i>TError::NoCode (0)</i>, <i>TError::NoError (0)</i> — no error;</li>
<li> <i>TError::Core_CntrWarning (1)</i> — core level, warning of the control interface;</li>
<li> <i>TError::Core_CntrError (2)</i> — core level, error of the control interface;</li>
<li> <i>TError::Core_RWLock_EDEADLK (3)</i> — core level, deadlock of the RWLock;</li>
<li> <i>TError::Core_TaskCrt (4)</i> — core level, error the task-thread creation;</li>
<li> <i>TError::Core_NoNode (5)</i> — no node, error at accessing some missing node;</li>
<li> <i>TError::Tr_Connect (10)</i> — transport level, error connection;</li>
<li> <i>TError::Tr_UnknownHost (11)</i> — transport level, unknown host;</li>
<li> <i>TError::Tr_ErrTransport (12)</i> — transport level, transport error;</li>
<li> <i>TError::Tr_ErrResponse (13)</i> — transport level, response error;</li>
<li> <i>TError::Tr_ErrDevice (14)</i> — transport level, device error;</li>
<li> <i>TError::DB_SQL_Connect (20)</i> — DB level, error the SQL-connection;</li>
<li> <i>TError::DB_SQL_Query (21)</i> — DB level, error the SQL-query;</li>
<li> <i>TError::DB_TrRemoved (22)</i> — DB level, translation removed;</li>
<li> <i>TError::DB_ReadOnly (23)</i> — DB in the Read Only mode;</li>
<li> <i>TError::Arch_Val_OldBufVl (30)</i> — archives level, old value placing to the value buffer;</li>
<li> <i>TError::Arch_Val_DblVSrc (31)</i> — double value source setting try;</li>
<li> <i>TError::EXT (100)</i> — extended errors of OpenSCADA modules to use as TError::EXT+{N}.</li></ul>
<p><b>Public methods:</b>
</p>
<ul><li> <i>TError( );</i> — Default-empty constructor.</li>
<li> <i>TError( const char *cat, const char *mess, ... );</i> — Initialization of the error with the category <i>cat</i> and the message <i>mess</i> + arguments.</li>
<li> <i>TError( int cod, const char *cat, const char *mess, ... );</i> — Initialization of the error with the <i>code</i>, the category <i>cat</i> and the message <i>mess</i> + arguments.</li></ul>
<p><b>Public attributes:</b>
</p>
<ul><li> <i>int cod;</i> — The error code.</li>
<li> <i>string cat;</i> — The error category.</li>
<li> <i>string mess;</i> — The error message.</li></ul>
<h2><span class="mw-headline" id="Organization_and_structure_of_the_database_of_the_system_components"><span class="mw-headline-number">17</span> Organization and structure of the database of the system components</span></h2>
<p>Nodes and subsystems of OpenSCADA may have their own tables in the database to store their own data. The structure of tables is individual and determined by the &lt;TConfig&gt; object. Nodes and subsystems must create and configure the &lt;TConfig&gt; object under their demands.
</p>
<h3><span class="mw-headline" id="System_tables"><span class="mw-headline-number">17.1</span> System tables</span></h3>
<p>OpenSCADA has two system tables: BD and SYS. Table BD contains records of registered databases and the table SYS contains data of system-wide parameters.
</p><p><b>Table 7.</b> Structure if the table of system-wide parameters (SYS).
</p>
<table class="wikitable">

<tr>
<th> User &lt;<u>user</u>&gt; </th>
<th> Parameter's ID &lt;<u>id</u>&gt; </th>
<th> Parameter's value &lt;val&gt;
</th></tr>
<tr>
<td>root</td>
<td>/DemoStation/MessLev</td>
<td>0
</td></tr>
<tr>
<td>user</td>
<td>/DemoStation/Workdir</td>
<td>/mnt/home/roman/work/OScadaD/share/OpenScada
</td></tr>
<tr>
<td>user</td>
<td>/DemoStation/UI/QTStarter/StartMod</td>
<td>QTCfg
</td></tr></table>
<p><b>Table 8.</b> Structure if the table of registered DB.
</p>
<table class="wikitable">

<tr>
<th> ID &lt;<u>ID</u>&gt; </th>
<th> DB Type &lt;<u>TYPE</u>&gt; </th>
<th> Name &lt;NAME&gt; </th>
<th> Description &lt;DESCR&gt; </th>
<th> Address &lt;ADDR&gt; </th>
<th> Codepage of the database contents &lt;CODEPAGE&gt; </th>
<th> To enable &lt;EN&gt;
</th></tr>
<tr>
<td>LibBD</td>
<td>MySQL</td>
<td>Function's library</td>
<td> </td>
<td>server.diya.org;roman;123456;oscadaUserLibs</td>
<td>KOI8-U</td>
<td>1
</td></tr>
<tr>
<td>AnastModel</td>
<td>SQLite</td>
<td>AGLKS model</td>
<td> </td>
<td>./DATA/AGLKSModel.db</td>
<td>UTF8</td>
<td>1
</td></tr>
<tr>
<td>GenDB</td>
<td>MySQL</td>
<td>Main DB </td>
<td> </td>
<td>server.diya.org;roman;123456;oscadaDemoSt</td>
<td>KOI8-U</td>
<td>1
</td></tr></table>
<h3><span class="mw-headline" id="Tables_of_the_.22Data_acquisition.22_subsystem"><span class="mw-headline-number">17.2</span> Tables of the "Data acquisition" subsystem</span></h3>
<p>Controllers (data sources) of the subsystem "Data acquisition" are stored in the tables of their subsystems named DAQ_&lt;ModName&gt;. The structures of these tables can differ significantly, but all of them have the obligatory fields. The overall structure of the controllers' tables is presented in table 9.
</p><p><b>Table  9.</b> The overall structure of the controllers' tables of the subsystem "Data acquisition" (DAQ_&lt;ModName&gt;).
</p>
<table class="wikitable">

<tr>
<th> ID &lt;<u>ID</u>&gt; </th>
<th> Controller's name &lt;NAME&gt; </th>
<th> Description &lt;DESCR&gt; </th>
<th> To enable&lt;ENABLE&gt; </th>
<th> To start &lt;START&gt; </th>
<th> Individual parameters
</th></tr>
<tr>
<td>AutoDA</td>
<td>Automatic source</td>
<td>Data acquisition from active sources with automatic identification of them.</td>
<td>1</td>
<td>1</td>
<td> ...
</td></tr></table>
<p>Like the controller's table, the parameter's table for different types of data sources can differ significantly, but also have the obligatory fields. In addition to the differences which is typical to the type of data source, parameter's tables can still be different for different types of parameters. The overall structure of the parameters' tables is given in Table 10.
</p><p><b>Table 10.</b> The overall structure of the parameters' tables of  the subsystem "Data acquisition".
</p>
<table class="wikitable">

<tr>
<th> Parameter's shifr &lt;<u>SHIFR</u>&gt; </th>
<th> Parameter's name &lt;NAME&gt; </th>
<th> Parameter's description &lt;DESCR&gt; </th>
<th> To enable &lt;EN&gt; </th>
<th> Individual parameters
</th></tr>
<tr>
<td>P3</td>
<td>P3</td>
<td>Pressure on the diaphragm</td>
<td>1</td>
<td>...
</td></tr></table>
<p>In addition to controllers and parameters the subsystem "Data acquisition" contains parameter's templates. Parameter's templates are grouped by templates' libraries and are stored in tables of three types: templates' library table (ParamTemplLibs) — table 11, parameter's templates table — table 12 and template's parameters table — table 13.
</p><p><b>Table 11.</b> Structure of the templates' library table.
</p>
<table class="wikitable">

<tr>
<th> ID &lt;<u>ID</u>&gt; </th>
<th> Name &lt;NAME&gt; </th>
<th> Description &lt;DESCR&gt; </th>
<th> DB table of the library &lt;DB&gt;
</th></tr>
<tr>
<td>base</td>
<td>Basic templates</td>
<td>Basic templates' library</td>
<td>tmplib_base
</td></tr>
<tr>
<td>S7</td>
<td> </td>
<td>Templates' Library for Siemens S7 series controllers.</td>
<td>tmplib_S7
</td></tr></table>
<p><b>Table 12.</b> Structure of the templates' table.
</p>
<table class="wikitable">

<tr>
<th> ID &lt;<u>ID</u>&gt; </th>
<th> Name &lt;NAME&gt; </th>
<th> Description &lt;DESCR&gt; </th>
<th> Text of the template procedure &lt;PROGRAM&gt;
</th></tr>
<tr>
<td>digAlarm</td>
<td>Digital signal</td>
<td>Alarm over the discrete parameter</td>
<td>JavaLikeCalc.JavaScript
</td></tr>
<tr>
<td>simpleBoard</td>
<td>Simple boards</td>
<td>Formation of the simple boards of the analog signal.</td>
<td>JavaLikeCalc.JavaScript
</td></tr></table>
<p><b>Table 13.</b> Structure of the table of the template's parameters.
</p>
<table class="wikitable">

<tr>
<th> Template's ID &lt;<u>TMPL_ID</u>&gt; </th>
<th> Parameter's ID &lt;<u>ID</u>&gt; </th>
<th> Name &lt;NAME&gt; </th>
<th> Type &lt;TYPE&gt; </th>
<th> Flags &lt;FLAGS&gt; </th>
<th> Value &lt;VALUE&gt; </th>
<th> Position &lt;POS&gt;
</th></tr>
<tr>
<td>digAlarm</td>
<td>in</td>
<td>Вход</td>
<td>3</td>
<td>144</td>
<td> </td>
<td>2
</td></tr>
<tr>
<td>digitBlock</td>
<td>cmdOpen</td>
<td>Open command</td>
<td>3</td>
<td>161</td>
<td> </td>
<td>0
</td></tr></table>
<h3><span class="mw-headline" id="Tables_of_the_.22Transports.22_subsystem"><span class="mw-headline-number">17.3</span> Tables of the "Transports" subsystem</span></h3>
<p>Subsystem "Transports" is divided into input and output transports. For each type of transport there is its own table with its own structure. Table names, respectively: Transport_In and Transport_Out. Tables can be supplemented by fields, typical to the type of transport.
</p><p><b>Table 14.</b> Structure of the input transport's table (Transport_in).
</p>
<table class="wikitable">

<tr>
<th> ID &lt;<u>ID</u>&gt; </th>
<th> Type &lt;<u>MODULE</u>&gt; </th>
<th> Name &lt;NAME&gt; </th>
<th> Description &lt;DESCRIPT&gt; </th>
<th> Address &lt;ADDR&gt; </th>
<th> Protocol &lt;PROT&gt; </th>
<th> To start &lt;START&gt; </th>
<th> Individual fields of the transports' types
</th></tr>
<tr>
<td>web1</td>
<td>Sockets</td>
<td>Web 1</td>
<td>Work web transport for proced http requests.</td>
<td>TCP::10002:0</td>
<td>HTTP</td>
<td>1</td>
<td>...
</td></tr>
<tr>
<td>Self</td>
<td>SelfSystem</td>
<td>TCP 1</td>
<td>Test TCP input socket!</td>
<td>Sockets</td>
<td>TCP::10001:1</td>
<td>1</td>
<td>...
</td></tr></table>
<p><b>Table 15.</b> Structure of the output transport's table (Transport_out).
</p>
<table class="wikitable">

<tr>
<th> ID &lt;<u>ID</u>&gt; </th>
<th> Type &lt;<u>MODULE</u>&gt; </th>
<th> Name &lt;NAME&gt; </th>
<th> Description &lt;DESCRIPT&gt; </th>
<th> Address &lt;ADDR&gt; </th>
<th> Individual fields of the transports' types
</th></tr>
<tr>
<td>tcp_o1</td>
<td>Sockets</td>
<td>TCP Out 1</td>
<td>Output TCP transport 1</td>
<td>TCP::10001</td>
<td>...
</td></tr></table>
<p>For the centralized description of the list of external OpenSCADA stations it is used the table of external hosts (CfgExtHosts). The structure of this table is shown in Table 16.
</p><p><b>Table 16.</b> The structure of the table of external OpenSCADA hosts (CfgExtHosts).
</p>
<table class="wikitable">

<tr>
<th> User of the system &lt;<u>OP_USER</u>&gt; </th>
<th> ID &lt;<u>ID</u>&gt; </th>
<th> Name &lt;NAME&gt; </th>
<th> Transport &lt;TRANSP&gt; </th>
<th> Address of the remote host &lt;ADDR&gt; </th>
<th> User of the external host &lt;USER&gt; </th>
<th> Password of the user of the external host &lt;PASS&gt;
</th></tr>
<tr>
<td>tcp_o1</td>
<td>Sockets</td>
<td>TCP Out 1</td>
<td>Output TCP transport 1</td>
<td>TCP::10001</td>
<td>1</td>
<td>...
</td></tr></table>
<h3><span class="mw-headline" id="Tables_of_the_.22Archives.22_subsystem"><span class="mw-headline-number">17.4</span> Tables of the "Archives" subsystem</span></h3>
<p>Subsystem "Archives" contains three tables with fixed names:
</p>
<ul><li> Archives of values: Archive_val;</li>
<li> Archivers of values: Archive_val_proc;</li>
<li> Archivers of messages: Archive_mess_proc.</li></ul>
<p>Tables of the archivers can be complemented by fields, typical for each type of archiver.
</p><p><b>Table 17.</b> Structure of the table of the values' archive (Archive_val).
</p>
<table class="wikitable">

<tr>
<th> ID &lt;<u>ID</u>&gt; </th>
<th> Name &lt;NAME&gt; </th>
<th> Description &lt;DESCR&gt; </th>
<th> To start &lt;START&gt; </th>
<th> The mode of the values' source &lt;SrcMode&gt; </th>
<th> Source of the values &lt;Source&gt; </th>
<th> Type of the values &lt;VTYPE&gt; </th>
<th> Buffer's periodicity &lt;BPER&gt; </th>
<th> Buffer's size &lt;BSIZE&gt; </th>
<th> Buffer's hard grid &lt;BHGRD&gt; </th>
<th> High resolution of the buffer's time &lt;BHRES&gt; </th>
<th> List of the serviced archivers &lt;ArchS&gt;
</th></tr>
<tr>
<td>CPULoad_load</td>
<td> </td>
<td> </td>
<td>1</td>
<td>1</td>
<td>DAQ.System.AutoDA.CPULoad.load</td>
<td>4</td>
<td>1</td>
<td>100</td>
<td>0</td>
<td>0</td>
<td>FSArch.1s;DBArch.1m;FSArch.1m;
</td></tr>
<tr>
<td>ai1_dP</td>
<td> </td>
<td> </td>
<td>0</td>
<td>0</td>
<td> </td>
<td>4</td>
<td>0.0001</td>
<td>100</td>
<td>1</td>
<td>1</td>
<td>FSArch.POMP_20070301;FSArch.1s;
</td></tr></table>
<p><b>Table 18.</b> Structure of the table of the values' archivers (Archive_val_proc).
</p>
<table class="wikitable">

<tr>
<th> ID &lt;<u>ID</u>&gt; </th>
<th> Archiver's type &lt;<u>MODUL</u>&gt; </th>
<th> Name &lt;NAME&gt; </th>
<th> Description &lt;DESCR&gt; </th>
<th> To start &lt;START&gt; </th>
<th> Address &lt;ADDR&gt; </th>
<th> Values' period &lt;V_PER&gt; </th>
<th> Archiving period &lt;A_PER&gt; </th>
<th> Individual fields of the archivers' types
</th></tr>
<tr>
<td>1s</td>
<td>FSArch</td>
<td> </td>
<td>One second</td>
<td>1</td>
<td>ARCHIVES/VAL/1s</td>
<td>1</td>
<td>60</td>
<td>...
</td></tr>
<tr>
<td>POMP_20070301</td>
<td>FSArch</td>
<td> </td>
<td> </td>
<td>0</td>
<td>ARCHIVES/VAL/POMP_20070301</td>
<td>0.0001</td>
<td>60</td>
<td>...
</td></tr></table>
<p><b>Table 19.</b> Structure of the table of the messages' archivers (Archive_mess_proc).
</p>
<table class="wikitable">

<tr>
<th> ID &lt;<u>ID</u>&gt; </th>
<th> Archiver's type &lt;<u>MODUL</u>&gt; </th>
<th> Name &lt;NAME&gt; </th>
<th> Description &lt;DESCR&gt; </th>
<th> To start &lt;START&gt; </th>
<th> Template of the messages' category &lt;CATEG&gt; </th>
<th> Messages' level &lt;LEVEL&gt; </th>
<th> Address &lt;ADDR&gt; </th>
<th> Individual fields of the archivers' types
</th></tr>
<tr>
<td>StatErrors</td>
<td>FSArh</td>
<td>Station error</td>
<td> </td>
<td>1</td>
<td>/DemoStation*</td>
<td>4</td>
<td>ARCHIVES/MESS/stError/</td>
<td>...
</td></tr>
<tr>
<td>NetRequsts</td>
<td>FSArh</td>
<td>Network requests</td>
<td> </td>
<td>1</td>
<td>/DemoStation/Transport/Sockets*</td>
<td>1</td>
<td>ARCHIVES/MESS/Net/</td>
<td>...
</td></tr></table>
<h3><span class="mw-headline" id="Tables_of_the_.22Security.22_subsystem"><span class="mw-headline-number">17.5</span> Tables of the "Security" subsystem</span></h3>
<p>Subsystem "Security" contains two tables: table of the system's users (Security_user) and groups of the system (Security_grp).
</p><p><b>Table 20.</b> Structure of the table of the system's users (Security_user).
</p>
<table class="wikitable">

<tr>
<th> Name &lt;<u>NAME</u>&gt; </th>
<th> Description &lt;DESCR&gt; </th>
<th> Password &lt;PASS&gt; </th>
<th> Picture &lt;PICTURE&gt;
</th></tr>
<tr>
<td>root</td>
<td>SuperUser</td>
<td>openscada</td>
<td>
</td></tr>
<tr>
<td>user</td>
<td>User</td>
<td>user</td>
<td>
</td></tr></table>
<p><b>Table 21.</b> Structure of the table of the system's users groups (Security_grp).
</p>
<table class="wikitable">

<tr>
<th> Name &lt;<u>NAME</u>&gt; </th>
<th> Description &lt;DESCR&gt; </th>
<th> Users in the group &lt;USERS&gt;
</th></tr>
<tr>
<td>root</td>
<td>SuperUser's group</td>
<td>root;user
</td></tr>
<tr>
<td>users</td>
<td>User's group</td>
<td>toot;user
</td></tr></table>
<h3><span class="mw-headline" id="The_structure_of_the_databases_of_the_modules"><span class="mw-headline-number">17.6</span> The structure of the databases of the modules</span></h3>
<p>Each module can have its own database tables to store individual data. Structure of database tables of the modules can be formed freely, based on internal needs.
</p>
<h2><span class="mw-headline" id="API_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D1.8F"><span class="mw-headline-number">18</span> <span id="ModAPI" title="#ModAPI">API модуля</span></span></h2>
<p>Модулі в OpenSCADA реалізуються як поділювані бібліотеки та одна така бібліотека може містити багато модулів підсистем OpenSCADA, фактично виступаючи як контейнер. Такі контейнери також можуть бути включені-вбудовані до Бібліотеки Ядра OpenSCADA якщо ви будуєте дуже компактні рішення.
</p><p>Першим кроком підключення поділюваних бібліотек (SO — Поділювані Об'єкти) є підключення функцій ініціалізації. Такі функції мають бути визначені як звичайні "C" функції для запобігання спотворенню їх назв. Зазвичай це здійснюється наступним чином:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="c1">//================== CUT =========================</span>
<span class="k">extern</span> <span class="s">"C"</span>
<span class="p">{</span>
<span class="cp">#ifdef MOD_INCL</span>
    <span class="n">TModule</span><span class="o">::</span><span class="n">SAt</span> <span class="n">bd_Tmpl_module</span><span class="p">(</span> <span class="kt">int</span> <span class="n">n_mod</span> <span class="p">)</span>
<span class="cp">#else</span>
    <span class="n">TModule</span><span class="o">::</span><span class="n">SAt</span> <span class="n">module</span><span class="p">(</span> <span class="kt">int</span> <span class="n">n_mod</span> <span class="p">)</span>
<span class="cp">#endif</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n_mod</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">TModule</span><span class="o">::</span><span class="n">SAt</span><span class="p">(</span><span class="n">MOD_ID</span><span class="p">,</span> <span class="n">MOD_TYPE</span><span class="p">,</span> <span class="n">VER_TYPE</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">TModule</span><span class="o">::</span><span class="n">SAt</span><span class="p">(</span><span class="s">""</span><span class="p">);</span>
    <span class="p">}</span>

<span class="o">&lt;!--</span><span class="nl">T</span><span class="p">:</span><span class="mi">348</span><span class="o">--&gt;</span>
<span class="cp">#ifdef MOD_INCL</span>
    <span class="n">TModule</span> <span class="o">*</span><span class="n">bd_Tmpl_attach</span><span class="p">(</span> <span class="k">const</span> <span class="n">TModule</span><span class="o">::</span><span class="n">SAt</span> <span class="o">&amp;</span><span class="n">AtMod</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">source</span> <span class="p">)</span>
<span class="cp">#else</span>
    <span class="n">TModule</span> <span class="o">*</span><span class="n">attach</span><span class="p">(</span> <span class="k">const</span> <span class="n">TModule</span><span class="o">::</span><span class="n">SAt</span> <span class="o">&amp;</span><span class="n">AtMod</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">source</span> <span class="p">)</span>
<span class="cp">#endif</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">AtMod</span> <span class="o">==</span> <span class="n">TModule</span><span class="o">::</span><span class="n">SAt</span><span class="p">(</span><span class="n">MOD_ID</span><span class="p">,</span><span class="n">MOD_TYPE</span><span class="p">,</span><span class="n">VER_TYPE</span><span class="p">))</span> <span class="k">return</span> <span class="k">new</span> <span class="n">BDTmpl</span><span class="o">::</span><span class="n">BDMod</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="c1">//================== CUT =========================</span>
</pre></div>
<p>Точкою входу будь якого модуля є функції:
</p>
<ul><li> <i>TModule::SAt module( int n_mod )</i>, <i>TModule::SAt {modTp}_{modNm}_module( int n_mod )</i> — використовуються для сканування переліку та інформації з усіх модулів у бібліотеці. Перша функція використовується під час реалізації модулів у зовнішній поділюваній бібліотеці, а друга під час включення-вбудування їх до ядра OpenSCADA, де <i>modTp</i> відповідає типу модуля, а <i>modNm</i> його ІД.</li>
<li> <i>TModule *attach( const TModule::SAt &amp;AtMod, const string &amp;source )</i>, <i>TModule *{modTp}_{modNm}_attach( const TModule::SAt &amp;AtMod, const string &amp;source )</i> — використовується для безпосереднього підключення-відкриття обраного модуля шляхом створення кореневого об'єкта модуля успадкованого від <b>TModule</b>. Перша функція використовується під час реалізації модулів у зовнішній поділюваній бібліотеці, а друга під час включення-вбудування їх до ядра OpenSCADA, де <i>modTp</i> та <i>modNm</i> відповідають попередній функції.</li></ul>
<p>Загальним для всіх модулів є наслідування кореневого об'єкта-класу модуля від класу модульної підсистеми <a href="API.html#TModule" title="Special:MyLanguage/Documents/API">TModule</a>, що вказує на наявність спільної частини інтерфейсу модуля який розглянемо далі. Для отримання уявлення про архітектуру модулів у контексті загальної архітектури OpenSCADA наполегливо рекомендується мати перед очима <a class="external" href="http://oscada.org/wiki/File:API_uml_classdep.png" title="File:API uml classdep.png">загальну діаграму класів OpenSCADA</a>!
</p><p>Всі інтерфейсні об'єкти модулів успадковують клас вузла <a href="API.html#TCntrNode" title="Special:MyLanguage/Documents/API">TCntrNode</a>, який надає механізм <a href="API.html#CntrNode" title="Special:MyLanguage/Documents/API">інтерфейсу управління</a>. Одним із завдань цього механізму є надання інтерфейсу конфігурації об'єкту у будь якому конфігураторі OpenSCADA.
</p>
<table class="wikitable">

<tr>
<th> Загальне API
</th></tr>
<tr>
<td><b><a href="API.html#TCntrNode" title="Special:MyLanguage/Documents/API">TCntrNode</a></b> — Вузол OpenSCADA:
<ul><li> <i>void preEnable( int flag );</i>, <i>void postEnable( int flag );</i> — підключення модуля до динамічного дерева об'єктів, викликається перед та після фактичного увімкнення модуля відповідно.</li>
<li> <i>void preDisable( int flag );</i>, <i>void postDisable( int flag );</i> — виключення модуля із динамічного дерева об'єктів перед звільненням об'єкту, викликається перед та після фактичного виключення модуля відповідно.</li>
<li> <i>void load_( TConfig *cfg );</i>, <i>void load_( );</i> — завантаження модуля із контексту сховища <i>cfg</i> та загалом, викликається на стадії завантаження конфігурації модуля зі сховку.</li>
<li> <i>void save_( );</i> — збереження модуля, викликається на стадії збереження конфігурації модуля до сховку, зазвичай за ініціативою користувача.</li></ul>
</td></tr>
<tr>
<td><b><a href="API.html#TModule" title="Special:MyLanguage/Documents/API">TModule</a></b> — Модуль OpenSCADA:<br />
<ul><li> <i>void modStart( );</i> — запуск модуля, викликається на стадії запуску завдань виконання фонових функцій модуля, якщо такі модулем надаються.</li>
<li> <i>void modStop( );</i> — зупинка модуля, викликається на стадії зупинки завдань виконання фонових функцій модуля, якщо такі модулем надаються.</li>
<li> <i>void modInfo( vector&lt;string&gt; &amp;list );</i> — запит переліку інформаційних властивостей модуля, яким надається стандартний набір властивостей "Module", "Name", "Type", "Source", "Version", "Author", "Description", "License", та що може бути розширено власними-специфічними властивостями.</li>
<li> <i>string modInfo( const string &amp;name );</i> — запит елементу інформації <i>name</i> за якого здійснюється обробка запитів і до власних-специфічних властивостей модуля.</li>
<li> <i>void modFuncReg( ExpFunc *func );</i> — реєстрація експортованої функції модуля, яка є частиною механізму міжмодульної взаємодії що реєструє внутрішню функцію модуля для зовнішнього виклику за назвою-символом функції та її вказівником відносно об'єкта модуля. Наразі цей механізм мало якими модулями використовується!</li>
<li> <i>void perSYSCall( unsigned int cnt );</i> — виклик із системного-сервісного потоку-завдання з періодичністю 10 секунд та секундним лічильником <i>cnt</i>, може використовуватися для виконання періодичних-рідких сервісних процедур.</li></ul>
</td></tr>
<tr>
<th> API модулів підсистеми "Бази Даних (БД)"
</th></tr>
<tr>
<td> Призначено для інтеграції OpenSCADA із БД чи СУБД, яка реалізується модулем. Надає два загальних підходи до реалізації модулів:
<ol><li> Режим ANSI SQL — є найпростішим шляхом який передбачає безпосереднє використання функцій ядра <a href="API.html#TTable" title="Special:MyLanguage/Documents/API">fieldSQLSeek(), fieldSQLGet(), fieldSQLSet(), fieldSQLDel()</a> у fieldSeek(), fieldGet(), fieldSet(), fieldDel() відповідно; всі SQL-модулі використовують наразі цей підхід.</li>
<li> Повна Реалізація — є найскладнішим шляхом який передбачає повну реалізацію; модулі, що використовують такий підхід є або старими або специфічними: <a href="Modules/DBF.html" title="Special:MyLanguage/Modules/DBF">DBF</a>, <a href="Modules/LDAP.html" title="Special:MyLanguage/Modules/LDAP">LDAP</a>.</li></ol>
</td></tr>
<tr>
<td><b><a href="API.html#TTypeBD" title="Special:MyLanguage/Documents/API">TTypeBD</a>-&gt;<a href="API.html#TModule" title="Special:MyLanguage/Documents/API">TModule</a></b> — кореневий об'єкт модуля підсистеми "БД":
<ul><li> <i>string features( );</i> — перелік ключових слів <a href="Program_manual.html#DBFeat" title="Special:MyLanguage/Documents/Program manual">підтримуваних властивостей БД</a>.</li>
<li> <i>int lsPr( );</i> — базовий приорітет БД [0...9] у загальному переліку сховків.</li>
<li> <i>TBD *openBD( const string &amp;id );</i> — викликається при відкритті або створені нового об'єкта БД даним модулем з ідентифікатором <i>id</i>.</li></ul>
</td></tr>
<tr>
<td><b><a href="API.html#TBD" title="Special:MyLanguage/Documents/API">TBD</a></b> — об'єкт бази даних:
<ul><li> <i>void enable( );</i> — включення БД.</li>
<li> <i>void disable( );</i> — відключення БД.</li>
<li> <i>void allowList( vector&lt;string&gt; &amp;list ) const;</i> — запит переліку <i>list</i> таблиць у БД.</li>
<li> <i>void sqlReq( const string &amp;req, vector&lt; vector&lt;string&gt; &gt; *tbl = NULL, char intoTrans = EVAL_BOOL );</i> — обробка SQL-запиту <i>req</i> до БД та отримання результату у вигляді таблиці <i>tbl</i>, якщо запит вибірки та вказівник ненульовий. При встановлені <i>intoTrans</i> у TRUE для запиту мусить бути відкрита транзакція, у FALSE закрита. Ця функція має реалізовуватися для СУБД, які підтримують SQL-запити.</li>
<li> <i>void transCloseCheck( );</i> — періодично викликається для перевірки транзакцій та закриття старих або які містять багато запитів.</li>
<li> <i>TTable *openTable( const string &amp;name, bool create );</i> — викликається при відкритті або створені нового об'єкта таблиці.</li></ul>
</td></tr>
<tr>
<td><b><a href="API.html#TTable" title="Special:MyLanguage/Documents/API">TTable</a></b> — об'єкт таблиці у базі даних:
<ul><li> <i>void fieldStruct( TConfig &amp;cfg );</i> — отримання поточної структури таблиці у об'єкті <i>cfg</i>.</li>
<li> <i>bool fieldSeek( int row, TConfig &amp;cfg, const string &amp;cacheKey = "" );</i> — послідовне сканування записів таблиці перебором <i>row</i> за об'єктом <i>cfg</i> та повернення FALSE по закінченню, з адресацією за активними <a href="API.html#TCfg" title="Special:MyLanguage/Documents/API">keyUse()</a> ключовими полями. Ключ кешу <i>cacheKey</i> вказується для предзавантаженням повної відповіді до кешу, із витягненням наступних записів звідти.</li>
<li> <i>void fieldGet( TConfig &amp;cfg );</i> — запит вказаного у об'єкті <i>cfg</i> запису із адресацією за ключовими полями.</li>
<li> <i>void fieldSet( TConfig &amp;cfg );</i> — передача вказаного у об'єкті <i>cfg</i> запису з адресацією за ключовими полями.</li>
<li> <i>void fieldDel( TConfig &amp;cfg );</i> — видалення вказаного запису за ключовими полями об'єкту <i>cfg</i>.</li></ul>
<dl><dd> <i><b>Специфічне для SQL Баз Даних</b></i></dd></dl>
<ul><li> <i>void fieldFix( TConfig &amp;cfg, const string &amp;langLs = "" );</i> — виправлення структури таблиці БД до <i>cfg</i> та для мов перекладу <i>langLs</i>, зазвичай після невдалого запису.</li>
<li> <i>string getSQLVal( TCfg &amp;cf, uint8_t RqFlg = 0 );</i> — повернення специфічно до SQL обгорненого значення <i>cf</i> для <a href="API.html#TCfg" title="Special:MyLanguage/Documents/API">прапорців ReqFlg</a> звернення <i>RqFlg</i>.</li>
<li> <i>void setSQLVal( TCfg &amp;cf, const string &amp;vl, bool tr = false );</i> — розбір SQL-значення <i>vl</i> для перекладу <i>tr</i> та із записом до <i>cf</i>.</li></ul>
</td></tr>
<tr>
<th> API модулів підсистеми "Транспорти"
</th></tr>
<tr>
<td> Забезпечує OpenSCADA комунікаціями через інтерфейс, часто це мережі які реалізуються цим модулем.
</td></tr>
<tr>
<td> <b><a href="API.html#TTypeTransport" title="Special:MyLanguage/Documents/API">TTypeTransport</a>-&gt;<a href="API.html#TModule" title="Special:MyLanguage/Documents/API">TModule</a></b> — кореневий об'єкт модуля підсистеми "Транспорти":
<ul><li> <i>virtual bool isNetwork( );</i> — ознака реалізації мережі цим модулем.</li>
<li> <i>virtual string outAddrHelp( );</i> — допомога із формату адреси вихідного транспорту.</li>
<li> <i>virtual TTransportIn *In( const string &amp;id, const string &amp;stor );</i> — викликається модулем за відкриття або створення нового об'єкту вхідного транспорту із ідентифікатором <i>id</i> та сховком <i>stor</i>.</li>
<li> <i>virtual TTransportOut *Out( const string &amp;name, const string &amp;stor );</i> — викликається модулем за відкриття або створення нового об'єкту вихідного транспорту із ідентифікатором <i>id</i> та сховком <i>stor</i>.</li></ul>
</td></tr>
<tr>
<td><b><a href="API.html#TTransportIn" title="Special:MyLanguage/Documents/API">TTransportIn</a></b> — об'єкт вхідного транспорту:
<ul><li> <i>virtual unsigned keepAliveReqs( );</i> — максимум запитів "Збереження Життя".</li>
<li> <i>virtual unsigned keepAliveTm( );</i> — час "Збереження Життя".</li>
<li> <i>virtual string getStatus( );</i> — отримання статусу транспорту.</li>
<li> <i>virtual void start( );</i> — запуск транспорту.</li>
<li> <i>virtual void stop( );</i> — зупинка транспорту.</li>
<li> <i>virtual int writeTo( const string &amp;sender, const string &amp;data );</i> — надсилання даних <i>data</i> назад відправнику <i>sender</i>. <a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../en/files/At.png" width="22" /></a> Переважно застаріле та заміщене режимом опитування <a href="API.html#TProtocolIn" title="Special:MyLanguage/Documents/API">вхідного транспортного протоколу</a>, Початково реалізується у транспортах із підтримкою ініціативного відправлення, не лише за запитом.</li></ul>
</td></tr>
<tr>
<td><b><a href="API.html#TTransportOut" title="Special:MyLanguage/Documents/API">TTransportOut</a></b> — об'єкт вихідного транспорту:
<ul><li> <i>virtual string timings( );</i> — таймаути транспорту.</li>
<li> <i>virtual unsigned short attempts( );</i> — спроб підключення.</li>
<li> <i>virtual string getStatus( );</i> — отримання статусу транспорту.</li>
<li> <i>virtual void setTimings( const string &amp;vl, bool isDef = false );</i> — встановлення таймаутів транспорту, як типове за <i>isDef</i>.</li>
<li> <i>virtual void setAttempts( unsigned short vl );</i> — встановлення спроб підключення.</li>
<li> <i>virtual void start( int time = 0 );</i> — запуск транспорту із таймаутом підключення <i>time</i>. Із запуском вихідного транспорту встановлюється підключення до віддаленої станції для інтерфейсів які передбачають підключення. На цей час можуть виникати помилки якщо підключення неможливе та транспорт має повернутися до стану зупинки.</li>
<li> <i>virtual void stop( );</i> — зупинка транспорту.</li>
<li> <i>virtual int messIO( const char *oBuf, int oLen, char *iBuf = NULL, int iLen = 0, int time = 0 );</i> — відправка даних через транспорт. Таймаут очікування <i>time</i> підключення в мілісекундах. Негативне значення <i>time</i> вимикає режим транспорту запит/відповідь для незалежного читання/запису до буферу ВВ, із таймаутом читання <i>time</i> у абсолютному значені.</li></ul>
</td></tr>
<tr>
<th> API модулів підсистеми "Транспортні протоколи"
</th></tr>
<tr>
<td> Забезпечує OpenSCADA комунікаціями рівня протоколу, які реалізуються модулем, щодо доступу до даних із зовнішніх систем та надання даних OpenSCADA для зовнішніх систем.
</td></tr>
<tr>
<td><b><a href="API.html#TProtocol" title="Special:MyLanguage/Documents/API">TProtocol</a>-&gt;<a href="API.html#TModule" title="Special:MyLanguage/Documents/API">TModule</a></b> — кореневий об'єкт модуля підсистеми "Транспортні протоколи":
<ul><li> <i>virtual void itemListIn( vector&lt;string&gt; &amp;ls, const string &amp;curIt = "" );</i> — перелік <i>ls</i> під'елементів вхідного протоколу від поточного елементу <i>curIt</i>, якщо протокол їх надає. Використовується при обранні об'єкта у конфігурації вхідного транспорту.</li>
<li> <i>virtual void outMess( XMLNode &amp;io, TTransportOut &amp;tro );</i> — передавання даних об'єктами ядра OpenSCADA у дереві XML <i>io</i> до віддаленої системи через транспорт <i>tro</i> та поточний вихідний протокол. Представлення даних у дереві XML не стандартизоване та специфічне до логічної структури протоколу. Ці дані серіалізуються — перетворюються у послідовність байтів відповідно до протоколу, та надсилаються через визначений вихідний транспорт <i>tro</i> <a href="API.html#TTransportOut" title="Special:MyLanguage/Documents/API">функцією messIO()</a>.</li>
<li> <i>virtual TProtocolIn *in_open( const string &amp;id );</i> — викликається модулем за відкриття або створення нового об'єкту транспортного протоколу із ідентифікатором <i>id</i>.</li></ul>
</td></tr>
<tr>
<td><b><a href="API.html#TProtocolIn" title="Special:MyLanguage/Documents/API">TProtocolIn</a></b> — вхідний об'єкт транспортного протоколу з опрацювання вхідних запитів від <a href="API.html#TTransportIn" title="Special:MyLanguage/Documents/API">вхідного транспортного об'єкту TTransportIn</a>. Для кожного сеансу вхідного запиту створюється асоційований об'єкт вхідного протоколу, який залишається живим до завершення повного сеансу "запит-&gt;відповідь". Адреса транспорту, який відкриває входження протоколу, визначається у <a href="API.html#TProtocolIn" title="Special:MyLanguage/Documents/API">srcTr()</a>:
<ul><li> <i>virtual unsigned waitReqTm( )</i> — час очікування запиту на вхідному транспорті у мілісекундах, після якого звертається до протоколу із порожнім повідомленням — режим опитування. Встановлення його у нуль вимикає режим опитування.</li>
<li> <i>virtual void setSrcTr( TTransportIn *vl )</i> — встановлення транспорту-джерела відкритого сеансу вхідного протоколу.</li>
<li> <i>virtual void setSrcAddr( const string &amp;vl );</i> — встановлення адреси відправника.</li>
<li> <i>virtual bool mess( const string &amp;request, string &amp;answer );</i> — передавання послідовності даних запиту <i>request</i> до об'єкту протоколу для її розбору відповідно до реалізації протоколу. Ця функція протоколу має опрацювати запит <i>request</i>, згенерувати відповідь у <i>answer</i> та повернути FALSE у випадку повноти запиту. Якщо запит <i>request</i> не повний, необхідно повернути транспорту TRUE для індикації "очікування завершення", попередні частини запиту повинні зберігатися у контексті об'єкту протоколу.</li></ul>
</td></tr>
<tr>
<th> API модулів підсистеми "Збір Даних"
</th></tr>
<tr>
<td> Надає збір даних реального часу із зовнішніх систем або їх формування у обчислювачах, які реалізуються модулем. Це основна підсистема, оскільки SCADA це первинно про Збір Даних. Як основна підсистема, вона забезпечує декілька підходів до реалізації модулів, які здебільшого стосуються формування та зберігання структури атрибутів:
<ol><li> Статичне формування через визначення набору типів параметрів, успадкованих від <a href="API.html#TTypeParam" title="Special:MyLanguage/Documents/API">TTypeParam</a>, тобто застосування структур виконується як набір атрибутів зі зміною типу параметра. Цей метод є найменш гнучким і його використовують такі модулі: <a href="Modules/GPIO.html" title="Special:MyLanguage/Modules/GPIO">GPIO</a>, <a href="Modules/SMH2Gi.html" title="Special:MyLanguage/Modules/SMH2Gi">SMH2Gi</a>, <a class="external" href="http://oscada.org/wiki/Special:MyLanguage/Modules/AMRDevs" title="Special:MyLanguage/Modules/AMRDevs">AMRDevs</a>.</li>
<li> Динамічне формування з керуванням структури контейнеру  <a href="API.html#TElem" title="Special:MyLanguage/Documents/API">TElem</a> в об’єкті параметра <a href="API.html#TParamContr" title="Special:MyLanguage/Documents/API">TParamContr</a>. Цей метод є найбільш гнучким і використовується в більшості модулів, структуру яких можна конфігурувати.</li>
<li> Як розширення динамічного формування існує <a href="DAQ.html#LogicLev" title="Special:MyLanguage/Documents/DAQ">тип параметра Логічного Рівня</a>, який можна додати до будь-якого модуля, але він використовується переважно в універсальних джерелах даних: <a href="Modules/LogicLev.html" title="Special:MyLanguage/Modules/LogicLev">LogicLev</a>, <a href="Modules/ModBus.html" title="Special:MyLanguage/Modules/ModBus">ModBus</a>, <a href="Modules/Siemens.html" title="Special:MyLanguage/Modules/Siemens">Siemens</a>, <a href="Modules/Siemens.html" title="Special:MyLanguage/Modules/Siemens">LogicLev</a>.</li></ol>
</td></tr>
<tr>
<td><b><a href="API.html#TTypeDAQ" title="Special:MyLanguage/Documents/API">TTypeDAQ</a>-&gt;<a href="API.html#TModule" title="Special:MyLanguage/Documents/API">TModule</a></b> — кореневий об'єкт модуля підсистеми "Збір Даних":
<ul><li> <i>virtual bool compileFuncLangs( vector&lt;string&gt; *ls = NULL );</i> — запитує перелік мов <i>ls</i> для яких реалізується можливість формування користувацьких процедур у цьому модулі, та перевірка факту підтримки цього.</li>
<li> <i>virtual void compileFuncSnthHgl( const string &amp;lang, XMLNode &amp;shgl );</i> — запит прав підсвітлення синтаксису <i>shgl</i> щодо визначеної мови <i>lang</i>.</li>
<li> <i>virtual string compileFunc( const string &amp;lang, TFunction &amp;fnc_cfg, const string &amp;prog_text, const string &amp;usings = "", int maxCalcTm = 0 );</i> — компіляція-реєстрація користувацької функції на підтримуваній мові програмування <i>lang</i> та на вихідному коді процедури <i>prog_text</i>, заснованій на параметрах процедури <i>fnc_cfg</i>. Повертає адресу об'єкту скомпільованої функції, готового до виконання.</li>
<li> <i>virtual bool redntAllow( );</i> — стан підтримки механізму резервування цим модулем. Має бути перевизначено та повертати TRUE за підтримки, інакше FALSE.</li>
<li> <i>virtual TController *ContrAttach( const string &amp;id, const string &amp;daq_db );</i> — викликається модулем за відкриття або створення нового об'єкту контролеру із ідентифікатором <i>id</i>.</li></ul>
</td></tr>
<tr>
<td><b><a href="API.html#TController" title="Special:MyLanguage/Documents/API">TController</a></b> — об'єкт контролеру джерела даних. У контексті об'єкту зазвичай виконується завдання періодичного або планового опитування даних реального часу фізичного контролеру або фізично відокремленого блоку даних. У випадку отримання даних пакетами, вони розташовуються безпосередньо у архіві, пов'язаному із атрибутом параметра <a href="API.html#TVAl" title="Special:MyLanguage/Documents/API">TVAl::arch()</a>, та поточне значення встановлюється <a href="API.html#TVAl" title="Special:MyLanguage/Documents/API">функцією TVAl::set()</a> із атрибутом "sys"=TRUE:
<ul><li> <i>virtual string getStatus( );</i> — функція запиту статусу контролеру.</li>
<li> <i>virtual void enable_(  );</i> — увімкнення об'єкту контролеру. На цій стадії зазвичай відбувається ініціалізація об'єктів параметрів та їх інтерфейсів у формі атрибутів, атрибути інколи можуть запитуватися у пов'язаного віддаленого джерела.</li>
<li> <i>virtual void disable_(  );</i> — вимкнення об'єкту контролеру.</li>
<li> <i>virtual void start_( );</i> — запуск об'єкту контролеру. На цій стадії зазвичай створюється та запускається завдання опитування.</li>
<li> <i>virtual void stop_( );</i> — зупинка об'єкту контролеру.</li>
<li> <i>virtual void redntDataUpdate( );</i> — операція отримання даних із резервної станції, автоматично викликається сервісною процедурою схеми резервування підсистеми.</li>
<li> <i>virtual string catsPat( );</i> — перелік правил регулярних виразів, поділених '|', для виокремлення за категорією щодо повідомлень згенерованих об'єктом.</li>
<li> <i>virtual void messSet( const string &amp;mess, int lev, const string &amp;type2Code = "OP", const string &amp;prm = "", const string &amp;cat = "" );</i> — формування повідомлення Джерела Даних від об'єкту параметру <i>prm</i> (PrmId) або об'єкту контролеру взагалі якщо об'єкту параметру не визначено, для повідомлення <i>mess</i>, рівня <i>lev</i> та коду типу <i>type2Code</i>. Ця функція генерує повідомлення із уніфікованою категорією прозорості Джерела Даних "<b>{type2Code}{ModId}:{CntrId}[.{prm}][:{cat}]</b>".</li>
<li> <i>virtual TParamContr *ParamAttach( const string &amp;id, int type );</i> — викликається модулем за відкриття або створення нового об'єкту параметру контролера із ідентифікатором <i>id</i>.</li></ul>
</td></tr>
<tr>
<td><b><a href="API.html#TParamContr" title="Special:MyLanguage/Documents/API">TParamContr</a>-&gt;<a href="API.html#TValue" title="Special:MyLanguage/Documents/API">TValue</a></b> — об'єкт параметру контролера джерела даних. Містить атрибути з реальними даними у наборі визначеному фізично доступними даними. Значення до атрибутів потрапляють із завдання опитування контролера, при асинхронному режимі, або запитуються під час звернення, при синхронному режимі, та за посередництвом методів успадкованого типу <a href="API.html#TValue" title="Special:MyLanguage/Documents/API">TValue</a>:
<ul><li> <i>virtual TElem *dynElCntr( );</i> — контейнер динамічних елементів атрибутів Збору Даних. Переважно визначається джерелами логічного рівня які і надають контейнери такого характеру.</li>
<li> <i>virtual void enable( );</i> — увімкнення об'єкту параметру, здійснюється формування набору атрибутів та заповнення їх значеннями недостовірності.</li>
<li> <i>virtual void disable( );</i> — вимкнення об'єкту параметру.</li>
<li> <i>virtual void setType( const string &amp;tpId );</i> — викликається для зміни типу параметру у <i>tpId</i> та може бути опрацьований у об'єкті модуля для зміни власних даних.</li>
<li> <i>virtual TVal* vlNew( );</i> — викликається на стадії створення нового атрибуту. Може бути перевизначено для реалізації особливої поведінки у межах свого об'єкту, успадкованого від <i>TVal</i>, при доступі до атрибуту.</li>
<li> <i>virtual void vlGet( TVal &amp;vo );</i> — викликається для атрибуту <i>vo</i> із режимом прямого читання <b>TVal::DirRead</b> при читанні значення задля прямого-синхронного читання із фізичного джерела або буферу об'єкта.</li>
<li> <i>virtual void vlSet( TVal &amp;vo, const TVariant &amp;vl, const TVariant &amp;pvl );</i> — викликається для атрибуту <i>vo</i> із режимом прямого запису <b>TVal::DirWrite</b> при запису значення <i>vl</i> задля прямого-синхронного запису до фізичного джерела або буферу об'єкта, із попереднім значенням <i>pvl</i>.</li>
<li> <i>virtual void vlArchMake( TVal &amp;val );</i> — викликається на стадії створення архіву значень із атрибутом <i>val</i> як джерело щодо ініціалізації характеристик якості буферу архіву у відповідності до характеристик джерела даних та опитування.</li></ul>
</td></tr>
<tr>
<th> API модулів підсистеми "Архіви-Історія"
</th></tr>
<tr>
<td> Використовується для архівування та ведення історії повідомлень і значень реального часу отриманих у підсистемі "Збір Даних", та у засіб реалізований модулем.
</td></tr>
<tr>
<td><b><a href="API.html#TTypeArchivator" title="Special:MyLanguage/Documents/API">TTypeArchivator</a>-&gt;<a href="API.html#TModule" title="Special:MyLanguage/Documents/API">TModule</a></b> — кореневий об'єкт модуля підсистеми "Архіви-Історія":
<ul><li> <i>virtual TMArchivator *AMess( const string &amp;id, const string &amp;stor );</i> — викликається модулем за відкриття або створення нового об'єкту архіватору повідомлень із ідентифікатором <i>id</i> та у сховку <i>stor</i>.</li>
<li> <i>virtual TVArchivator *AVal( const string &amp;id, const string &amp;stor );</i> — викликається модулем за відкриття або створення нового об'єкту архіватору значень із ідентифікатором <i>id</i> та у сховку <i>stor</i>.</li></ul>
</td></tr>
<tr>
<td><b><a href="API.html#TMArchivator" title="Special:MyLanguage/Documents/API">TMArchivator</a></b> — об'єкт архіватору повідомлень.
<ul><li> <i>virtual void redntDataUpdate( );</i> — операція отримання даних із резервної станції, автоматично викликається сервісною процедурою схеми резервування підсистеми.</li>
<li> <i>virtual void start( );</i> — запуск об'єкту архіватору, архіватор запускається для отримання повідомлень та розміщення їх до сховку.</li>
<li> <i>virtual void stop( );</i> — зупинка об'єкту архіватору.</li>
<li> <i>virtual time_t begin( );</i> — час початку даних архіватору у відповідності до поточного стану сховку.</li>
<li> <i>virtual time_t end( );</i> — час закінчення даних архіватору у відповідності до поточного стану сховку.</li>
<li> <i>virtual bool put( vector&lt;TMess::SRec&gt; &amp;mess, bool force = false );</i> — розташування групи повідомлень <i>mess</i> до архіватору. Повертає TRUE за успішної операції. Встановити <i>force</i> для прямого запису до архіву оминаючи резервування.</li>
<li> <i>virtual time_t get( time_t bTm, time_t eTm, vector&lt;TMess::SRec&gt; &amp;mess, const string &amp;category = "", char level = 0, time_t upTo = 0 );</i> — отримання повідомлень до <i>mess</i> із архіватору для визначених параметрів фільтрації. Повертає час зупинки запиту, корисно для продовження від цієї позиції як часу закінчення, тобто ітераційно заглиблюючись в історію. Фільтр визначається діапазоном часу [<i>bTm</i>...<i>eTm</i>], правилами категорії <i>category</i>, рівнем <i>level</i> та обмежено до часу <i>upTo</i>. За відсутності прямого визначення обмежувального часу <i>upTo</i>, це обмеження встановлюється у <i>prmInterf_TM</i> — 7 секунд.</li></ul>
</td></tr>
<tr>
<td><b><a href="API.html#TVArchivator" title="Special:MyLanguage/Documents/API">TVArchivator</a></b> — об'єкт архіватору значень.
<ul><li> <i>virtual void start( );</i> — запуск об'єкту архіватору, архіватор запускається для отримання значень та розміщення їх у сховок.</li>
<li> <i>virtual void stop( bool full_del = false );</i> — зупинка об'єкту архіватору із можливістю повного видалення його даних зі сховку за <i>full_del</i>.</li>
<li> <i>virtual TVArchEl *getArchEl( TVArchive &amp;arch );</i> — отримання об'єкту елемента архіву значень для визначеного архіву <i>arch</i>.</li>
<li> <i>virtual void pushAccumVals( );</i> — виштовхування накопичених завданням архівації значень, для акумулювальних архіваторів.</li></ul>
</td></tr>
<tr>
<td><b><a href="API.html#TVArchEl" title="Special:MyLanguage/Documents/API">TVArchEl</a></b> — об'єкт елементу архіватору значень.
<ul><li> <i>virtual void fullErase( );</i> — викликається для цілковитого видалення архівної частини архіватору.</li>
<li> <i>virtual int64_t end( );</i> — час завершення у мікросекундах щодо наявних значень у архіві архіватору.</li>
<li> <i>virtual int64_t begin( );</i> — час початку у мікросекундах щодо наявних значень у архіві архіватору.</li>
<li> <i>virtual TVariant getValProc( int64_t *tm, bool up_ord );</i> — запит одного значення із архіву на час <i>tm</i> та із підтягненням до верхнього значення у ґратці вимірювання <i>up_ord</i>.</li>
<li> <i>virtual void getValsProc( TValBuf &amp;buf, int64_t beg, int64_t end );</i> — запит групи значень до <i>buf</i> із архіву та для діапазону часу [<i>beg</i>...<i>end</i>].</li>
<li> <i>virtual void setValsProc( TValBuf &amp;buf, int64_t beg, int64_t end, bool toAccum );</i> — встановлення групи значень <i>buf</i> до архіву, для діапазону часу [<i>beg</i>...<i>end</i>] та через акумуляцію <i>toAccum</i>.</li></ul>
</td></tr>
<tr>
<th> API модулів підсистеми "Користувацькі Інтерфейси"
</th></tr>
<tr>
<td> Користувацький інтерфейс формується згідно до концепції та механізмів зовнішніх розповсюджених стандартів та бібліотек.
</td></tr>
<tr>
<td><b><a href="API.html#TUI" title="Special:MyLanguage/Documents/API">TUI</a>-&gt;<a href="API.html#TModule" title="Special:MyLanguage/Documents/API">TModule</a></b> — кореневий об'єкт модуля підсистеми "Користувацькі Інтерфейси":<br />
<p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../en/files/At.png" width="22" /></a> Не містить специфічних функцій!
</p>
</td></tr>
<tr>
<th> API модулів підсистеми "Спеціальне"
</th></tr>
<tr>
<td> Реалізує специфічні функції, які не увійшли до жодної з вищеперелічених підсистем. Специфічні функції формуються згідно їх власних вимог та із використанням всіх можливостей API OpenSCADA.
</td></tr>
<tr>
<td><b><a href="API.html#TSpecial" title="Special:MyLanguage/Documents/API">TSpecial</a>-&gt;<a href="API.html#TModule" title="Special:MyLanguage/Documents/API">TModule</a></b> — кореневий об'єкт модуля підсистеми "Спеціальне":<br />
<p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../en/files/At.png" width="22" /></a> Не містить специфічних функцій!
</p>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Debugging_and_Testing_OpenSCADA"><span class="mw-headline-number">19</span> Debugging and Testing OpenSCADA</span></h2>
<p>To monitor the quality of code and test the performance of various parts of the system the special modules are written that perform testing with the issue of testing protocol. These modules must be executed after the completion of any part of the project.
</p>
<h2><span class="mw-headline" id="Rules_for_design_and_commenting_of_the_sources_of_OpenSCADA_and_its_modules"><span class="mw-headline-number">20</span> <span id="CodeDesign" title="#CodeDesign">Rules for design and commenting of the sources of OpenSCADA and its modules</span></span></h2>
<p>When writing and design of the sources of OpenSCADA and its modules you must to follow the rules:
</p>
<ul><li> indent between the levels of enclosure: 4 characters;</li>
<li> tabulation space: 8 symbols;</li>
<li> braces of opening placed in previous command place, if the shorter for 80 symbols;</li>
<li> braces of closing must be placed in separate lines at the level of the previous text;</li>
<li> it is possible to write an enclosure in the single line with the previous level of enclosure, in case of increasing the readability of the code;</li>
<li> distance between the descriptions of the functions of at least one character;</li>
<li> the distance between the definition of variables and the text of the program at least one symbol;</li>
<li> it is possible to define variables in the text while saving the readability;</li>
<li> to avoid long lines more than 100 characters;</li>
<li> preprocessor commands must be located on the first level, regardless of the current level of the text;</li>
<li> for the formatting the source code, inherited from the other free applications and examples, it is recommended to use the utility:</li></ul>
<dl><dd><i>indent -bli0 -i4 -ts8 -l100 -npsl -npcs -nprs -nsaf -nsai -nsaw -brs -br -cdw -nbc -lp &lt;filename&gt;</i>.</dd></dl>
<p>Commenting rules of OpenSCADA:
</p>
<ul><li> obligatory commenting and thorough description is necessary for class declarations;</li>
<li> declarations of public methods of the class should be thoroughly described with the individual description of each parameter;</li>
<li> declarations of public attributes should also be thoroughly commented;</li>
<li> text functions do not need to be thoroughly commented, but the implicit places are to be commented.</li></ul>
<h2><span class="mw-headline" id=".D0.A3.D0.BC.D0.BE.D0.B2.D0.BD.D1.96_.D0.BF.D0.BE.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.BD.D1.8F_.D0.BF.D0.BE_.D1.82.D0.B5.D0.BA.D1.81.D1.82.D1.83_.D1.82.D0.B0_.D1.83_.D0.B2.D0.B8.D1.85.D1.96.D0.B4.D0.BD.D0.B8.D1.85"><span class="mw-headline-number">21</span> Умовні позначення по тексту та у вихідних</span></h2>
<p><b>????[{ТЕГИ}]</b> — має бути реалізовано найближчим часом або відповідно до плану <i>ТЕГИ</i>:
</p>
<ul><li> <i>API</i> — за значних змін API у стабільній гілці;</li>
<li> <i>v1.0</i> — за зазначеного випуску-версії.</li></ul>
<p><b>?!?!</b> — секцію не цілком реалізовано та може бути реалізовано не за розкладом, а за планом;<br />
<b>!!!!</b> — секція потребує переосмислення та пояснює-попереджає такого роду реалізації-коментування.
</p>
<h2><span class="mw-headline" id="Links"><span class="mw-headline-number">22</span> Links</span></h2>
<ul><li> <a class="external" href="http://oscada.org/wiki/File:API_uml_classdep.odg" title="File:API uml classdep.odg">Diagram: Static class diagram.</a></li>
<li> <a class="external" href="http://oscada.org/wiki/File:Oscada_struct.odg" title="File:Oscada struct.odg">Diagram: Block scheme of OpenSCADA.</a></li>
<li> <a class="external" href="http://oscada.org/wiki/File:Oscada_subsys_daq_str.odg" title="File:Oscada subsys daq str.odg">Diagram: Hierarchical structure of the subsystem "DAQ".</a></li>
<li> <a class="external" href="http://oscada.org/wiki/File:Oscada_subsys_db_str.odg" title="File:Oscada subsys db str.odg">Diagram: Hierarchical structure of the subsystem "DB".</a></li>
<li> <a class="external" href="http://oscada.org/wiki/File:Oscada_subsys_arch_str.odg" title="File:Oscada subsys arch str.odg">Diagram: Hierarchical structure of the subsystem "Archives".</a></li>
<li> <a class="external" href="http://oscada.org/wiki/File:Oscada_subsys_tr_str.odg" title="File:Oscada subsys tr str.odg">Diagram: Hierarchical structure of the subsystem "Transports" and "Protocols".</a></li>
<li> <a class="external" href="http://oscada.org/wiki/File:Oscada_UserOM.odg" title="File:Oscada UserOM.odg">Diagram: User object model of the core OpenSCADA.</a></li></ul>






</div><table style="border-top: dotted 2px #999999; margin-top: 20pt; color: gray;" width="100%"><tr><td style="text-align: left;" width="40%"><a href="http://oscada.org/wiki/Documents/API/uk">Documents/API/uk</a> - <a href="http://oscada.org/en/main/about-the-project/licenses/">GFDL</a></td><td style="text-align: center;">March 2023</td><td style="text-align: right;" width="40%">OpenSCADA 1+r2873</td></tr></table></body>
</html>