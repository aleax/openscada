<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html class="client-nojs" dir="ltr" lang="en">
<head>
<title>Документи/Як зробити/Живий диск - OpenSCADAWiki</title>
<meta content="MediaWiki 1.26.4" name="generator" />
<link href="https://www.gnu.org/copyleft/fdl.html" rel="copyright" />
<link href="files/doc.css" rel="stylesheet" /></head>
<body><div id="mw_header">
			<div class="mw-indicators">
</div>
			<h1 id="firstHeading" lang="uk">Документи/Як зробити/Живий диск</h1>
		</div><div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="uk"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a class="external text" href="http://oscada.org/wiki/index.php?title=Special:Translate&amp;group=page-Documents%2FHow+to%2FLive+disk&amp;action=page&amp;filter=&amp;language=uk" rel="nofollow noreferrer noopener" target="_blank">translated version</a></span> of the page <a class="external" href="http://oscada.org/wiki/Documents/How_to/Live_disk" title="Documents/How to/Live disk">Documents/How to/Live disk</a> and the translation is 100% complete.</div><hr /><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" href="http://oscada.org/wiki/Documents/How_to/Live_disk" title="Documents/How to/Live disk (100% translated)">English</a>&nbsp;• ‎<a class="mw-pt-progress mw-pt-progress--complete" href="http://oscada.org/wiki/Documents/How_to/Live_disk/ru" title="Документы/Как сделать/Живой диск (100% translated)">российский</a>&nbsp;• ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">українська</span></div></div>
<p><i>Автор:</i> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Роман Савоченко</a>
</p>
<div class="toc" id="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.9A.D0.BE.D0.BC.D0.B1.D1.96.D0.BD.D0.BE.D0.B2.D0.B0.D0.BD.D1.96-.D0.B3.D1.96.D0.B1.D1.80.D0.B8.D0.B4.D0.BD.D1.96_ISO-.D1.88.D1.82.D0.B0.D0.BC.D0.BF.D0.B8_.D0.B6.D0.B8.D0.B2.D0.BE.D0.B3.D0.BE_.D0.B4.D0.B8.D1.81.D0.BA.D1.83"><span class="tocnumber">1</span> <span class="toctext">Комбіновані-гібридні ISO-штампи живого диску</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.D0.96.D0.B8.D0.B2.D0.B8.D0.B9_USB-Flash_.D0.B4.D0.B8.D1.81.D0.BA_.D0.B7_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2.D0.BE.D1.8E_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.BE.D1.8E_FAT_.D0.B0.D0.B1.D0.BE_EXT"><span class="tocnumber">2</span> <span class="toctext">Живий USB-Flash диск з файловою системою FAT або EXT</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.D0.97.D0.B1.D0.B5.D1.80.D0.B5.D0.B6.D0.B5.D0.BD.D0.BD.D1.8F_.D1.80.D0.BE.D0.B1.D0.BE.D1.87.D0.B8.D1.85_.D0.B4.D0.B0.D0.BD.D0.B8.D1.85_.D0.B6.D0.B8.D0.B2.D0.BE.D0.B3.D0.BE_.D0.B4.D0.B8.D1.81.D0.BA.D1.83_.D0.BD.D0.B0_.D1.80.D0.BE.D0.B7.D0.B4.D1.96.D0.BB.D1.96_USB-Flash"><span class="tocnumber">3</span> <span class="toctext">Збереження робочих даних живого диску на розділі USB-Flash</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#.D0.97.D0.B0.D0.B2.D0.B0.D0.BD.D1.82.D0.B0.D0.B6.D0.B5.D0.BD.D0.BD.D1.8F"><span class="tocnumber">4</span> <span class="toctext">Завантаження</span></a></li>
</ul>
</div>

<p>Для максимального спрощення розгортання OpenSCADA можна використовувати живі збірки завантажувальних дисків CD, DVD та USB від <a class="external" href="http://oscada.org/wiki/Special:MyLanguage/Sub-projects/Automation_Linux_distributive" title="Special:MyLanguage/Sub-projects/Automation Linux distributive">Linux дистрибутиву автоматизації проекту OpenSCADA</a>. Живий диск передбачає можливість завантаження, прямо з нього, та швидке отримання бажаного робочого оточення. При завантажені та роботі живий диск не використовує штатних носіїв, тобто Ви можете не хвилюватися за цілісність та збереженість даних на них. В цілому живий диск є зручним засобом з широким набором потрібних програмних інструментів під рукою та незалежним від стаціонарного програмного оточення, спроможним здійснити:
</p>
<ul><li> демонстрацію та ознайомлення з можливостями OpenSCADA;</li>
<li> встановлення готового, вичерпного та перевіреного оточення автоматизованого робочого місця (АРМ);</li>
<li> діагностику програмного та апаратного оточення, а також їх відновлення, у деяких випадках;</li>
<li> формування у спеціальних редакціях, що містять все, що стосується цільового рішення: технічну та програмну документацію, конфігурації ПЛК та АРМ, ...</li></ul>
<p>Живий диск представляє собою упакований штамп операційної системи та прикладних програм розміром біля 700МБ, записані на CD/DVD диск або USB-Flash носій. У своїй роботі операційна система "на льоту" розпаковує потрібні файли для запуску програм та відкриття документів, тобто — не використовує оперативної пам'яті більш, ніж при її стаціонарному встановлені.
</p><p>Живі диски від <a class="external" href="http://oscada.org/wiki/Special:MyLanguage/Sub-projects/Automation_Linux_distributive" title="Special:MyLanguage/Sub-projects/Automation Linux distributive">Linux дистрибутиву автоматизації проекту OpenSCADA</a> збираються у декількох варіантах на основі дистрибутивів ОС Linux <a class="external text" href="http://debian.org" rel="nofollow noreferrer noopener" target="_blank">Debian</a>, <a class="external text" href="http://www.altlinux.ru" rel="nofollow noreferrer noopener" target="_blank">ALTLinux</a> (старі версії) та доступні для завантаження, у останній версії OpenSCADA, тут: <a class="external free" href="http://oscada.org/ua/golovna/zavantazhiti/" rel="nofollow noreferrer noopener" target="_blank">http://oscada.org/ua/golovna/zavantazhiti/</a>. Чинні живі збірки з OpenSCADA мають значно більші функції ніж передбачалося від початку:
</p>
<ul><li> Можливість прозорого збереження робочих змін у випадку запису на USB-Flash. Функція забезпечується створенням розділу диску, з можливістю запису, на вільному просторі USB-Flash. Цей розділ відбивається на корінь файлової системи, або її частини, та всі зміни записуються на нього. Крім збереження робочих даних у цей розділ можна довстановлювати недостаючі пакети програм з репозиторію пакетів Debian, OpenSCADA або ALTLinux.</li>
<li> Можливість поєднання звичайного Flash-диску даних з живим Flash-диском. Передбачає запис даних живого диску прямо на файлову систему USB-Flash — FAT16 або FAT32, що зберігає функції звичайного носія даних та додає функцію живого диску.</li>
<li> Можливість встановлення оточення живого диску на стаціонарний носій. Дозволяє не займатися глибоким вивченням та зануренням у операційну систему Linux при її встановлені, налаштуванні, а також розгортанні OpenSCADA. Достатньо завантажитися з живого диску, впевнитися, що основне обладнання визначилося нормально, потрібні програми працюють та надалі, за посередництвом простої процедури з іконки на робочому столі або окремого меню завантаження, встановити на стаціонарний носій. Отримане встановлення буде ідентичне до оточення живого диску.</li></ul>
<h3><span class="mw-headline" id=".D0.9A.D0.BE.D0.BC.D0.B1.D1.96.D0.BD.D0.BE.D0.B2.D0.B0.D0.BD.D1.96-.D0.B3.D1.96.D0.B1.D1.80.D0.B8.D0.B4.D0.BD.D1.96_ISO-.D1.88.D1.82.D0.B0.D0.BC.D0.BF.D0.B8_.D0.B6.D0.B8.D0.B2.D0.BE.D0.B3.D0.BE_.D0.B4.D0.B8.D1.81.D0.BA.D1.83"><span class="mw-headline-number">1</span> Комбіновані-гібридні ISO-штампи живого диску</span></h3>
<p>На цей час, переважно здійснюються збірки гібридних ISO штампів "живих дисків" (*LiveCD_USB.iso), які можна записати прямо на CD/DVD, USB-Flash, а також витягти вміст для запису на USB-Flash з файловими системами FAT або EXT.
</p><p>Основним варіантом формування "живого диску" є запис на CD/DVD, для чого можна використати стандартний інструментарій вихідної операційної системи. Додатковим, хоча по факту вже основним, варіантом є запис на USB-Flash, яку можна здійснити з оточення ОС Linux, наприклад, з оточення цього-ж "живого диску", записаного та завантаженого раніш з CD/DVD диску; або-ж з ОС MS Windows за посередництвом "Win32DiskImager".
</p><p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="files/At.png" width="22" /></a> Запис штампу "живого дискe" на USB-Flash знищить всі дані та зробить його непридатним для використання у якості носія даних, якщо не враховувати можливість запису на розділ збереження змін оточення ОС живого диску, який буде створено при першому завантажені з живого диска, у випадку ALTLinux, або користувачем, у випадку "Debian".
</p><p>Адреса диску для запису ISO-штампу має вигляд "/dev/sd{x}" та дізнатися її можна викликом консольної команди <b>$ dmesg</b> одразу після підключення цільового диска USB-Flash. З оточення Linux ISO-штамп можна записати таким чином:
</p>
<pre style="white-space: pre-wrap;">
# Запис файлу ISO-штампу на USB-Flash:
$ dd if=Debian_9-OpenSCADA_0.9.0-TDE_R14-amd64-LiveCD_USB.iso of=/dev/sd{x} bs=4096
# Запис ISO-штампу прямо з завантаженого CD/DVD живого диску:
$ dd if=/dev/sr0 of=/dev/sd{x} bs=4096
</pre>
<h3><span class="mw-headline" id=".D0.96.D0.B8.D0.B2.D0.B8.D0.B9_USB-Flash_.D0.B4.D0.B8.D1.81.D0.BA_.D0.B7_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2.D0.BE.D1.8E_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.BE.D1.8E_FAT_.D0.B0.D0.B1.D0.BE_EXT"><span class="mw-headline-number">2</span> Живий USB-Flash диск з файловою системою FAT або EXT</span></h3>
<p>Раніш здійснювалися окремі збірки штампів для запису їх на файлову систему FAT. На цей час спеціально такі штампи збираються тільки для "прошивок" (FirmWare) низки ПЛК (*flash.tar). Для створення живих USB-Flash дисків загального призначення можна використовувати гібридний ISO-штамп, про який написано у розділі вище.
</p><p>Перевагою "живого диска" на USB-Flash, як раніш зазначалося, є поєднання функції USB-Flash диску, як носія даних та як живого диска. Крім того, таким чином можна створювати компактні, надійні та функціональні рішення вбудованих систем з OpenSCADA, взявши "живий диск" за основу, наприклад: програмовані логічні контролери (ПЛК), панельні контролери (з сенсорним дисплеєм), а також просто SCADA-сервери та SCADA-станції оператору "швидкого приготування"; шляхом запису живого диску на стаціонарний носій (HDD, SSD або Flash). Надійність даного рішення визначається розташуванням основного ПЗ у немодифікованому упакованому файлі, а робочих даних на журнальованій файловій системі.
</p><p>Записати дані "живого диску" на файлову систему можна з будь-якої ОС (для FAT), але встановити завантажувач тільки у ОС Linux, для чого можна скористатися "живим" CD/DVD диском з минулого розділу.
</p><p>Процедура створення живого диску наступна, для даних гібридного ISO-диску (Debian и ALTLinux):
</p>
<ul><li> Для простоти, операцію витягу та копіювання даних ISO виконуємо у дво-панельному файловому менеджері <b>mc</b>. Щоб <b>mc</b> зміг прочитати ISO штамп потрібно встановити утиліту <b>isoinfo</b>, зазвичай знаходиться у пакеті "genisoimage".</li>
<li> Беремо вихідний файл ISO-штампу, відкриваємо його у <b>mc</b> та копіюємо з нього на цільову FAT або EXT файлову систему:
<ul><li> <i>Debian</i>: теки "isolinux" та "live"; теку "isolinux", на цільовій файловій системі, перейменовуємо у "syslinux".</li>
<li> <i>ALTLinux</i>: теку "syslinux" та файл "live".</li></ul></li>
<li> Перейменовуємо файл "syslinux/isolinux.cfg" на "syslinux/syslinux.cfg", для FAT, або "syslinux/extlinux.cfg", для EXT.</li>
<li> <i>ALTLinux</i>: додаємо, до секцій "label live" файлу "syslinux/syslinux.cfg", підрядок "automatic=method:disk,label:MY_LAB" або "automatic=method:disk,uuid:MY-UUID", де MY_LAB та MY-UUID можна дізнатися, для розділу "живого диску", за допомогою команди <b>$ blkid</b>.</li>
<li> <i>ALTLinux</i>: Замінюємо файл "syslinux/gfxboot.c32" аналогічним файлом з поточної системи (зазвичай знаходиться у теці "/usr/lib/syslinux/").</li>
<li> Встановлюємо завантажувач з командного рядку, все від суперкористувача: <b>$ su -</b>
<ul><li> Відключаємо диск: <b>$ umount /dev/sd{x}1</b></li>
<li> Ініціюємо MBR диску у коректне значення: <b>$ ms-sys -s /dev/sd{x}</b></li>
<li> Ініціюємо завантажувач: <b>$ syslinux /dev/sd{x}1</b></li></ul></li></ul>
<p>Для штампу "живого диска" на FAT (ALTLinux), все від суперкористувача: <b>$ su -</b>
</p>
<ul><li> Підключаємо цільовий диск та визначаємо його адресу: <b>$ dmesg</b></li>
<li> Монтуємо: <b>$ mkdir /mnt/tmp; mount /dev/sd{x}1 /mnt/tmp</b></li>
<li> Розпаковуємо вміст архіву прошивки на змонтований диск: <b>$ cd /mnt/tmp; tar xvf /var/tmp/LP8x81-ALTLinux6-OpenSCADA_0.9+r2302-i586-plc-rt1-up.flash.tar</b></li>
<li> Визначаємо UUID для файлової системи цільового диску: <b>$ blkid | grep /dev/sd{x}1</b></li>
<li> Модифікуємо файл "/mnt/tmp/syslinux/syslinux.cfg" у кінці рядку "append initrd=alt0/full.cz live ... disk,uuid:4EB3-0478", де вказуємо раніш отриманий UUID.</li>
<li> Додаємо або модифікуємо файл "/mnt/tmp/syslinux/lang" на предмет визначення локалі-мови інтерфейсу по замовченню, для української — "uk_UA", інакше буде Англійська.</li>
<li> Відключаємо диск: <b>$ umount /dev/sd{x}1</b></li>
<li> Ініціюємо MBR диску у коректне значення: <b>$ ms-sys -s /dev/sd{x}</b></li>
<li> Ініціюємо завантажувач: <b>$ syslinux /dev/sd{x}1</b></li></ul>
<p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="files/At.png" width="22" /></a> Такий спосіб розгортання живого диску потребує знань ОС Linux та інтерфейсу командного рядку (консолі), а також основ розбиття дискових носіїв оскільки, при некоректному початковому розбитті носія, завантаження може не піти.
</p>
<h3><span class="mw-headline" id=".D0.97.D0.B1.D0.B5.D1.80.D0.B5.D0.B6.D0.B5.D0.BD.D0.BD.D1.8F_.D1.80.D0.BE.D0.B1.D0.BE.D1.87.D0.B8.D1.85_.D0.B4.D0.B0.D0.BD.D0.B8.D1.85_.D0.B6.D0.B8.D0.B2.D0.BE.D0.B3.D0.BE_.D0.B4.D0.B8.D1.81.D0.BA.D1.83_.D0.BD.D0.B0_.D1.80.D0.BE.D0.B7.D0.B4.D1.96.D0.BB.D1.96_USB-Flash"><span class="mw-headline-number">3</span> Збереження робочих даних живого диску на розділі USB-Flash</span></h3>
<p>Живий диск, як раніш зазначалося, допускає повноцінну роботу з можливістю збереження робочих даних, а також оновлення ПЗ (за виключенням системного ПЗ та ядра ОС Linux). Зазвичай така можливість має сенс тільки для USB, HDD, SSD носіїв.
</p><p>У випадку дистрибутивів Debian, окремий розділ для зберігання робочих даних, з міткою "persistence", треба завжди створювати спеціально, а у файлі "persistence.conf" на ньому також вказувати файлову систему, або її частину, для відображення на запис (наприклад, "/home"). Для відображення всієї кореневої файлової системи у файлі треба записати "/ union". У якості файлової системи цього розділу краще використовувати "EXT3". Для створення розділу Ви можете використати програму менеджеру розділів, наприклад — <b>gparted</b>.
</p><p>У випадку дистрибутиву ALTLinux (6), та прямого запису гібридного ISO-образа, такий розділ буде створено при першому запуску. При формуванні "живого диска" на FAT та EXT треба створити окремий розділ з міткою "alt-live-storage" та файловою системою "EXT3", що можна зробити у програмі менеджеру розділів, наприклад — <b>gparted</b>.
</p>
<h3><span class="mw-headline" id=".D0.97.D0.B0.D0.B2.D0.B0.D0.BD.D1.82.D0.B0.D0.B6.D0.B5.D0.BD.D0.BD.D1.8F"><span class="mw-headline-number">4</span> Завантаження</span></h3>
<p>Для завантаження з отриманого "живого диску" треба перевантажити комп'ютер та на самому початку завантаження до стаціонарної ОС натиснути клавішу входу до меню завантаження BIOS та обрати там наш носій (рис.1). На різних комп'ютерах клавіша входу до меню завантаження може відрізнятися та бути однією з: "F8", "F9", "F10", "F11" або "F12". На деяких комп'ютерах змінити порядок завантаження можна тільки у самому BIOS.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:602px;"><a class="image" href="http://oscada.org/wiki/File:HowTo_bios_boot.png"><img class="thumbimage" height="502" src="files/HowTo_bios_boot.png" width="600" /></a>  <div class="thumbcaption">Рис. 1. Варіант меню обрання пристрою завантаження у BIOS.</div></div></div></div>
<p>Після обрання пристрою має з'явитися меню завантаження живого диску (рис.2), де попередньо можна обрати варіант завантаження з визначеною мовою, для Debian, або Ваша мова, клавішею F2 для ALTLinux.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:1042px;"><a class="image" href="http://oscada.org/wiki/File:HowTo_livebootlang.png"><img class="thumbimage" height="400" src="files/HowTo_livebootlang.png" width="1040" /></a>  <div class="thumbcaption">Рис. 2. Меню обрання мови живого диску Debian, ALTLinux.</div></div></div></div>
<p>У результаті завантаження живого диска Ви отримаєте робочий стіл TDE (рис.3).
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:1026px;"><a class="image" href="http://oscada.org/wiki/File:HowTo_livedesktop_uk.png"><img class="thumbimage" height="768" src="files/HowTo_livedesktop_uk.png" width="1024" /></a>  <div class="thumbcaption">Рис. 3. Робоча стільниця живого диску.</div></div></div></div>






</div></body>
</html>