<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html class="client-nojs" dir="ltr" lang="en">
<head>
<title>Документи/Як зробити/Звіт про падіння - OpenSCADAWiki</title>
<meta content="MediaWiki 1.26.4" name="generator" />
<link href="https://www.gnu.org/copyleft/fdl.html" rel="copyright" />
<link href="../en/files/doc.css" rel="stylesheet" /></head>
<body><div id="mw_header">
			<div class="mw-indicators">
</div>
			<h1 id="firstHeading" lang="uk">Документи/Як зробити/Звіт про падіння</h1>
		</div><div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="uk"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a class="external text" href="http://oscada.org/wiki/index.php?title=Special:Translate&amp;group=page-Documents%2FHow+to%2FCrash+report&amp;action=page&amp;filter=&amp;language=uk" rel="nofollow noreferrer noopener" target="_blank">translated version</a></span> of the page <a class="external" href="http://oscada.org/wiki/Documents/How_to/Crash_report" title="Documents/How to/Crash report">Documents/How to/Crash report</a> and the translation is 100% complete.</div><hr /><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" href="http://oscada.org/wiki/Documents/How_to/Crash_report" title="Documents/How to/Crash report (100% translated)">English</a>&nbsp;• ‎<a class="mw-pt-progress mw-pt-progress--complete" href="http://oscada.org/wiki/Documents/How_to/Crash_report/ru" title="Документы/Как сделать/Отчёт о падении (100% translated)">российский</a>&nbsp;• ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">українська</span></div></div>
<p><i>Автор:</i> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Роман Савоченко</a>
</p>
<div class="toc" id="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.A3.D0.BC.D0.BE.D0.B2.D0.B8_.D1.82.D0.B0_.D0.B2.D0.B0.D1.80.D1.96.D0.B0.D0.BD.D1.82.D0.B8_.D0.B7.D0.B2.D1.96.D1.82.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F"><span class="tocnumber">1</span> <span class="toctext">Умови та варіанти звітування</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.D0.92.D0.B8.D0.BC.D0.BE.D0.B3.D0.B8_.D0.B4.D0.BE_.D0.B7.D0.B2.D1.96.D1.82.D1.83_.D0.BF.D1.80.D0.BE_.D0.BF.D0.BE.D0.BC.D0.B8.D0.BB.D0.BA.D1.83"><span class="tocnumber">2</span> <span class="toctext">Вимоги до звіту про помилку</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.D0.9E.D1.82.D1.80.D0.B8.D0.BC.D0.B0.D0.BD.D0.BD.D1.8F_.D1.84.D0.B0.D0.B9.D0.BB.D1.83_.D0.BF.D0.B5.D1.80.D0.B5.D0.B4.D1.81.D0.BC.D0.B5.D1.80.D1.82.D0.BD.D0.BE.D0.B3.D0.BE_.D0.B4.D0.B0.D0.BC.D0.BF.D1.83_.D1.82.D0.B0_.D0.B9.D0.BE.D0.B3.D0.BE_.D0.BE.D0.B1.D1.80.D0.BE.D0.B1.D0.BA.D0.B0"><span class="tocnumber">3</span> <span class="toctext">Отримання файлу передсмертного дампу та його обробка</span></a></li>
</ul>
</div>

<p>Налагодженню та тестуванню OpenSCADA приділяється значний час розробників, однак у зв'язку із обмеженістю ресурсів і практичною неможливістю охопити всі варіанти конфігурації та виконання OpenSCADA, помилки можуть проявлятися як у вигляді невиконання окремих функцій, некоректності їх виконання та навіть аварійного завершення програми у користувачів. Розуміння цього з боку користувача дуже важливе та від нього потребується добра воля і деякий час на приготування звіту про проблему, з метою її наступного усунення розробниками.
</p>
<h2><span class="mw-headline" id=".D0.A3.D0.BC.D0.BE.D0.B2.D0.B8_.D1.82.D0.B0_.D0.B2.D0.B0.D1.80.D1.96.D0.B0.D0.BD.D1.82.D0.B8_.D0.B7.D0.B2.D1.96.D1.82.D1.83.D0.B2.D0.B0.D0.BD.D0.BD.D1.8F"><span class="mw-headline-number">1</span> Умови та варіанти звітування</span></h2>
<p>Повідомити про помилку у програмі може кожен, для її розгляду розробниками на загальних підставах вільної технічної підтримки, поза угодою комерційної технічної підтримки або виконання робіт цього користувача. Але будуть розглянуті розробниками тільки помилки, що є помилками безпосередньо OpenSCADA, не є проблемами оточення та сторонніх бібліотек, відтворюються у розробника на демонстраційних конфігураціях останніх версій OpenSCADA та наявному обладнані проекту OpenSCADA!
</p><p>Основним і єдиним офіційним місцем повідомлення про помилки на загальних підставах вільної технічної підтримки є розділ форуму "<a class="external text" href="http://oscada.org/ua/forum/topics/vidstezhennja_pomilok/" rel="nofollow noreferrer noopener" target="_blank">Відстеження помилок</a>", де <a class="external text" href="http://oscada.org/ua/rozrobka/rozrobniki" rel="nofollow noreferrer noopener" target="_blank">розробники</a> <a class="external" href="http://oscada.org/wiki/Special:MyLanguage/Works" title="Special:MyLanguage/Works">гарантовано дадуть на нього відповідь</a>. Якщо Ви не певні, що це помилка безпосередньо OpenSCADA, тоді краще напишіть повідомлення про неї у інший розділ форум OpenSCADA, де ніяких гарантій відповіді не надається. Інакше, після трьох поспіль некоректних повідомлень про помилку, Вас буде відключено від форуму за злісне отримання технічної підтримки та консультації, безплідно витрачаючи таким чином час розробників! Правила повідомлення про помилки детально викладено <a class="external text" href="http://oscada.org/ua/forum/posts/vidstezhennja_pomilok/pravila-4/" rel="nofollow noreferrer noopener" target="_blank">тут</a>.
</p><p>Перед формуванням звіту про помилку на загальних підставах вільної технічної підтримки, треба на <a class="external text" href="http://oscada.org/ua/forum/mitki/" rel="nofollow noreferrer noopener" target="_blank">сторінці міток форуму</a> ознайомитися з переліком відомих помилок:
</p>
<ul><li> підтверджених-відкритих та вирішуваних наразі — "BugConfirmed";</li>
<li> що наразі потребують зворотнього зв'язку від автора — "BugNeedFeedBack";</li>
<li> оточення виконання та специфічні до користувача — "BugEnvironment";</li>
<li> некоректних повідомлень про помилку — "BugWrong".</li></ul>
<p>Повідомлення про помилки у програмі на підставі <a class="external text" href="http://oscada.org/ua/poslugi/tekh-pidtrimka/" rel="nofollow noreferrer noopener" target="_blank">комерційної технічної підтримки</a> або виконання робіт користувача, можна здійснити у такі способи, згідно до пріоритету розробника:
</p>
<ul><li> у розділі форуму "<a class="external text" href="http://oscada.org/ua/forum/topics/tekhnichna_pidtrimka/" rel="nofollow noreferrer noopener" target="_blank">Технічна підтримка</a>", який з'являється та доступний для зареєстрованих користувачів, що мають активний <a class="external text" href="http://oscada.org/ua/poslugi/tekh-pidtrimka/" rel="nofollow noreferrer noopener" target="_blank">пакет технічної підтримки</a>;</li>
<li> електронною поштою на адресу <a class="external text" href="mailto:service@oscada.org" rel="nofollow noreferrer noopener" target="_blank">service at oscada.org</a>;</li>
<li> безпосередньо електронною поштою, сервісом миттєвих повідомлень та дзвінків, або телефоном <a class="external text" href="http://oscada.org/ua/rozrobka/rozrobniki" rel="nofollow noreferrer noopener" target="_blank">розробника</a>, а також <a class="external text" href="http://oscada.org/ua/forum/priv-povidomlennja/" rel="nofollow noreferrer noopener" target="_blank">приватним повідомленням форуму</a> (для зареєстрованих користувачів).</li></ul>
<h2><span class="mw-headline" id=".D0.92.D0.B8.D0.BC.D0.BE.D0.B3.D0.B8_.D0.B4.D0.BE_.D0.B7.D0.B2.D1.96.D1.82.D1.83_.D0.BF.D1.80.D0.BE_.D0.BF.D0.BE.D0.BC.D0.B8.D0.BB.D0.BA.D1.83"><span class="mw-headline-number">2</span> Вимоги до звіту про помилку</span></h2>
<p>Для виключення зайвих навідних питань, або навіть передчасного закриття помилки статусом "Не помилка", та для прискорення процесу локалізації проблеми рекомендується слідувати наступним вимогам до звіту:
</p>
<ul><li> Вказати оточення виконання OpenSCADA, а саме: дистрибутив та версію операційної системи.</li>
<li> Вказати версію OpenSCADA, включаючи SVN-ревізію робочої гілки.</li>
<li> Вказати особливості конфігурації та виконання.</li></ul>
<dl><dd><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../en/files/At.png" width="22" /></a> У випадку вільної підтримки обов'язковим є відтворення проблеми у стандартних конфігураціях та на <a href="../en/Quick_start.html" title="Special:MyLanguage/Documents/Quick start">демонстраційній БД</a>, особливо якщо це аварійне завершення програми та неможливо сформувати звіт про падіння або він виявляється непоказовим.</dd></dl>
<ul><li> Описати дії, які викликають помилку.</li>
<li> Вкласти протокол повідомлень OpenSCADA для сеансу з відтворенням помилки.</li>
<li> Сформувати звіт про аварійне завершення програми — розворот стеку виконання на момент аварійного завершення.
<ul><li> звіт зазвичай формується автоматично, шляхом генерації його з передсмертного дампу пам'яті програми; щодо включення генерації дампу пам'яті та ручної генерації звіту з нього читайте у наступному розділі;</li>
<li> при проблемах, пов'язаних із зависанням-блокуванням однієї або декількох задач-потоків OpenSCADA, для їх локалізації може бути корисним ручне переривання програми сигналом "SIGSEGV", що викличе формування передсмертного дампу та звіту про падіння з інформацією про місце зависання;</li>
<li> для значного збільшення користі розвороту стеку Ви маєте додати налагоджувальну інформацію, встановленням опції "-g" під час компіляції, або встановити готовий налагоджувальний пакет <b>openscada-dbg</b>.</li></ul></li></ul>
<h2><span class="mw-headline" id=".D0.9E.D1.82.D1.80.D0.B8.D0.BC.D0.B0.D0.BD.D0.BD.D1.8F_.D1.84.D0.B0.D0.B9.D0.BB.D1.83_.D0.BF.D0.B5.D1.80.D0.B5.D0.B4.D1.81.D0.BC.D0.B5.D1.80.D1.82.D0.BD.D0.BE.D0.B3.D0.BE_.D0.B4.D0.B0.D0.BC.D0.BF.D1.83_.D1.82.D0.B0_.D0.B9.D0.BE.D0.B3.D0.BE_.D0.BE.D0.B1.D1.80.D0.BE.D0.B1.D0.BA.D0.B0"><span class="mw-headline-number">3</span> Отримання файлу передсмертного дампу та його обробка</span></h2>
<p>Під час аварійного завершення програми ядро ОС Linux може формувати передсмертний дамп пам'яті програми. За допомогою цього дампу часто можна виявити місце у програмі, яке викликало аварійну зупинку. Для включення можливості генерації ядром Linux передсмертного дампу пам'яті програми потрібно виконати команди:
</p>
<pre style="white-space: pre-wrap;">
# Перевірка можливості генерації дампів пам'яті
# Повертає "core", якщо включена
$ cat /proc/sys/kernel/core_pattern
# Включення генерації дампів пам'яті
$ echo "core" &gt; /proc/sys/kernel/core_pattern
</pre>
<p>Після цього потрібно зняти обмеження на розмір генерованого файлу дампу. Це обмеження, по замовченню, у OpenSCADA знято та встановлюється воно аргументом командного рядку <b>--noCoreDump</b>. Зняти це обмеження, на рівні операційної системи, можна виконавши, перед викликом OpenSCADA, спеціальну команду — <b>$ ulimit -c unlimited</b>.
</p><p>Потім треба переконатися у тому, що користувач, який запускає OpenSCADA, має право запису до робочої теки OpenSCADA, що у останніх версіях OpenSCADA є обов'язковим та забезпечується <a class="external" href="http://oscada.org/wiki/Special:MyLanguage/Documents/Program_manual#Projects" title="Special:MyLanguage/Documents/Program manual">менеджером проектів OpenSCADA</a>.
</p><p>Далі запускається OpenSCADA та відтворюється аварійне завершення, у результаті якого, у робочій теці OpenSCADA, створюється файл "core".
</p><p>Останні версії OpenSCADA забезпечують автоматичну генерацію звіту про аварійне завершення, за наявності файлу передсмертного дампу "core" та налагоджувача <b>gdb</b>, та це здійснюється на початку запуску OpenSCADA. Файли звітів про аварійне завершення отримують назву виду "AGLKS_core_2018-02-16_22.06.crash" та накопичуються у робочій теці відповідного проекту OpenSCADA.
</p><p>Якщо файл дампу пам'яті "core" сформувався, а звіт про аварійне завершення автоматично не генерується, то ймовірно не встановлено налагоджувача <b>gdb</b>. У такому випадку Ви маєте його встановити та викликати:
</p>
<ul><li> сервісну процедуру менеджеру проектів OpenSCADA:</li></ul>
<dl><dd>$ openscada-proj proc {ProjName}</dd></dl>
<ul><li> або команду прямого виклику налагоджувача, із робочої теки проекту:</li></ul>
<dl><dd>$ gdb openscada --core core --batch --quiet -ex "thread apply all bt full" -ex "quit" &gt; {ProjName}_core_$(date +%F_%H:%M).crash</dd></dl>
<ul><li> або пряму процедуру налагоджувача у інтерактивному режимі, через виклик <b>gdb</b> без аргументів:</li></ul>
<pre style="white-space: pre-wrap; margin-left: 15px">
# Перехід до робочої теки проекту OpenSCADA
(gdb) cd /var/spool/openscada/{ProjName}
(gdb) cd ~/.openscada/{ProjName}
# Вказання виконувального файлу
(gdb) file /usr/bin/openscada
# Вказання файлу дампу пам'яті програми
(gdb) core-file ./core.26658
# Отримання розвороту стеку виконання — звіту про аварійне завершення
(gdb) thread apply all bt full
#0  0xb7d104c0 in pthread_cancel () from /lib/librt.so.1
#1  0xb7d1edaa in start_thread () from /lib/libpthread.so.0
#2  0xb7dfcf5e in clone () from /lib/libc.so.6
</pre>






</div></body>
</html>