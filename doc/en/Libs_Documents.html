<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html class="client-nojs" dir="ltr" lang="en">
<head>
<meta charset="UTF-8" />
<title>Libs/Documents - OpenSCADAWiki</title>
<meta content="MediaWiki 1.26.4" name="generator" />
<link href="https://www.gnu.org/copyleft/fdl.html" rel="copyright" />
<link href="files/doc.css" rel="stylesheet" /></head>
<body><div class="floatright"><a href="index.html"><img src="../en/files/index.png" /></a></div><div id="mw_header">
			<div class="mw-indicators">
</div>
			<h1 id="firstHeading" lang="en">Libs/Documents</h1>
		</div><div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-pt-languages" dir="ltr" lang="en"><div class="mw-pt-languages-list autonym"><span class="mw-pt-languages-ui mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">English</span>&nbsp;• ‎<a class="mw-pt-progress mw-pt-progress--low" href="../ru/Libs_Documents.html" title="Библиотеки/Документы (33% translated)">mRussian</a>&nbsp;• ‎<a class="mw-pt-progress mw-pt-progress--complete" href="../uk/Libs_Documents.html" title="Бібліотеки/Документи (100% translated)">Українська</a></div></div>
<table class="wikitable">

<tr>
<th> Name </th>
<th> Version </th>
<th> License </th>
<th> Source </th>
<th> Languages </th>
<th> Author </th>
<th> Icon </th>
<th> Description
</th></tr>

<tr>
<td> <a href="Libs_Documents.html" title="Special:MyLanguage/Libs/Documents">Reports' and documents' library</a>
</td>
<td> 2.0, 2.1 </td>
<td> GPLv2 </td>
<td>
<p>OscadaLibs.db (<a class="external text" href="http://oscada.org/svn/trunk/OpenSCADA/data/LibsDB/OscadaLibs.sql" rel="nofollow noreferrer noopener" target="_blank">SQL</a>, <a class="external" href="http://oscada.org/wiki/File:OscadaLibs.db.gz" title="File:OscadaLibs.db.gz">GZip</a>) &gt; DAQ.JavaLikeCalc.doc<br />
vcaBase.db (<a class="external text" href="http://oscada.org/svn/trunk/OpenSCADA/data/LibsDB/vcaBase.sql" rel="nofollow noreferrer noopener" target="_blank">SQL</a>, <a class="external" href="http://oscada.org/wiki/File:VcaBase.db.gz" title="File:VcaBase.db.gz">GZip</a>) &gt; VCA.wlb_doc
</p>
</td>
<td> en, uk, ru
</td>
<td> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Roman Savochenko</a> </td>
<td> <a class="image" href="http://oscada.org/wiki/File:LibDocuments.png"><img alt="LibDocuments.png" height="64" src="files/LibDocuments.png" width="64" /></a>
</td>
<td> Provides the combined library of the reports, documents and related functions of common and the industrial automation.
<ul><li> <b>Founded:</b> January 2008</li>
<li> <b>Initially created, for the functions:</b> in <a class="external text" href="http://wiki.oscada.org/HomePageEn/Using/APIFunctionLibs/LibDoc" rel="nofollow noreferrer noopener" target="_blank">the old Wiki</a></li>
<li> <b>Used by:</b> <a class="external" href="http://oscada.org/wiki/Special:MyLanguage/Using" title="Special:MyLanguage/Using">most projects on OpenSCADA</a></li>
<li> <b><a href="To_do.html" title="Special:MyLanguage/Works/To do">To Do</a>:</b></li></ul>
<dl><dd>- expand the document "<a href="Libs_Documents.html#docRepYear" title="Special:MyLanguage/Libs/Documents">Year report of the month values</a>" in processing the manual entered counters overrun;</dd>
<dd>- expand the document function "<a href="Libs_Documents.html#diagram" title="Special:MyLanguage/Libs/Documents">Diagram</a>" in support the bar graphs.</dd></dl>
</td></tr></table>
<p>The library is created to provide report and document elements-frames of the user interface and it contains graphic elements, often need when forming the user interface of the automation of technological and common processes. The library is mostly built on the basis <a href="Modules/VCAEngine.html#Document" title="Special:MyLanguage/Modules/VCAEngine">the primitive "Document"</a> and the internal programming language <a href="Modules/JavaLikeCalc.html" title="Special:MyLanguage/Modules/JavaLikeCalc">JavaLikeCalc</a>, for the related functions also.
</p><p>The element's names and their parameters are available in languages: English, Ukrainian and mRussian. Their source code wrote in human-language independent mode with calls for the translations by the function <i>tr()</i> and the message's translation also allowed for English, Ukrainian and mRussian.
</p>
<div class="toc" id="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Documents"><span class="tocnumber">1</span> <span class="toctext">Documents</span></a>
<ul>
<li class="toclevel-2"><a href="#Document_-_archival_.28doc.29"><span class="tocnumber">1.1</span> <span class="toctext">Document - archival (doc)</span></a>
<ul>
<li class="toclevel-3"><a href="#Day_report_of_the_hour-averaged_values_.28docRepDay.29"><span class="tocnumber">1.1.1</span> <span class="toctext">Day report of the hour-averaged values (docRepDay)</span></a></li>
<li class="toclevel-3"><a href="#Month_report_of_the_day-averaged_values_.28docRepMonth.29"><span class="tocnumber">1.1.2</span> <span class="toctext">Month report of the day-averaged values (docRepMonth)</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Document_-_dynamic_.28docDin.29"><span class="tocnumber">1.2</span> <span class="toctext">Document - dynamic (docDin)</span></a>
<ul>
<li class="toclevel-3"><a href="#Instantaneous_values_report_.28docRepInstVals.29"><span class="tocnumber">1.2.1</span> <span class="toctext">Instantaneous values report (docRepInstVals)</span></a></li>
<li class="toclevel-3"><a href="#Protocol_of_violations_.28docAlarmsRep.29"><span class="tocnumber">1.2.2</span> <span class="toctext">Protocol of violations (docAlarmsRep)</span></a></li>
<li class="toclevel-3"><a href="#Protocol_of_interruptions_.28docUsersSet.29"><span class="tocnumber">1.2.3</span> <span class="toctext">Protocol of interruptions (docUsersSet)</span></a></li>
<li class="toclevel-3"><a href="#Protocol_of_messages_.28docMessRep.29"><span class="tocnumber">1.2.4</span> <span class="toctext">Protocol of messages (docMessRep)</span></a></li>
<li class="toclevel-3"><a href="#Report_of_two_working_shifts_.28docRep2WorkSh.29"><span class="tocnumber">1.2.5</span> <span class="toctext">Report of two working shifts (docRep2WorkSh)</span></a></li>
<li class="toclevel-3"><a href="#Year_report_of_the_month_values_.28docRepYear.29"><span class="tocnumber">1.2.6</span> <span class="toctext">Year report of the month values (docRepYear)</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-2"><a href="#Service_related_functions"><span class="tocnumber">2</span> <span class="toctext"><span>Service related functions</span></span></a>
<ul>
<li class="toclevel-2"><a href="#Getting_value_from_the_value_archive_.28getVal.29"><span class="tocnumber">2.1</span> <span class="toctext">Getting value from the value archive (getVal)</span></a></li>
<li class="toclevel-2"><a href="#Average_value_of_the_value_archive_.28averVal.29"><span class="tocnumber">2.2</span> <span class="toctext">Average value of the value archive (averVal)</span></a></li>
<li class="toclevel-2"><a href="#Sum_values_of_the_value_archive_.28sumVal.29"><span class="tocnumber">2.3</span> <span class="toctext">Sum values of the value archive (sumVal)</span></a></li>
<li class="toclevel-2"><a href="#Diagram_.28diagram.29"><span class="tocnumber">2.4</span> <span class="toctext">Diagram (diagram)</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Documents"><span class="mw-headline-number">1</span> Documents</span></h2>
<p>Contains elements-frames of the documents of the template and end types, what intended to be placed in the "Documents" part (the type of view) of the project tree of the pages, built on <a href="Libs_Main_graphical_elements.html#RootPgSo" title="Special:MyLanguage/Libs/Main graphical elements">the concept of the signal objects of the root page "RootPgSo"</a>. However, they may be located as separate entities or as a part of your own concept of the page management, but it should be take in account that frames often refer and call <a href="Libs_Main_graphical_elements.html#doc_panel" title="Special:MyLanguage/Libs/Main graphical elements">the panel of documents</a>!
</p><p>For connection the library part to a project of the OpenSCADA station you can obtain the database file as:
</p>
<ul><li> supplied with a ready and proper package of the Linux distribution like to "openscada-libdb-vca", "openscada-LibDB.VCA";</li>
<li> directly taken for most actual one from <a class="external text" href="http://oscada.org/svn/trunk/OpenSCADA/data/LibsDB/vcaBase.sql" rel="nofollow noreferrer noopener" target="_blank">the subversion repository</a> and converted to the DB SQLite file in the way:</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 15px"><pre>wget http://oscada.org/svn/trunk/OpenSCADA/data/LibsDB/vcaBase.sql
sqlite3 -init vcaBase.sql vcaBase.db .exit
</pre></div>
<ul><li> downloaded for <a class="external" href="http://oscada.org/wiki/File:VcaBase.db.gz" title="File:VcaBase.db.gz">the one attached here</a>.</li></ul>
<p>This obtained file next you can place into the project directory of the station and create the database object for the DB module "SQLite", registering the database file in the configuration.
</p><p><br />
</p>
<table class="wikitable">

<tr>
<td> <span id="doc" title="#doc"><h3><span class="mw-headline" id="Document_-_archival_.28doc.29"><span class="mw-headline-number">1.1</span> Document - archival (<a href="Libs_Documents.html#doc" title="Special:MyLanguage/Libs/Documents">doc</a>)</span></h3></span> </td>
<td> 1.2 </td>
<td> GPLv2 </td>
<td> * </td>
<td> en, uk, ru 
</td>
<td> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Roman Savochenko</a>
</td></tr></table>
<p>The frame, shown in Figure 1.1, is a template of documents of the archive type and it is provided as an example and for building own archive documents on it basis. The main specific of that document type is the periodic generating on the VCA-session level (in the background) and placing the final and ready to view documents to an archive, the VCA-project's session DB-table "prj_{ProjID}_ses".
</p><p>The main advantage of this document type is the lowest load on CPU during the generation, which can be multi-step one during the main generation period, and the fast view, which involves simply opening the ready documents from the archive. But this document type has a significant disadvantage, which is the constant execution of single project session in the background and the absence of which leads to the omission of the documents generation in the archive.
</p><p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="files/At.png" width="22" /></a> Therefore, documents of this type are appropriated to use on the stationary AWPs of the operators, even if it is a reproduction from the visualisation server, and are useless in the WEB-interface!
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:902px;"><a class="image" href="http://oscada.org/wiki/File:LibDocuments_doc.png"><img class="thumbimage" height="600" src="files/LibDocuments_doc.png" width="900" /></a>  <div class="thumbcaption">Fig.1.1. The "Document - archival" frame in the development mode.</div></div></div></div>
<p><b><u>Using — development</u></b><br />
The frame can only be used as a basis for creating your own archival type documents, for which you should it copy or inherit, by selecting the appropriate option in the copy dialog. Next, you need to edit the document template, in the appropriate attribute, according to the needs of your document, and write your own procedure for periodically and step-by-step formatting of the documents with closing to the archive, a sample of which can be obtained from the final documents based on this.
</p><p><br />
</p>
<table class="wikitable">

<tr>
<td> <span id="docRepDay" title="#docRepDay"><h4><span class="mw-headline" id="Day_report_of_the_hour-averaged_values_.28docRepDay.29"><span class="mw-headline-number">1.1.1</span> Day report of the hour-averaged values (<a href="Libs_Documents.html#docRepDay" title="Special:MyLanguage/Libs/Documents">docRepDay</a>)</span></h4></span>
</td>
<td> 3.2 </td>
<td> GPLv2 </td>
<td> * </td>
<td> en, uk, ru
</td>
<td> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Roman Savochenko</a> </td>
<td> -1 ms (parent)
</td></tr></table>
<p>The document, shown in Figure 1.1.1, is provided for generating a day report of the hour-averaged values in view of the trends diagram and the data table. The document is initially the archival type but in time it is made dynamic also, so, depending from the execution mode, you can whether select a ready document from the archive or specify the data time and depth. The document commonly uses and represents the representative structure of the DAQ-template "<a href="Libs_Main.html#anUnif" title="Special:MyLanguage/Libs/Main">Analog signal</a>". As a data source of this document is <a href="Program_manual.html#ArchVals" title="Special:MyLanguage/Documents/Program manual">the value archives</a> of the DAQ-parameters.
</p><p>Working in the primary archival mode performed with the 5 minutes period, when during an hour an one record-row data is formed. The last one record-row is closed at the 5 minute of a new hour (14:05 for example) and a new one record-row is started. Whole and complete document is archived at the 3 minute of the "Report hour (<i>repHour</i>)" of the next day (09:03 for example).
</p>
<ul><li> <b>Sponsored for the dynamization by</b>: BLUE STAR GROUP Ltd</li></ul>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:902px;"><a class="image" href="http://oscada.org/wiki/File:LibDocuments_docRepDay.png"><img class="thumbimage" height="580" src="files/LibDocuments_docRepDay.png" width="900" /></a>  <div class="thumbcaption">Fig.1.1.1. The "Day report of the hour-averaged values" document in the runtime mode.</div></div></div></div>
<p><b><u>Using — development</u></b><br />
The document is designed to perform the role of page-template, and should therefore be placed directly in the project's tree. To each document can be connected up to ten parameters, setting the links. Items, for which there are not set the links, will be hidden at runtime.
</p><p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="files/At.png" width="22" /></a> To each document can be set:
</p>
<ul><li> the "Archive length (<b>n</b>)" attribute in need value of the document archive size or in 0 for the dynamic mode;</li>
<li> the "Archiver (<b>arch</b>)" attribute in need archiver that maintains the specified parameters; you must not use archivers with worse at one minute quality;</li>
<li> the "Report hour (<b>repHour</b>)" attribute in the document report hour — start hour of the day;</li>
<li> the "Enable graph (<b>enGraph</b>)" attribute for enable/disable the graph;</li>
<li> the "Title (<b>title</b>)" attribute in the document specific title.</li></ul>
<p><b><u>Using — runtime</u></b><br />
In the runtime mode, the items, for which links have been set, are displayed. Additionally you can control the display properties of documents, for what there is used <a href="Libs_Main_graphical_elements.html#doc_panel" title="Special:MyLanguage/Libs/Main graphical elements">the document control panel</a>, which can be called clicking the left mouse button in the document area.
</p><p><b><u>Linking and configuring the attributes</u></b><br />
</p>
<table class="wikitable">

<tr>
<th> Identifier </th>
<th> Name </th>
<th> Type </th>
<th> Configuration </th>
<th> Configuration template </th>
<th> Description
</th></tr>
<tr>
<td> n </td>
<td> Archive length, 0 for the dynamic mode </td>
<td> Integer </td>
<td> Constant </td>
<td> </td>
<td> Setting the archive size in 0 you switch the document mode to the dynamic type, by default 100.
</td></tr>
<tr>
<td> repHour </td>
<td> Report hour </td>
<td> Integer </td>
<td> Constant	</td>
<td> </td>
<td> The hour which means as the report start — the day start, by default 9.
</td></tr>
<tr>
<td colspan="6"> <i>Document widget (doc)</i>
</td></tr>
<tr>
<td> arch </td>
<td> Archiver </td>
<td> String </td>
<td> Constant </td>
<td> </td>
<td> Values archiver, by default and preferable to use one-minute archiver "FSArch.1m".
</td></tr>
<tr>
<td> title </td>
<td> Title </td>
<td> String </td>
<td> Constant </td>
<td> </td>
<td> Title of the report.
</td></tr>
<tr>
<td> enGraph </td>
<td> Enable graph </td>
<td> Boolean </td>
<td> Constant </td>
<td> </td>
<td> Enabled by default.
</td></tr>
<tr>
<td colspan="6"> <i>Parameter {n} from 1 to 10.</i>
</td></tr>
<tr>
<td> p{n}name </td>
<td> Parameter {n}: name </td>
<td> String </td>
<td> Input link </td>
<td> Parameter{n}|NAME </td>
<td> Name of the parameter in the table header.
</td></tr>
<tr>
<td> p{n}var </td>
<td> Parameter {n}: variable </td>
<td> Address </td>
<td> Input link </td>
<td> Parameter{n}|var </td>
<td> Address to the parameter attribute with the value archive.
</td></tr>
<tr>
<td> p{n}ed </td>
<td> Parameter {n}: dimension </td>
<td> String </td>
<td> Input link </td>
<td> Parameter{n}|ed </td>
<td>
</td></tr>
<tr>
<td> p{n}prec </td>
<td> Parameter {n}: precision </td>
<td> Integer </td>
<td> Input link </td>
<td> Parameter{n}|prec </td>
<td>
</td></tr>
<tr>
<td> p{n}cntr </td>
<td> Parameter {n}: is counter </td>
<td> Boolean </td>
<td> Constant </td>
<td> Parameter{n}|isCntr </td>
<td> Sets for counters for obtain the values as difference.
</td></tr>
<tr>
<td> p{n}max </td>
<td> Parameter {n}: maximum </td>
<td> Address </td>
<td> Input link </td>
<td> Parameter{n}|max </td>
<td> Used for determining the parameter scale on the graph.
</td></tr>
<tr>
<td> p{n}min </td>
<td> Parameter {n}: minimum </td>
<td> Address </td>
<td> Input link </td>
<td> Parameter{n}|min </td>
<td> Used for determining the parameter scale on the graph.
</td></tr></table>
<p><br />
</p>
<table class="wikitable">

<tr>
<td> <span id="docRepMonth" title="#docRepMonth"><h4><span class="mw-headline" id="Month_report_of_the_day-averaged_values_.28docRepMonth.29"><span class="mw-headline-number">1.1.2</span> Month report of the day-averaged values (<a href="Libs_Documents.html#docRepMonth" title="Special:MyLanguage/Libs/Documents">docRepMonth</a>)</span></h4></span>
</td>
<td> 3.2 </td>
<td> GPLv2 </td>
<td> * </td>
<td> en, uk, ru
</td>
<td> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Roman Savochenko</a> </td>
<td> -1 ms (parent)
</td></tr></table>
<p>The document, shown in Figure 1.1.2, is provided for generating a month report of the day-averaged values in view of the trends diagram and the data table. The document is initially the archival type but in time it is made dynamic also, so, depending from the execution mode, you can whether select a ready document from the archive or specify the data time and depth. The document commonly uses and represents the representative structure of the DAQ-template "<a href="Libs_Main.html#anUnif" title="Special:MyLanguage/Libs/Main">Analog signal</a>". As a data source of this document is <a href="Program_manual.html#ArchVals" title="Special:MyLanguage/Documents/Program manual">the value archives</a> of the DAQ-parameters.
</p><p>Working in the primary archival mode performed with the 5 minutes period, when during a day an one record-row data is formed. The last one record-row is closed at the 5 minute of a new day (05 09:05 for example) and a new one record-row is started. Whole and complete document is archived at the 3 minute of the "Report hour (<i>repHour</i>)" of the next month (05 09:03 for example).
</p>
<ul><li> <b>Sponsored for the dynamization by</b>: BLUE STAR GROUP Ltd</li></ul>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:902px;"><a class="image" href="http://oscada.org/wiki/File:LibDocuments_docRepMonth.png"><img class="thumbimage" height="580" src="files/LibDocuments_docRepMonth.png" width="900" /></a>  <div class="thumbcaption">Fig.1.1.2. The "Month report of the day-averaged values" document in the runtime mode.</div></div></div></div>
<p><b><u>Using — development</u></b><br />
The document is designed to perform the role of page-template, and should therefore be placed directly in the project's tree. To each document can be connected up to ten parameters, setting the links. Items, for which there are not set the links, will be hidden at runtime.
</p><p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="files/At.png" width="22" /></a> To each document can be set:
</p>
<ul><li> the "Archive length (<b>n</b>)" attribute in need value of the document archive size or in 0 for the dynamic mode;</li>
<li> the "Archiver (<b>arch</b>)" attribute in need archiver that maintains the specified parameters; you must not use archivers with worse at one day quality;</li>
<li> the "Report hour (<b>repHour</b>)" attribute in the document report hour — start hour of the day;</li>
<li> the "Enable graph (<b>enGraph</b>)" attribute for enable/disable the graph;</li>
<li> the "Title (<b>title</b>)" attribute in the document specific title.</li></ul>
<p><b><u>Using — runtime</u></b><br />
In the runtime mode, the items, for which links have been set, are displayed. Additionally you can control the display properties of documents, for what there is used <a href="Libs_Main_graphical_elements.html#doc_panel" title="Special:MyLanguage/Libs/Main graphical elements">the document control panel</a>, which can be called clicking the left mouse button in the document area.
</p><p><b><u>Linking and configuring the attributes</u></b><br />
</p>
<table class="wikitable">

<tr>
<th> Identifier </th>
<th> Name </th>
<th> Type </th>
<th> Configuration </th>
<th> Configuration template </th>
<th> Description
</th></tr>
<tr>
<td> n </td>
<td> Archive length, 0 for the dynamic mode </td>
<td> Integer </td>
<td> Constant </td>
<td> </td>
<td> Setting the archive size in 0 you switch the document mode to the dynamic type, by default 100.
</td></tr>
<tr>
<td> repHour </td>
<td> Report hour </td>
<td> Integer </td>
<td> Constant	</td>
<td> </td>
<td> The hour which means as the report start — the day start, by default 9.
</td></tr>
<tr>
<td colspan="6"> <i>Document widget (doc)</i>
</td></tr>
<tr>
<td> arch </td>
<td> Archiver </td>
<td> String </td>
<td> Constant </td>
<td> </td>
<td> Values archiver, by default and preferable to use one-minute archiver "FSArch.1m".
</td></tr>
<tr>
<td> title </td>
<td> Title </td>
<td> String </td>
<td> Constant </td>
<td> </td>
<td> Title of the report.
</td></tr>
<tr>
<td> enGraph </td>
<td> Enable graph </td>
<td> Boolean </td>
<td> Constant </td>
<td> </td>
<td> Enabled by default.
</td></tr>
<tr>
<td colspan="6"> <i>Parameter {n} from 1 to 10.</i>
</td></tr>
<tr>
<td> p{n}name </td>
<td> Parameter {n}: name </td>
<td> String </td>
<td> Input link </td>
<td> Parameter{n}|NAME </td>
<td> Name of the parameter in the table header.
</td></tr>
<tr>
<td> p{n}var </td>
<td> Parameter {n}: variable </td>
<td> Address </td>
<td> Input link </td>
<td> Parameter{n}|var </td>
<td> Address to the parameter attribute with the value archive.
</td></tr>
<tr>
<td> p{n}ed </td>
<td> Parameter {n}: dimension </td>
<td> String </td>
<td> Input link </td>
<td> Parameter{n}|ed </td>
<td>
</td></tr>
<tr>
<td> p{n}prec </td>
<td> Parameter {n}: precision </td>
<td> Integer </td>
<td> Input link </td>
<td> Parameter{n}|prec </td>
<td>
</td></tr>
<tr>
<td> p{n}cntr </td>
<td> Parameter {n}: is counter </td>
<td> Boolean </td>
<td> Constant </td>
<td> Parameter{n}|isCntr </td>
<td> Sets for counters for obtain the values as difference.
</td></tr>
<tr>
<td> p{n}max </td>
<td> Parameter {n}: maximum </td>
<td> Address </td>
<td> Input link </td>
<td> Parameter{n}|max </td>
<td> Used for determining the parameter scale on the graph.
</td></tr>
<tr>
<td> p{n}min </td>
<td> Parameter {n}: minimum </td>
<td> Address </td>
<td> Input link </td>
<td> Parameter{n}|min </td>
<td> Used for determining the parameter scale on the graph.
</td></tr></table>
<p><br />
</p>
<table class="wikitable">

<tr>
<td> <span id="docDin" title="#docDin"><h3><span class="mw-headline" id="Document_-_dynamic_.28docDin.29"><span class="mw-headline-number">1.2</span> Document - dynamic (<a href="Libs_Documents.html#docDin" title="Special:MyLanguage/Libs/Documents">docDin</a>)</span></h3></span>
</td>
<td> 1.3 </td>
<td> GPLv2 </td>
<td> * </td>
<td> en, uk, ru
</td>
<td> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Roman Savochenko</a> </td>
<td> -2 ms (disabled)
</td></tr></table>
<p>The frame, shown in Figure 1.2, is a template of documents of the dynamic type and it is provided as an example and for building own dynamic documents on it basis. The main specific of that document type is the synchronous generating at the requesting-opening.
</p><p>The main advantage of this document type is the maximal actuality of the data and the document language, for the multilingual interfaces, that is the possibility of generating for the specified date and time. But this document type has a significant disadvantage, which is the high CPU load and long time of the synchronous generation for big archival data.
</p><p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="files/At.png" width="22" /></a> Therefore, documents of this type are allowed to use on every types of the interfaces, include the WEB-interfaces, but some documents based on big archival data require for not slow processing systems!
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:902px;"><a class="image" href="http://oscada.org/wiki/File:LibDocuments_docDin.png"><img class="thumbimage" height="600" src="files/LibDocuments_docDin.png" width="900" /></a>  <div class="thumbcaption">Fig.1.2. The "Document - dynamic" frame in the development mode.</div></div></div></div>
<p><b><u>Using — development</u></b><br />
The frame can only be used as a basis for creating your own dynamic type documents, for which you should it copy or inherit, by selecting the appropriate option in the copy dialog. Next, you need to edit the document template, in the appropriate attribute, according to the needs of your document, and write your own common generation procedure, if it is not builtin into the document template.
</p><p><br />
</p>
<table class="wikitable">

<tr>
<td> <span id="docRepInstVals" title="#docRepInstVals"><h4><span class="mw-headline" id="Instantaneous_values_report_.28docRepInstVals.29"><span class="mw-headline-number">1.2.1</span> Instantaneous values report (<a href="Libs_Documents.html#docRepInstVals" title="Special:MyLanguage/Libs/Documents">docRepInstVals</a>)</span></h4></span>
</td>
<td> 2.1 </td>
<td> GPLv2 </td>
<td> * </td>
<td> en, uk, ru
</td>
<td> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Roman Savochenko</a>
</td></tr></table>
<p>The document, shown in Figure 1.2.1, is provided for generating a report of the instantaneous values in view of the trends diagram and the data table. The document is the dynamic type, so you can specify the data time and depth. The document commonly uses and represents the representative structure of the DAQ-template "<a href="Libs_Main.html#anUnif" title="Special:MyLanguage/Libs/Main">Analog signal</a>". As a data source of this document is <a href="Program_manual.html#ArchVals" title="Special:MyLanguage/Documents/Program manual">the value archives</a> of the DAQ-parameters.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:902px;"><a class="image" href="http://oscada.org/wiki/File:LibDocuments_docRepInstVals.png"><img class="thumbimage" height="580" src="files/LibDocuments_docRepInstVals.png" width="900" /></a>  <div class="thumbcaption">Fig.1.2.1. The "Instantaneous values report" document in the runtime mode.</div></div></div></div>
<p><b><u>Using — development</u></b><br />
The document is designed to perform the role of page-template, and should therefore be placed directly in the project's tree. To each document can be connected up to ten parameters, setting the links. Items, for which there are not set the links, will be hidden at runtime. The default document depth in the past is set at 10 minutes.
</p><p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="files/At.png" width="22" /></a> To each document can be set:
</p>
<ul><li> the "Enable graph (<b>enGraph</b>)" attribute for enable/disable the graph;</li>
<li> the "Title (<b>title</b>)" attribute in the document specific title.</li></ul>
<p><b><u>Using — runtime</u></b><br />
In the runtime mode, the items, for which links have been set, are displayed. Additionally you can control the display properties of documents, for what there is used <a href="Libs_Main_graphical_elements.html#doc_panel" title="Special:MyLanguage/Libs/Main graphical elements">the document control panel</a>, which can be called clicking the left mouse button in the document area.
</p><p><b><u>Linking and configuring the attributes</u></b><br />
</p>
<table class="wikitable">

<tr>
<th> Identifier </th>
<th> Name </th>
<th> Type </th>
<th> Configuration </th>
<th> Configuration template </th>
<th> Description
</th></tr>
<tr>
<td colspan="6"> <i>Document widget (doc)</i>
</td></tr>
<tr>
<td> title </td>
<td> Title </td>
<td> String </td>
<td> Constant </td>
<td> </td>
<td> Title of the report.
</td></tr>
<tr>
<td> enGraph </td>
<td> Enable graph </td>
<td> Boolean </td>
<td> Constant </td>
<td> </td>
<td> Enabled by default.
</td></tr>
<tr>
<td colspan="6"> <i>Parameter {n} from 1 to 10.</i>
</td></tr>
<tr>
<td> p{n}name </td>
<td> Parameter {n}: name </td>
<td> String </td>
<td> Input link </td>
<td> Parameter{n}|NAME </td>
<td> Name of the parameter in the table header.
</td></tr>
<tr>
<td> p{n}var </td>
<td> Parameter {n}: variable </td>
<td> Address </td>
<td> Input link </td>
<td> Parameter{n}|var </td>
<td> Address to the parameter attribute with the value archive.
</td></tr>
<tr>
<td> p{n}ed </td>
<td> Parameter {n}: dimension </td>
<td> String </td>
<td> Input link </td>
<td> Parameter{n}|ed </td>
<td>
</td></tr>
<tr>
<td> p{n}prec </td>
<td> Parameter {n}: precision </td>
<td> Integer </td>
<td> Input link </td>
<td> Parameter{n}|prec </td>
<td>
</td></tr>
<tr>
<td> p{n}max </td>
<td> Parameter {n}: maximum </td>
<td> Address </td>
<td> Input link </td>
<td> Parameter{n}|max </td>
<td> Used for determining the parameter scale on the graph.
</td></tr>
<tr>
<td> p{n}min </td>
<td> Parameter {n}: minimum </td>
<td> Address </td>
<td> Input link </td>
<td> Parameter{n}|min </td>
<td> Used for determining the parameter scale on the graph.
</td></tr></table>
<p><br />
</p>
<table class="wikitable">

<tr>
<td> <span id="docAlarmsRep" title="#docAlarmsRep"><h4><span class="mw-headline" id="Protocol_of_violations_.28docAlarmsRep.29"><span class="mw-headline-number">1.2.2</span> Protocol of violations (<a href="Libs_Documents.html#docAlarmsRep" title="Special:MyLanguage/Libs/Documents">docAlarmsRep</a>)</span></h4></span>
</td>
<td> 1.7 </td>
<td> GPLv2 </td>
<td> * </td>
<td> en, uk, ru
</td>
<td> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Roman Savochenko</a> </td>
<td> -2 ms (disabled)
</td></tr></table>
<p>The document, shown in Figure 1.2.2, is provided for generating a report of the violations. The document is the dynamic type, so you can specify the data time and depth. The document commonly uses and represents the messages structure "<a href="Program_manual.html#ArchMess" title="Special:MyLanguage/Documents/Program manual">Violations</a>". As a data source of this document is <a href="Program_manual.html#ArchMess" title="Special:MyLanguage/Documents/Program manual">the message archive</a>.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:902px;"><a class="image" href="http://oscada.org/wiki/File:LibDocuments_docAlarmsRep.png"><img class="thumbimage" height="580" src="files/LibDocuments_docAlarmsRep.png" width="900" /></a>  <div class="thumbcaption">Fig.1.2.2. The "Protocol of violations" document in the runtime mode.</div></div></div></div>
<p><b><u>Using — development</u></b><br />
The document is designed to perform the role of page-template, and should therefore be placed directly in the project's tree. To each document can be set own messages level and category of the processed violations in the attribute "Message category (<b>messCat</b>)", which is the generic one by default "1:al*:*" and can be specified by the data sources. The default document depth in the past is set at 1 day.
</p><p><b><u>Using — runtime</u></b><br />
In the runtime mode, the specified violation messages are displayed. Additionally you can control the display properties of documents, for what there is used <a href="Libs_Main_graphical_elements.html#doc_panel" title="Special:MyLanguage/Libs/Main graphical elements">the document control panel</a>, which can be called clicking the left mouse button in the document area.
</p><p><b><u>Linking and configuring the attributes</u></b><br />
</p>
<table class="wikitable">

<tr>
<th> Identifier </th>
<th> Name </th>
<th> Type </th>
<th> Description
</th></tr>
<tr>
<td> messCat </td>
<td> Message category </td>
<td> String </td>
<td> The requested violation messages level and category, by default "1:al*:*".
</td></tr></table>
<p><br />
</p>
<table class="wikitable">

<tr>
<td> <span id="docUsersSet" title="#docUsersSet"><h4><span class="mw-headline" id="Protocol_of_interruptions_.28docUsersSet.29"><span class="mw-headline-number">1.2.3</span> Protocol of interruptions (<a href="Libs_Documents.html#docUsersSet" title="Special:MyLanguage/Libs/Documents">docUsersSet</a>)</span></h4></span>
</td>
<td> 1.8 </td>
<td> GPLv2 </td>
<td> * </td>
<td> en, uk, ru
</td>
<td> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Roman Savochenko</a>
</td></tr></table>
<p>The document, shown in Figure 1.2.3, is provided for generating a report of the user interruptions. The document is the dynamic type, so you can specify the data time and depth. The document commonly uses and represents the messages structure "<a href="Program_manual.html#ArchMess" title="Special:MyLanguage/Documents/Program manual">User-operator actions</a>". As a data source of this document is <a href="Program_manual.html#ArchMess" title="Special:MyLanguage/Documents/Program manual">the message archive</a>.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:902px;"><a class="image" href="http://oscada.org/wiki/File:LibDocuments_docUsersSet.png"><img class="thumbimage" height="580" src="files/LibDocuments_docUsersSet.png" width="900" /></a>  <div class="thumbcaption">Fig.1.2.3. The "Protocol of interruptions" document in the runtime mode.</div></div></div></div>
<p><b><u>Using — development</u></b><br />
The document is designed to perform the role of page, and should therefore be placed directly in the project's tree. The document does not mean any configurations due to the interruption messages are common. The default document depth in the past is set at 1 day.
</p><p><b><u>Using — runtime</u></b><br />
In the runtime mode, the user interruption messages are displayed. Additionally you can control the display properties of documents, for what there is used <a href="Libs_Main_graphical_elements.html#doc_panel" title="Special:MyLanguage/Libs/Main graphical elements">the document control panel</a>, which can be called clicking the left mouse button in the document area.
</p><p><b><u>Linking and configuring the attributes</u></b><br />
</p>
<table class="wikitable">

<tr>
<th> Identifier </th>
<th> Name </th>
<th> Type </th>
<th> Description
</th></tr>
<tr>
<td> messCat </td>
<td> Message category </td>
<td> String </td>
<td> The requested messages level and category, by default "2:/(^|.*:)OP*/".
</td></tr></table>
<p><br />
</p>
<table class="wikitable">

<tr>
<td> <span id="docMessRep" title="#docMessRep"><h4><span class="mw-headline" id="Protocol_of_messages_.28docMessRep.29"><span class="mw-headline-number">1.2.4</span> Protocol of messages (<a href="Libs_Documents.html#docMessRep" title="Special:MyLanguage/Libs/Documents">docMessRep</a>)</span></h4></span> </td>
<td> 1.5 </td>
<td> GPLv2 </td>
<td> * </td>
<td> en, uk, ru 
</td>
<td> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Roman Savochenko</a>
</td></tr></table>
<p>The document, shown in Figure 1.2.4, is provided for generating a report of <a href="Program_manual.html#ArchMess" title="Special:MyLanguage/Documents/Program manual">different sort messages</a> together, including: "Violations", "User-operator actions" and "System". The document is the dynamic type, so you can specify the data time and depth. The document so commonly uses and represents <a href="Program_manual.html#ArchMess" title="Special:MyLanguage/Documents/Program manual">the messages structures</a>: "Violations", "User-operator actions" and "System". As a data source of this document is <a href="Program_manual.html#ArchMess" title="Special:MyLanguage/Documents/Program manual">the message archive</a>.
</p><p>The document also provides a simple filtering for selected criteria: "Disabled", "Date and time (dttm)", "Level (lev)", "Parameter (prm)", "Description (dscr)",
"Value (alrm)".
</p>
<ul><li> <b>Sponsored by:</b> Ustijancev Michael</li></ul>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:902px;"><a class="image" href="http://oscada.org/wiki/File:LibDocuments_docMessRep.png"><img class="thumbimage" height="580" src="files/LibDocuments_docMessRep.png" width="900" /></a>  <div class="thumbcaption">Fig.1.2.4. The "Protocol of messages" document in the runtime mode.</div></div></div></div>
<p><b><u>Using — development</u></b><br />
The document is designed to perform the role of page-template, and should therefore be placed directly in the project's tree.
</p><p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="files/At.png" width="22" /></a> To each document can be set own level and category of the processed messages in the attribute "Message category (<b>messCat</b>)", which is the generic one by default "1:/^(al|OP|/sub_UI/mod_VCAEngine)/" and can be specified for yourself. Also you can specify the only used archivers by setting the attribute "Archivers list (<b>archLs</b>)". The default document depth in the past is set at 1 day.
</p><p><b><u>Using — runtime</u></b><br />
In the runtime mode, the specified messages are displayed. Additionally you can control the display properties of documents, for what there is used <a href="Libs_Main_graphical_elements.html#doc_panel" title="Special:MyLanguage/Libs/Main graphical elements">the document control panel</a>, which can be called clicking the left mouse button in the document area.
</p><p>Selecting a filtering criteria and entering text required to presence, the user can see only needed messages.
</p><p><b><u>Linking and configuring the attributes</u></b><br />
</p>
<table class="wikitable">

<tr>
<th> Identifier </th>
<th> Name </th>
<th> Type </th>
<th> Description
</th></tr>
<tr>
<td> messCat </td>
<td> Message category </td>
<td> String </td>
<td> The requested messages level and category, by default "1:/^(al|OP|/sub_UI/mod_VCAEngine)/".
</td></tr>
<tr>
<td> archLs </td>
<td> Archivers list, "{ArhMod}.{Arh}[;{ArhModN}.{ArhN}]" </td>
<td> String </td>
<td> List of message archivers from which the messages will be only requested, set empty for common access.
</td></tr></table>
<p><br />
</p>
<table class="wikitable">

<tr>
<td> <span id="docRep2WorkSh" title="#docRep2WorkSh"><h4><span class="mw-headline" id="Report_of_two_working_shifts_.28docRep2WorkSh.29"><span class="mw-headline-number">1.2.5</span> Report of two working shifts (<a href="Libs_Documents.html#docRep2WorkSh" title="Special:MyLanguage/Libs/Documents">docRep2WorkSh</a>)</span></h4></span> </td>
<td> 2.0 </td>
<td> GPLv2 </td>
<td> * </td>
<td> en, uk, ru 
</td>
<td> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Roman Savochenko</a>
</td></tr></table>
<p>The document, shown in Figure 1.2.5, is provided for generating a report of the hour values of up to 10 parameters for two working shift of day with the result sum for flows and related parameters. The document is the dynamic type, so you can specify the data time and depth (fixed). The document commonly uses and represents the representative structure of the DAQ-template "<a href="Libs_Main.html#anUnif" title="Special:MyLanguage/Libs/Main">Analog signal</a>". As a data source of this document is <a href="Program_manual.html#ArchVals" title="Special:MyLanguage/Documents/Program manual">the value archives</a> of the DAQ-parameters.
</p>
<ul><li> <b>Sponsored by:</b> <a class="external text" href="http://diyaorg.dp.ua" rel="nofollow noreferrer noopener" target="_blank">DIYA Ltd</a></li></ul>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:902px;"><a class="image" href="http://oscada.org/wiki/File:LibDocuments_docRep2WorkSh.png"><img class="thumbimage" height="580" src="files/LibDocuments_docRep2WorkSh.png" width="900" /></a>  <div class="thumbcaption">Fig.1.2.5. The "Report of two working shifts" document in the runtime mode.</div></div></div></div>
<p><b><u>Using — development</u></b><br />
The document is designed to perform the role of page-template, and should therefore be placed directly in the project's tree. To each document can be connected up to ten parameters, setting the links. Items, for which there are not set the links, will be hidden at runtime.
</p><p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="files/At.png" width="22" /></a> You must also specify an one-hour archiver in the "Archiver (<b>arch</b>)" attribute that maintains the specified parameters, since this document requires such data. If the start of the first working shift is different from 8 (eighth) hours, then you must specify the required hour in the "Start hour (<b>stH</b>) attribute.
</p><p><b><u>Using — runtime</u></b><br />
In the runtime mode, the items, for which links have been set, are displayed. Additionally you can control the display properties of documents, for what there is used <a href="Libs_Main_graphical_elements.html#doc_panel" title="Special:MyLanguage/Libs/Main graphical elements">the document control panel</a>, which can be called clicking the left mouse button in the document area. Since the document fixes the depth in history at 12 hours (one working shift), the user can only change the document time!
</p><p><b><u>Linking and configuring the attributes</u></b><br />
</p>
<table class="wikitable">

<tr>
<th> Identifier </th>
<th> Name </th>
<th> Type </th>
<th> Configuration </th>
<th> Configuration template </th>
<th> Description
</th></tr>
<tr>
<td colspan="6"> <i>Document widget (doc)</i>
</td></tr>
<tr>
<td> stH </td>
<td> Start hour </td>
<td> Integer </td>
<td> Constant </td>
<td> </td>
<td> Start hour of the working shifts, from 0 to 11 hour, by default 8.
</td></tr>
<tr>
<td> arch </td>
<td> Archiver </td>
<td> String </td>
<td> Constant </td>
<td> </td>
<td> One-hour archiver, by default "FSArch.1h".
</td></tr>
<tr>
<td colspan="6"> <i>Parameter {n} from 1 to 10.</i>
</td></tr>
<tr>
<td> p{n}_sh </td>
<td> Parameter {n}: code </td>
<td> String </td>
<td> Input link </td>
<td> Parameter{n}|NAME </td>
<td> Code of the parameter in the table.
</td></tr>
<tr>
<td> p{n}_nm </td>
<td> Parameter {n}: description </td>
<td> String </td>
<td> Input link </td>
<td> Parameter{n}|DESCR </td>
<td> Description of the parameter in the table.
</td></tr>
<tr>
<td> p{n}_val </td>
<td> Parameter {n}: value </td>
<td> Address </td>
<td> Input link </td>
<td> Parameter{n}|var </td>
<td> Address to the parameter attribute with the value archive.
</td></tr>
<tr>
<td> p{n}_ed </td>
<td> Parameter {n}: dimension </td>
<td> String </td>
<td> Input link </td>
<td> Parameter{n}|ed </td>
<td>
</td></tr>
<tr>
<td> p{n}_prec </td>
<td> Parameter {n}: precision </td>
<td> Integer </td>
<td> Input link </td>
<td> Parameter{n}|prec </td>
<td>
</td></tr>
<tr>
<td> p{n}_flSum </td>
<td> Parameter {n}: sum flag </td>
<td> Boolean </td>
<td> Constant </td>
<td> Parameter{n}|flSum </td>
<td> Sign of calculation the parameter values sum for the working shift.
</td></tr></table>
<p><br />
</p>
<table class="wikitable">

<tr>
<td> <span id="docRepYear" title="#docRepYear"><h4><span class="mw-headline" id="Year_report_of_the_month_values_.28docRepYear.29"><span class="mw-headline-number">1.2.6</span> Year report of the month values (<a href="Libs_Documents.html#docRepYear" title="Special:MyLanguage/Libs/Documents">docRepYear</a>)</span></h4></span>
</td>
<td> 1.3 </td>
<td> GPLv2 </td>
<td> * </td>
<td> en, uk, ru
</td>
<td> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Roman Savochenko</a> </td>
<td> -2 ms (disabled)
</td></tr></table>
<p>The document, shown in Figure 1.2.6, is provided for generating a year report of the month values in view of the trends diagram and the data table. The document is the dynamic type. The document commonly uses and represents the representative structure of the DAQ-template "<a href="Libs_Main.html#anUnif" title="Special:MyLanguage/Libs/Main">Analog signal</a>". As a data source of this document is <a href="Program_manual.html#ArchVals" title="Special:MyLanguage/Documents/Program manual">the value archives</a> of the DAQ-parameters mostly.
</p><p>The document first introduced the manual entry of archival values of a large measurement time interval, which in this case is a month, as an undetermined interval. This feature is of great relevance for counters that for one reason or another cannot be connected to the system directly, with continuous measurement or periodic uploading of archive parts. Determining the parameter to manual input performs by setting the constant <b>isMan</b> of the appropriate parameter, which enables the form elements at the top of the document under the appropriate rights ("root" or in the "ITW" group), and accessing the data for the table and trend strictly at the interval of the document — month, as well as entering them.
</p><p>Manually entered data is stored whether traditionally in an archive of values, with only one value recorded per representative interval, that is, with unreliable values between them; or as a separate entry with a value in the message archive, also introduced for the first time by this document:
</p>
<dl><dd> CATEGORY: defines the source ID <i>SrcID</i> in the form "<b>val{SrcID}</b>", where:
<ul><li> "val*" —  the typical template-sign of a value, that can be directly used in the category filter to determine only the values in messages;</li>
<li> <i>SrcID</i> — source identifier, what directly entered by a constant in the parameter address <b>var</b>.</li></ul></dd>
<dd> TEXT: the parameter <i>Name</i> and <i>Value</i> in the form "<b>{Name}: {Value}</b>".</dd></dl>
<p>The message archiver of <a href="Modules/FSArch.html" title="Special:MyLanguage/Modules/FSArch">the module FSArch</a> must be set for the next attributes to correct work perform together this document: set "Prevent duplicates", "Consider duplicates and prevent, for equal time, category, level" and set "Time size of the archive files" to 3660 days. <a href="Modules/DBArch.html" title="Special:MyLanguage/Modules/DBArch">The module DBArch</a> must work without such kind specific.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:902px;"><a class="image" href="http://oscada.org/wiki/File:LibDocuments_docRepYear.png"><img class="thumbimage" height="580" src="files/LibDocuments_docRepYear.png" width="900" /></a>  <div class="thumbcaption">Fig.1.2.6. The "Year report of the month values" document in the runtime mode.</div></div></div></div>
<p><b><u>Using — development</u></b><br />
The document is designed to perform the role of page-template, and should therefore be placed directly in the project's tree. To each document can be connected up to ten parameters, setting the links. Items, for which there are not set the links, will be hidden at runtime.
</p><p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="files/At.png" width="22" /></a> To each document can be set:
</p>
<ul><li> the "Archiver (<b>arch</b>)" attribute in required value and message archiver in the form <b>{ValArch};{MessArch}</b>, these maintain the specified parameters; you must not use archivers with worse at one hour quality for values;</li>
<li> the "Enable graph (<b>enGraph</b>)" attribute for enable/disable the graph;</li>
<li> the "Title (<b>title</b>)" attribute in the document specific title.</li></ul>
<p><b><u>Using — runtime</u></b><br />
In the runtime mode, the items, for which links have been set, are displayed. The year of the document formation is available for selection on the top of this document, from the current year and for ten years in depth.
</p><p>With the rights ("root" or in the "ITW" group), the user can enter parameter values with the manual entry sign (<b>isMan</b>) using the form elements above, where you can select the month, parameter and value that will be recorded immediately after confirmation and shown in the document.
</p><p><b><u>Linking and configuring the attributes</u></b><br />
</p>
<table class="wikitable">

<tr>
<th> Identifier </th>
<th> Name </th>
<th> Type </th>
<th> Configuration </th>
<th> Configuration template </th>
<th> Description
</th></tr>
<tr>
<td colspan="6"> <i>Document widget (doc)</i>
</td></tr>
<tr>
<td> arch </td>
<td> Archiver, {ValArch};{MessArch} </td>
<td> String </td>
<td> Constant </td>
<td> </td>
<td> Value and message archiver in the form <b>{ValArch};{MessArch}</b>, by default and preferable to use one-hour archiver "FSArch.1h".
</td></tr>
<tr>
<td> title </td>
<td> Title </td>
<td> String </td>
<td> Constant </td>
<td> </td>
<td> Title of the report.
</td></tr>
<tr>
<td> enGraph </td>
<td> Enable graph </td>
<td> Boolean </td>
<td> Constant </td>
<td> </td>
<td> Enabled by default.
</td></tr>
<tr>
<td> depth </td>
<td> Depth to select, years </td>
<td> Integer </td>
<td> Constant </td>
<td> </td>
<td> Years depth allowed to select.
</td></tr>
<tr>
<td> showOrigCntr </td>
<td> Show original counter </td>
<td> Boolean </td>
<td> Constant </td>
<td> </td>
<td> Show the original counter value near to the interval value.
</td></tr>
<tr>
<td colspan="6"> <i>Parameter {n} from 1 to 10.</i>
</td></tr>
<tr>
<td> p{n}name </td>
<td> Parameter {n}: name </td>
<td> String </td>
<td> Input link </td>
<td> Parameter{n}|NAME </td>
<td> Name of the parameter in the table header.
</td></tr>
<tr>
<td> p{n}var </td>
<td> Parameter {n}: variable </td>
<td> Address </td>
<td> Input link </td>
<td> Parameter{n}|var </td>
<td> Address to the parameter attribute with the value archive or the parameter identifier (<b>val:{PrmId}</b>) for manually values writing at storing in the message archive.
</td></tr>
<tr>
<td> p{n}ed </td>
<td> Parameter {n}: dimension </td>
<td> String </td>
<td> Input link </td>
<td> Parameter{n}|ed </td>
<td>
</td></tr>
<tr>
<td> p{n}prec </td>
<td> Parameter {n}: precision </td>
<td> Integer </td>
<td> Input link </td>
<td> Parameter{n}|prec </td>
<td>
</td></tr>
<tr>
<td> p{n}cntr </td>
<td> Parameter {n}: is counter </td>
<td> Boolean </td>
<td> Constant </td>
<td> Parameter{n}|isCntr </td>
<td> Sets for counters for obtain the values as difference.
</td></tr>
<tr>
<td> p{n}max </td>
<td> Parameter {n}: maximum </td>
<td> Address </td>
<td> Input link </td>
<td> Parameter{n}|max </td>
<td> Used for determining the parameter scale on the graph.
</td></tr>
<tr>
<td> p{n}min </td>
<td> Parameter {n}: minimum </td>
<td> Address </td>
<td> Input link </td>
<td> Parameter{n}|min </td>
<td> Used for determining the parameter scale on the graph.
</td></tr>
<tr>
<td> p{n}isMan </td>
<td> Parameter {n}: is manual </td>
<td> Boolean </td>
<td> Constant </td>
<td> Parameter{n}|isMan </td>
<td> Marks this parameter as the manual input one.
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Service_related_functions"><span class="mw-headline-number">2</span> <span id="ServFunc" title="#ServFunc">Service related functions</span></span></h2>
<p>The service functions of the frames of reports and documents are intended to perform the characteristic tasks of obtaining reporting data, for which you need to perform some verification or counting, for example, to check the validity and to summarize. Forming complex data, such as charts embedded in a document, can also be a service function.
</p><p>To address the library functions you can use the static call address <b>DAQ.JavaLikeCalc.lib_doc.{Func}()</b> or dynamic <b>SYS.DAQ.JavaLikeCalc["lib_doc"]["{Func}"].call()</b>, <b>SYS.DAQ.JavaLikeCalc["lib_doc"].{Func}()</b>". Where {Func} — function identifier in the library.
</p><p>For connection the library part to a project of the OpenSCADA station you can obtain the database file as:
</p>
<ul><li> supplied with a ready and proper package of the Linux distribution like to "openscada-libdb-main", "openscada-LibDB.Main";</li>
<li> directly taken for most actual one from <a class="external text" href="http://oscada.org/svn/trunk/OpenSCADA/data/LibsDB/OscadaLibs.sql" rel="nofollow noreferrer noopener" target="_blank">the subversion repository</a> and converted to the DB SQLite file in the way:</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr" style="margin-left: 15px"><pre>wget http://oscada.org/svn/trunk/OpenSCADA/data/LibsDB/OscadaLibs.sql
sqlite3 -init OscadaLibs.sql OscadaLibs.db .exit
</pre></div>
<ul><li> downloaded for <a class="external" href="http://oscada.org/wiki/File:OscadaLibs.db.gz" title="File:OscadaLibs.db.gz">the one attached here</a>.</li></ul>
<p>This obtained file next you can place into the project directory of the station and create the database object for the DB module "SQLite", registering the database file in the configuration.
</p><p><br />
</p>
<table class="wikitable">

<tr>
<td> <span id="getVal" title="#getVal"><h3><span class="mw-headline" id="Getting_value_from_the_value_archive_.28getVal.29"><span class="mw-headline-number">2.1</span> Getting value from the value archive (<a href="Libs_Documents.html#getVal" title="Special:MyLanguage/Libs/Documents">getVal</a>)</span></h3></span> </td>
<td> 1.1 </td>
<td> GPLv2 </td>
<td> * </td>
<td> en, uk, ru 
</td>
<td> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Roman Savochenko</a>
</td></tr></table>
<p>Query the value for the specified time (<i>time</i>:<i>uTime</i>) from the assigned archiver <i>archtor</i> (FSArch.1m) and issuing results with the specified number of digits <i>prec</i> after the dot.
</p><p>The function works with the DAQ-parameter attribute objects to which the archive is attached and the address <i>addr</i> is written to it in full path, like "/DAQ/LogicLev/gen/prm_F3/a_var". For the empty <i>archtor</i>, the request will be made generally to everyone with the archive buffer periodicity!
</p><p>In the process of obtaining a value, the time of this value may be different from the requested one, if the archive is not currently present and returns the closest value, preventing why you may by setting <i>strong</i>. When you need to get the closest valid value in a controlled way, for counters to example, you have the "tryTo" time argument to which to look for the closest valid value. The time in <i>tryTo</i> may be both lesser and bigger than the request time.
</p><p>Initially, the result is presented as a string of real value with a certain number of digits <i>prec</i> after the dot, and with the value "Empty" for not valid values, allowing it to be inserted into the document without further processing. However, at requiring of additional processing and specific formatting, the result can be obtained with an unformatted real value, for <i>prec</i> less than 0.
</p><p><b><u>Parameters</u></b><br />
</p>
<table class="wikitable">

<tr>
<th> Identifier </th>
<th> Parameter </th>
<th> Type </th>
<th> Mode </th>
<th> Hidden </th>
<th> Default
</th></tr>
<tr>
<td> rez </td>
<td> Result </td>
<td> String </td>
<td> Return </td>
<td> false </td>
<td>
</td></tr>
<tr>
<td> addr </td>
<td> Address </td>
<td> String </td>
<td> Input </td>
<td> false </td>
<td>
</td></tr>
<tr>
<td> time </td>
<td> Time, seconds </td>
<td> Integer </td>
<td> Input </td>
<td> false </td>
<td>
</td></tr>
<tr>
<td> uTime </td>
<td> Time, microseconds </td>
<td> Integer </td>
<td> Input </td>
<td> false </td>
<td>
</td></tr>
<tr>
<td> prec </td>
<td> Signs after dot </td>
<td> Integer </td>
<td> Input </td>
<td> false </td>
<td> 3
</td></tr>
<tr>
<td> archtor </td>
<td> Archiver </td>
<td> String </td>
<td> Input </td>
<td> false </td>
<td>
</td></tr>
<tr>
<td> strong </td>
<td> Precisely </td>
<td> Boolean </td>
<td> Input </td>
<td> false </td>
<td> 0
</td></tr>
<tr>
<td> tryTo </td>
<td> Try value up to, microseconds </td>
<td> Integer </td>
<td> Input </td>
<td> false </td>
<td> 0
</td></tr></table>
<p><br />
</p>
<table class="wikitable">

<tr>
<td> <span id="averVal" title="#averVal"><h3><span class="mw-headline" id="Average_value_of_the_value_archive_.28averVal.29"><span class="mw-headline-number">2.2</span> Average value of the value archive (<a href="Libs_Documents.html#averVal" title="Special:MyLanguage/Libs/Documents">averVal</a>)</span></h3></span> </td>
<td> 1.1 </td>
<td> GPLv2 </td>
<td> * </td>
<td> en, uk, ru 
</td>
<td> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Roman Savochenko</a>
</td></tr></table>
<p>Calculate the average value over a specified period of the time [<i>bTime</i>...<i>eTime</i>], for the archiver <i>archtor</i> (FSArch.1m) data and issuing results with the specified number of digits <i>prec</i> after the dot.
</p><p>The function works with the DAQ-parameter attribute objects to which the archive is attached and the address <i>addr</i> is written to it in full path, like "/DAQ/LogicLev/gen/prm_F3/a_var". For the empty <i>archtor</i>, the request will be made generally to everyone with the archive buffer periodicity!
</p><p>In the process of calculation, the data in the archive is checked for validity and the value of the percentage of reliable data <i>actPerc</i> that participated in the result is formed. In general, you should use intermediate archivers — medium quality archivers, so that there is not too much data in a given interval to reduce performance, and that it does not have one value at all.
</p><p>Initially, the result is presented as a string of real value with a certain number of digits <i>prec</i> after the dot, and with the value "Empty" for not valid values, allowing it to be inserted into the document without further processing. However, at requiring of additional processing and specific formatting, the result can be obtained with an unformatted real value, for <i>prec</i> less than 0.
</p><p><b><u>Parameters</u></b><br />
</p>
<table class="wikitable">

<tr>
<th> Identifier </th>
<th> Parameter </th>
<th> Type </th>
<th> Mode </th>
<th> Hidden </th>
<th> Default
</th></tr>
<tr>
<td> rez </td>
<td> Result </td>
<td> String </td>
<td> Return </td>
<td> false </td>
<td>
</td></tr>
<tr>
<td> addr </td>
<td> Address </td>
<td> String </td>
<td> Input </td>
<td> false </td>
<td>
</td></tr>
<tr>
<td> bTime </td>
<td> Begin time, seconds </td>
<td> Integer </td>
<td> Input </td>
<td> false </td>
<td>
</td></tr>
<tr>
<td> eTime </td>
<td> End time, seconds </td>
<td> Integer </td>
<td> Input </td>
<td> false </td>
<td>
</td></tr>
<tr>
<td> prec </td>
<td> Signs after dot </td>
<td> Integer </td>
<td> Input </td>
<td> false </td>
<td> 3
</td></tr>
<tr>
<td> archtor </td>
<td> Archiver </td>
<td> String </td>
<td> Input </td>
<td> false </td>
<td>
</td></tr>
<tr>
<td> actPerc </td>
<td> Percent of the actual values </td>
<td> Real </td>
<td> Output </td>
<td> false </td>
<td>
</td></tr></table>
<p><br />
</p>
<table class="wikitable">

<tr>
<td> <span id="sumVal" title="#sumVal"><h3><span class="mw-headline" id="Sum_values_of_the_value_archive_.28sumVal.29"><span class="mw-headline-number">2.3</span> Sum values of the value archive (<a href="Libs_Documents.html#sumVal" title="Special:MyLanguage/Libs/Documents">sumVal</a>)</span></h3></span> </td>
<td> 1.1 </td>
<td> GPLv2 </td>
<td> * </td>
<td> en, uk, ru 
</td>
<td> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Roman Savochenko</a>
</td></tr></table>
<p>Calculate the summary value over a specified period of the time [<i>bTime</i>...<i>eTime</i>], for the archiver <i>archtor</i> (FSArch.1m) data and issuing results with the specified number of digits <i>prec</i> after the dot.
</p><p>The function works with the DAQ-parameter attribute objects to which the archive is attached and the address <i>addr</i> is written to it in full path, like "/DAQ/LogicLev/gen/prm_F3/a_var". For the empty <i>archtor</i>, the request will be made generally to everyone with the archive buffer periodicity!
</p><p>In the process of calculation, the data in the archive is checked for validity.
</p><p>Initially, the result is presented as a string of real value with a certain number of digits <i>prec</i> after the dot, and with the value "Empty" for not valid values, allowing it to be inserted into the document without further processing. However, at requiring of additional processing and specific formatting, the result can be obtained with an unformatted real value, for <i>prec</i> less than 0.
</p><p><b><u>Parameters</u></b><br />
</p>
<table class="wikitable">

<tr>
<th> Identifier </th>
<th> Parameter </th>
<th> Type </th>
<th> Mode </th>
<th> Hidden </th>
<th> Default
</th></tr>
<tr>
<td> rez </td>
<td> Result </td>
<td> String </td>
<td> Return </td>
<td> false </td>
<td>
</td></tr>
<tr>
<td> addr </td>
<td> Address </td>
<td> String </td>
<td> Input </td>
<td> false </td>
<td>
</td></tr>
<tr>
<td> bTime </td>
<td> Begin time, seconds </td>
<td> Integer </td>
<td> Input </td>
<td> false </td>
<td>
</td></tr>
<tr>
<td> eTime </td>
<td> End time, seconds </td>
<td> Integer </td>
<td> Input </td>
<td> false </td>
<td>
</td></tr>
<tr>
<td> prec </td>
<td> Signs after dot </td>
<td> Integer </td>
<td> Input </td>
<td> false </td>
<td> 3
</td></tr>
<tr>
<td> archtor </td>
<td> Archiver </td>
<td> String </td>
<td> Input </td>
<td> false </td>
<td>
</td></tr></table>
<p><br />
</p>
<table class="wikitable">

<tr>
<td> <span id="diagram" title="#diagram"><h3><span class="mw-headline" id="Diagram_.28diagram.29"><span class="mw-headline-number">2.4</span> Diagram (<a href="Libs_Documents.html#diagram" title="Special:MyLanguage/Libs/Documents">diagram</a>)</span></h3></span>
</td>
<td> 1.4 </td>
<td> GPLv2 </td>
<td> * </td>
<td> en, uk, ru
</td>
<td> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Roman Savochenko</a>
</td></tr></table>
<p>Building trends diagram to SVG, which may be builtin next to the XHTML-document, for specified period of the time [(<i>end</i>-<i>size</i>)...<i>end</i>] and from the sources <i>srcs</i>.
</p>
<ul><li> <b>Total complexity:</b> 1.3 <span title="human-days, 1 HD — 10 hours">HD<sup style="color: blue">[!]</sup></span></li>
<li> <b>Sponsored by, for initial implementation on 1.0 <span title="human-days, 1 HD — 10 hours">HD<sup style="color: blue">[!]</sup></span>:</b> Magomed, <a class="external text" href="https://www.savtech.ru" rel="nofollow noreferrer noopener" target="_blank">SAVTECH</a></li></ul>
<p>The diagram forming code is based on code of the primitive "<a class="external" href="http://oscada.org/wiki/Special:MyLanguage/Sub-projects/VCA#Diagram" title="Special:MyLanguage/Sub-projects/VCA">Diagram</a>" of the visualisers, and which was quite simply migrated from C++ to <a href="Modules/JavaLikeCalc.html" title="Special:MyLanguage/Modules/JavaLikeCalc">the JavaLikeCalc embedded language</a>. Currently, only trends have been moved-implemented!
</p><p>The appearance of the diagram is determined by its dimensions <i>hsz</i>*<i>vsz</i> and the source SVG-template <i>tmpl</i>, a number attributes of the root tag of which has special meaning and corresponding to the primitive "<a class="external" href="http://oscada.org/wiki/Special:MyLanguage/Sub-projects/VCA#Diagram" title="Special:MyLanguage/Sub-projects/VCA">Diagram</a>":
</p>
<ul><li> Scale: Markers: font (sclMarkFont), by default "Arial 10".</li>
<li> Scale: horizontal (sclHor), by default "Markers (2)" and generally provided: "No draw (0)", "Grid (1)", "Markers (2)", "Grid and markers (3)".</li>
<li> Scale: vertical (sclVer), by default "Grid and markers (3)" and generally provided: "No draw (0)", "Grid (1)", "Markers (2)", "Grid and markers (3)", "Grid (log) (5)", "Markers (log) (6)", "Grid and markers (log) (7)".</li>
<li> Scale: color (sclColor), by default "gray".</li>
<li> Scale: Markers: color	(sclMarkColor), by default "gray".</li></ul>
<p>Currently, only value archives can be used as a data source, either directly to them or through the DAQ-parameter attribute with the archive. The number of data sources is not directly limited and is written in separate lines of the argument <i>srcs</i> in the format "<b>{addr}:{min}:{max}:{color}[:{scale}[:{width}]]</b>", where:
</p>
<ul><li> <b>addr</b> — address to:
<ul><li> the value archive ("/Archive/va_CPULoad_load") or the DAQ-parameter attribute ("/DAQ/LogicLev/gen/F3/var");</li>
<li> the direct data in the form "<b>&lt;d s='1' aprox='1' per='1'&gt;{p0}={pV0},{p1}={pV1},...,{pN}={pVN}&lt;/d&gt;</b>", by set the attribute "s" it will allows the period setting in seconds; "aprox" — approximate the transition from one point to another instead of the previous value to all the periodicity points from the packaging;</li></ul></li>
<li> <b>min</b>, <b>max</b> — minimum and maximum of the scale, in the scale absence (<b>min</b> &gt;= <b>max</b>), it will be calculated from the real data;</li>
<li> <b>color</b> — colour of the trend curve;</li>
<li> <b>scale</b> — separate definition of the trend scale, by default "Global (0)" and generally provided: "Global (0)", "Markers (2)", "Grid and markers (3)", "Markers (log) (6)", "Grid and markers (log) (7)".</li>
<li> <b>width</b> — width of the trend curve, by default 2.</li></ul>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:902px;"><a class="image" href="http://oscada.org/wiki/File:LibDocuments_docRepInstVals.png"><img class="thumbimage" height="580" src="files/LibDocuments_docRepInstVals.png" width="900" /></a>  <div class="thumbcaption">Fig.2.4. The function "Diagram" default result in a XHTML-document.</div></div></div></div>
<p><b><u>Parameters</u></b><br />
</p>
<table class="wikitable">

<tr>
<th> Identifier </th>
<th> Parameter </th>
<th> Type </th>
<th> Mode </th>
<th> Hidden </th>
<th> Default
</th></tr>
<tr>
<td> res </td>
<td> Result </td>
<td> Text </td>
<td> Return </td>
<td> false </td>
<td>
</td></tr>
<tr>
<td> end </td>
<td> End time, seconds </td>
<td> Real </td>
<td> Input </td>
<td> false </td>
<td> 0
</td></tr>
<tr>
<td> size </td>
<td> Size, seconds </td>
<td> Real </td>
<td> Input </td>
<td> false </td>
<td> 3600
</td></tr>
<tr>
<td> srcs </td>
<td> Sources </td>
<td> Text </td>
<td> Input </td>
<td> false </td>
<td>
<pre style="white-space: pre-wrap;">
/DAQ/LogicLev/gen/F3/var:0:100:#ae77c3:2
/Archive/va_CPULoad_load:0:0:darkcyan:2
</pre>
</td></tr>
<tr>
<td> hsz </td>
<td> Horizontal size, pixels </td>
<td> Integer </td>
<td> Input </td>
<td> false </td>
<td> 600
</td></tr>
<tr>
<td> vsz </td>
<td> Vertical size, pixels </td>
<td> Integer </td>
<td> Input </td>
<td> false </td>
<td> 400
</td></tr>
<tr>
<td> arch </td>
<td> Archiver </td>
<td> String </td>
<td> Input </td>
<td> false </td>
<td>
</td></tr>
<tr>
<td> tmpl </td>
<td> SVG-template </td>
<td> Text </td>
<td> Input </td>
<td> false </td>
<td>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nt">&lt;svg</span> <span class="na">xmlns=</span><span class="s">"http://www.w3.org/2000/svg"</span> <span class="na">version=</span><span class="s">"1.1"</span> <span class="na">sclMarkFont=</span><span class="s">"Arial 10"</span> <span class="na">sclHor=</span><span class="s">"2"</span> <span class="na">sclVer=</span><span class="s">"3"</span> <span class="na">sclColor=</span><span class="s">"gray"</span> <span class="na">sclMarkColor=</span><span class="s">"gray"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;style</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
	    #scVer rect { stroke: none; }
	    #scVer text { stroke: none; }
	    #scHor rect { stroke: none; }
	    #scHor text { stroke: none; }
	    #drawArea path { fill: none; }
    <span class="nt">&lt;/style&gt;</span>
    <span class="c">&lt;!--Draw grid and markers--&gt;</span>
    <span class="nt">&lt;g</span> <span class="na">id=</span><span class="s">"scVer"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;g</span> <span class="na">id=</span><span class="s">"scHor"</span> <span class="nt">/&gt;</span>
    <span class="c">&lt;!--Curves area --&gt;</span>
    <span class="nt">&lt;g</span> <span class="na">id=</span><span class="s">"drawArea"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/svg&gt;</span>
</pre></div>
</td></tr></table>






</div><table style="border-top: dotted 2px #999999; margin-top: 20pt; color: gray;" width="100%"><tr><td style="text-align: left;" width="40%"><a href="http://oscada.org/wiki/Libs/Documents/en">Libs/Documents/en</a> - <a href="http://oscada.org/en/main/about-the-project/licenses/">GFDL</a></td><td style="text-align: center;">February 2023</td><td style="text-align: right;" width="40%"> 1+r2868</td></tr></table></body>
</html>